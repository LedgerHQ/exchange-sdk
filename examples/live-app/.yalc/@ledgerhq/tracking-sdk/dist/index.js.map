{"version":3,"sources":["../node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/dist/esm/emitter/interface.js","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/dist/esm/plugins/index.js","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/dist/esm/events/interfaces.js","../node_modules/.pnpm/dset@3.1.4/node_modules/dset/dist/index.mjs","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/utils/pick.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/validation/errors.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/validation/helpers.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/validation/assertions.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/events/index.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/callback/index.ts","../node_modules/.pnpm/@segment+analytics-generic-utils@1.2.0/node_modules/@segment/analytics-generic-utils/src/create-deferred/create-deferred.ts","../node_modules/.pnpm/@segment+analytics-generic-utils@1.2.0/node_modules/@segment/analytics-generic-utils/src/create-deferred/index.ts","../node_modules/.pnpm/@segment+analytics-generic-utils@1.2.0/node_modules/@segment/analytics-generic-utils/src/emitter/emitter.ts","../node_modules/.pnpm/@segment+analytics-generic-utils@1.2.0/node_modules/@segment/analytics-generic-utils/src/emitter/index.ts","../node_modules/.pnpm/@segment+analytics-generic-utils@1.2.0/node_modules/@segment/analytics-generic-utils/src/index.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/priority-queue/backoff.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/priority-queue/index.ts","../node_modules/.pnpm/@lukeed+uuid@2.0.1/node_modules/@lukeed/uuid/dist/index.mjs","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/logger/index.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/stats/index.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/context/index.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/utils/group-by.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/utils/is-thenable.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/task/task-group.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/queue/delivery.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/queue/event-queue.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/dist/esm/analytics/index.js","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/analytics/dispatch.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/utils/bind-all.ts","../node_modules/.pnpm/@segment+analytics-core@1.8.2/node_modules/@segment/analytics-core/src/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/environment/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/connection/index.ts","../node_modules/.pnpm/unfetch@4.2.0/node_modules/unfetch/src/index.mjs","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/get-global.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/fetch.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/generated/version.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/version-type.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/constants/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/stats/remote-metrics.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/stats/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/context/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/priority-queue/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/priority-queue/persisted.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/global-analytics-helper.ts","../node_modules/.pnpm/obj-case@0.2.1/node_modules/obj-case/index.js","../node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/lib/address.js","../node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/lib/clone.js","../node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/lib/is-enabled.js","../node_modules/.pnpm/@segment+isodate@1.0.3/node_modules/@segment/isodate/lib/index.js","../node_modules/.pnpm/new-date@1.0.3/node_modules/new-date/lib/milliseconds.js","../node_modules/.pnpm/new-date@1.0.3/node_modules/new-date/lib/seconds.js","../node_modules/.pnpm/new-date@1.0.3/node_modules/new-date/lib/index.js","../node_modules/.pnpm/@segment+isodate-traverse@1.1.1/node_modules/@segment/isodate-traverse/lib/index.js","../node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/lib/facade.js","../node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits_browser.js","../node_modules/.pnpm/inherits@2.0.4/node_modules/inherits/inherits.js","../node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/lib/alias.js","../node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/lib/is-email.js","../node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/lib/group.js","../node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/lib/identify.js","../node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/lib/track.js","../node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/lib/page.js","../node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/lib/screen.js","../node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/lib/delete.js","../node_modules/.pnpm/@segment+facade@3.4.10/node_modules/@segment/facade/lib/index.js","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/to-facade.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/p-while.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/callback/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/auto-track.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/middleware/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/query-string/pickPrefix.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/query-string/gracefulDecodeURIComponent.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/query-string/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/parse-cdn.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/merged-options.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/load-script.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/stats/metric-helpers.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/vendor/tsub/tsub.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/routing-middleware/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/is-plan-event-enabled.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/ajs-destination/loader.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/ajs-destination/utils.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/ajs-destination/index.ts","../node_modules/.pnpm/@segment+analytics.js-video-plugins@0.2.1/node_modules/@segment/analytics.js-video-plugins/dist/index.umd.js","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/legacy-video-plugins/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/schema-filter/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/remote-middleware/index.ts","../src/index.ts","../src/config/environment.ts","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/classic/external.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/index.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/core.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/util.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/errors.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/parse.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/regexes.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/checks.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/doc.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/versions.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/schemas.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/index.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/ar.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/az.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/be.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/bg.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/ca.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/cs.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/da.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/de.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/en.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/eo.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/es.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/fa.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/fi.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/fr.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/fr-CA.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/he.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/hu.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/id.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/is.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/it.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/ja.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/ka.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/km.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/kh.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/ko.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/lt.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/mk.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/ms.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/nl.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/no.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/ota.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/ps.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/pl.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/pt.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/ru.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/sl.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/sv.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/ta.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/th.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/tr.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/uk.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/ua.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/ur.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/vi.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/zh-CN.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/zh-TW.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/locales/yo.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/registries.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/api.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/to-json-schema.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/core/json-schema.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/classic/iso.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/classic/errors.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/classic/parse.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/classic/schemas.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/classic/compat.js","../node_modules/.pnpm/zod@4.1.12/node_modules/zod/v4/classic/coerce.js","../src/config/events.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/dist/postinstall.mjs","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/constants.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/assert.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/crypt.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/deepCopy.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/global.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/defaults.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/deferred.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/url.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/emulator.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/environment.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/errors.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/json.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/jwt.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/obj.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/promise.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/query.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/sha1.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/subscribe.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/validation.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/utf8.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/exponential_backoff.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/formatters.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/src/compat.ts","../node_modules/.pnpm/@firebase+util@1.13.0/node_modules/@firebase/util/index.node.ts","../node_modules/.pnpm/@firebase+component@0.7.0/node_modules/@firebase/component/src/component.ts","../node_modules/.pnpm/@firebase+component@0.7.0/node_modules/@firebase/component/src/constants.ts","../node_modules/.pnpm/@firebase+component@0.7.0/node_modules/@firebase/component/src/provider.ts","../node_modules/.pnpm/@firebase+component@0.7.0/node_modules/@firebase/component/src/component_container.ts","../node_modules/.pnpm/@firebase+logger@0.5.0/node_modules/@firebase/logger/src/logger.ts","../node_modules/.pnpm/idb@7.1.1/node_modules/idb/build/wrap-idb-value.js","../node_modules/.pnpm/idb@7.1.1/node_modules/idb/build/index.js","../node_modules/.pnpm/@firebase+app@0.14.4/node_modules/@firebase/app/src/platformLoggerService.ts","../node_modules/.pnpm/@firebase+app@0.14.4/node_modules/@firebase/app/src/logger.ts","../node_modules/.pnpm/@firebase+app@0.14.4/node_modules/@firebase/app/src/constants.ts","../node_modules/.pnpm/@firebase+app@0.14.4/node_modules/@firebase/app/src/internal.ts","../node_modules/.pnpm/@firebase+app@0.14.4/node_modules/@firebase/app/src/errors.ts","../node_modules/.pnpm/@firebase+app@0.14.4/node_modules/@firebase/app/src/firebaseApp.ts","../node_modules/.pnpm/@firebase+app@0.14.4/node_modules/@firebase/app/src/firebaseServerApp.ts","../node_modules/.pnpm/@firebase+app@0.14.4/node_modules/@firebase/app/src/api.ts","../node_modules/.pnpm/@firebase+app@0.14.4/node_modules/@firebase/app/src/indexeddb.ts","../node_modules/.pnpm/@firebase+app@0.14.4/node_modules/@firebase/app/src/heartbeatService.ts","../node_modules/.pnpm/@firebase+app@0.14.4/node_modules/@firebase/app/src/registerCoreComponents.ts","../node_modules/.pnpm/@firebase+app@0.14.4/node_modules/@firebase/app/src/index.ts","../node_modules/.pnpm/firebase@12.4.0/node_modules/firebase/app/index.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/util/constants.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/util/errors.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/functions/common.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/functions/create-installation-request.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/util/sleep.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/helpers/buffer-to-base64-url-safe.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/helpers/generate-fid.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/util/get-key.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/helpers/fid-changed.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/helpers/idb-manager.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/helpers/get-installation-entry.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/functions/generate-auth-token-request.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/helpers/refresh-auth-token.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/api/get-id.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/api/get-token.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/functions/delete-installation-request.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/api/delete-installations.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/api/on-id-change.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/api/get-installations.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/helpers/extract-app-config.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/functions/config.ts","../node_modules/.pnpm/@firebase+installations@0.6.19_@firebase+app@0.14.4/node_modules/@firebase/installations/src/index.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/client/remote_config_fetch_client.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/constants.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/errors.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/value.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/api.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/client/caching_client.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/language.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/client/rest_client.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/client/retrying_client.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/remote_config.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/storage/storage.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/storage/storage_cache.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/client/eventEmitter.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/client/visibility_monitor.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/client/realtime_handler.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/register.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/api2.ts","../node_modules/.pnpm/@firebase+remote-config@0.7.0_@firebase+app@0.14.4/node_modules/@firebase/remote-config/src/index.ts","../src/config/remote.ts","../src/services/BackendTracking.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/arguments-resolver/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/analytics/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/events/index.ts","../node_modules/.pnpm/@segment+analytics-page-tools@1.0.0/node_modules/@segment/analytics-page-tools/dist/esm/index.mjs","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/pick.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/page/add-page-context.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/plugin/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/queue/event-queue.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/user/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/bind-all.ts","../node_modules/.pnpm/js-cookie@3.0.1/node_modules/js-cookie/dist/js.cookie.mjs","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/user/tld.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/storage/cookieStorage.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/storage/localStorage.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/storage/memoryStorage.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/storage/types.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/storage/settings.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/storage/universalStorage.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/storage/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/is-thenable.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/buffer/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/segmentio/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/segmentio/batched-dispatcher.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/on-page-change.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/segmentio/ratelimit-error.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/segmentio/shared-dispatcher.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/segmentio/fetch-dispatcher.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/segmentio/normalize.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/segmentio/schedule-flush.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/get-process-env.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/browser/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/env-enrichment/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/lib/client-hints/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/plugins/remote-loader/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/core/inspector/index.ts","../node_modules/.pnpm/@segment+analytics-next@1.81.1/node_modules/@segment/analytics-next/src/index.ts","../src/services/BackendApi.ts","../src/services/FrontendTracking.ts","../src/sdk.ts"],"sourcesContent":["/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","export {};\n//# sourceMappingURL=interface.js.map","export {};\n//# sourceMappingURL=index.js.map","export {};\n//# sourceMappingURL=interfaces.js.map","export function dset(obj, keys, val) {\n\tkeys.split && (keys=keys.split('.'));\n\tvar i=0, l=keys.length, t=obj, x, k;\n\twhile (i < l) {\n\t\tk = ''+keys[i++];\n\t\tif (k === '__proto__' || k === 'constructor' || k === 'prototype') break;\n\t\tt = t[k] = (i === l) ? val : (typeof(x=t[k])===typeof(keys)) ? x : (keys[i]*0 !== 0 || !!~(''+keys[i]).indexOf('.')) ? {} : [];\n\t}\n}\n","export const pickBy = <T extends object, K extends keyof T>(\n  obj: T,\n  fn: (key: K, v: T[K]) => boolean\n) => {\n  return (Object.keys(obj) as K[])\n    .filter((k) => fn(k, obj[k]))\n    .reduce((acc, key) => ((acc[key] = obj[key]), acc), {} as Partial<T>)\n}\n","export class ValidationError extends Error {\n  field: string\n\n  constructor(field: string, message: string) {\n    super(`${field} ${message}`)\n    this.field = field\n  }\n}\n","export function isString(obj: unknown): obj is string {\n  return typeof obj === 'string'\n}\n\nexport function isNumber(obj: unknown): obj is number {\n  return typeof obj === 'number'\n}\n\nexport function isFunction(obj: unknown): obj is Function {\n  return typeof obj === 'function'\n}\n\nexport function exists<T>(val: unknown): val is NonNullable<T> {\n  return val !== undefined && val !== null\n}\n\nexport function isPlainObject(\n  obj: unknown\n): obj is Record<string | symbol | number, unknown> {\n  return (\n    Object.prototype.toString.call(obj).slice(8, -1).toLowerCase() === 'object'\n  )\n}\n","import { CoreSegmentEvent } from '../events'\nimport { ValidationError } from './errors'\nimport { isString, isPlainObject, exists } from './helpers'\n\nconst stringError = 'is not a string'\nconst objError = 'is not an object'\nconst nilError = 'is nil'\n\n// user identity check could hypothetically could be used in the browser event factory, but not 100% sure -- so this is node only for now\nexport function assertUserIdentity(event: CoreSegmentEvent): void {\n  const USER_FIELD_NAME = '.userId/anonymousId/previousId/groupId'\n\n  const getAnyUserId = (event: CoreSegmentEvent) =>\n    event.userId ?? event.anonymousId ?? event.groupId ?? event.previousId\n\n  const id = getAnyUserId(event)\n  if (!exists(id)) {\n    throw new ValidationError(USER_FIELD_NAME, nilError)\n  } else if (!isString(id)) {\n    throw new ValidationError(USER_FIELD_NAME, stringError)\n  }\n}\n\nexport function assertEventExists(\n  event?: CoreSegmentEvent | null\n): asserts event is CoreSegmentEvent {\n  if (!exists(event)) {\n    throw new ValidationError('Event', nilError)\n  }\n  if (typeof event !== 'object') {\n    throw new ValidationError('Event', objError)\n  }\n}\n\nexport function assertEventType(event: CoreSegmentEvent): void {\n  if (!isString(event.type)) {\n    throw new ValidationError('.type', stringError)\n  }\n}\n\nexport function assertTrackEventName(event: CoreSegmentEvent): void {\n  if (!isString(event.event)) {\n    throw new ValidationError('.event', stringError)\n  }\n}\n\nexport function assertTrackEventProperties(event: CoreSegmentEvent): void {\n  if (!isPlainObject(event.properties)) {\n    throw new ValidationError('.properties', objError)\n  }\n}\n\nexport function assertTraits(event: CoreSegmentEvent): void {\n  if (!isPlainObject(event.traits)) {\n    throw new ValidationError('.traits', objError)\n  }\n}\n\nexport function assertMessageId(event: CoreSegmentEvent): void {\n  if (!isString(event.messageId)) {\n    throw new ValidationError('.messageId', stringError)\n  }\n}\n\nexport function validateEvent(event?: CoreSegmentEvent | null) {\n  assertEventExists(event)\n  assertEventType(event)\n  assertMessageId(event)\n\n  if (event.type === 'track') {\n    assertTrackEventName(event)\n    assertTrackEventProperties(event)\n  }\n\n  if (['group', 'identify'].includes(event.type)) {\n    assertTraits(event)\n  }\n}\n","export * from './interfaces'\nimport { dset } from 'dset'\nimport { ID } from '../user'\nimport {\n  IntegrationsOptions,\n  EventProperties,\n  CoreSegmentEvent,\n  CoreOptions,\n  CoreExtraContext,\n  UserTraits,\n  GroupTraits,\n} from './interfaces'\nimport { pickBy } from '../utils/pick'\nimport type { RemoveIndexSignature } from '../utils/ts-helpers'\nimport { validateEvent } from '../validation/assertions'\n\nexport type EventMethodCallHook = ({\n  type,\n  options,\n}: {\n  type: 'track' | 'identify' | 'page' | 'group' | 'alias' | 'screen'\n  options?: CoreOptions\n}) => void\n\nexport type EventHook = (event: CoreSegmentEvent) => void\n\nexport interface EventFactorySettings {\n  /**\n   * Universal `messageId` builder for all events (these must be unique)\n   */\n  createMessageId: () => string\n  /**\n   * Hook to do something with an event right before they are returned from the factory.\n   * This includes event modification or additional validation.\n   */\n  onFinishedEvent?: EventHook\n  /**\n   * Hook whenever an event method is called (track, page, etc.)\n   * Can be used to update Options (or just listen)\n   */\n  onEventMethodCall?: EventMethodCallHook\n}\n\n/**\n * Internal settings object that is used internally by the factory\n */\nclass InternalEventFactorySettings {\n  public createMessageId: EventFactorySettings['createMessageId']\n  public onEventMethodCall: EventMethodCallHook\n  public onFinishedEvent: EventHook\n\n  constructor(public settings: EventFactorySettings) {\n    this.createMessageId = settings.createMessageId\n    this.onEventMethodCall = settings.onEventMethodCall ?? (() => {})\n    this.onFinishedEvent = settings.onFinishedEvent ?? (() => {})\n  }\n}\n\nexport abstract class CoreEventFactory {\n  private settings: InternalEventFactorySettings\n\n  constructor(settings: EventFactorySettings) {\n    this.settings = new InternalEventFactorySettings(settings)\n  }\n\n  track(\n    event: string,\n    properties?: EventProperties,\n    options?: CoreOptions,\n    integrationOptions?: IntegrationsOptions\n  ) {\n    this.settings.onEventMethodCall({ type: 'track', options })\n    return this.normalize({\n      ...this.baseEvent(),\n      event,\n      type: 'track',\n      properties: properties ?? {}, // TODO: why is this not a shallow copy like everywhere else?\n      options: { ...options },\n      integrations: { ...integrationOptions },\n    })\n  }\n\n  page(\n    category: string | null,\n    page: string | null,\n    properties?: EventProperties,\n    options?: CoreOptions,\n    integrationOptions?: IntegrationsOptions\n  ): CoreSegmentEvent {\n    this.settings.onEventMethodCall({ type: 'page', options })\n    const event: CoreSegmentEvent = {\n      type: 'page',\n      properties: { ...properties },\n      options: { ...options },\n      integrations: { ...integrationOptions },\n    }\n\n    if (category !== null) {\n      event.category = category\n      event.properties = event.properties ?? {}\n      event.properties.category = category\n    }\n\n    if (page !== null) {\n      event.name = page\n    }\n\n    return this.normalize({\n      ...this.baseEvent(),\n      ...event,\n    })\n  }\n\n  screen(\n    category: string | null,\n    screen: string | null,\n    properties?: EventProperties,\n    options?: CoreOptions,\n    integrationOptions?: IntegrationsOptions\n  ): CoreSegmentEvent {\n    this.settings.onEventMethodCall({ type: 'screen', options })\n    const event: CoreSegmentEvent = {\n      type: 'screen',\n      properties: { ...properties },\n      options: { ...options },\n      integrations: { ...integrationOptions },\n    }\n\n    if (category !== null) {\n      event.category = category\n    }\n\n    if (screen !== null) {\n      event.name = screen\n    }\n\n    return this.normalize({\n      ...this.baseEvent(),\n      ...event,\n    })\n  }\n\n  identify(\n    userId: ID,\n    traits?: UserTraits,\n    options?: CoreOptions,\n    integrationsOptions?: IntegrationsOptions\n  ): CoreSegmentEvent {\n    this.settings.onEventMethodCall({ type: 'identify', options })\n    return this.normalize({\n      ...this.baseEvent(),\n      type: 'identify',\n      userId,\n      traits: traits ?? {},\n      options: { ...options },\n      integrations: integrationsOptions,\n    })\n  }\n\n  group(\n    groupId: ID,\n    traits?: GroupTraits,\n    options?: CoreOptions,\n    integrationOptions?: IntegrationsOptions\n  ): CoreSegmentEvent {\n    this.settings.onEventMethodCall({ type: 'group', options })\n    return this.normalize({\n      ...this.baseEvent(),\n      type: 'group',\n      traits: traits ?? {},\n      options: { ...options }, // this spreading is intentional\n      integrations: { ...integrationOptions }, //\n      groupId,\n    })\n  }\n\n  alias(\n    to: string,\n    from: string | null, // TODO: can we make this undefined?\n    options?: CoreOptions,\n    integrationOptions?: IntegrationsOptions\n  ): CoreSegmentEvent {\n    this.settings.onEventMethodCall({ type: 'alias', options })\n    const base: CoreSegmentEvent = {\n      userId: to,\n      type: 'alias',\n      options: { ...options },\n      integrations: { ...integrationOptions },\n    }\n\n    if (from !== null) {\n      base.previousId = from\n    }\n\n    if (to === undefined) {\n      return this.normalize({\n        ...base,\n        ...this.baseEvent(),\n      })\n    }\n\n    return this.normalize({\n      ...this.baseEvent(),\n      ...base,\n    })\n  }\n\n  private baseEvent(): Partial<CoreSegmentEvent> {\n    return {\n      integrations: {},\n      options: {},\n    }\n  }\n\n  /**\n   * Builds the context part of an event based on \"foreign\" keys that\n   * are provided in the `Options` parameter for an Event\n   */\n  private context(\n    options: CoreOptions\n  ): [CoreExtraContext, Partial<CoreSegmentEvent>] {\n    type CoreOptionKeys = keyof RemoveIndexSignature<CoreOptions>\n    /**\n     * If the event options are known keys from this list, we move them to the top level of the event.\n     * Any other options are moved to context.\n     */\n    const eventOverrideKeys: CoreOptionKeys[] = [\n      'userId',\n      'anonymousId',\n      'timestamp',\n      'messageId',\n    ]\n\n    delete options['integrations']\n    const providedOptionsKeys = Object.keys(options) as Exclude<\n      CoreOptionKeys,\n      'integrations'\n    >[]\n\n    const context = options.context ?? {}\n    const eventOverrides = {}\n\n    providedOptionsKeys.forEach((key) => {\n      if (key === 'context') {\n        return\n      }\n\n      if (eventOverrideKeys.includes(key)) {\n        dset(eventOverrides, key, options[key])\n      } else {\n        dset(context, key, options[key])\n      }\n    })\n\n    return [context, eventOverrides]\n  }\n\n  private normalize(event: CoreSegmentEvent): CoreSegmentEvent {\n    const integrationBooleans = Object.keys(event.integrations ?? {}).reduce(\n      (integrationNames, name) => {\n        return {\n          ...integrationNames,\n          [name]: Boolean(event.integrations?.[name]),\n        }\n      },\n      {} as Record<string, boolean>\n    )\n\n    // filter out any undefined options\n    event.options = pickBy(event.options || {}, (_, value) => {\n      return value !== undefined\n    })\n\n    // This is pretty trippy, but here's what's going on:\n    // - a) We don't pass initial integration options as part of the event, only if they're true or false\n    // - b) We do accept per integration overrides (like integrations.Amplitude.sessionId) at the event level\n    // Hence the need to convert base integration options to booleans, but maintain per event integration overrides\n    const allIntegrations = {\n      // Base config integrations object as booleans\n      ...integrationBooleans,\n\n      // Per event overrides, for things like amplitude sessionId, for example\n      ...event.options?.integrations,\n    }\n\n    const [context, overrides] = event.options\n      ? this.context(event.options)\n      : []\n\n    const { options, ...rest } = event\n\n    const evt: CoreSegmentEvent = {\n      timestamp: new Date(),\n      ...rest,\n      context,\n      integrations: allIntegrations,\n      ...overrides,\n      messageId: options.messageId || this.settings.createMessageId(),\n    }\n\n    this.settings.onFinishedEvent(evt)\n    validateEvent(evt)\n\n    return evt\n  }\n}\n","import { CoreContext } from '../context'\nimport type { Callback } from '../events'\n\nexport function pTimeout<T>(promise: Promise<T>, timeout: number): Promise<T> {\n  return new Promise((resolve, reject) => {\n    const timeoutId = setTimeout(() => {\n      reject(Error('Promise timed out'))\n    }, timeout)\n\n    promise\n      .then((val) => {\n        clearTimeout(timeoutId)\n        return resolve(val)\n      })\n      .catch(reject)\n  })\n}\n\nexport function sleep(timeoutInMs: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, timeoutInMs))\n}\n\n/**\n * @param ctx\n * @param callback - the function to invoke\n * @param delay - aka \"timeout\". The amount of time in ms to wait before invoking the callback.\n */\nexport function invokeCallback<Ctx extends CoreContext>(\n  ctx: Ctx,\n  callback: Callback<Ctx>,\n  delay: number\n): Promise<Ctx> {\n  const cb = () => {\n    try {\n      return Promise.resolve(callback(ctx))\n    } catch (err) {\n      return Promise.reject(err)\n    }\n  }\n\n  return (\n    sleep(delay)\n      // pTimeout ensures that the callback can't cause the context to hang\n      .then(() => pTimeout(cb(), 1000))\n      .catch((err) => {\n        ctx?.log('warn', 'Callback Error', { error: err })\n        ctx?.stats.increment('callback_error')\n      })\n      .then(() => ctx)\n  )\n}\n","/**\n * Return a promise that can be externally resolved\n */\nexport const createDeferred = <T>() => {\n  let resolve!: (value: T | PromiseLike<T>) => void\n  let reject!: (reason: any) => void\n  let settled = false\n  const promise = new Promise<T>((_resolve, _reject) => {\n    resolve = (...args) => {\n      settled = true\n      _resolve(...args)\n    }\n    reject = (...args) => {\n      settled = true\n      _reject(...args)\n    }\n  })\n\n  return {\n    resolve,\n    reject,\n    promise,\n    isSettled: () => settled,\n  }\n}\n","export * from './create-deferred'\n","type EventName = string\ntype EventFnArgs = any[]\ntype EmitterContract = Record<EventName, EventFnArgs>\n\nexport interface EmitterOptions {\n  /** How many event listeners for a particular event before emitting a warning (0 = disabled)\n   *  @default 10\n   **/\n  maxListeners?: number\n}\n\n/**\n * Event Emitter that takes the expected contract as a generic\n * @example\n * ```ts\n *  type Contract = {\n *    delivery_success: [DeliverySuccessResponse, Metrics],\n *    delivery_failure: [DeliveryError]\n * }\n *  new Emitter<Contract>()\n *  .on('delivery_success', (res, metrics) => ...)\n *  .on('delivery_failure', (err) => ...)\n * ```\n */\nexport class Emitter<Contract extends EmitterContract = EmitterContract> {\n  maxListeners: number\n  constructor(options?: EmitterOptions) {\n    this.maxListeners = options?.maxListeners ?? 10\n  }\n  private callbacks: Partial<Contract> = {}\n  private warned = false\n\n  private warnIfPossibleMemoryLeak<EventName extends keyof Contract>(\n    event: EventName\n  ) {\n    if (this.warned) {\n      return\n    }\n    if (\n      this.maxListeners &&\n      this.callbacks[event]!.length > this.maxListeners\n    ) {\n      console.warn(\n        `Event Emitter: Possible memory leak detected; ${String(\n          event\n        )} has exceeded ${this.maxListeners} listeners.`\n      )\n      this.warned = true\n    }\n  }\n\n  on<EventName extends keyof Contract>(\n    event: EventName,\n    callback: (...args: Contract[EventName]) => void\n  ): this {\n    if (!this.callbacks[event]) {\n      this.callbacks[event] = [callback] as Contract[EventName]\n    } else {\n      this.callbacks[event]!.push(callback)\n      this.warnIfPossibleMemoryLeak(event)\n    }\n    return this\n  }\n\n  once<EventName extends keyof Contract>(\n    event: EventName,\n    callback: (...args: Contract[EventName]) => void\n  ): this {\n    const on = (...args: Contract[EventName]): void => {\n      this.off(event, on)\n      callback.apply(this, args)\n    }\n\n    this.on(event, on)\n    return this\n  }\n\n  off<EventName extends keyof Contract>(\n    event: EventName,\n    callback: (...args: Contract[EventName]) => void\n  ): this {\n    const fns = this.callbacks[event] ?? []\n    const without = fns.filter((fn) => fn !== callback) as Contract[EventName]\n    this.callbacks[event] = without\n    return this\n  }\n\n  emit<EventName extends keyof Contract>(\n    event: EventName,\n    ...args: Contract[EventName]\n  ): this {\n    const callbacks = this.callbacks[event] ?? []\n    callbacks.forEach((callback) => {\n      callback.apply(this, args)\n    })\n    return this\n  }\n}\n","export * from './emitter'\n","export * from './create-deferred'\nexport * from './emitter'\n","type BackoffParams = {\n  /** The number of milliseconds before starting the first retry. Default is 500 */\n  minTimeout?: number\n\n  /** The maximum number of milliseconds between two retries. Default is Infinity */\n  maxTimeout?: number\n\n  /** The exponential factor to use. Default is 2. */\n  factor?: number\n\n  /** The current attempt */\n  attempt: number\n}\n\nexport function backoff(params: BackoffParams): number {\n  const random = Math.random() + 1\n  const {\n    minTimeout = 500,\n    factor = 2,\n    attempt,\n    maxTimeout = Infinity,\n  } = params\n  return Math.min(random * minTimeout * Math.pow(factor, attempt), maxTimeout)\n}\n","import { Emitter } from '@segment/analytics-generic-utils'\nimport { backoff } from './backoff'\n\n/**\n * @internal\n */\nexport const ON_REMOVE_FROM_FUTURE = 'onRemoveFromFuture'\n\ninterface QueueItem {\n  id: string\n}\n\nexport class PriorityQueue<Item extends QueueItem = QueueItem> extends Emitter {\n  protected future: Item[] = []\n  protected queue: Item[]\n  protected seen: Record<string, number>\n\n  public maxAttempts: number\n\n  constructor(\n    maxAttempts: number,\n    queue: Item[],\n    seen?: Record<string, number>\n  ) {\n    super()\n    this.maxAttempts = maxAttempts\n    this.queue = queue\n    this.seen = seen ?? {}\n  }\n\n  push(...items: Item[]): boolean[] {\n    const accepted = items.map((operation) => {\n      const attempts = this.updateAttempts(operation)\n\n      if (attempts > this.maxAttempts || this.includes(operation)) {\n        return false\n      }\n\n      this.queue.push(operation)\n      return true\n    })\n\n    this.queue = this.queue.sort(\n      (a, b) => this.getAttempts(a) - this.getAttempts(b)\n    )\n    return accepted\n  }\n\n  pushWithBackoff(item: Item, minTimeout = 0): boolean {\n    // One immediate retry unless we have a minimum timeout (e.g. for rate limiting)\n    if (minTimeout == 0 && this.getAttempts(item) === 0) {\n      return this.push(item)[0]\n    }\n\n    const attempt = this.updateAttempts(item)\n\n    if (attempt > this.maxAttempts || this.includes(item)) {\n      return false\n    }\n\n    let timeout = backoff({ attempt: attempt - 1 })\n    if (minTimeout > 0 && timeout < minTimeout) {\n      timeout = minTimeout\n    }\n\n    setTimeout(() => {\n      this.queue.push(item)\n      // remove from future list\n      this.future = this.future.filter((f) => f.id !== item.id)\n      // Lets listeners know that a 'future' message is now available in the queue\n      this.emit(ON_REMOVE_FROM_FUTURE)\n    }, timeout)\n\n    this.future.push(item)\n    return true\n  }\n\n  public getAttempts(item: Item): number {\n    return this.seen[item.id] ?? 0\n  }\n\n  public updateAttempts(item: Item): number {\n    this.seen[item.id] = this.getAttempts(item) + 1\n    return this.getAttempts(item)\n  }\n\n  includes(item: Item): boolean {\n    return (\n      this.queue.includes(item) ||\n      this.future.includes(item) ||\n      Boolean(this.queue.find((i) => i.id === item.id)) ||\n      Boolean(this.future.find((i) => i.id === item.id))\n    )\n  }\n\n  pop(): Item | undefined {\n    return this.queue.shift()\n  }\n\n  public get length(): number {\n    return this.queue.length\n  }\n\n  public get todo(): number {\n    return this.queue.length + this.future.length\n  }\n}\n","var IDX=256, HEX=[], BUFFER;\nwhile (IDX--) HEX[IDX] = (IDX + 256).toString(16).substring(1);\n\nexport function v4() {\n\tvar i=0, num, out='';\n\n\tif (!BUFFER || ((IDX + 16) > 256)) {\n\t\tBUFFER = Array(i=256);\n\t\twhile (i--) BUFFER[i] = 256 * Math.random() | 0;\n\t\ti = IDX = 0;\n\t}\n\n\tfor (; i < 16; i++) {\n\t\tnum = BUFFER[IDX + i];\n\t\tif (i==6) out += HEX[num & 15 | 64];\n\t\telse if (i==8) out += HEX[num & 63 | 128];\n\t\telse out += HEX[num];\n\n\t\tif (i & 1 && i > 1 && i < 11) out += '-';\n\t}\n\n\tIDX++;\n\treturn out;\n}\n","export type LogLevel = 'debug' | 'info' | 'warn' | 'error'\nexport type LogMessage = {\n  level: LogLevel\n  message: string\n  time?: Date\n  extras?: Record<string, any>\n}\n\nexport interface GenericLogger {\n  log(level: LogLevel, message: string, extras?: object): void\n  flush(): void\n  logs: LogMessage[]\n}\n\nexport class CoreLogger implements GenericLogger {\n  private _logs: LogMessage[] = []\n\n  log(level: LogLevel, message: string, extras?: object) {\n    const time = new Date()\n    this._logs.push({\n      level,\n      message,\n      time,\n      extras,\n    })\n  }\n\n  public get logs(): LogMessage[] {\n    return this._logs\n  }\n\n  public flush(): void {\n    if (this.logs.length > 1) {\n      const formatted = this._logs.reduce((logs, log) => {\n        const line = {\n          ...log,\n          json: JSON.stringify(log.extras, null, ' '),\n          extras: log.extras,\n        }\n\n        delete line['time']\n\n        let key = log.time?.toISOString() ?? ''\n        if (logs[key]) {\n          key = `${key}-${Math.random()}`\n        }\n\n        return {\n          ...logs,\n          [key]: line,\n        }\n      }, {} as Record<string, LogMessage>)\n\n      // ie doesn't like console.table\n      if (console.table) {\n        console.table(formatted)\n      } else {\n        console.log(formatted)\n      }\n    } else {\n      this.logs.forEach((logEntry) => {\n        const { level, message, extras } = logEntry\n\n        if (level === 'info' || level === 'debug') {\n          console.log(message, extras ?? '')\n        } else {\n          console[level](message, extras ?? '')\n        }\n      })\n    }\n\n    this._logs = []\n  }\n}\n","type CompactMetricType = 'g' | 'c'\n\nexport type CoreMetricType = 'gauge' | 'counter'\n\nexport interface CoreMetric {\n  metric: string\n  value: number\n  type: CoreMetricType\n  tags: string[]\n  timestamp: number // unit milliseconds\n}\n\nexport interface CompactMetric {\n  m: string // metric name\n  v: number // value\n  k: CompactMetricType\n  t: string[] // tags\n  e: number // timestamp in unit milliseconds\n}\n\nconst compactMetricType = (type: CoreMetricType): CompactMetricType => {\n  const enums: Record<CoreMetricType, CompactMetricType> = {\n    gauge: 'g',\n    counter: 'c',\n  }\n  return enums[type]\n}\n\nexport abstract class CoreStats {\n  metrics: CoreMetric[] = []\n  increment(metric: string, by = 1, tags?: string[]): void {\n    this.metrics.push({\n      metric,\n      value: by,\n      tags: tags ?? [],\n      type: 'counter',\n      timestamp: Date.now(),\n    })\n  }\n\n  gauge(metric: string, value: number, tags?: string[]): void {\n    this.metrics.push({\n      metric,\n      value,\n      tags: tags ?? [],\n      type: 'gauge',\n      timestamp: Date.now(),\n    })\n  }\n\n  flush(): void {\n    const formatted = this.metrics.map((m) => ({\n      ...m,\n      tags: m.tags.join(','),\n    }))\n    // ie doesn't like console.table\n    if (console.table) {\n      console.table(formatted)\n    } else {\n      console.log(formatted)\n    }\n    this.metrics = []\n  }\n\n  /**\n   * compact keys for smaller payload\n   */\n  serialize(): CompactMetric[] {\n    return this.metrics.map((m) => {\n      return {\n        m: m.metric,\n        v: m.value,\n        t: m.tags,\n        k: compactMetricType(m.type),\n        e: m.timestamp,\n      }\n    })\n  }\n}\n\nexport class NullStats extends CoreStats {\n  override gauge(..._args: Parameters<CoreStats['gauge']>) {}\n  override increment(..._args: Parameters<CoreStats['increment']>) {}\n  override flush(..._args: Parameters<CoreStats['flush']>) {}\n  override serialize(..._args: Parameters<CoreStats['serialize']>) {\n    return []\n  }\n}\n","import { CoreSegmentEvent } from '../events/interfaces'\n\nimport { v4 as uuid } from '@lukeed/uuid'\nimport { dset } from 'dset'\nimport { CoreLogger, LogLevel, LogMessage } from '../logger'\nimport { CoreStats, CoreMetric, NullStats } from '../stats'\n\nexport interface SerializedContext {\n  id: string\n  event: CoreSegmentEvent\n  logs: LogMessage[]\n  metrics?: CoreMetric[]\n}\n\nexport interface ContextFailedDelivery {\n  reason: unknown\n}\n\nexport interface CancelationOptions {\n  retry?: boolean\n  reason?: string\n  type?: string\n}\n\nexport class ContextCancelation {\n  retry: boolean\n  type: string\n  reason?: string\n\n  constructor(options: CancelationOptions) {\n    this.retry = options.retry ?? true\n    this.type = options.type ?? 'plugin Error'\n    this.reason = options.reason ?? ''\n  }\n}\n\nexport abstract class CoreContext<\n  Event extends CoreSegmentEvent = CoreSegmentEvent\n> {\n  event: Event\n  logger: CoreLogger\n  stats: CoreStats\n  attempts = 0\n\n  private _failedDelivery?: ContextFailedDelivery\n  private _id: string\n\n  constructor(\n    event: Event,\n    id = uuid(),\n    stats: CoreStats = new NullStats(),\n    logger = new CoreLogger()\n  ) {\n    this.event = event\n    this._id = id\n    this.logger = logger\n    this.stats = stats\n  }\n\n  static system(): void {\n    // This should be overridden by the subclass to return an instance of the subclass.\n  }\n\n  isSame(other: CoreContext): boolean {\n    return other.id === this.id\n  }\n\n  cancel(error?: Error | ContextCancelation): never {\n    if (error) {\n      throw error\n    }\n\n    throw new ContextCancelation({ reason: 'Context Cancel' })\n  }\n\n  log(level: LogLevel, message: string, extras?: object): void {\n    this.logger.log(level, message, extras)\n  }\n\n  get id(): string {\n    return this._id\n  }\n\n  updateEvent(path: string, val: unknown): Event {\n    // Don't allow integrations that are set to false to be overwritten with integration settings.\n    if (path.split('.')[0] === 'integrations') {\n      const integrationName = path.split('.')[1]\n\n      if (this.event.integrations?.[integrationName] === false) {\n        return this.event\n      }\n    }\n\n    dset(this.event, path, val)\n    return this.event\n  }\n\n  failedDelivery(): ContextFailedDelivery | undefined {\n    return this._failedDelivery\n  }\n\n  setFailedDelivery(options: ContextFailedDelivery) {\n    this._failedDelivery = options\n  }\n\n  logs(): LogMessage[] {\n    return this.logger.logs\n  }\n\n  flush(): void {\n    this.logger.flush()\n    this.stats.flush()\n  }\n\n  toJSON(): SerializedContext {\n    return {\n      id: this._id,\n      event: this.event,\n      logs: this.logger.logs,\n      metrics: this.stats.metrics,\n    }\n  }\n}\n","type Grouper<T> = (obj: T) => string | number\n\nexport function groupBy<T>(\n  collection: T[],\n  grouper: keyof T | Grouper<T>\n): Record<string, T[]> {\n  const results: Record<string, T[]> = {}\n\n  collection.forEach((item) => {\n    let key: string | number | undefined = undefined\n\n    if (typeof grouper === 'string') {\n      const suggestedKey = item[grouper]\n      key =\n        typeof suggestedKey !== 'string'\n          ? JSON.stringify(suggestedKey)\n          : suggestedKey\n    } else if (grouper instanceof Function) {\n      key = grouper(item)\n    }\n\n    if (key === undefined) {\n      return\n    }\n\n    results[key] = [...(results[key] ?? []), item]\n  })\n\n  return results\n}\n","/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nexport const isThenable = (value: unknown): boolean =>\n  typeof value === 'object' &&\n  value !== null &&\n  'then' in value &&\n  typeof (value as any).then === 'function'\n","import { isThenable } from '../utils/is-thenable'\n\nexport type TaskGroup = {\n  done: () => Promise<void>\n  run: <Operation extends (...args: any[]) => any>(\n    op: Operation\n  ) => ReturnType<Operation>\n}\n\nexport const createTaskGroup = (): TaskGroup => {\n  let taskCompletionPromise: Promise<void>\n  let resolvePromise: () => void\n  let count = 0\n\n  return {\n    done: () => taskCompletionPromise,\n    run: (op) => {\n      const returnValue = op()\n\n      if (isThenable(returnValue)) {\n        if (++count === 1) {\n          taskCompletionPromise = new Promise((res) => (resolvePromise = res))\n        }\n\n        returnValue.finally(() => --count === 0 && resolvePromise())\n      }\n\n      return returnValue\n    },\n  }\n}\n","import { CoreContext, ContextCancelation } from '../context'\nimport { CorePlugin } from '../plugins'\n\nasync function tryAsync<T>(fn: () => T | Promise<T>): Promise<T> {\n  try {\n    return await fn()\n  } catch (err) {\n    return Promise.reject(err)\n  }\n}\n\nexport function attempt<Ctx extends CoreContext = CoreContext>(\n  ctx: Ctx,\n  plugin: CorePlugin<Ctx>\n): Promise<Ctx | ContextCancelation | Error> {\n  ctx.log('debug', 'plugin', { plugin: plugin.name })\n  const start = new Date().getTime()\n\n  const hook = plugin[ctx.event.type]\n  if (hook === undefined) {\n    return Promise.resolve(ctx)\n  }\n\n  const newCtx = tryAsync(() => hook.apply(plugin, [ctx]))\n    .then((ctx) => {\n      const done = new Date().getTime() - start\n      ctx.stats.gauge('plugin_time', done, [`plugin:${plugin.name}`])\n\n      return ctx\n    })\n    .catch((err: Error | ContextCancelation) => {\n      if (\n        err instanceof ContextCancelation &&\n        err.type === 'middleware_cancellation'\n      ) {\n        throw err\n      }\n\n      if (err instanceof ContextCancelation) {\n        ctx.log('warn', err.type, {\n          plugin: plugin.name,\n          error: err,\n        })\n\n        return err\n      }\n\n      ctx.log('error', 'plugin Error', {\n        plugin: plugin.name,\n        error: err,\n      })\n      ctx.stats.increment('plugin_error', 1, [`plugin:${plugin.name}`])\n\n      return err\n    })\n\n  return newCtx\n}\n\nexport function ensure<Ctx extends CoreContext = CoreContext>(\n  ctx: Ctx,\n  plugin: CorePlugin<Ctx>\n): Promise<Ctx | undefined> {\n  return attempt(ctx, plugin).then((newContext) => {\n    if (newContext instanceof CoreContext) {\n      return newContext\n    }\n\n    ctx.log('debug', 'Context canceled')\n    ctx.stats.increment('context_canceled')\n    ctx.cancel(newContext)\n  })\n}\n","import { CoreAnalytics } from '../analytics'\nimport { groupBy } from '../utils/group-by'\nimport { ON_REMOVE_FROM_FUTURE, PriorityQueue } from '../priority-queue'\n\nimport { CoreContext, ContextCancelation } from '../context'\nimport { Emitter } from '@segment/analytics-generic-utils'\nimport { IntegrationsOptions } from '../events/interfaces'\nimport { CorePlugin } from '../plugins'\nimport { createTaskGroup, TaskGroup } from '../task/task-group'\nimport { attempt, ensure } from './delivery'\n\nexport type EventQueueEmitterContract<Ctx extends CoreContext> = {\n  message_delivered: [ctx: Ctx]\n  message_enriched: [ctx: Ctx, plugin: CorePlugin<Ctx>]\n  delivery_success: [ctx: Ctx]\n  delivery_retry: [ctx: Ctx]\n  delivery_failure: [ctx: Ctx, err: Ctx | Error | ContextCancelation]\n  flush: [ctx: Ctx, delivered: boolean]\n  initialization_failure: [CorePlugin<Ctx>]\n}\n\nexport abstract class CoreEventQueue<\n  Ctx extends CoreContext = CoreContext,\n  Plugin extends CorePlugin<Ctx> = CorePlugin<Ctx>\n> extends Emitter<EventQueueEmitterContract<Ctx>> {\n  /**\n   * All event deliveries get suspended until all the tasks in this task group are complete.\n   * For example: a middleware that augments the event object should be loaded safely as a\n   * critical task, this way, event queue will wait for it to be ready before sending events.\n   *\n   * This applies to all the events already in the queue, and the upcoming ones\n   */\n  criticalTasks: TaskGroup = createTaskGroup()\n  queue: PriorityQueue<Ctx>\n  plugins: Plugin[] = []\n  failedInitializations: string[] = []\n  private flushing = false\n\n  constructor(priorityQueue: PriorityQueue<Ctx>) {\n    super()\n\n    this.queue = priorityQueue\n    this.queue.on(ON_REMOVE_FROM_FUTURE, () => {\n      this.scheduleFlush(0)\n    })\n  }\n\n  async register(\n    ctx: Ctx,\n    plugin: Plugin,\n    instance: CoreAnalytics\n  ): Promise<void> {\n    this.plugins.push(plugin)\n\n    const handleLoadError = (err: any) => {\n      this.failedInitializations.push(plugin.name)\n      this.emit('initialization_failure', plugin)\n      console.warn(plugin.name, err)\n\n      ctx.log('warn', 'Failed to load destination', {\n        plugin: plugin.name,\n        error: err,\n      })\n\n      // Filter out the failed plugin by excluding it from the list\n      this.plugins = this.plugins.filter((p) => p !== plugin)\n    }\n\n    if (plugin.type === 'destination' && plugin.name !== 'Segment.io') {\n      plugin.load(ctx, instance).catch(handleLoadError)\n    } else {\n      // for non-destinations plugins, we do need to wait for them to load\n      // reminder: action destinations can require plugins that are not of type \"destination\".\n      // For example, GA4 loads a type 'before' plugins and addition to a type 'destination' plugin\n      try {\n        await plugin.load(ctx, instance)\n      } catch (err) {\n        handleLoadError(err)\n      }\n    }\n  }\n\n  async deregister(\n    ctx: Ctx,\n    plugin: CorePlugin<Ctx>,\n    instance: CoreAnalytics\n  ): Promise<void> {\n    try {\n      if (plugin.unload) {\n        await Promise.resolve(plugin.unload(ctx, instance))\n      }\n\n      this.plugins = this.plugins.filter((p) => p.name !== plugin.name)\n    } catch (e) {\n      ctx.log('warn', 'Failed to unload destination', {\n        plugin: plugin.name,\n        error: e,\n      })\n    }\n  }\n\n  async dispatch(ctx: Ctx): Promise<Ctx> {\n    ctx.log('debug', 'Dispatching')\n    ctx.stats.increment('message_dispatched')\n\n    this.queue.push(ctx)\n    const willDeliver = this.subscribeToDelivery(ctx)\n    this.scheduleFlush(0)\n    return willDeliver\n  }\n\n  private async subscribeToDelivery(ctx: Ctx): Promise<Ctx> {\n    return new Promise((resolve) => {\n      const onDeliver = (flushed: Ctx, delivered: boolean): void => {\n        if (flushed.isSame(ctx)) {\n          this.off('flush', onDeliver)\n          if (delivered) {\n            resolve(flushed)\n          } else {\n            resolve(flushed)\n          }\n        }\n      }\n\n      this.on('flush', onDeliver)\n    })\n  }\n\n  async dispatchSingle(ctx: Ctx): Promise<Ctx> {\n    ctx.log('debug', 'Dispatching')\n    ctx.stats.increment('message_dispatched')\n\n    this.queue.updateAttempts(ctx)\n    ctx.attempts = 1\n\n    return this.deliver(ctx).catch((err) => {\n      const accepted = this.enqueuRetry(err, ctx)\n      if (!accepted) {\n        ctx.setFailedDelivery({ reason: err })\n        return ctx\n      }\n\n      return this.subscribeToDelivery(ctx)\n    })\n  }\n\n  isEmpty(): boolean {\n    return this.queue.length === 0\n  }\n\n  private scheduleFlush(timeout = 500): void {\n    if (this.flushing) {\n      return\n    }\n\n    this.flushing = true\n\n    setTimeout(() => {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      this.flush().then(() => {\n        setTimeout(() => {\n          this.flushing = false\n\n          if (this.queue.length) {\n            this.scheduleFlush(0)\n          }\n        }, 0)\n      })\n    }, timeout)\n  }\n\n  private async deliver(ctx: Ctx): Promise<Ctx> {\n    await this.criticalTasks.done()\n\n    const start = Date.now()\n    try {\n      ctx = await this.flushOne(ctx)\n      const done = Date.now() - start\n      this.emit('delivery_success', ctx)\n      ctx.stats.gauge('delivered', done)\n      ctx.log('debug', 'Delivered', ctx.event)\n      return ctx\n    } catch (err: any) {\n      const error = err as Ctx | Error | ContextCancelation\n      ctx.log('error', 'Failed to deliver', error)\n      this.emit('delivery_failure', ctx, error)\n      ctx.stats.increment('delivery_failed')\n      throw err\n    }\n  }\n\n  private enqueuRetry(err: Error, ctx: Ctx): boolean {\n    const retriable = !(err instanceof ContextCancelation) || err.retry\n    if (!retriable) {\n      return false\n    }\n\n    return this.queue.pushWithBackoff(ctx)\n  }\n\n  async flush(): Promise<Ctx[]> {\n    if (this.queue.length === 0) {\n      return []\n    }\n\n    let ctx = this.queue.pop()\n    if (!ctx) {\n      return []\n    }\n\n    ctx.attempts = this.queue.getAttempts(ctx)\n\n    try {\n      ctx = await this.deliver(ctx)\n      this.emit('flush', ctx, true)\n    } catch (err: any) {\n      const accepted = this.enqueuRetry(err, ctx)\n\n      if (!accepted) {\n        ctx.setFailedDelivery({ reason: err })\n        this.emit('flush', ctx, false)\n      }\n\n      return []\n    }\n\n    return [ctx]\n  }\n\n  private isReady(): boolean {\n    // return this.plugins.every((p) => p.isLoaded())\n    // should we wait for every plugin to load?\n    return true\n  }\n\n  private availableExtensions(denyList: IntegrationsOptions) {\n    const available = this.plugins.filter((p) => {\n      // Only filter out destination plugins or the Segment.io plugin\n      if (p.type !== 'destination' && p.name !== 'Segment.io') {\n        return true\n      }\n\n      let alternativeNameMatch: boolean | Record<string, unknown> | undefined =\n        undefined\n      p.alternativeNames?.forEach((name) => {\n        if (denyList[name] !== undefined) {\n          alternativeNameMatch = denyList[name]\n        }\n      })\n\n      // Explicit integration option takes precedence, `All: false` does not apply to Segment.io\n      return (\n        denyList[p.name] ??\n        alternativeNameMatch ??\n        (p.name === 'Segment.io' ? true : denyList.All) !== false\n      )\n    })\n\n    const {\n      before = [],\n      enrichment = [],\n      destination = [],\n      after = [],\n    } = groupBy(available, 'type')\n\n    return {\n      before,\n      enrichment,\n      destinations: destination,\n      after,\n    }\n  }\n\n  private async flushOne(ctx: Ctx): Promise<Ctx> {\n    if (!this.isReady()) {\n      throw new Error('Not ready')\n    }\n\n    if (ctx.attempts > 1) {\n      this.emit('delivery_retry', ctx)\n    }\n\n    const { before, enrichment } = this.availableExtensions(\n      ctx.event.integrations ?? {}\n    )\n\n    for (const beforeWare of before) {\n      const temp = await ensure(ctx, beforeWare)\n      if (temp instanceof CoreContext) {\n        ctx = temp\n      }\n\n      this.emit('message_enriched', ctx, beforeWare)\n    }\n\n    for (const enrichmentWare of enrichment) {\n      const temp = await attempt(ctx, enrichmentWare)\n      if (temp instanceof CoreContext) {\n        ctx = temp\n      }\n\n      this.emit('message_enriched', ctx, enrichmentWare)\n    }\n\n    // Enrichment and before plugins can re-arrange the deny list dynamically\n    // so we need to pluck them at the end\n    const { destinations, after } = this.availableExtensions(\n      ctx.event.integrations ?? {}\n    )\n\n    await new Promise((resolve, reject) => {\n      setTimeout(() => {\n        const attempts = destinations.map((destination) =>\n          attempt(ctx, destination)\n        )\n        Promise.all(attempts).then(resolve).catch(reject)\n      }, 0)\n    })\n\n    ctx.stats.increment('message_delivered')\n\n    this.emit('message_delivered', ctx)\n\n    const afterCalls = after.map((after) => attempt(ctx, after))\n    await Promise.all(afterCalls)\n\n    return ctx\n  }\n}\n","export {};\n//# sourceMappingURL=index.js.map","import { CoreContext } from '../context'\nimport { Callback } from '../events/interfaces'\nimport { CoreEventQueue } from '../queue/event-queue'\nimport { invokeCallback } from '../callback'\nimport { Emitter } from '@segment/analytics-generic-utils'\n\nexport type DispatchOptions<Ctx extends CoreContext = CoreContext> = {\n  timeout?: number\n  debug?: boolean\n  callback?: Callback<Ctx>\n}\n\n/* The amount of time in ms to wait before invoking the callback. */\nexport const getDelay = (startTimeInEpochMS: number, timeoutInMS?: number) => {\n  const elapsedTime = Date.now() - startTimeInEpochMS\n  // increasing the timeout increases the delay by almost the same amount -- this is weird legacy behavior.\n  return Math.max((timeoutInMS ?? 300) - elapsedTime, 0)\n}\n/**\n * Push an event into the dispatch queue and invoke any callbacks.\n *\n * @param event - Segment event to enqueue.\n * @param queue - Queue to dispatch against.\n * @param emitter - This is typically an instance of \"Analytics\" -- used for metrics / progress information.\n * @param options\n */\nexport async function dispatch<\n  Ctx extends CoreContext,\n  EQ extends CoreEventQueue<Ctx>\n>(\n  ctx: Ctx,\n  queue: EQ,\n  emitter: Emitter,\n  options?: DispatchOptions<Ctx>\n): Promise<Ctx> {\n  emitter.emit('dispatch_start', ctx)\n\n  const startTime = Date.now()\n  let dispatched: Ctx\n  if (queue.isEmpty()) {\n    dispatched = await queue.dispatchSingle(ctx)\n  } else {\n    dispatched = await queue.dispatch(ctx)\n  }\n\n  if (options?.callback) {\n    dispatched = await invokeCallback(\n      dispatched,\n      options.callback,\n      getDelay(startTime, options.timeout)\n    )\n  }\n  if (options?.debug) {\n    dispatched.flush()\n  }\n\n  return dispatched\n}\n","export function bindAll<\n  ObjType extends { [key: string]: any },\n  KeyType extends keyof ObjType\n>(obj: ObjType): ObjType {\n  const proto = obj.constructor.prototype\n  for (const key of Object.getOwnPropertyNames(proto)) {\n    if (key !== 'constructor') {\n      const desc = Object.getOwnPropertyDescriptor(\n        obj.constructor.prototype,\n        key\n      )\n      if (!!desc && typeof desc.value === 'function') {\n        obj[key as KeyType] = obj[key].bind(obj)\n      }\n    }\n  }\n\n  return obj\n}\n","export * from './emitter/interface'\nexport * from './plugins'\nexport * from './events/interfaces'\nexport * from './events'\nexport * from './callback'\nexport * from './priority-queue'\nexport { backoff } from './priority-queue/backoff'\nexport * from './context'\nexport * from './queue/event-queue'\nexport * from './analytics'\nexport * from './analytics/dispatch'\nexport * from './validation/helpers'\nexport * from './validation/errors'\nexport * from './validation/assertions'\nexport * from './utils/bind-all'\nexport * from './stats'\nexport { CoreLogger } from './logger'\nexport * from './queue/delivery'\n","export function isBrowser(): boolean {\n  return typeof window !== 'undefined'\n}\n\nexport function isServer(): boolean {\n  return !isBrowser()\n}\n","import { isBrowser } from '../environment'\n\nexport function isOnline(): boolean {\n  if (isBrowser()) {\n    return window.navigator.onLine\n  }\n\n  return true\n}\n\nexport function isOffline(): boolean {\n  return !isOnline()\n}\n","export default function(url, options) {\n\toptions = options || {};\n\treturn new Promise( (resolve, reject) => {\n\t\tconst request = new XMLHttpRequest();\n\t\tconst keys = [];\n\t\tconst all = [];\n\t\tconst headers = {};\n\n\t\tconst response = () => ({\n\t\t\tok: (request.status/100|0) == 2,\t\t// 200-299\n\t\t\tstatusText: request.statusText,\n\t\t\tstatus: request.status,\n\t\t\turl: request.responseURL,\n\t\t\ttext: () => Promise.resolve(request.responseText),\n\t\t\tjson: () => Promise.resolve(request.responseText).then(JSON.parse),\n\t\t\tblob: () => Promise.resolve(new Blob([request.response])),\n\t\t\tclone: response,\n\t\t\theaders: {\n\t\t\t\tkeys: () => keys,\n\t\t\t\tentries: () => all,\n\t\t\t\tget: n => headers[n.toLowerCase()],\n\t\t\t\thas: n => n.toLowerCase() in headers\n\t\t\t}\n\t\t});\n\n\t\trequest.open(options.method || 'get', url, true);\n\n\t\trequest.onload = () => {\n\t\t\trequest.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm, (m, key, value) => {\n\t\t\t\tkeys.push(key = key.toLowerCase());\n\t\t\t\tall.push([key, value]);\n\t\t\t\theaders[key] = headers[key] ? `${headers[key]},${value}` : value;\n\t\t\t});\n\t\t\tresolve(response());\n\t\t};\n\n\t\trequest.onerror = reject;\n\n\t\trequest.withCredentials = options.credentials=='include';\n\n\t\tfor (const i in options.headers) {\n\t\t\trequest.setRequestHeader(i, options.headers[i]);\n\t\t}\n\n\t\trequest.send(options.body || null);\n\t});\n}\n","// This an imperfect polyfill for globalThis\nexport const getGlobal = () => {\n  if (typeof globalThis !== 'undefined') {\n    return globalThis\n  }\n  if (typeof self !== 'undefined') {\n    return self\n  }\n  if (typeof window !== 'undefined') {\n    return window\n  }\n  if (typeof global !== 'undefined') {\n    return global\n  }\n  return null\n}\n","import unfetch from 'unfetch'\nimport { getGlobal } from './get-global'\n\n/**\n * Wrapper around native `fetch` containing `unfetch` fallback.\n */\nexport const fetch: typeof global.fetch = (...args) => {\n  const global = getGlobal()\n  return ((global && global.fetch) || unfetch)(...args)\n}\n","// This file is generated.\nexport const version = '1.81.1'\n","// Default value will be updated to 'web' in `bundle-umd.ts` for web build.\nlet _version: 'web' | 'npm' = 'npm'\n\nexport function setVersionType(version: typeof _version) {\n  _version = version\n}\n\nexport function getVersionType(): typeof _version {\n  return _version\n}\n","export const SEGMENT_API_HOST = 'api.segment.io/v1'\n","import { fetch } from '../../lib/fetch'\nimport { version } from '../../generated/version'\nimport { getVersionType } from '../../lib/version-type'\nimport { SEGMENT_API_HOST } from '../constants'\n\nexport interface MetricsOptions {\n  host?: string\n  sampleRate?: number\n  flushTimer?: number\n  maxQueueSize?: number\n  protocol?: 'http' | 'https'\n}\n\n/**\n * Type expected by the segment metrics API endpoint\n */\ntype RemoteMetric = {\n  type: 'Counter'\n  metric: string\n  value: 1\n  tags: {\n    library: string\n    library_version: string\n    [key: string]: string\n  }\n}\n\nconst createRemoteMetric = (\n  metric: string,\n  tags: string[],\n  versionType: 'web' | 'npm'\n): RemoteMetric => {\n  const formattedTags = tags.reduce((acc, t) => {\n    const [k, v] = t.split(':')\n    acc[k] = v\n    return acc\n  }, {} as Record<string, string>)\n\n  return {\n    type: 'Counter',\n    metric,\n    value: 1,\n    tags: {\n      ...formattedTags,\n      library: 'analytics.js',\n      library_version:\n        versionType === 'web' ? `next-${version}` : `npm:next-${version}`,\n    },\n  }\n}\n\nfunction logError(err: unknown): void {\n  console.error('Error sending segment performance metrics', err)\n}\n\nexport class RemoteMetrics {\n  private host: string\n  private flushTimer: number\n  private maxQueueSize: number\n  private protocol: string\n\n  sampleRate: number\n  queue: RemoteMetric[]\n\n  constructor(options?: MetricsOptions) {\n    this.host = options?.host ?? SEGMENT_API_HOST\n    this.sampleRate = options?.sampleRate ?? 1\n    this.flushTimer = options?.flushTimer ?? 30 * 1000 /* 30s */\n    this.maxQueueSize = options?.maxQueueSize ?? 20\n    this.protocol = options?.protocol ?? 'https'\n\n    this.queue = []\n\n    if (this.sampleRate > 0) {\n      let flushing = false\n\n      const run = (): void => {\n        if (flushing) {\n          return\n        }\n\n        flushing = true\n        this.flush().catch(logError)\n\n        flushing = false\n\n        setTimeout(run, this.flushTimer)\n      }\n      run()\n    }\n  }\n\n  increment(metric: string, tags: string[]): void {\n    // All metrics are part of an allow list in Tracking API\n    if (!metric.includes('analytics_js.')) {\n      return\n    }\n\n    // /m doesn't like empty tags\n    if (tags.length === 0) {\n      return\n    }\n\n    if (Math.random() > this.sampleRate) {\n      return\n    }\n\n    if (this.queue.length >= this.maxQueueSize) {\n      return\n    }\n\n    const remoteMetric = createRemoteMetric(metric, tags, getVersionType())\n    this.queue.push(remoteMetric)\n\n    if (metric.includes('error')) {\n      this.flush().catch(logError)\n    }\n  }\n\n  async flush(): Promise<void> {\n    if (this.queue.length <= 0) {\n      return\n    }\n\n    await this.send().catch((error) => {\n      logError(error)\n      this.sampleRate = 0\n    })\n  }\n\n  private async send(): Promise<Response> {\n    const payload = { series: this.queue }\n    this.queue = []\n\n    const headers = { 'Content-Type': 'text/plain' }\n    const url = `${this.protocol}://${this.host}/m`\n\n    return fetch(url, {\n      headers,\n      body: JSON.stringify(payload),\n      method: 'POST',\n    })\n  }\n}\n","import { CoreStats } from '@segment/analytics-core'\nimport { MetricsOptions, RemoteMetrics } from './remote-metrics'\n\nlet remoteMetrics: RemoteMetrics | undefined\n\nexport class Stats extends CoreStats {\n  static initRemoteMetrics(options?: MetricsOptions) {\n    remoteMetrics = new RemoteMetrics(options)\n  }\n\n  override increment(metric: string, by?: number, tags?: string[]): void {\n    super.increment(metric, by, tags)\n    remoteMetrics?.increment(metric, tags ?? [])\n  }\n}\n","import {\n  CoreContext,\n  ContextCancelation,\n  ContextFailedDelivery,\n  SerializedContext,\n  CancelationOptions,\n} from '@segment/analytics-core'\nimport { SegmentEvent } from '../events/interfaces'\nimport { Stats } from '../stats'\n\nexport class Context extends CoreContext<SegmentEvent> {\n  static override system() {\n    return new this({ type: 'track', event: 'system' })\n  }\n  constructor(event: SegmentEvent, id?: string) {\n    super(event, id, new Stats())\n  }\n}\n\nexport { ContextCancelation }\nexport type { ContextFailedDelivery, SerializedContext, CancelationOptions }\n","import { PriorityQueue, ON_REMOVE_FROM_FUTURE } from '@segment/analytics-core'\n\nexport { PriorityQueue, ON_REMOVE_FROM_FUTURE }\n","import { PriorityQueue } from '.'\nimport { Context, SerializedContext } from '../../core/context'\nimport { isBrowser } from '../../core/environment'\n\nlet loc:\n  | Storage\n  | { getItem: () => void; setItem: () => void; removeItem: () => void } = {\n  getItem() {},\n  setItem() {},\n  removeItem() {},\n}\n\ntry {\n  loc = isBrowser() && window.localStorage ? window.localStorage : loc\n} catch (err) {\n  console.warn('Unable to access localStorage', err)\n}\n\nfunction persisted(key: string): Context[] {\n  const items = loc.getItem(key)\n  return (items ? JSON.parse(items) : []).map(\n    (p: SerializedContext) => new Context(p.event, p.id)\n  )\n}\n\nfunction persistItems(key: string, items: Context[]): void {\n  const existing = persisted(key)\n  const all = [...items, ...existing]\n\n  const merged = all.reduce((acc, item) => {\n    return {\n      ...acc,\n      [item.id]: item,\n    }\n  }, {} as Record<string, Context>)\n\n  loc.setItem(key, JSON.stringify(Object.values(merged)))\n}\n\nfunction seen(key: string): Record<string, number> {\n  const stored = loc.getItem(key)\n  return stored ? JSON.parse(stored) : {}\n}\n\nfunction persistSeen(key: string, memory: Record<string, number>): void {\n  const stored = seen(key)\n\n  loc.setItem(\n    key,\n    JSON.stringify({\n      ...stored,\n      ...memory,\n    })\n  )\n}\n\nfunction remove(key: string): void {\n  loc.removeItem(key)\n}\n\nconst now = (): number => new Date().getTime()\n\nfunction mutex(key: string, onUnlock: Function, attempt = 0): void {\n  const lockTimeout = 50\n  const lockKey = `persisted-queue:v1:${key}:lock`\n\n  const expired = (lock: number): boolean => new Date().getTime() > lock\n  const rawLock = loc.getItem(lockKey)\n  const lock = rawLock ? (JSON.parse(rawLock) as number) : null\n\n  const allowed = lock === null || expired(lock)\n  if (allowed) {\n    loc.setItem(lockKey, JSON.stringify(now() + lockTimeout))\n    onUnlock()\n    loc.removeItem(lockKey)\n    return\n  }\n\n  if (!allowed && attempt < 3) {\n    setTimeout(() => {\n      mutex(key, onUnlock, attempt + 1)\n    }, lockTimeout)\n  } else {\n    console.error('Unable to retrieve lock')\n  }\n}\n\nexport class PersistedPriorityQueue extends PriorityQueue<Context> {\n  constructor(maxAttempts: number, key: string) {\n    super(maxAttempts, [])\n\n    const itemsKey = `persisted-queue:v1:${key}:items`\n    const seenKey = `persisted-queue:v1:${key}:seen`\n\n    let saved: Context[] = []\n    let lastSeen: Record<string, number> = {}\n\n    mutex(key, () => {\n      try {\n        saved = persisted(itemsKey)\n        lastSeen = seen(seenKey)\n        remove(itemsKey)\n        remove(seenKey)\n\n        this.queue = [...saved, ...this.queue]\n        this.seen = { ...lastSeen, ...this.seen }\n      } catch (err) {\n        console.error(err)\n      }\n    })\n\n    window.addEventListener('pagehide', () => {\n      // we deliberately want to use the less powerful 'pagehide' API to only persist on events where the analytics instance gets destroyed, and not on tab away.\n      if (this.todo > 0) {\n        const items = [...this.queue, ...this.future]\n        try {\n          mutex(key, () => {\n            persistItems(itemsKey, items)\n            persistSeen(seenKey, this.seen)\n          })\n        } catch (err) {\n          console.error(err)\n        }\n      }\n    })\n  }\n}\n","import { AnalyticsSnippet } from '../browser/standalone-interface'\n\n/**\n * Stores the global window analytics key\n */\nlet _globalAnalyticsKey = 'analytics'\n\n/**\n * Gets the global analytics/buffer\n * @param key name of the window property where the buffer is stored (default: analytics)\n * @returns AnalyticsSnippet\n */\nexport function getGlobalAnalytics(): AnalyticsSnippet | undefined {\n  return (window as any)[_globalAnalyticsKey]\n}\n\n/**\n * Replaces the global window key for the analytics/buffer object\n * @param key key name\n */\nexport function setGlobalAnalyticsKey(key: string) {\n  _globalAnalyticsKey = key\n}\n\n/**\n * Sets the global analytics object\n * @param analytics analytics snippet\n */\nexport function setGlobalAnalytics(analytics: AnalyticsSnippet): void {\n  ;(window as any)[_globalAnalyticsKey] = analytics\n}\n","\nvar identity = function(_){ return _; };\n\n\n/**\n * Module exports, export\n */\n\nmodule.exports = multiple(find);\nmodule.exports.find = module.exports;\n\n\n/**\n * Export the replacement function, return the modified object\n */\n\nmodule.exports.replace = function (obj, key, val, options) {\n  multiple(replace).call(this, obj, key, val, options);\n  return obj;\n};\n\n\n/**\n * Export the delete function, return the modified object\n */\n\nmodule.exports.del = function (obj, key, options) {\n  multiple(del).call(this, obj, key, null, options);\n  return obj;\n};\n\n\n/**\n * Compose applying the function to a nested key\n */\n\nfunction multiple (fn) {\n  return function (obj, path, val, options) {\n    var normalize = options && isFunction(options.normalizer) ? options.normalizer : defaultNormalize;\n    path = normalize(path);\n\n    var key;\n    var finished = false;\n\n    while (!finished) loop();\n\n    function loop() {\n      for (key in obj) {\n        var normalizedKey = normalize(key);\n        if (0 === path.indexOf(normalizedKey)) {\n          var temp = path.substr(normalizedKey.length);\n          if (temp.charAt(0) === '.' || temp.length === 0) {\n            path = temp.substr(1);\n            var child = obj[key];\n\n            // we're at the end and there is nothing.\n            if (null == child) {\n              finished = true;\n              return;\n            }\n\n            // we're at the end and there is something.\n            if (!path.length) {\n              finished = true;\n              return;\n            }\n\n            // step into child\n            obj = child;\n\n            // but we're done here\n            return;\n          }\n        }\n      }\n\n      key = undefined;\n      // if we found no matching properties\n      // on the current object, there's no match.\n      finished = true;\n    }\n\n    if (!key) return;\n    if (null == obj) return obj;\n\n    // the `obj` and `key` is one above the leaf object and key, so\n    // start object: { a: { 'b.c': 10 } }\n    // end object: { 'b.c': 10 }\n    // end key: 'b.c'\n    // this way, you can do `obj[key]` and get `10`.\n    return fn(obj, key, val);\n  };\n}\n\n\n/**\n * Find an object by its key\n *\n * find({ first_name : 'Calvin' }, 'firstName')\n */\n\nfunction find (obj, key) {\n  if (obj.hasOwnProperty(key)) return obj[key];\n}\n\n\n/**\n * Delete a value for a given key\n *\n * del({ a : 'b', x : 'y' }, 'X' }) -> { a : 'b' }\n */\n\nfunction del (obj, key) {\n  if (obj.hasOwnProperty(key)) delete obj[key];\n  return obj;\n}\n\n\n/**\n * Replace an objects existing value with a new one\n *\n * replace({ a : 'b' }, 'a', 'c') -> { a : 'c' }\n */\n\nfunction replace (obj, key, val) {\n  if (obj.hasOwnProperty(key)) obj[key] = val;\n  return obj;\n}\n\n/**\n * Normalize a `dot.separated.path`.\n *\n * A.HELL(!*&#(!)O_WOR   LD.bar => ahelloworldbar\n *\n * @param {String} path\n * @return {String}\n */\n\nfunction defaultNormalize(path) {\n  return path.replace(/[^a-zA-Z0-9\\.]+/g, '').toLowerCase();\n}\n\n/**\n * Check if a value is a function.\n *\n * @param {*} val\n * @return {boolean} Returns `true` if `val` is a function, otherwise `false`.\n */\n\nfunction isFunction(val) {\n  return typeof val === 'function';\n}\n","\"use strict\";\n\nimport get from \"obj-case\";\n\nfunction trait(a, b) {\n  return function () {\n    // @ts-ignore\n    let traits = this.traits();\n    // @ts-ignore\n    let props = this.properties ? this.properties() : {};\n\n    return (\n      get(traits, \"address.\" + a) ||\n      get(traits, a) ||\n      (b ? get(traits, \"address.\" + b) : null) ||\n      (b ? get(traits, b) : null) ||\n      get(props, \"address.\" + a) ||\n      get(props, a) ||\n      (b ? get(props, \"address.\" + b) : null) ||\n      (b ? get(props, b) : null)\n    );\n  };\n}\n\n/**\n * Add address getters to `proto`.\n *\n * @ignore\n * @param {Function} proto\n */\nexport default function (proto) {\n  proto.zip = trait(\"postalCode\", \"zip\");\n  proto.country = trait(\"country\");\n  proto.street = trait(\"street\");\n  proto.state = trait(\"state\");\n  proto.city = trait(\"city\");\n  proto.region = trait(\"region\");\n}\n","export function clone(properties) {\n  if (typeof properties !== 'object') return properties\n\n  if (Object.prototype.toString.call(properties) === '[object Object]') {\n    const temp = {};\n    for (const key in properties) {\n      if (Object.prototype.hasOwnProperty.call(properties, key)) {\n        temp[key] = clone(properties[key]);\n      }\n    }\n    return temp;\n  } else if (Array.isArray(properties)) {\n    return properties.map(clone);\n  } else {\n    // this is dangerous because it means this is not cloned\n    return properties;\n  }\n}\n","\"use strict\";\n\n// A few integrations are disabled by default. They must be explicitly enabled\n// by setting options[Provider] = true.\nlet disabled = {\n  Salesforce: true,\n};\n\n/**\n * Check whether an integration should be enabled by default.\n *\n * @ignore\n * @param {string} integration\n * @return {boolean}\n */\nexport default function (integration) {\n  return !disabled[integration];\n}\n","'use strict';\n\n/**\n * Matcher, slightly modified from:\n *\n * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js\n */\n\nvar matcher = /^(\\d{4})(?:-?(\\d{2})(?:-?(\\d{2}))?)?(?:([ T])(\\d{2}):?(\\d{2})(?::?(\\d{2})(?:[,\\.](\\d{1,}))?)?(?:(Z)|([+\\-])(\\d{2})(?::?(\\d{2}))?)?)?$/;\n\n/**\n * Convert an ISO date string to a date. Fallback to native `Date.parse`.\n *\n * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js\n *\n * @param {String} iso\n * @return {Date}\n */\n\nexports.parse = function(iso) {\n  var numericKeys = [1, 5, 6, 7, 11, 12];\n  var arr = matcher.exec(iso);\n  var offset = 0;\n\n  // fallback to native parsing\n  if (!arr) {\n    return new Date(iso);\n  }\n\n  /* eslint-disable no-cond-assign */\n  // remove undefined values\n  for (var i = 0, val; val = numericKeys[i]; i++) {\n    arr[val] = parseInt(arr[val], 10) || 0;\n  }\n  /* eslint-enable no-cond-assign */\n\n  // allow undefined days and months\n  arr[2] = parseInt(arr[2], 10) || 1;\n  arr[3] = parseInt(arr[3], 10) || 1;\n\n  // month is 0-11\n  arr[2]--;\n\n  // allow abitrary sub-second precision\n  arr[8] = arr[8] ? (arr[8] + '00').substring(0, 3) : 0;\n\n  // apply timezone if one exists\n  if (arr[4] === ' ') {\n    offset = new Date().getTimezoneOffset();\n  } else if (arr[9] !== 'Z' && arr[10]) {\n    offset = arr[11] * 60 + arr[12];\n    if (arr[10] === '+') {\n      offset = 0 - offset;\n    }\n  }\n\n  var millis = Date.UTC(arr[1], arr[2], arr[3], arr[5], arr[6] + offset, arr[7], arr[8]);\n  return new Date(millis);\n};\n\n\n/**\n * Checks whether a `string` is an ISO date string. `strict` mode requires that\n * the date string at least have a year, month and date.\n *\n * @param {String} string\n * @param {Boolean} strict\n * @return {Boolean}\n */\n\nexports.is = function(string, strict) {\n  if (typeof string !== 'string') {\n    return false;\n  }\n  if (strict && (/^\\d{4}-\\d{2}-\\d{2}/).test(string) === false) {\n    return false;\n  }\n  return matcher.test(string);\n};\n","\"use strict\";\n\n/**\n * Matcher.\n */\n\nvar matcher = /\\d{13}/;\n\n/**\n * Check whether a string is a millisecond date string.\n *\n * @param {string} string\n * @return {boolean}\n */\nexports.is = function (string) {\n  return matcher.test(string);\n};\n\n/**\n * Convert a millisecond string to a date.\n *\n * @param {string} millis\n * @return {Date}\n */\nexports.parse = function (millis) {\n  millis = parseInt(millis, 10);\n  return new Date(millis);\n};\n","\"use strict\";\n\n/**\n * Matcher.\n */\n\nvar matcher = /\\d{10}/;\n\n/**\n * Check whether a string is a second date string.\n *\n * @param {string} string\n * @return {Boolean}\n */\nexports.is = function (string) {\n  return matcher.test(string);\n};\n\n/**\n * Convert a second string to a date.\n *\n * @param {string} seconds\n * @return {Date}\n */\nexports.parse = function (seconds) {\n  var millis = parseInt(seconds, 10) * 1000;\n  return new Date(millis);\n};\n","\"use strict\";\n\nvar isodate = require(\"@segment/isodate\");\nvar milliseconds = require(\"./milliseconds\");\nvar seconds = require(\"./seconds\");\n\nvar objProto = Object.prototype;\nvar toStr = objProto.toString;\n\nfunction isDate(value) {\n  return toStr.call(value) === \"[object Date]\";\n}\n\nfunction isNumber(value) {\n  return toStr.call(value) === \"[object Number]\";\n}\n\n/**\n * Returns a new Javascript Date object, allowing a variety of extra input types\n * over the native Date constructor.\n *\n * @param {Date|string|number} val\n */\nmodule.exports = function newDate(val) {\n  if (isDate(val)) return val;\n  if (isNumber(val)) return new Date(toMs(val));\n\n  // date strings\n  if (isodate.is(val)) {\n    return isodate.parse(val);\n  }\n  if (milliseconds.is(val)) {\n    return milliseconds.parse(val);\n  }\n  if (seconds.is(val)) {\n    return seconds.parse(val);\n  }\n\n  // fallback to Date.parse\n  return new Date(val);\n};\n\n/**\n * If the number passed val is seconds from the epoch, turn it into milliseconds.\n * Milliseconds would be greater than 31557600000 (December 31, 1970).\n *\n * @param {number} num\n */\nfunction toMs(num) {\n  if (num < 31557600000) return num * 1000;\n  return num;\n}\n","'use strict';\n\nvar isodate = require('@segment/isodate');\n\n/**\n * Expose `traverse`.\n */\nmodule.exports = traverse;\n\n/**\n * Recursively traverse an object or array, and convert\n * all ISO date strings parse into Date objects.\n *\n * @param {Object} input - object, array, or string to convert\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Object}\n */\nfunction traverse(input, strict) {\n  if (strict === undefined) strict = true;\n  if (input && typeof input === 'object') {\n    return traverseObject(input, strict);\n  } else if (Array.isArray(input)) {\n    return traverseArray(input, strict);\n  } else if (isodate.is(input, strict)) {\n    return isodate.parse(input);\n  }\n  return input;\n}\n\n/**\n * Object traverser helper function.\n *\n * @param {Object} obj - object to traverse\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Object}\n */\nfunction traverseObject(obj, strict) {\n  Object.keys(obj).forEach(function(key) {\n    obj[key] = traverse(obj[key], strict);\n  });\n  return obj;\n}\n\n/**\n * Array traverser helper function\n *\n * @param {Array} arr - array to traverse\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Array}\n */\nfunction traverseArray(arr, strict) {\n  arr.forEach(function(value, index) {\n    arr[index] = traverse(value, strict);\n  });\n  return arr;\n}\n","\"use strict\";\n\nimport address from \"./address\";\nimport { clone } from \"./clone\";\nimport isEnabled from \"./is-enabled\";\nimport newDate from \"new-date\";\nimport objCase from \"obj-case\";\nimport traverse from \"@segment/isodate-traverse\";\n\n/**\n * A *Facade* is an object meant for creating convience wrappers around\n * objects. When developing integrations, you probably want to look at its\n * subclasses, such as {@link Track} or {@link Identify}, rather than this\n * general-purpose class.\n *\n * This letructor will initialize a new `Facade` with an `obj` of arguments.\n *\n * If the inputted `obj` doesn't have a `timestamp` property, one will be added\n * with the value `new Date()`. Otherwise, the `timestamp` property will be\n * converted to a Date using the `new-date` package.\n *\n * By default, the inputted object will be defensively copied, and all ISO\n * strings present in the string will be converted into Dates.\n *\n * @param {Object} obj - The object to wrap.\n * @param {Object} opts - Options about what kind of Facade to create.\n * @param {boolean} [opts.clone=true] - Whether to make defensive clones. If enabled,\n * the inputted object will be cloned, and any objects derived from this facade\n * will be cloned before being returned.\n * @param {boolean} [opts.traverse=true] - Whether to perform ISODate-Traverse\n * on the inputted object.\n *\n * @see {@link https://github.com/segmentio/new-date|new-date}\n * @see {@link https://github.com/segmentio/isodate-traverse|isodate-traverse}\n */\nexport function Facade (obj, opts) {\n  opts = opts || {};\n  this.raw = clone(obj);\n  if (!(\"clone\" in opts)) opts.clone = true;\n  if (opts.clone) obj = clone(obj);\n  if (!(\"traverse\" in opts)) opts.traverse = true;\n  if (!(\"timestamp\" in obj)) obj.timestamp = new Date();\n  else obj.timestamp = newDate(obj.timestamp);\n  if (opts.traverse) traverse(obj);\n  this.opts = opts;\n  this.obj = obj;\n}\n\nconst f = Facade.prototype;\n\n/**\n * Get a potentially-nested field in this facade. `field` should be a\n * period-separated sequence of properties.\n *\n * If the first field passed in points to a function (e.g. the `field` passed\n * in is `a.b.c` and this facade's `obj.a` is a function), then that function\n * will be called, and then the deeper fields will be fetched (using obj-case)\n * from what that function returns. If the first field isn't a function, then\n * this function works just like obj-case.\n *\n * Because this function uses obj-case, the camel- or snake-case of the input\n * is irrelevant.\n *\n * @example\n * YourClass.prototype.height = function() {\n *   return this.proxy('getDimensions.height') ||\n *     this.proxy('props.size.side_length');\n * }\n * @param {string} field - A sequence of properties, joined by periods (`.`).\n * @return {*} - A property of the inputted object.\n * @see {@link https://github.com/segmentio/obj-case|obj-case}\n */\nf.proxy = function(field) {\n  let fields = field.split(\".\");\n  field = fields.shift();\n\n  // Call a function at the beginning to take advantage of facaded fields\n  let obj = this[field] || this.obj[field];\n  if (!obj) return obj;\n  if (typeof obj === \"function\") obj = obj.call(this) || {};\n  if (fields.length === 0) return this.opts.clone ? transform(obj) : obj;\n\n  obj = objCase(obj, fields.join(\".\"));\n  return this.opts.clone ? transform(obj) : obj;\n};\n\n/**\n * Directly access a specific `field` from the underlying object. Only\n * \"top-level\" fields will work with this function. \"Nested\" fields *will not\n * work* with this function.\n *\n * @param {string} field\n * @return {*}\n */\nf.field = function(field) {\n  let obj = this.obj[field];\n  return this.opts.clone ? transform(obj) : obj;\n};\n\n/**\n * Utility method to always proxy a particular `field`. In other words, it\n * returns a function that will always return `this.proxy(field)`.\n *\n * @example\n * MyClass.prototype.height = Facade.proxy('options.dimensions.height');\n *\n * @param {string} field\n * @return {Function}\n */\nFacade.proxy = function(field) {\n  return function() {\n    return this.proxy(field);\n  };\n};\n\n/**\n * Utility method to always access a `field`. In other words, it returns a\n * function that will always return `this.field(field)`.\n *\n * @param {string} field\n * @return {Function}\n */\nFacade.field = function(field) {\n  return function() {\n    return this.field(field);\n  };\n};\n\n/**\n * Create a helper function for fetching a \"plural\" thing.\n *\n * The generated method will take the inputted `path` and append an \"s\" to it\n * and calls `this.proxy` with this \"pluralized\" path. If that produces an\n * array, that will be returned. Otherwise, a one-element array containing\n * `this.proxy(path)` will be returned.\n *\n * @example\n * MyClass.prototype.birds = Facade.multi('animals.bird');\n *\n * @param {string} path\n * @return {Function}\n */\nFacade.multi = function(path) {\n  return function() {\n    let multi = this.proxy(path + \"s\");\n    if (Array.isArray(multi)) return multi;\n    let one = this.proxy(path);\n    if (one) one = [this.opts.clone ? clone(one) : one];\n    return one || [];\n  };\n};\n\n/**\n * Create a helper function for getting a \"singular\" thing.\n *\n * The generated method will take the inputted path and call\n * `this.proxy(path)`. If a truthy thing is produced, it will be returned.\n * Otherwise, `this.proxy(path + 's')` will be called, and if that produces an\n * array the first element of that array will be returned. Otherwise,\n * `undefined` is returned.\n *\n * @example\n * MyClass.prototype.bird = Facade.one('animals.bird');\n *\n * @param {string} path\n * @return {Function}\n */\nFacade.one = function(path) {\n  return function() {\n    let one = this.proxy(path);\n    if (one) return one;\n    let multi = this.proxy(path + \"s\");\n    if (Array.isArray(multi)) return multi[0];\n  };\n};\n\n/**\n * Gets the underlying object this facade wraps around.\n *\n * If this facade has a property `type`, it will be invoked as a function and\n * will be assigned as the property `type` of the outputted object.\n *\n * @return {Object}\n */\nf.json = function() {\n  let ret = this.opts.clone ? clone(this.obj) : this.obj;\n  if (this.type) ret.type = this.type();\n  return ret;\n};\n\n/**\n * Gets a copy of the unmodified input object this facade wraps around.\n * \n * Unlike the `json` method which does make some subtle modifications \n * to datetime values and the `type` property. This method returns a copy of \n * the unmodified input object\n * \n * @return {Object}\n */\nf.rawEvent = function() {\n  return this.raw;\n};\n\n/**\n * Get the options of a call. If an integration is passed, only the options for\n * that integration are included. If the integration is not enabled, then\n * `undefined` is returned.\n *\n * Options are taken from the `options` property of the underlying object,\n * falling back to the object's `context` or simply `{}`.\n *\n * @param {string} integration - The name of the integration to get settings\n * for. Casing does not matter.\n * @return {Object|undefined}\n */\nf.options = function(integration) {\n  let obj = this.obj.options || this.obj.context || {};\n  let options = this.opts.clone ? clone(obj) : obj;\n  if (!integration) return options;\n  if (!this.enabled(integration)) return;\n  let integrations = this.integrations();\n  let value = integrations[integration] || objCase(integrations, integration);\n  if (typeof value !== \"object\") value = objCase(this.options(), integration);\n  return typeof value === \"object\" ? value : {};\n};\n\n/**\n * An alias for {@link Facade#options}.\n */\nf.context = f.options;\n\n/**\n * Check whether an integration is enabled.\n *\n * Basically, this method checks whether this integration is explicitly\n * enabled. If it isn'texplicitly mentioned, it checks whether it has been\n * enabled at the global level. Some integrations (e.g. Salesforce), cannot\n * enabled by these global event settings.\n *\n * More concretely, the deciding factors here are:\n *\n * 1. If `this.integrations()` has the integration set to `true`, return `true`.\n * 2. If `this.integrations().providers` has the integration set to `true`, return `true`.\n * 3. If integrations are set to default-disabled via global parameters (i.e.\n * `options.providers.all`, `options.all`, or `integrations.all`), then return\n * false.\n * 4. If the integration is one of the special default-deny integrations\n * (currently, only Salesforce), then return false.\n * 5. Else, return true.\n *\n * @param {string} integration\n * @return {boolean}\n */\nf.enabled = function(integration) {\n  let allEnabled = this.proxy(\"options.providers.all\");\n  if (typeof allEnabled !== \"boolean\") allEnabled = this.proxy(\"options.all\");\n  if (typeof allEnabled !== \"boolean\")\n    allEnabled = this.proxy(\"integrations.all\");\n  if (typeof allEnabled !== \"boolean\") allEnabled = true;\n\n  let enabled = allEnabled && isEnabled(integration);\n  let options = this.integrations();\n\n  // If the integration is explicitly enabled or disabled, use that\n  // First, check options.providers for backwards compatibility\n  if (options.providers && options.providers.hasOwnProperty(integration)) {\n    enabled = options.providers[integration];\n  }\n\n  // Next, check for the integration's existence in 'options' to enable it.\n  // If the settings are a boolean, use that, otherwise it should be enabled.\n  if (options.hasOwnProperty(integration)) {\n    let settings = options[integration];\n    if (typeof settings === \"boolean\") {\n      enabled = settings;\n    } else {\n      enabled = true;\n    }\n  }\n\n  return !!enabled;\n};\n\n/**\n * Get all `integration` options.\n *\n * @ignore\n * @param {string} integration\n * @return {Object}\n */\nf.integrations = function() {\n  return (\n    this.obj.integrations || this.proxy(\"options.providers\") || this.options()\n  );\n};\n\n/**\n * Check whether the user is active.\n *\n * @return {boolean}\n */\nf.active = function() {\n  let active = this.proxy(\"options.active\");\n  if (active === null || active === undefined) active = true;\n  return active;\n};\n\n/**\n * Get `sessionId / anonymousId`.\n *\n * @return {*}\n */\nf.anonymousId = function() {\n  return this.field(\"anonymousId\") || this.field(\"sessionId\");\n};\n\n/**\n * An alias for {@link Facade#anonymousId}.\n *\n * @function\n * @return {string}\n */\nf.sessionId = f.anonymousId;\n\n/**\n * Get `groupId` from `context.groupId`.\n *\n * @function\n * @return {string}\n */\nf.groupId = Facade.proxy(\"options.groupId\");\n\n/**\n * Get the call's \"traits\". All event types can pass in traits, though {@link\n * Identify} and {@link Group} override this implementation.\n *\n * Traits are gotten from `options.traits`, augmented with a property `id` with\n * the event's `userId`.\n *\n * The parameter `aliases` is meant to transform keys in `options.traits` into\n * new keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx`\n * in the traits, and move it to `yyy`. If `xxx` is a method of this facade,\n * it'll be called as a function instead of treated as a key into the traits.\n *\n * @example\n * let obj = { options: { traits: { foo: \"bar\" } }, anonymousId: \"xxx\" }\n * let facade = new Facade(obj)\n *\n * facade.traits() // { \"foo\": \"bar\" }\n * facade.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * facade.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\nf.traits = function(aliases) {\n  let ret = this.proxy(\"options.traits\") || {};\n  let id = this.userId();\n  aliases = aliases || {};\n\n  if (id) ret.id = id;\n\n  for (const alias in aliases) {\n    if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n      const value = this[alias] == null\n        ? this.proxy(\"options.traits.\" + alias)\n        : this[alias]();\n      if (value == null) continue;\n      ret[aliases[alias]] = value;\n      delete ret[alias];\n    }\n  }\n\n  return ret;\n};\n\n/**\n * The library and version of the client used to produce the message.\n *\n * If the library name cannot be determined, it is set to `\"unknown\"`. If the\n * version cannot be determined, it is set to `null`.\n *\n * @return {{name: string, version: string}}\n */\nf.library = function() {\n  let library = this.proxy(\"options.library\");\n  if (!library) return { name: \"unknown\", version: null };\n  if (typeof library === \"string\") return { name: library, version: null };\n  return library;\n};\n\n/**\n * Return the device information, falling back to an empty object.\n *\n * Interesting values of `type` are `\"ios\"` and `\"android\"`, but other values\n * are possible if the client is doing something unusual with `context.device`.\n *\n * @return {{type: string}}\n */\nf.device = function() {\n  let device = this.proxy(\"context.device\");\n  if (typeof device !== \"object\" || device === null) {\n    device = {};\n  }\n  let library = this.library().name;\n  if (device.type) return device;\n\n  if (library.indexOf(\"ios\") > -1) device.type = \"ios\";\n  if (library.indexOf(\"android\") > -1) device.type = \"android\";\n  return device;\n};\n\n/**\n * Get the User-Agent from `context.userAgent`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nf.userAgent = Facade.proxy(\"context.userAgent\");\n\n/**\n * Get the timezone from `context.timezone`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nf.timezone = Facade.proxy(\"context.timezone\");\n\n/**\n * Get the timestamp from `context.timestamp`.\n *\n * @function\n * @return string\n */\nf.timestamp = Facade.field(\"timestamp\");\n\n/**\n * Get the channel from `channel`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nf.channel = Facade.field(\"channel\");\n\n/**\n * Get the IP address from `context.ip`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nf.ip = Facade.proxy(\"context.ip\");\n\n/**\n * Get the user ID from `userId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nf.userId = Facade.field(\"userId\");\n\n/**\n * Get the ZIP/Postal code from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name zip\n * @function\n * @memberof f\n * @return {string}\n */\n\n/**\n * Get the country from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name country\n * @function\n * @memberof f\n * @return {string}\n */\n\n/**\n * Get the street from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name street\n * @function\n * @memberof f\n * @return {string}\n */\n\n/**\n * Get the state from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name state\n * @function\n * @memberof f\n * @return {string}\n */\n\n/**\n * Get the city from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name city\n * @function\n * @memberof f\n * @return {string}\n */\n\n/**\n * Get the region from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name region\n * @function\n * @memberof f\n * @return {string}\n */\n\naddress(f);\n\n/**\n * Return the cloned and traversed object\n *\n * @ignore\n * @param {*} obj\n * @return {*}\n */\nfunction transform (obj) {\n  return clone(obj);\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","try {\n  var util = require('util');\n  /* istanbul ignore next */\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  /* istanbul ignore next */\n  module.exports = require('./inherits_browser.js');\n}\n","\"use strict\";\n\nimport inherit from \"inherits\";\nimport { Facade } from \"./facade\";\n\n/**\n * Initialize a new `Alias` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.from] - The previous ID of the user.\n * @param {string} [dictionary.to] - The new ID of the user.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nexport function Alias(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Alias, Facade);\n\n/**\n * Return the type of facade this is. This will always return `\"alias\"`.\n *\n * @return {string}\n */\nAlias.prototype.action = function () {\n  return \"alias\";\n};\n\n/**\n * An alias for {@link Alias#action}.\n *\n * @function\n * @return {string}\n */\nAlias.prototype.type = Alias.prototype.action;\n\n/**\n * Get the user's previous ID from `previousId` or `from`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nAlias.prototype.previousId = function () {\n  return this.field(\"previousId\") || this.field(\"from\");\n};\n\n/**\n * An alias for {@link Alias#previousId}.\n *\n * @function\n * @return {string}\n */\nAlias.prototype.from = Alias.prototype.previousId;\n\n/**\n * Get the user's new ID from `userId` or `to`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nAlias.prototype.userId = function () {\n  return this.field(\"userId\") || this.field(\"to\");\n};\n\n/**\n * An alias for {@link Alias#userId}.\n *\n * @function\n * @return {string}\n */\nAlias.prototype.to = Alias.prototype.userId;\n","const matcher = /.+\\@.+\\..+/;\n\nexport default function isEmail(string) {\n  return matcher.test(string);\n}\n","\"use strict\";\n\nimport inherit from \"inherits\";\nimport isEmail from \"./is-email\";\nimport newDate from \"new-date\";\nimport { Facade } from \"./facade\";\n\n/**\n * Initialize a new `Group` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.userId] - The user to add to the group.\n * @param {string} [dictionary.groupId] - The ID of the group.\n * @param {Object} [dictionary.traits] - The traits of the group.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nexport function Group(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Group, Facade);\n\nconst g = Group.prototype;\n\n/**\n * Return the type of facade this is. This will always return `\"group\"`.\n *\n * @return {string}\n */\ng.action = function () {\n  return \"group\";\n};\n\n/**\n * An alias for {@link Group#action}.\n *\n * @function\n * @return {string}\n */\ng.type = g.action;\n\n/**\n * Get the group ID from `groupId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ng.groupId = Facade.field(\"groupId\");\n\n/**\n * Get the time of creation of the group from `traits.createdAt`,\n * `traits.created`, `properties.createdAt`, or `properties.created`.\n *\n * @return {Date}\n */\ng.created = function () {\n  var created =\n    this.proxy(\"traits.createdAt\") ||\n    this.proxy(\"traits.created\") ||\n    this.proxy(\"properties.createdAt\") ||\n    this.proxy(\"properties.created\");\n\n  if (created) return newDate(created);\n};\n\n/**\n * Get the group's email from `traits.email`, falling back to `groupId` only if\n * it looks like a valid email.\n *\n * @return {string}\n */\ng.email = function () {\n  var email = this.proxy(\"traits.email\");\n  if (email) return email;\n  var groupId = this.groupId();\n  if (isEmail(groupId)) return groupId;\n};\n\n/**\n * Get the group's traits. This is identical to how {@link Facade#traits}\n * works, except it looks at `traits.*` instead of `options.traits.*`.\n *\n * Traits are gotten from `traits`, augmented with a property `id` with\n * the event's `groupId`.\n *\n * The parameter `aliases` is meant to transform keys in `traits` into new\n * keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx` in\n * the traits, and move it to `yyy`. If `xxx` is a method of this facade, it'll\n * be called as a function instead of treated as a key into the traits.\n *\n * @example\n * var obj = { traits: { foo: \"bar\" }, anonymousId: \"xxx\" }\n * var group = new Group(obj)\n *\n * group.traits() // { \"foo\": \"bar\" }\n * group.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * group.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\ng.traits = function (aliases) {\n  var ret = this.properties();\n  var id = this.groupId();\n  aliases = aliases || {};\n\n  if (id) ret.id = id;\n\n  for (const alias in aliases) {\n    if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n      const value = this[alias] == null\n        ? this.proxy(\"traits.\" + alias)\n        : this[alias]();\n      if (value == null) continue;\n      ret[aliases[alias]] = value;\n      delete ret[alias];\n    }\n  }\n\n  return ret;\n};\n\n/**\n * Get the group's name from `traits.name`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\ng.name = Facade.proxy(\"traits.name\");\n\n/**\n * Get the group's industry from `traits.industry`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\ng.industry = Facade.proxy(\"traits.industry\");\n\n/**\n * Get the group's employee count from `traits.employees`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\ng.employees = Facade.proxy(\"traits.employees\");\n\n/**\n * Get the group's properties from `traits` or `properties`, falling back to\n * simply an empty object.\n *\n * @return {Object}\n */\ng.properties = function () {\n  // TODO remove this function\n  return this.field(\"traits\") || this.field(\"properties\") || {};\n};\n","\"use strict\";\n\nimport { Facade } from \"./facade\";\nimport get from \"obj-case\";\nimport inherit from \"inherits\";\nimport isEmail from \"./is-email\";\nimport newDate from \"new-date\";\n\nlet trim = (str) => str.trim();\n\n/**\n * Initialize a new `Identify` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.userId] - The ID of the user.\n * @param {string} [dictionary.anonymousId] - The anonymous ID of the user.\n * @param {string} [dictionary.traits] - The user's traits.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nexport function Identify(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Identify, Facade);\n\nconst i = Identify.prototype;\n\n/**\n * Return the type of facade this is. This will always return `\"identify\"`.\n *\n * @return {string}\n */\ni.action = function () {\n  return \"identify\";\n};\n\n/**\n * An alias for {@link Identify#action}.\n *\n * @function\n * @return {string}\n */\ni.type = i.action;\n\n/**\n * Get the user's traits. This is identical to how {@link Facade#traits} works,\n * except it looks at `traits.*` instead of `options.traits.*`.\n *\n * Traits are gotten from `traits`, augmented with a property `id` with\n * the event's `userId`.\n *\n * The parameter `aliases` is meant to transform keys in `traits` into new\n * keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx` in\n * the traits, and move it to `yyy`. If `xxx` is a method of this facade, it'll\n * be called as a function instead of treated as a key into the traits.\n *\n * @example\n * let obj = { traits: { foo: \"bar\" }, anonymousId: \"xxx\" }\n * let identify = new Identify(obj)\n *\n * identify.traits() // { \"foo\": \"bar\" }\n * identify.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * identify.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\ni.traits = function (aliases) {\n  let ret = this.field(\"traits\") || {};\n  let id = this.userId();\n  aliases = aliases || {};\n\n  if (id) ret.id = id;\n\n  for (let alias in aliases) {\n    let value =\n      this[alias] == null ? this.proxy(\"traits.\" + alias) : this[alias]();\n    if (value == null) continue;\n    ret[aliases[alias]] = value;\n    if (alias !== aliases[alias]) delete ret[alias];\n  }\n\n  return ret;\n};\n\n/**\n * Get the user's email from `traits.email`, falling back to `userId` only if\n * it looks like a valid email.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.email = function () {\n  let email = this.proxy(\"traits.email\");\n  if (email) return email;\n\n  let userId = this.userId();\n  if (isEmail(userId)) return userId;\n};\n\n/**\n * Get the time of creation of the user from `traits.created` or\n * `traits.createdAt`.\n *\n * @return {Date}\n */\ni.created = function () {\n  let created = this.proxy(\"traits.created\") || this.proxy(\"traits.createdAt\");\n  if (created) return newDate(created);\n};\n\n/**\n * Get the time of creation of the user's company from `traits.company.created`\n * or `traits.company.createdAt`.\n *\n * @return {Date}\n */\ni.companyCreated = function () {\n  let created =\n    this.proxy(\"traits.company.created\") ||\n    this.proxy(\"traits.company.createdAt\");\n\n  if (created) {\n    return newDate(created);\n  }\n};\n\n/**\n * Get the user's company name from `traits.company.name`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.companyName = function () {\n  return this.proxy(\"traits.company.name\");\n};\n\n/**\n * Get the user's name `traits.name`, falling back to combining {@link\n * Identify#firstName} and {@link Identify#lastName} if possible.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.name = function () {\n  let name = this.proxy(\"traits.name\");\n  if (typeof name === \"string\") {\n    return trim(name);\n  }\n\n  let firstName = this.firstName();\n  let lastName = this.lastName();\n  if (firstName && lastName) {\n    return trim(firstName + \" \" + lastName);\n  }\n};\n\n/**\n * Get the user's first name from `traits.firstName`, optionally splitting it\n * out of a the full name if that's all that was provided.\n *\n * Splitting the full name works on the assumption that the full name is of the\n * form \"FirstName LastName\"; it will not work for non-Western names.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.firstName = function () {\n  let firstName = this.proxy(\"traits.firstName\");\n  if (typeof firstName === \"string\") {\n    return trim(firstName);\n  }\n\n  let name = this.proxy(\"traits.name\");\n  if (typeof name === \"string\") {\n    return trim(name).split(\" \")[0];\n  }\n};\n\n/**\n * Get the user's last name from `traits.lastName`, optionally splitting it out\n * of a the full name if that's all that was provided.\n *\n * Splitting the full name works on the assumption that the full name is of the\n * form \"FirstName LastName\"; it will not work for non-Western names.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.lastName = function () {\n  let lastName = this.proxy(\"traits.lastName\");\n  if (typeof lastName === \"string\") {\n    return trim(lastName);\n  }\n\n  let name = this.proxy(\"traits.name\");\n  if (typeof name !== \"string\") {\n    return;\n  }\n\n  let space = trim(name).indexOf(\" \");\n  if (space === -1) {\n    return;\n  }\n\n  return trim(name.substr(space + 1));\n};\n\n/**\n * Get the user's \"unique id\" from `userId`, `traits.username`, or\n * `traits.email`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.uid = function () {\n  return this.userId() || this.username() || this.email();\n};\n\n/**\n * Get the user's description from `traits.description` or `traits.background`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.description = function () {\n  return this.proxy(\"traits.description\") || this.proxy(\"traits.background\");\n};\n\n/**\n * Get the user's age from `traits.age`, falling back to computing it from\n * `traits.birthday` and the current time.\n *\n * @return {number}\n */\ni.age = function () {\n  let date = this.birthday();\n  let age = get(this.traits(), \"age\");\n  if (age != null) return age;\n  if (!(date instanceof Date)) return;\n  let now = new Date();\n  return now.getFullYear() - date.getFullYear();\n};\n\n/**\n * Get the URL of the user's avatar from `traits.avatar`, `traits.photoUrl`, or\n * `traits.avatarUrl`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.avatar = function () {\n  let traits = this.traits();\n  return (\n    get(traits, \"avatar\") || get(traits, \"photoUrl\") || get(traits, \"avatarUrl\")\n  );\n};\n\n/**\n * Get the user's job position from `traits.position` or `traits.jobTitle`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.position = function () {\n  let traits = this.traits();\n  return get(traits, \"position\") || get(traits, \"jobTitle\");\n};\n\n/**\n * Get the user's username from `traits.username`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\ni.username = Facade.proxy(\"traits.username\");\n\n/**\n * Get the user's website from `traits.website`, or if there are multiple in\n * `traits.websites`, return the first one.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\ni.website = Facade.one(\"traits.website\");\n\n/**\n * Get the user's websites from `traits.websites`, or if there is only one in\n * `traits.website`, then wrap it in an array.\n *\n * This *should* be an array of strings, but may not be if the client isn't\n * adhering to the spec.\n *\n * @function\n * @return {array}\n */\ni.websites = Facade.multi(\"traits.website\");\n\n/**\n * Get the user's phone number from `traits.phone`, or if there are multiple in\n * `traits.phones`, return the first one.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\ni.phone = Facade.one(\"traits.phone\");\n\n/**\n * Get the user's phone numbers from `traits.phones`, or if there is only one\n * in `traits.phone`, then wrap it in an array.\n *\n * This *should* be an array of strings, but may not be if the client isn't\n * adhering to the spec.\n *\n * @function\n * @return {array}\n */\ni.phones = Facade.multi(\"traits.phone\");\n\n/**\n * Get the user's address from `traits.address`.\n *\n * This *should* be an object, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {object}\n */\ni.address = Facade.proxy(\"traits.address\");\n\n/**\n * Get the user's gender from `traits.gender`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\ni.gender = Facade.proxy(\"traits.gender\");\n\n/**\n * Get the user's birthday from `traits.birthday`.\n *\n * This *should* be a Date if `opts.traverse` was enabled (it is by default)\n * when letructing this Identify. Otherwise, it should be a string. But it\n * may be neither if the client isn't adhering to the spec.\n * spec.\n *\n * @function\n * @return {object}\n */\ni.birthday = Facade.proxy(\"traits.birthday\");\n","\"use strict\";\n\nimport inherit from \"inherits\";\nimport { Facade } from \"./facade\";\nimport { Identify } from \"./identify\";\nimport isEmail from \"./is-email\";\nimport get from \"obj-case\";\n\n/**\n * Initialize a new `Track` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.event] - The name of the event being tracked.\n * @param {string} [dictionary.userId] - The ID of the user being tracked.\n * @param {string} [dictionary.anonymousId] - The anonymous ID of the user.\n * @param {string} [dictionary.properties] - Properties of the track event.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nexport function Track(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Track, Facade);\n\nlet t = Track.prototype;\n\n/**\n * Return the type of facade this is. This will always return `\"track\"`.\n *\n * @return {string}\n */\nt.action = function () {\n  return \"track\";\n};\n\n/**\n * An alias for {@link Track#action}.\n *\n * @function\n * @return {string}\n */\nt.type = t.action;\n\n/**\n * Get the event name from `event`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.event = Facade.field(\"event\");\n\n/**\n * Get the event value, usually the monetary value, from `properties.value`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.value = Facade.proxy(\"properties.value\");\n\n/**\n * Get the event cateogry from `properties.category`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.category = Facade.proxy(\"properties.category\");\n\n/**\n * Get the event ID from `properties.id`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.id = Facade.proxy(\"properties.id\");\n\n/**\n * Get the product ID from `properties.productId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.productId = function () {\n  return (\n    this.proxy(\"properties.product_id\") || this.proxy(\"properties.productId\")\n  );\n};\n\n/**\n * Get the promotion ID from `properties.promotionId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.promotionId = function () {\n  return (\n    this.proxy(\"properties.promotion_id\") ||\n    this.proxy(\"properties.promotionId\")\n  );\n};\n\n/**\n * Get the cart ID from `properties.cartId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.cartId = function () {\n  return this.proxy(\"properties.cart_id\") || this.proxy(\"properties.cartId\");\n};\n\n/**\n * Get the checkout ID from `properties.checkoutId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.checkoutId = function () {\n  return (\n    this.proxy(\"properties.checkout_id\") || this.proxy(\"properties.checkoutId\")\n  );\n};\n\n/**\n * Get the payment ID from `properties.paymentId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.paymentId = function () {\n  return (\n    this.proxy(\"properties.payment_id\") || this.proxy(\"properties.paymentId\")\n  );\n};\n\n/**\n * Get the coupon ID from `properties.couponId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.couponId = function () {\n  return (\n    this.proxy(\"properties.coupon_id\") || this.proxy(\"properties.couponId\")\n  );\n};\n\n/**\n * Get the wishlist ID from `properties.wishlistId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.wishlistId = function () {\n  return (\n    this.proxy(\"properties.wishlist_id\") || this.proxy(\"properties.wishlistId\")\n  );\n};\n\n/**\n * Get the review ID from `properties.reviewId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.reviewId = function () {\n  return (\n    this.proxy(\"properties.review_id\") || this.proxy(\"properties.reviewId\")\n  );\n};\n\n/**\n * Get the order ID from `properties.id` or `properties.orderId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.orderId = function () {\n  // doesn't follow above convention since this fallback order was how it used to be\n  return (\n    this.proxy(\"properties.id\") ||\n    this.proxy(\"properties.order_id\") ||\n    this.proxy(\"properties.orderId\")\n  );\n};\n\n/**\n * Get the SKU from `properties.sku`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.sku = Facade.proxy(\"properties.sku\");\n\n/**\n * Get the amount of tax for this purchase from `properties.tax`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.tax = Facade.proxy(\"properties.tax\");\n\n/**\n * Get the name of this event from `properties.name`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.name = Facade.proxy(\"properties.name\");\n\n/**\n * Get the price of this purchase from `properties.price`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.price = Facade.proxy(\"properties.price\");\n\n/**\n * Get the total for this purchase from `properties.total`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.total = Facade.proxy(\"properties.total\");\n\n/**\n * Whether this is a repeat purchase from `properties.repeat`.\n *\n * This *should* be a boolean, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {boolean}\n */\nt.repeat = Facade.proxy(\"properties.repeat\");\n\n/**\n * Get the coupon for this purchase from `properties.coupon`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.coupon = Facade.proxy(\"properties.coupon\");\n\n/**\n * Get the shipping for this purchase from `properties.shipping`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.shipping = Facade.proxy(\"properties.shipping\");\n\n/**\n * Get the discount for this purchase from `properties.discount`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.discount = Facade.proxy(\"properties.discount\");\n\n/**\n * Get the shipping method for this purchase from `properties.shippingMethod`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.shippingMethod = function () {\n  return (\n    this.proxy(\"properties.shipping_method\") ||\n    this.proxy(\"properties.shippingMethod\")\n  );\n};\n\n/**\n * Get the payment method for this purchase from `properties.paymentMethod`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.paymentMethod = function () {\n  return (\n    this.proxy(\"properties.payment_method\") ||\n    this.proxy(\"properties.paymentMethod\")\n  );\n};\n\n/**\n * Get a description for this event from `properties.description`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.description = Facade.proxy(\"properties.description\");\n\n/**\n * Get a plan, as in the plan the user is on, for this event from\n * `properties.plan`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.plan = Facade.proxy(\"properties.plan\");\n\n/**\n * Get the subtotal for this purchase from `properties.subtotal`.\n *\n * If `properties.subtotal` isn't available, then fall back to computing the\n * total from `properties.total` or `properties.revenue`, and then subtracting\n * tax, shipping, and discounts.\n *\n * If neither subtotal, total, nor revenue are available, then return 0.\n *\n * @return {number}\n */\nt.subtotal = function () {\n  let subtotal = get(this.properties(), \"subtotal\");\n  let total = this.total() || this.revenue();\n\n  if (subtotal) return subtotal;\n  if (!total) return 0;\n\n  if (this.total()) {\n    let n = this.tax();\n    if (n) total -= n;\n    n = this.shipping();\n    if (n) total -= n;\n    n = this.discount();\n    if (n) total += n;\n  }\n\n  return total;\n};\n\n/**\n * Get the products for this event from `properties.products` if it's an\n * array, falling back to an empty array.\n *\n * @return {Array}\n */\nt.products = function () {\n  let props = this.properties();\n  let products = get(props, \"products\");\n  if (Array.isArray(products)) {\n    return products.filter(item => item !== null)\n  }\n  return [];\n};\n\n/**\n * Get the quantity for this event from `properties.quantity`, falling back to\n * a quantity of one.\n *\n * @return {number}\n */\nt.quantity = function () {\n  let props = this.obj.properties || {};\n  return props.quantity || 1;\n};\n\n/**\n * Get the currency for this event from `properties.currency`, falling back to\n * \"USD\".\n *\n * @return {string}\n */\nt.currency = function () {\n  let props = this.obj.properties || {};\n  return props.currency || \"USD\";\n};\n\n/**\n * Get the referrer for this event from `context.referrer.url`,\n * `context.page.referrer`, or `properties.referrer`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.referrer = function () {\n  // TODO re-examine whether this function is necessary\n  return (\n    this.proxy(\"context.referrer.url\") ||\n    this.proxy(\"context.page.referrer\") ||\n    this.proxy(\"properties.referrer\")\n  );\n};\n\n/**\n * Get the query for this event from `options.query`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string|object}\n */\nt.query = Facade.proxy(\"options.query\");\n\n/**\n * Get the page's properties. This is identical to how {@link Facade#traits}\n * works, except it looks at `properties.*` instead of `options.traits.*`.\n *\n * Properties are gotten from `properties`.\n *\n * The parameter `aliases` is meant to transform keys in `properties` into new\n * keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx` in\n * the traits, and move it to `yyy`. If `xxx` is a method of this facade, it'll\n * be called as a function instead of treated as a key into the traits.\n *\n * @example\n * let obj = { properties: { foo: \"bar\" }, anonymousId: \"xxx\" }\n * let track = new Track(obj)\n *\n * track.traits() // { \"foo\": \"bar\" }\n * track.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * track.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\nt.properties = function (aliases) {\n  let ret = this.field(\"properties\") || {};\n  aliases = aliases || {};\n\n  for (const alias in aliases) {\n    if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n      const value = this[alias] == null\n        ? this.proxy(\"properties.\" + alias)\n        : this[alias]();\n      if (value == null) continue;\n      ret[aliases[alias]] = value;\n      delete ret[alias];\n    }\n  }\n\n  return ret;\n};\n\n/**\n * Get the username of the user for this event from `traits.username`,\n * `properties.username`, `userId`, or `anonymousId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string|undefined}\n */\nt.username = function () {\n  return (\n    this.proxy(\"traits.username\") ||\n    this.proxy(\"properties.username\") ||\n    this.userId() ||\n    this.sessionId()\n  );\n};\n\n/**\n * Get the email of the user for this event from `trais.email`,\n * `properties.email`, or `options.traits.email`, falling back to `userId` if\n * it looks like a valid email.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string|undefined}\n */\nt.email = function () {\n  let email =\n    this.proxy(\"traits.email\") ||\n    this.proxy(\"properties.email\") ||\n    this.proxy(\"options.traits.email\");\n  if (email) return email;\n\n  let userId = this.userId();\n  if (isEmail(userId)) return userId;\n};\n\n/**\n * Get the revenue for this event.\n *\n * If this is an \"Order Completed\" event, this will be the `properties.total`\n * falling back to the `properties.revenue`. For all other events, this is\n * simply taken from `properties.revenue`.\n *\n * If there are dollar signs in these properties, they will be removed. The\n * result will be parsed into a number.\n *\n * @return {number}\n */\nt.revenue = function () {\n  let revenue = this.proxy(\"properties.revenue\");\n  let event = this.event();\n  let orderCompletedRegExp = /^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;\n\n  // it's always revenue, unless it's called during an order completion.\n  if (!revenue && event && event.match(orderCompletedRegExp)) {\n    revenue = this.proxy(\"properties.total\");\n  }\n\n  return currency(revenue);\n};\n\n/**\n * Get the revenue for this event in \"cents\" -- in other words, multiply the\n * {@link Track#revenue} by 100, or return 0 if there isn't a numerical revenue\n * for this event.\n *\n * @return {number}\n */\nt.cents = function () {\n  let revenue = this.revenue();\n  return typeof revenue !== \"number\" ? this.value() || 0 : revenue * 100;\n};\n\n/**\n * Convert this event into an {@link Identify} facade.\n *\n * This works by taking this event's underlying object and creating an Identify\n * from it. This event's traits, taken from `options.traits`, will be used as\n * the Identify's traits.\n *\n * @return {Identify}\n */\nt.identify = function () {\n  // TODO: remove me.\n  let json = this.json();\n  json.traits = this.traits();\n  return new Identify(json, this.opts);\n};\n\n/**\n * Get float from currency value.\n *\n * @ignore\n * @param {*} val\n * @return {number}\n */\nfunction currency(val) {\n  if (!val) return;\n  if (typeof val === \"number\") {\n    return val;\n  }\n  if (typeof val !== \"string\") {\n    return;\n  }\n\n  val = val.replace(/\\$/g, \"\");\n  val = parseFloat(val);\n\n  if (!isNaN(val)) {\n    return val;\n  }\n}\n","\"use strict\";\n\nimport inherit from \"inherits\";\nimport { Facade } from \"./facade\";\nimport { Track } from \"./track\";\nimport isEmail from \"./is-email\";\n\n/**\n * Initialize a new `Page` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.category] - The page category.\n * @param {string} [dictionary.name] - The page name.\n * @param {string} [dictionary.properties] - The page properties.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nexport function Page(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Page, Facade);\n\nconst p = Page.prototype;\n\n/**\n * Return the type of facade this is. This will always return `\"page\"`.\n *\n * @return {string}\n */\np.action = function () {\n  return \"page\";\n};\n\n/**\n * An alias for {@link Page#action}.\n *\n * @function\n * @return {string}\n */\np.type = p.action;\n\n/**\n * Get the page category from `category`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.category = Facade.field(\"category\");\n\n/**\n * Get the page name from `name`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.name = Facade.field(\"name\");\n\n/**\n * Get the page title from `properties.title`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.title = Facade.proxy(\"properties.title\");\n\n/**\n * Get the page path from `properties.path`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.path = Facade.proxy(\"properties.path\");\n\n/**\n * Get the page URL from `properties.url`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.url = Facade.proxy(\"properties.url\");\n\n/**\n * Get the HTTP referrer from `context.referrer.url`, `context.page.referrer`,\n * or `properties.referrer`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.referrer = function () {\n  return (\n    this.proxy(\"context.referrer.url\") ||\n    this.proxy(\"context.page.referrer\") ||\n    this.proxy(\"properties.referrer\")\n  );\n};\n\n/**\n * Get the page's properties. This is identical to how {@link Facade#traits}\n * works, except it looks at `properties.*` instead of `options.traits.*`.\n *\n * Properties are gotten from `properties`, augmented with the page's `name`\n * and `category`.\n *\n * The parameter `aliases` is meant to transform keys in `properties` into new\n * keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx` in\n * the traits, and move it to `yyy`. If `xxx` is a method of this facade, it'll\n * be called as a function instead of treated as a key into the traits.\n *\n * @example\n * let obj = { properties: { foo: \"bar\" }, anonymousId: \"xxx\" }\n * let page = new Page(obj)\n *\n * page.traits() // { \"foo\": \"bar\" }\n * page.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * page.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\np.properties = function (aliases) {\n  let props = this.field(\"properties\") || {};\n  let category = this.category();\n  let name = this.name();\n  aliases = aliases || {};\n\n  if (category) props.category = category;\n  if (name) props.name = name;\n\n  for (const alias in aliases) {\n    if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n      const value = this[alias] == null\n        ? this.proxy(\"properties.\" + alias)\n        : this[alias]();\n      if (value == null) continue;\n      props[aliases[alias]] = value;\n      if (alias !== aliases[alias]) delete props[alias];\n    }\n  }\n\n  return props;\n};\n\n/**\n * Get the user's email from `context.traits.email` or `properties.email`,\n * falling back to `userId` if it's a valid email.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.email = function () {\n  let email =\n    this.proxy(\"context.traits.email\") || this.proxy(\"properties.email\");\n  if (email) return email;\n\n  let userId = this.userId();\n  if (isEmail(userId)) return userId;\n};\n\n/**\n * Get the page fullName. This is `$category $name` if both are present, and\n * just `name` otherwiser.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.fullName = function () {\n  let category = this.category();\n  let name = this.name();\n  return name && category ? category + \" \" + name : name;\n};\n\n/**\n * Get an event name from this page call. If `name` is present, this will be\n * `Viewed $name Page`; otherwise, it will be `Loaded a Page`.\n *\n * @param {string} name - The name of this page.\n * @return {string}\n */\np.event = function (name) {\n  return name ? \"Viewed \" + name + \" Page\" : \"Loaded a Page\";\n};\n\n/**\n * Convert this Page to a {@link Track} facade. The inputted `name` will be\n * converted to the Track's event name via {@link Page#event}.\n *\n * @param {string} name\n * @return {Track}\n */\np.track = function (name) {\n  let json = this.json();\n  json.event = this.event(name);\n  json.timestamp = this.timestamp();\n  json.properties = this.properties();\n  return new Track(json, this.opts);\n};\n","\"use strict\";\n\nimport inherit from \"inherits\";\nimport { Page } from \"./page\";\nimport { Track } from \"./track\";\n\n/**\n * Initialize a new `Screen` facade with a `dictionary` of arguments.\n *\n * Note that this class extends {@link Page}, so its methods are available to\n * instances of this class as well.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.category] - The page category.\n * @param {string} [dictionary.name] - The page name.\n * @param {string} [dictionary.properties] - The page properties.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Page\n */\nexport function Screen(dictionary, opts) {\n  Page.call(this, dictionary, opts);\n}\n\ninherit(Screen, Page);\n\n/**\n * Return the type of facade this is. This will always return `\"screen\"`.\n *\n * @return {string}\n */\nScreen.prototype.action = function () {\n  return \"screen\";\n};\n\n/**\n * An alias for {@link Screen#action}.\n *\n * @function\n * @return {string}\n */\nScreen.prototype.type = Screen.prototype.action;\n\n/**\n * Get an event name from this screen call. If `name` is present, this will be\n * `Viewed $name Screen`; otherwise, it will be `Loaded a Screen`.\n *\n * @param {string} name - The name of this screen.\n * @return {string}\n */\nScreen.prototype.event = function (name) {\n  return name ? \"Viewed \" + name + \" Screen\" : \"Loaded a Screen\";\n};\n\n/**\n * Convert this Screen to a {@link Track} facade. The inputted `name` will be\n * converted to the Track's event name via {@link Screen#event}.\n *\n * @param {string} name\n * @return {Track}\n */\nScreen.prototype.track = function (name) {\n  let json = this.json();\n  json.event = this.event(name);\n  json.timestamp = this.timestamp();\n  json.properties = this.properties();\n  return new Track(json, this.opts);\n};\n","\"use strict\";\n\nimport inherit from \"inherits\";\nimport { Facade } from \"./facade\";\n\n/**\n * Initialize a new `Delete` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.category] - The delete category.\n * @param {string} [dictionary.name] - The delete name.\n * @param {string} [dictionary.properties] - The delete properties.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nexport function Delete(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Delete, Facade);\n\n/**\n * Return the type of facade this is. This will always return `\"delete\"`.\n *\n * @return {string}\n */\nDelete.prototype.type = function () {\n  return \"delete\";\n};\n","\"use strict\";\n\nimport { Facade } from \"./facade\";\nimport { Alias } from \"./alias\";\nimport { Group } from \"./group\";\nimport { Identify } from \"./identify\";\nimport { Track } from \"./track\";\nimport { Page } from \"./page\";\nimport { Screen } from \"./screen\";\nimport { Delete } from \"./delete\";\n\nexport default {\n  ...Facade,\n  Alias,\n  Group,\n  Identify,\n  Track,\n  Page,\n  Screen,\n  Delete,\n};\n\nexport { Facade, Alias, Group, Identify, Track, Page, Screen, Delete };\n","import {\n  Alias,\n  Facade,\n  Group,\n  Identify,\n  Options,\n  Page,\n  Screen,\n  Track,\n} from '@segment/facade'\nimport { SegmentEvent } from '../core/events'\n\nexport type SegmentFacade = Facade<SegmentEvent> & {\n  obj: SegmentEvent\n}\n\nexport function toFacade(evt: SegmentEvent, options?: Options): SegmentFacade {\n  let fcd = new Facade(evt, options)\n\n  if (evt.type === 'track') {\n    fcd = new Track(evt, options)\n  }\n\n  if (evt.type === 'identify') {\n    fcd = new Identify(evt, options)\n  }\n\n  if (evt.type === 'page') {\n    fcd = new Page(evt, options)\n  }\n\n  if (evt.type === 'alias') {\n    fcd = new Alias(evt, options)\n  }\n\n  if (evt.type === 'group') {\n    fcd = new Group(evt, options)\n  }\n\n  if (evt.type === 'screen') {\n    fcd = new Screen(evt, options)\n  }\n\n  Object.defineProperty(fcd, 'obj', {\n    value: evt,\n    writable: true,\n  })\n\n  return fcd as SegmentFacade\n}\n","export const pWhile = async <T>(\n  condition: (value: T | undefined) => boolean,\n  action: () => T | PromiseLike<T>\n): Promise<void> => {\n  const loop = async (actionResult: T | undefined): Promise<void> => {\n    if (condition(actionResult)) {\n      return loop(await action())\n    }\n  }\n\n  return loop(undefined)\n}\n","export { invokeCallback, pTimeout } from '@segment/analytics-core'\n","import { Analytics } from './analytics'\nimport { EventProperties, Options } from './events'\nimport { pTimeout } from './callback'\n\n// Check if a user is opening the link in a new tab\nfunction userNewTab(event: Event): boolean {\n  const typedEvent = event as Event & {\n    ctrlKey: boolean\n    shiftKey: boolean\n    metaKey: boolean\n    button: number\n  }\n  if (\n    typedEvent.ctrlKey ||\n    typedEvent.shiftKey ||\n    typedEvent.metaKey ||\n    (typedEvent.button && typedEvent.button == 1)\n  ) {\n    return true\n  }\n  return false\n}\n\n// Check if the link opens in new tab\nfunction linkNewTab(element: HTMLAnchorElement, href: string | null): boolean {\n  if (element.target === '_blank' && href) {\n    return true\n  }\n  return false\n}\n\nexport interface JQueryShim<TElement = HTMLElement> {\n  toArray(): TElement[]\n}\n\nexport function link(\n  this: Analytics,\n  links: Element | Array<Element> | JQueryShim | null,\n  event: string | Function,\n  properties?: EventProperties | Function,\n  options?: Options\n): Analytics {\n  let elements: Array<Element> = []\n  // always arrays, handles jquery\n  if (!links) {\n    return this\n  }\n  if (links instanceof Element) {\n    elements = [links]\n  } else if ('toArray' in links) {\n    elements = links.toArray()\n  } else {\n    elements = links\n  }\n\n  elements.forEach((el: Element) => {\n    el.addEventListener(\n      'click',\n      (elementEvent: Event) => {\n        const ev = event instanceof Function ? event(el) : event\n        const props =\n          properties instanceof Function ? properties(el) : properties\n        const href =\n          el.getAttribute('href') ||\n          el.getAttributeNS('http://www.w3.org/1999/xlink', 'href') ||\n          el.getAttribute('xlink:href') ||\n          el.getElementsByTagName('a')[0]?.getAttribute('href')\n\n        const trackEvent = pTimeout(\n          this.track(ev, props, options ?? {}),\n          this.settings.timeout ?? 500\n        )\n\n        if (\n          !linkNewTab(el as HTMLAnchorElement, href) &&\n          !userNewTab(elementEvent)\n        ) {\n          if (href) {\n            elementEvent.preventDefault\n              ? elementEvent.preventDefault()\n              : (elementEvent.returnValue = false)\n            trackEvent\n              .catch(console.error)\n              .then(() => {\n                window.location.href = href\n              })\n              .catch(console.error)\n          }\n        }\n      },\n      false\n    )\n  })\n\n  return this\n}\n\nexport type LinkArgs = Parameters<typeof link>\n\nexport function form(\n  this: Analytics,\n  forms: HTMLFormElement | Array<HTMLFormElement> | null,\n  event: string | Function,\n  properties?: EventProperties | Function,\n  options?: Options\n): Analytics {\n  // always arrays, handles jquery\n  if (!forms) return this\n  if (forms instanceof HTMLFormElement) forms = [forms]\n\n  const elements = forms\n\n  elements.forEach((el) => {\n    if (!(el instanceof Element))\n      throw new TypeError('Must pass HTMLElement to trackForm/trackSubmit.')\n    const handler = (elementEvent: Event): void => {\n      elementEvent.preventDefault\n        ? elementEvent.preventDefault()\n        : (elementEvent.returnValue = false)\n\n      const ev = event instanceof Function ? event(el) : event\n      const props = properties instanceof Function ? properties(el) : properties\n\n      const trackEvent = pTimeout(\n        this.track(ev, props, options ?? {}),\n        this.settings.timeout ?? 500\n      )\n\n      trackEvent\n        .catch(console.error)\n        .then(() => {\n          el.submit()\n        })\n        .catch(console.error)\n    }\n\n    // Support the events happening through jQuery or Zepto instead of through\n    // the normal DOM API, because `el.submit` doesn't bubble up events...\n\n    const $ = (window as any).jQuery || (window as any).Zepto\n    if ($) {\n      $(el).submit(handler)\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-misused-promises\n      el.addEventListener('submit', handler, false)\n    }\n  })\n\n  return this\n}\n\nexport type FormArgs = Parameters<typeof form>\n","import { Context, ContextCancelation } from '../../core/context'\nimport { SegmentEvent } from '../../core/events'\nimport { Plugin } from '../../core/plugin'\nimport { SegmentFacade, toFacade } from '../../lib/to-facade'\n\nexport interface MiddlewareParams {\n  payload: SegmentFacade\n\n  integrations?: SegmentEvent['integrations']\n  next: (payload: MiddlewareParams['payload'] | null) => void\n}\n\nexport interface DestinationMiddlewareParams {\n  payload: SegmentFacade\n  integration: string\n  next: (payload: MiddlewareParams['payload'] | null) => void\n}\n\nexport type MiddlewareFunction = (\n  middleware: MiddlewareParams\n) => void | Promise<void>\n\nexport type DestinationMiddlewareFunction = (\n  middleware: DestinationMiddlewareParams\n) => void | Promise<void>\n\nexport async function applyDestinationMiddleware(\n  destination: string,\n  evt: SegmentEvent,\n  middleware: DestinationMiddlewareFunction[]\n): Promise<SegmentEvent | null> {\n  // Clone the event so mutations are localized to a single destination.\n  let modifiedEvent = toFacade(evt, {\n    clone: true,\n    traverse: false,\n  }).rawEvent() as SegmentEvent\n  async function applyMiddleware(\n    event: SegmentEvent,\n    fn: DestinationMiddlewareFunction\n  ): Promise<SegmentEvent | null> {\n    let nextCalled = false\n    let returnedEvent: SegmentEvent | null = null\n\n    await fn({\n      payload: toFacade(event, {\n        clone: true,\n        traverse: false,\n      }),\n      integration: destination,\n      next(evt) {\n        nextCalled = true\n\n        if (evt === null) {\n          returnedEvent = null\n        }\n\n        if (evt) {\n          returnedEvent = evt.obj\n        }\n      },\n    })\n\n    if (!nextCalled && returnedEvent !== null) {\n      returnedEvent = returnedEvent as SegmentEvent\n      returnedEvent.integrations = {\n        ...event.integrations,\n        [destination]: false,\n      }\n    }\n\n    return returnedEvent\n  }\n\n  for (const md of middleware) {\n    const result = await applyMiddleware(modifiedEvent, md)\n    if (result === null) {\n      return null\n    }\n    modifiedEvent = result\n  }\n\n  return modifiedEvent\n}\n\nexport function sourceMiddlewarePlugin(\n  fn: MiddlewareFunction,\n  integrations: SegmentEvent['integrations']\n): Plugin {\n  async function apply(ctx: Context): Promise<Context> {\n    let nextCalled = false\n\n    await fn({\n      payload: toFacade(ctx.event, {\n        clone: true,\n        traverse: false,\n      }),\n      integrations: integrations ?? {},\n      next(evt) {\n        nextCalled = true\n        if (evt) {\n          ctx.event = evt.obj\n        }\n      },\n    })\n\n    if (!nextCalled) {\n      throw new ContextCancelation({\n        retry: false,\n        type: 'middleware_cancellation',\n        reason: 'Middleware `next` function skipped',\n      })\n    }\n\n    return ctx\n  }\n\n  return {\n    name: `Source Middleware ${fn.name}`,\n    type: 'before',\n    version: '0.1.0',\n\n    isLoaded: (): boolean => true,\n    load: (ctx): Promise<Context> => Promise.resolve(ctx),\n\n    track: apply,\n    page: apply,\n    screen: apply,\n    identify: apply,\n    alias: apply,\n    group: apply,\n  }\n}\n","import { QueryStringParams } from '.'\n\n/**\n * Returns an object containing only the properties prefixed by the input\n * string.\n * Ex: prefix('ajs_traits_', { ajs_traits_address: '123 St' })\n * will return { address: '123 St' }\n **/\nexport function pickPrefix(\n  prefix: string,\n  object: QueryStringParams\n): QueryStringParams {\n  return Object.keys(object).reduce((acc: QueryStringParams, key: string) => {\n    if (key.startsWith(prefix)) {\n      const field = key.substr(prefix.length)\n      acc[field] = object[key]!\n    }\n    return acc\n  }, {})\n}\n","/**\n * Tries to gets the unencoded version of an encoded component of a\n * Uniform Resource Identifier (URI). If input string is malformed,\n * returns it back as-is.\n *\n * Note: All occurences of the `+` character become ` ` (spaces).\n **/\nexport function gracefulDecodeURIComponent(\n  encodedURIComponent: string\n): string {\n  try {\n    return decodeURIComponent(encodedURIComponent.replace(/\\+/g, ' '))\n  } catch {\n    return encodedURIComponent\n  }\n}\n","import { pickPrefix } from './pickPrefix'\nimport { gracefulDecodeURIComponent } from './gracefulDecodeURIComponent'\nimport { Analytics } from '../analytics'\nimport { Context } from '../context'\nimport { isPlainObject } from '@segment/analytics-core'\n\nexport interface QueryStringParams {\n  [key: string]: string | null\n}\n\nexport function queryString(\n  analytics: Analytics,\n  query: string\n): Promise<Context[]> {\n  const a = document.createElement('a')\n  a.href = query\n  const parsed = a.search.slice(1)\n  const params = parsed.split('&').reduce((acc: QueryStringParams, str) => {\n    const [k, v] = str.split('=')\n    acc[k] = gracefulDecodeURIComponent(v)\n    return acc\n  }, {})\n\n  const calls = []\n\n  const { ajs_uid, ajs_event, ajs_aid } = params\n  const { aid: aidPattern = /.+/, uid: uidPattern = /.+/ } = isPlainObject(\n    analytics.options.useQueryString\n  )\n    ? analytics.options.useQueryString\n    : {}\n\n  if (ajs_aid) {\n    const anonId = Array.isArray(params.ajs_aid)\n      ? params.ajs_aid[0]\n      : params.ajs_aid\n\n    if (aidPattern.test(anonId)) {\n      analytics.setAnonymousId(anonId)\n    }\n  }\n\n  if (ajs_uid) {\n    const uid = Array.isArray(params.ajs_uid)\n      ? params.ajs_uid[0]\n      : params.ajs_uid\n\n    if (uidPattern.test(uid)) {\n      const traits = pickPrefix('ajs_trait_', params)\n\n      calls.push(analytics.identify(uid, traits))\n    }\n  }\n\n  if (ajs_event) {\n    const event = Array.isArray(params.ajs_event)\n      ? params.ajs_event[0]\n      : params.ajs_event\n    const props = pickPrefix('ajs_prop_', params)\n    calls.push(analytics.track(event, props))\n  }\n\n  return Promise.all(calls)\n}\n","import { getGlobalAnalytics } from './global-analytics-helper'\nimport { embeddedWriteKey } from './embedded-write-key'\n\nconst analyticsScriptRegex =\n  /(https:\\/\\/.*)\\/analytics\\.js\\/v1\\/(?:.*?)\\/(?:platform|analytics.*)?/\nconst getCDNUrlFromScriptTag = (): string | undefined => {\n  let cdn: string | undefined\n  const scripts = Array.prototype.slice.call(\n    document.querySelectorAll('script')\n  )\n  scripts.forEach((s) => {\n    const src = s.getAttribute('src') ?? ''\n    const result = analyticsScriptRegex.exec(src)\n\n    if (result && result[1]) {\n      cdn = result[1]\n    }\n  })\n  return cdn\n}\n\nlet _globalCDN: string | undefined // set globalCDN as in-memory singleton\nconst getGlobalCDNUrl = (): string | undefined => {\n  const result = _globalCDN ?? getGlobalAnalytics()?._cdn\n  return result\n}\n\nexport const setGlobalCDNUrl = (cdn: string) => {\n  const globalAnalytics = getGlobalAnalytics()\n  if (globalAnalytics) {\n    globalAnalytics._cdn = cdn\n  }\n  _globalCDN = cdn\n}\n\nexport const getCDN = (): string => {\n  const globalCdnUrl = getGlobalCDNUrl()\n\n  if (globalCdnUrl) return globalCdnUrl\n\n  const cdnFromScriptTag = getCDNUrlFromScriptTag()\n\n  if (cdnFromScriptTag) {\n    return cdnFromScriptTag\n  } else {\n    // it's possible that the CDN is not found in the page because:\n    // - the script is loaded through a proxy\n    // - the script is removed after execution\n    // in this case, we fall back to the default Segment CDN\n    return `https://cdn.segment.com`\n  }\n}\n\nexport const getNextIntegrationsURL = () => {\n  const cdn = getCDN()\n  return `${cdn}/next-integrations`\n}\n\n/**\n * Replaces the CDN URL in the script tag with the one from Analytics.js 1.0\n *\n * @returns the path to Analytics JS 1.0\n **/\nexport function getLegacyAJSPath(): string {\n  const writeKey = embeddedWriteKey() ?? getGlobalAnalytics()?._writeKey\n\n  const scripts = Array.prototype.slice.call(\n    document.querySelectorAll('script')\n  )\n  let path: string | undefined = undefined\n\n  for (const s of scripts) {\n    const src = s.getAttribute('src') ?? ''\n    const result = analyticsScriptRegex.exec(src)\n\n    if (result && result[1]) {\n      path = src\n      break\n    }\n  }\n\n  if (path) {\n    return path.replace('analytics.min.js', 'analytics.classic.js')\n  }\n\n  return `https://cdn.segment.com/analytics.js/v1/${writeKey}/analytics.classic.js`\n}\n","import { Options } from '../core/events/interfaces'\nimport { CDNSettings } from '../browser'\n\n/**\n * Merge legacy settings and initialized Integration option overrides.\n *\n * This will merge any options that were passed from initialization into\n * overrides for settings that are returned by the Segment CDN.\n *\n * i.e. this allows for passing options directly into destinations from\n * the Analytics constructor.\n */\nexport function mergedOptions(\n  cdnSettings: CDNSettings,\n  options: Options\n): Record<string, any> {\n  const optionOverrides = Object.entries(options.integrations ?? {}).reduce(\n    (overrides, [integration, options]) => {\n      if (typeof options === 'object') {\n        return {\n          ...overrides,\n          [integration]: options,\n        }\n      }\n\n      return {\n        ...overrides,\n        [integration]: {},\n      }\n    },\n    {} as Record<string, any>\n  )\n\n  return Object.entries(cdnSettings.integrations).reduce(\n    (integrationSettings, [integration, settings]) => {\n      return {\n        ...integrationSettings,\n        [integration]: {\n          ...settings,\n          ...optionOverrides[integration],\n        },\n      }\n    },\n    {} as Record<string, any>\n  )\n}\n","function findScript(src: string): HTMLScriptElement | undefined {\n  const scripts = Array.prototype.slice.call(\n    window.document.querySelectorAll('script')\n  )\n  return scripts.find((s) => s.src === src)\n}\n\n/**\n * Load a script from a URL and append it to the document.\n */\nexport function loadScript(\n  src: string,\n  attributes?: Record<string, string>\n): Promise<HTMLScriptElement> {\n  const found = findScript(src)\n\n  if (found !== undefined) {\n    const status = found?.getAttribute('status')\n\n    if (status === 'loaded') {\n      return Promise.resolve(found)\n    }\n\n    if (status === 'loading') {\n      return new Promise((resolve, reject) => {\n        found.addEventListener('load', () => resolve(found))\n        found.addEventListener('error', (err) => reject(err))\n      })\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    const script = window.document.createElement('script')\n\n    script.type = 'text/javascript'\n    script.src = src\n    script.async = true\n\n    script.setAttribute('status', 'loading')\n    for (const [k, v] of Object.entries(attributes ?? {})) {\n      script.setAttribute(k, v)\n    }\n\n    script.onload = (): void => {\n      script.onerror = script.onload = null\n      script.setAttribute('status', 'loaded')\n      resolve(script)\n    }\n\n    script.onerror = (): void => {\n      script.onerror = script.onload = null\n      script.setAttribute('status', 'error')\n      reject(new Error(`Failed to load ${src}`))\n    }\n\n    const firstExistingScript = window.document.querySelector('script')\n    if (!firstExistingScript) {\n      window.document.head.appendChild(script)\n    } else {\n      firstExistingScript.parentElement?.insertBefore(\n        script,\n        firstExistingScript\n      )\n    }\n  })\n}\n\nexport function unloadScript(src: string): Promise<void> {\n  const found = findScript(src)\n\n  if (found !== undefined) {\n    found.remove()\n  }\n\n  return Promise.resolve()\n}\n","import { Context } from '../context'\n\nexport interface RecordIntegrationMetricProps {\n  integrationName: string\n  methodName: string\n  didError?: boolean\n  type: 'classic' | 'action'\n}\n\nexport function recordIntegrationMetric(\n  ctx: Context,\n  {\n    methodName,\n    integrationName,\n    type,\n    didError = false,\n  }: RecordIntegrationMetricProps\n): void {\n  ctx.stats.increment(\n    `analytics_js.integration.invoke${didError ? '.error' : ''}`,\n    1,\n    [\n      `method:${methodName}`,\n      `integration_name:${integrationName}`,\n      `type:${type}`,\n    ]\n  )\n}\n","// @ts-nocheck\n// prettier-ignore\n/* eslint-disable */\n// @segment/tsub 2.0.0 - GENERATED DO NOT MODIFY\n\n/*! For license information please see tsub.js.LICENSE.txt */\n!function(t,r){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=r();else if(\"function\"==typeof define&&define.amd)define([],r);else{var e=r();for(var n in e)(\"object\"==typeof exports?exports:t)[n]=e[n]}}(self,(()=>(()=>{var t={2870:function(t,r,e){\"use strict\";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,\"__esModule\",{value:!0}),r.Store=r.matches=r.transform=void 0;var o=e(4303);Object.defineProperty(r,\"transform\",{enumerable:!0,get:function(){return n(o).default}});var s=e(2370);Object.defineProperty(r,\"matches\",{enumerable:!0,get:function(){return n(s).default}});var i=e(1444);Object.defineProperty(r,\"Store\",{enumerable:!0,get:function(){return n(i).default}})},2370:function(t,r,e){\"use strict\";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,\"__esModule\",{value:!0});var o=n(e(7843));function s(t,r){if(!Array.isArray(t))return!0===i(t,r);var e,n,o,f,p=t[0];switch(p){case\"!\":return!s(t[1],r);case\"or\":for(var l=1;l<t.length;l++)if(s(t[l],r))return!0;return!1;case\"and\":for(l=1;l<t.length;l++)if(!s(t[l],r))return!1;return!0;case\"=\":case\"!=\":return function(t,r,e,n){switch(u(t)&&(t=s(t,n)),u(r)&&(r=s(r,n)),\"object\"==typeof t&&\"object\"==typeof r&&(t=JSON.stringify(t),r=JSON.stringify(r)),e){case\"=\":return t===r;case\"!=\":return t!==r;default:throw new Error(\"Invalid operator in compareItems: \".concat(e))}}(i(t[1],r),i(t[2],r),p,r);case\"<=\":case\"<\":case\">\":case\">=\":return function(t,r,e,n){if(u(t)&&(t=s(t,n)),u(r)&&(r=s(r,n)),\"number\"!=typeof t||\"number\"!=typeof r)return!1;switch(e){case\"<=\":return t<=r;case\">=\":return t>=r;case\"<\":return t<r;case\">\":return t>r;default:throw new Error(\"Invalid operator in compareNumbers: \".concat(e))}}(i(t[1],r),i(t[2],r),p,r);case\"in\":return function(t,r,e){return void 0!==r.find((function(r){return i(r,e)===t}))}(i(t[1],r),i(t[2],r),r);case\"contains\":return o=i(t[1],r),f=i(t[2],r),\"string\"==typeof o&&\"string\"==typeof f&&-1!==o.indexOf(f);case\"match\":return e=i(t[1],r),n=i(t[2],r),\"string\"==typeof e&&\"string\"==typeof n&&function(t,r){var e,n;t:for(;t.length>0;){var o,s;if(o=(e=a(t)).star,s=e.chunk,t=e.pattern,o&&\"\"===s)return!0;var i=c(s,r),u=i.t,f=i.ok,p=i.err;if(p)return!1;if(!f||!(0===u.length||t.length>0)){if(o)for(var l=0;l<r.length;l++){if(u=(n=c(s,r.slice(l+1))).t,f=n.ok,p=n.err,f){if(0===t.length&&u.length>0)continue;r=u;continue t}if(p)return!1}return!1}r=u}return 0===r.length}(n,e);case\"lowercase\":var v=i(t[1],r);return\"string\"!=typeof v?null:v.toLowerCase();case\"typeof\":return typeof i(t[1],r);case\"length\":return function(t){return null===t?0:Array.isArray(t)||\"string\"==typeof t?t.length:NaN}(i(t[1],r));default:throw new Error(\"FQL IR could not evaluate for token: \".concat(p))}}function i(t,r){return Array.isArray(t)?t:\"object\"==typeof t?t.value:(0,o.default)(r,t)}function u(t){return!!Array.isArray(t)&&((\"lowercase\"===t[0]||\"length\"===t[0]||\"typeof\"===t[0])&&2===t.length||(\"contains\"===t[0]||\"match\"===t[0])&&3===t.length)}function a(t){for(var r={star:!1,chunk:\"\",pattern:\"\"};t.length>0&&\"*\"===t[0];)t=t.slice(1),r.star=!0;var e,n=!1;t:for(e=0;e<t.length;e++)switch(t[e]){case\"\\\\\":e+1<t.length&&e++;break;case\"[\":n=!0;break;case\"]\":n=!1;break;case\"*\":if(!n)break t}return r.chunk=t.slice(0,e),r.pattern=t.slice(e),r}function c(t,r){for(var e,n,o={t:\"\",ok:!1,err:!1};t.length>0;){if(0===r.length)return o;switch(t[0]){case\"[\":var s=r[0];r=r.slice(1);var i=!0;(t=t.slice(1)).length>0&&\"^\"===t[0]&&(i=!1,t=t.slice(1));for(var u=!1,a=0;;){if(t.length>0&&\"]\"===t[0]&&a>0){t=t.slice(1);break}var c,p=\"\";if(c=(e=f(t)).char,t=e.newChunk,e.err)return o;if(p=c,\"-\"===t[0]&&(p=(n=f(t.slice(1))).char,t=n.newChunk,n.err))return o;c<=s&&s<=p&&(u=!0),a++}if(u!==i)return o;break;case\"?\":r=r.slice(1),t=t.slice(1);break;case\"\\\\\":if(0===(t=t.slice(1)).length)return o.err=!0,o;default:if(t[0]!==r[0])return o;r=r.slice(1),t=t.slice(1)}}return o.t=r,o.ok=!0,o.err=!1,o}function f(t){var r={char:\"\",newChunk:\"\",err:!1};return 0===t.length||\"-\"===t[0]||\"]\"===t[0]||\"\\\\\"===t[0]&&0===(t=t.slice(1)).length?(r.err=!0,r):(r.char=t[0],r.newChunk=t.slice(1),0===r.newChunk.length&&(r.err=!0),r)}r.default=function(t,r){if(!r)throw new Error(\"No matcher supplied!\");switch(r.type){case\"all\":return!0;case\"fql\":return function(t,r){if(!t)return!1;try{t=JSON.parse(t)}catch(r){throw new Error('Failed to JSON.parse FQL intermediate representation \"'.concat(t,'\": ').concat(r))}var e=s(t,r);return\"boolean\"==typeof e&&e}(r.ir,t);default:throw new Error(\"Matcher of type \".concat(r.type,\" unsupported.\"))}}},1444:(t,r)=>{\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0});var e=function(){function t(t){this.rules=[],this.rules=t||[]}return t.prototype.getRulesByDestinationName=function(t){for(var r=[],e=0,n=this.rules;e<n.length;e++){var o=n[e];o.destinationName!==t&&void 0!==o.destinationName||r.push(o)}return r},t}();r.default=e},4303:function(t,r,e){\"use strict\";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,\"__esModule\",{value:!0});var o=n(e(374)),s=n(e(7843)),i=n(e(5500)),u=e(9014),a=e(4966);function c(t,r){p(t,r.drop,(function(t,r){r.forEach((function(r){return delete t[r]}))}))}function f(t,r){p(t,r.allow,(function(t,r){Object.keys(t).forEach((function(e){r.includes(e)||delete t[e]}))}))}function p(t,r,e){Object.entries(r).forEach((function(r){var n=r[0],o=r[1],i=function(t){\"object\"==typeof t&&null!==t&&e(t,o)},u=\"\"===n?t:(0,s.default)(t,n);Array.isArray(u)?u.forEach(i):i(u)}))}function l(t,r){var e=JSON.parse(JSON.stringify(t));for(var n in r.map)if(r.map.hasOwnProperty(n)){var o=r.map[n],i=n.split(\".\"),c=void 0;if(i.length>1?(i.pop(),c=(0,s.default)(e,i.join(\".\"))):c=t,\"object\"==typeof c){if(o.copy){var f=(0,s.default)(e,o.copy);void 0!==f&&(0,u.dset)(t,n,f)}else if(o.move){var p=(0,s.default)(e,o.move);void 0!==p&&(0,u.dset)(t,n,p),(0,a.unset)(t,o.move)}else o.hasOwnProperty(\"set\")&&(0,u.dset)(t,n,o.set);if(o.to_string){var l=(0,s.default)(t,n);if(\"string\"==typeof l||\"object\"==typeof l&&null!==l)continue;void 0!==l?(0,u.dset)(t,n,JSON.stringify(l)):(0,u.dset)(t,n,\"undefined\")}}}}function v(t,r){return!(r.sample.percent<=0)&&(r.sample.percent>=1||(r.sample.path?function(t,r){var e=(0,s.default)(t,r.sample.path),n=(0,o.default)(JSON.stringify(e)),u=-64,a=[];y(n.slice(0,8),a);for(var c=0,f=0;f<64&&1!==a[f];f++)c++;if(0!==c){var p=[];y(n.slice(9,16),p),u-=c,a.splice(0,c),p.splice(64-c),a=a.concat(p)}return a[63]=0===a[63]?1:0,(0,i.default)(parseInt(a.join(\"\"),2),u)<r.sample.percent}(t,r):(e=r.sample.percent,Math.random()<=e)));var e}function y(t,r){for(var e=0;e<8;e++)for(var n=t[e],o=128;o>=1;o/=2)n-o>=0?(n-=o,r.push(1)):r.push(0)}r.default=function(t,r){for(var e=t,n=0,o=r;n<o.length;n++){var s=o[n];switch(s.type){case\"drop\":return null;case\"drop_properties\":c(e,s.config);break;case\"allow_properties\":f(e,s.config);break;case\"sample_event\":if(v(e,s.config))break;return null;case\"map_properties\":l(e,s.config);break;case\"hash_properties\":break;default:throw new Error('Transformer of type \"'.concat(s.type,'\" is unsupported.'))}}return e}},4966:function(t,r,e){\"use strict\";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,\"__esModule\",{value:!0}),r.unset=void 0;var o=n(e(7843));r.unset=function(t,r){if((0,o.default)(t,r)){for(var e=r.split(\".\"),n=e.pop();e.length&&\"\\\\\"===e[e.length-1].slice(-1);)n=e.pop().slice(0,-1)+\".\"+n;for(;e.length;)t=t[r=e.shift()];return delete t[n]}return!0}},9014:(t,r)=>{r.dset=function(t,r,e){r.split&&(r=r.split(\".\"));for(var n,o,s=0,i=r.length,u=t;s<i&&\"__proto__\"!==(o=r[s++])&&\"constructor\"!==o&&\"prototype\"!==o;)u=u[o]=s===i?e:typeof(n=u[o])==typeof r?n:0*r[s]!=0||~(\"\"+r[s]).indexOf(\".\")?{}:[]}},3304:t=>{\"use strict\";var r=\"function\"==typeof Float64Array?Float64Array:void 0;t.exports=r},7382:(t,r,e)=>{\"use strict\";var n,o=e(5569),s=e(3304),i=e(8482);n=o()?s:i,t.exports=n},8482:t=>{\"use strict\";t.exports=function(){throw new Error(\"not implemented\")}},6322:(t,r,e)=>{\"use strict\";var n,o=e(2508),s=e(5679),i=e(882);n=o()?s:i,t.exports=n},882:t=>{\"use strict\";t.exports=function(){throw new Error(\"not implemented\")}},5679:t=>{\"use strict\";var r=\"function\"==typeof Uint16Array?Uint16Array:void 0;t.exports=r},4773:(t,r,e)=>{\"use strict\";var n,o=e(9773),s=e(3004),i=e(3078);n=o()?s:i,t.exports=n},3078:t=>{\"use strict\";t.exports=function(){throw new Error(\"not implemented\")}},3004:t=>{\"use strict\";var r=\"function\"==typeof Uint32Array?Uint32Array:void 0;t.exports=r},7980:(t,r,e)=>{\"use strict\";var n,o=e(8114),s=e(6737),i=e(3357);n=o()?s:i,t.exports=n},3357:t=>{\"use strict\";t.exports=function(){throw new Error(\"not implemented\")}},6737:t=>{\"use strict\";var r=\"function\"==typeof Uint8Array?Uint8Array:void 0;t.exports=r},2684:t=>{\"use strict\";var r=\"function\"==typeof Float64Array?Float64Array:null;t.exports=r},5569:(t,r,e)=>{\"use strict\";var n=e(3876);t.exports=n},3876:(t,r,e)=>{\"use strict\";var n=e(1448),o=e(2684);t.exports=function(){var t,r;if(\"function\"!=typeof o)return!1;try{r=new o([1,3.14,-3.14,NaN]),t=n(r)&&1===r[0]&&3.14===r[1]&&-3.14===r[2]&&r[3]!=r[3]}catch(r){t=!1}return t}},9048:(t,r,e)=>{\"use strict\";var n=e(3763);t.exports=n},3763:t=>{\"use strict\";var r=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&r.call(t,e)}},7009:(t,r,e)=>{\"use strict\";var n=e(6784);t.exports=n},6784:t=>{\"use strict\";t.exports=function(){return\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol(\"foo\")}},3123:(t,r,e)=>{\"use strict\";var n=e(8481);t.exports=n},8481:(t,r,e)=>{\"use strict\";var n=e(7009)();t.exports=function(){return n&&\"symbol\"==typeof Symbol.toStringTag}},2508:(t,r,e)=>{\"use strict\";var n=e(3403);t.exports=n},3403:(t,r,e)=>{\"use strict\";var n=e(768),o=e(9668),s=e(187);t.exports=function(){var t,r;if(\"function\"!=typeof s)return!1;try{r=new s(r=[1,3.14,-3.14,o+1,o+2]),t=n(r)&&1===r[0]&&3===r[1]&&r[2]===o-2&&0===r[3]&&1===r[4]}catch(r){t=!1}return t}},187:t=>{\"use strict\";var r=\"function\"==typeof Uint16Array?Uint16Array:null;t.exports=r},9773:(t,r,e)=>{\"use strict\";var n=e(2822);t.exports=n},2822:(t,r,e)=>{\"use strict\";var n=e(2744),o=e(3899),s=e(746);t.exports=function(){var t,r;if(\"function\"!=typeof s)return!1;try{r=new s(r=[1,3.14,-3.14,o+1,o+2]),t=n(r)&&1===r[0]&&3===r[1]&&r[2]===o-2&&0===r[3]&&1===r[4]}catch(r){t=!1}return t}},746:t=>{\"use strict\";var r=\"function\"==typeof Uint32Array?Uint32Array:null;t.exports=r},8114:(t,r,e)=>{\"use strict\";var n=e(8066);t.exports=n},8066:(t,r,e)=>{\"use strict\";var n=e(8279),o=e(3443),s=e(2731);t.exports=function(){var t,r;if(\"function\"!=typeof s)return!1;try{r=new s(r=[1,3.14,-3.14,o+1,o+2]),t=n(r)&&1===r[0]&&3===r[1]&&r[2]===o-2&&0===r[3]&&1===r[4]}catch(r){t=!1}return t}},2731:t=>{\"use strict\";var r=\"function\"==typeof Uint8Array?Uint8Array:null;t.exports=r},1448:(t,r,e)=>{\"use strict\";var n=e(1453);t.exports=n},1453:(t,r,e)=>{\"use strict\";var n=e(6208),o=\"function\"==typeof Float64Array;t.exports=function(t){return o&&t instanceof Float64Array||\"[object Float64Array]\"===n(t)}},9331:(t,r,e)=>{\"use strict\";var n=e(7980),o={uint16:e(6322),uint8:n};t.exports=o},5902:(t,r,e)=>{\"use strict\";var n=e(4106);t.exports=n},4106:(t,r,e)=>{\"use strict\";var n,o,s=e(9331);(o=new s.uint16(1))[0]=4660,n=52===new s.uint8(o.buffer)[0],t.exports=n},768:(t,r,e)=>{\"use strict\";var n=e(3823);t.exports=n},3823:(t,r,e)=>{\"use strict\";var n=e(6208),o=\"function\"==typeof Uint16Array;t.exports=function(t){return o&&t instanceof Uint16Array||\"[object Uint16Array]\"===n(t)}},2744:(t,r,e)=>{\"use strict\";var n=e(2326);t.exports=n},2326:(t,r,e)=>{\"use strict\";var n=e(6208),o=\"function\"==typeof Uint32Array;t.exports=function(t){return o&&t instanceof Uint32Array||\"[object Uint32Array]\"===n(t)}},8279:(t,r,e)=>{\"use strict\";var n=e(208);t.exports=n},208:(t,r,e)=>{\"use strict\";var n=e(6208),o=\"function\"==typeof Uint8Array;t.exports=function(t){return o&&t instanceof Uint8Array||\"[object Uint8Array]\"===n(t)}},6315:t=>{\"use strict\";t.exports=1023},1686:t=>{\"use strict\";t.exports=2147483647},3105:t=>{\"use strict\";t.exports=2146435072},3449:t=>{\"use strict\";t.exports=2147483648},6988:t=>{\"use strict\";t.exports=-1023},9777:t=>{\"use strict\";t.exports=1023},3690:t=>{\"use strict\";t.exports=-1074},2918:(t,r,e)=>{\"use strict\";var n=e(4772).NEGATIVE_INFINITY;t.exports=n},4165:t=>{\"use strict\";var r=Number.POSITIVE_INFINITY;t.exports=r},6488:t=>{\"use strict\";t.exports=22250738585072014e-324},9668:t=>{\"use strict\";t.exports=65535},3899:t=>{\"use strict\";t.exports=4294967295},3443:t=>{\"use strict\";t.exports=255},7011:(t,r,e)=>{\"use strict\";var n=e(812);t.exports=n},812:(t,r,e)=>{\"use strict\";var n=e(4165),o=e(2918);t.exports=function(t){return t===n||t===o}},1883:(t,r,e)=>{\"use strict\";var n=e(1797);t.exports=n},1797:t=>{\"use strict\";t.exports=function(t){return t!=t}},513:(t,r,e)=>{\"use strict\";var n=e(5760);t.exports=n},5760:t=>{\"use strict\";t.exports=function(t){return Math.abs(t)}},5848:(t,r,e)=>{\"use strict\";var n=e(677);t.exports=n},677:(t,r,e)=>{\"use strict\";var n=e(3449),o=e(1686),s=e(7838),i=e(1921),u=e(2490),a=[0,0];t.exports=function(t,r){var e,c;return s.assign(t,a,1,0),e=a[0],e&=o,c=i(r),u(e|=c&=n,a[1])}},5500:(t,r,e)=>{\"use strict\";var n=e(8397);t.exports=n},8397:(t,r,e)=>{\"use strict\";var n=e(4165),o=e(2918),s=e(6315),i=e(9777),u=e(6988),a=e(3690),c=e(1883),f=e(7011),p=e(5848),l=e(4948),v=e(8478),y=e(7838),d=e(2490),h=[0,0],x=[0,0];t.exports=function(t,r){var e,b;return 0===t||c(t)||f(t)?t:(l(h,t),r+=h[1],(r+=v(t=h[0]))<a?p(0,t):r>i?t<0?o:n:(r<=u?(r+=52,b=2220446049250313e-31):b=1,y(x,t),e=x[0],e&=2148532223,b*d(e|=r+s<<20,x[1])))}},4772:(t,r,e)=>{\"use strict\";var n=e(7548);t.exports=n},7548:t=>{\"use strict\";t.exports=Number},8478:(t,r,e)=>{\"use strict\";var n=e(4500);t.exports=n},4500:(t,r,e)=>{\"use strict\";var n=e(1921),o=e(3105),s=e(6315);t.exports=function(t){var r=n(t);return(r=(r&o)>>>20)-s|0}},2490:(t,r,e)=>{\"use strict\";var n=e(9639);t.exports=n},4445:(t,r,e)=>{\"use strict\";var n,o,s;!0===e(5902)?(o=1,s=0):(o=0,s=1),n={HIGH:o,LOW:s},t.exports=n},9639:(t,r,e)=>{\"use strict\";var n=e(4773),o=e(7382),s=e(4445),i=new o(1),u=new n(i.buffer),a=s.HIGH,c=s.LOW;t.exports=function(t,r){return u[a]=t,u[c]=r,i[0]}},5646:(t,r,e)=>{\"use strict\";var n;n=!0===e(5902)?1:0,t.exports=n},1921:(t,r,e)=>{\"use strict\";var n=e(6285);t.exports=n},6285:(t,r,e)=>{\"use strict\";var n=e(4773),o=e(7382),s=e(5646),i=new o(1),u=new n(i.buffer);t.exports=function(t){return i[0]=t,u[s]}},9024:(t,r,e)=>{\"use strict\";var n=e(6488),o=e(7011),s=e(1883),i=e(513);t.exports=function(t,r,e,u){return s(t)||o(t)?(r[u]=t,r[u+e]=0,r):0!==t&&i(t)<n?(r[u]=4503599627370496*t,r[u+e]=-52,r):(r[u]=t,r[u+e]=0,r)}},4948:(t,r,e)=>{\"use strict\";var n=e(7576),o=e(9422);n(o,\"assign\",e(9024)),t.exports=o},9422:(t,r,e)=>{\"use strict\";var n=e(9024);t.exports=function(t){return n(t,[0,0],1,0)}},5239:(t,r,e)=>{\"use strict\";var n=e(4773),o=e(7382),s=e(5782),i=new o(1),u=new n(i.buffer),a=s.HIGH,c=s.LOW;t.exports=function(t,r,e,n){return i[0]=t,r[n]=u[a],r[n+e]=u[c],r}},7838:(t,r,e)=>{\"use strict\";var n=e(7576),o=e(4010);n(o,\"assign\",e(5239)),t.exports=o},5782:(t,r,e)=>{\"use strict\";var n,o,s;!0===e(5902)?(o=1,s=0):(o=0,s=1),n={HIGH:o,LOW:s},t.exports=n},4010:(t,r,e)=>{\"use strict\";var n=e(5239);t.exports=function(t){return n(t,[0,0],1,0)}},7576:(t,r,e)=>{\"use strict\";var n=e(7063);t.exports=n},7063:(t,r,e)=>{\"use strict\";var n=e(6691);t.exports=function(t,r,e){n(t,r,{configurable:!1,enumerable:!1,writable:!1,value:e})}},2073:t=>{\"use strict\";var r=Object.defineProperty;t.exports=r},1680:t=>{\"use strict\";var r=\"function\"==typeof Object.defineProperty?Object.defineProperty:null;t.exports=r},1471:(t,r,e)=>{\"use strict\";var n=e(1680);t.exports=function(){try{return n({},\"x\",{}),!0}catch(t){return!1}}},6691:(t,r,e)=>{\"use strict\";var n,o=e(1471),s=e(2073),i=e(1309);n=o()?s:i,t.exports=n},1309:t=>{\"use strict\";var r=Object.prototype,e=r.toString,n=r.__defineGetter__,o=r.__defineSetter__,s=r.__lookupGetter__,i=r.__lookupSetter__;t.exports=function(t,u,a){var c,f,p,l;if(\"object\"!=typeof t||null===t||\"[object Array]\"===e.call(t))throw new TypeError(\"invalid argument. First argument must be an object. Value: `\"+t+\"`.\");if(\"object\"!=typeof a||null===a||\"[object Array]\"===e.call(a))throw new TypeError(\"invalid argument. Property descriptor must be an object. Value: `\"+a+\"`.\");if((f=\"value\"in a)&&(s.call(t,u)||i.call(t,u)?(c=t.__proto__,t.__proto__=r,delete t[u],t[u]=a.value,t.__proto__=c):t[u]=a.value),p=\"get\"in a,l=\"set\"in a,f&&(p||l))throw new Error(\"invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.\");return p&&n&&n.call(t,u,a.get),l&&o&&o.call(t,u,a.set),t}},6208:(t,r,e)=>{\"use strict\";var n,o=e(3123),s=e(7407),i=e(4210);n=o()?i:s,t.exports=n},7407:(t,r,e)=>{\"use strict\";var n=e(173);t.exports=function(t){return n.call(t)}},4210:(t,r,e)=>{\"use strict\";var n=e(9048),o=e(1403),s=e(173);t.exports=function(t){var r,e,i;if(null==t)return s.call(t);e=t[o],r=n(t,o);try{t[o]=void 0}catch(r){return s.call(t)}return i=s.call(t),r?t[o]=e:delete t[o],i}},173:t=>{\"use strict\";var r=Object.prototype.toString;t.exports=r},1403:t=>{\"use strict\";var r=\"function\"==typeof Symbol?Symbol.toStringTag:\"\";t.exports=r},7843:function(t){t.exports=function(t,r,e,n,o){for(r=r.split?r.split(\".\"):r,n=0;n<r.length;n++)t=t?t[r[n]]:o;return t===o?e:t}},374:(t,r,e)=>{\"use strict\";e.r(r),e.d(r,{default:()=>s});for(var n=[],o=0;o<64;)n[o]=0|4294967296*Math.sin(++o%Math.PI);function s(t){var r,e,s,i=[r=1732584193,e=4023233417,~r,~e],u=[],a=unescape(encodeURI(t))+\"\",c=a.length;for(t=--c/4+2|15,u[--t]=8*c;~c;)u[c>>2]|=a.charCodeAt(c)<<8*c--;for(o=a=0;o<t;o+=16){for(c=i;a<64;c=[s=c[3],r+((s=c[0]+[r&e|~r&s,s&r|~s&e,r^e^s,e^(r|~s)][c=a>>4]+n[a]+~~u[o|15&[a,5*a+1,3*a+5,7*a][c]])<<(c=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*c+a++%4])|s>>>-c),r,e])r=0|c[1],e=c[2];for(a=4;a;)i[--a]+=c[a]}for(t=\"\";a<32;)t+=(i[a>>3]>>4*(1^a++)&15).toString(16);return t}}},r={};function e(n){var o=r[n];if(void 0!==o)return o.exports;var s=r[n]={exports:{}};return t[n].call(s.exports,s,s.exports,e),s.exports}return e.d=(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),e.r=t=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e(2870)})()));","// @ts-ignore\nimport * as tsub from '../../vendor/tsub/tsub'\nimport type { Matcher, Rule, Store } from '../../vendor/tsub/types'\nimport { DestinationMiddlewareFunction } from '../middleware'\n\n// TODO: update tsub definition\ntype RoutingRuleMatcher = Matcher & {\n  config?: {\n    expr: string\n  }\n}\n\nexport type RoutingRule = Rule & {\n  matchers: RoutingRuleMatcher[]\n}\n\nexport const tsubMiddleware =\n  (rules: RoutingRule[]): DestinationMiddlewareFunction =>\n  ({ payload, integration, next }): void => {\n    const store = new tsub.Store(rules) as Store\n    const rulesToApply = store.getRulesByDestinationName(integration)\n\n    rulesToApply.forEach((rule: Rule) => {\n      const { matchers, transformers } = rule\n\n      for (let i = 0; i < matchers.length; i++) {\n        if (tsub.matches(payload.obj, matchers[i])) {\n          payload.obj = tsub.transform(payload.obj, transformers[i])\n\n          if (payload.obj === null) {\n            return next(null)\n          }\n        }\n      }\n    })\n\n    next(payload)\n  }\n","import { PlanEvent, TrackPlan } from '../core/events/interfaces'\n\n/**\n * Determines whether a track event is allowed to be sent based on the\n * user's tracking plan.\n * If the user does not have a tracking plan or the event is allowed based\n * on the tracking plan configuration, returns true.\n */\nexport function isPlanEventEnabled(\n  plan: TrackPlan | undefined,\n  planEvent: PlanEvent | undefined\n): boolean {\n  // Always prioritize the event's `enabled` status\n  if (typeof planEvent?.enabled === 'boolean') {\n    return planEvent.enabled\n  }\n\n  // Assume absence of a tracking plan means events are enabled\n  return plan?.__default?.enabled ?? true\n}\n","import { Analytics } from '../../core/analytics'\nimport { getNextIntegrationsURL } from '../../lib/parse-cdn'\nimport { Context } from '../../core/context'\nimport { User } from '../../core/user'\nimport { loadScript, unloadScript } from '../../lib/load-script'\nimport {\n  LegacyIntegration,\n  ClassicIntegrationBuilder,\n  ClassicIntegrationSource,\n} from './types'\nimport { RemoteIntegrationSettings } from '../../browser/settings'\n\nfunction normalizeName(name: string): string {\n  return name.toLowerCase().replace('.', '').replace(/\\s+/g, '-')\n}\n\nfunction obfuscatePathName(pathName: string, obfuscate = false): string | void {\n  return obfuscate ? btoa(pathName).replace(/=/g, '') : undefined\n}\n\nexport function resolveIntegrationNameFromSource(\n  integrationSource: ClassicIntegrationSource\n) {\n  return (\n    'Integration' in integrationSource\n      ? integrationSource.Integration\n      : integrationSource\n  ).prototype.name\n}\n\nfunction recordLoadMetrics(fullPath: string, ctx: Context, name: string): void {\n  try {\n    const [metric] =\n      window?.performance?.getEntriesByName(fullPath, 'resource') ?? []\n    // we assume everything that took under 100ms is cached\n    metric &&\n      ctx.stats.gauge('legacy_destination_time', Math.round(metric.duration), [\n        name,\n        ...(metric.duration < 100 ? ['cached'] : []),\n      ])\n  } catch (_) {\n    // not available\n  }\n}\n\nexport function buildIntegration(\n  integrationSource: ClassicIntegrationSource,\n  integrationSettings: { [key: string]: any },\n  analyticsInstance: Analytics\n): LegacyIntegration {\n  let integrationCtr: ClassicIntegrationBuilder\n  // GA and Appcues use a different interface to instantiating integrations\n  if ('Integration' in integrationSource) {\n    const analyticsStub = {\n      user: (): User => analyticsInstance.user(),\n      addIntegration: (): void => {},\n    }\n\n    integrationSource(analyticsStub)\n    integrationCtr = integrationSource.Integration\n  } else {\n    integrationCtr = integrationSource\n  }\n\n  const integration = new integrationCtr(integrationSettings)\n  integration.analytics = analyticsInstance\n  return integration\n}\n\nexport async function loadIntegration(\n  ctx: Context,\n  name: string,\n  version: string,\n  obfuscate?: boolean\n): Promise<ClassicIntegrationSource> {\n  const pathName = normalizeName(name)\n  const obfuscatedPathName = obfuscatePathName(pathName, obfuscate)\n  const path = getNextIntegrationsURL()\n\n  const fullPath = `${path}/integrations/${\n    obfuscatedPathName ?? pathName\n  }/${version}/${obfuscatedPathName ?? pathName}.dynamic.js.gz`\n\n  try {\n    await loadScript(fullPath)\n    recordLoadMetrics(fullPath, ctx, name)\n  } catch (err) {\n    ctx.stats.gauge('legacy_destination_time', -1, [`plugin:${name}`, `failed`])\n    throw err\n  }\n\n  // @ts-ignore\n  const deps: string[] = window[`${pathName}Deps`]\n  await Promise.all(deps.map((dep) => loadScript(path + dep + '.gz')))\n\n  // @ts-ignore\n  window[`${pathName}Loader`]()\n\n  return window[\n    // @ts-ignore\n    `${pathName}Integration`\n  ] as ClassicIntegrationSource\n}\n\nexport async function unloadIntegration(\n  name: string,\n  version: string,\n  obfuscate?: boolean\n): Promise<void> {\n  const path = getNextIntegrationsURL()\n  const pathName = normalizeName(name)\n  const obfuscatedPathName = obfuscatePathName(name, obfuscate)\n\n  const fullPath = `${path}/integrations/${\n    obfuscatedPathName ?? pathName\n  }/${version}/${obfuscatedPathName ?? pathName}.dynamic.js.gz`\n\n  return unloadScript(fullPath)\n}\n\nexport function resolveVersion(\n  integrationConfig?: RemoteIntegrationSettings\n): string {\n  return (\n    integrationConfig?.versionSettings?.override ??\n    integrationConfig?.versionSettings?.version ??\n    'latest'\n  )\n}\n","import { RemoteIntegrationSettings } from '../..'\nimport { IntegrationsInitOptions } from '../../browser/settings'\n\nexport const isInstallableIntegration = (\n  name: string,\n  integrationSettings: RemoteIntegrationSettings\n) => {\n  const { type, bundlingStatus, versionSettings } = integrationSettings\n  // We use `!== 'unbundled'` (versus `=== 'bundled'`) to be inclusive of\n  // destinations without a defined value for `bundlingStatus`\n  const deviceMode =\n    bundlingStatus !== 'unbundled' &&\n    (type === 'browser' || versionSettings?.componentTypes?.includes('browser'))\n\n  // checking for iterable is a quick fix we need in place to prevent\n  // errors showing Iterable as a failed destiantion. Ideally, we should\n  // fix the Iterable metadata instead, but that's a longer process.\n  return !name.startsWith('Segment') && name !== 'Iterable' && deviceMode\n}\n\nexport const isDisabledIntegration = (\n  integrationName: string,\n  integrations: IntegrationsInitOptions\n) => {\n  const allDisableAndNotDefined =\n    integrations.All === false && integrations[integrationName] === undefined\n\n  return integrations[integrationName] === false || allDisableAndNotDefined\n}\n","import { JSONObject } from '../../core/events'\nimport { Alias, Facade, Group, Identify, Page, Track } from '@segment/facade'\nimport { Analytics, InitOptions } from '../../core/analytics'\nimport { CDNSettings } from '../../browser'\nimport { isOffline, isOnline } from '../../core/connection'\nimport { Context, ContextCancelation } from '../../core/context'\nimport { isServer } from '../../core/environment'\nimport { InternalPluginWithAddMiddleware, Plugin } from '../../core/plugin'\nimport { attempt } from '@segment/analytics-core'\nimport { isPlanEventEnabled } from '../../lib/is-plan-event-enabled'\nimport { mergedOptions } from '../../lib/merged-options'\nimport { pWhile } from '../../lib/p-while'\nimport { PriorityQueue } from '../../lib/priority-queue'\nimport { PersistedPriorityQueue } from '../../lib/priority-queue/persisted'\nimport {\n  applyDestinationMiddleware,\n  DestinationMiddlewareFunction,\n} from '../middleware'\nimport {\n  buildIntegration,\n  loadIntegration,\n  resolveIntegrationNameFromSource,\n  resolveVersion,\n  unloadIntegration,\n} from './loader'\nimport { LegacyIntegration, ClassicIntegrationSource } from './types'\nimport { isPlainObject } from '@segment/analytics-core'\nimport {\n  isDisabledIntegration as shouldSkipIntegration,\n  isInstallableIntegration,\n} from './utils'\nimport { recordIntegrationMetric } from '../../core/stats/metric-helpers'\nimport { createDeferred } from '@segment/analytics-generic-utils'\nimport { IntegrationsInitOptions } from '../../browser/settings'\n\nexport type ClassType<T> = new (...args: unknown[]) => T\n\nasync function flushQueue(\n  xt: Plugin,\n  queue: PriorityQueue<Context>\n): Promise<PriorityQueue<Context>> {\n  const failedQueue: Context[] = []\n\n  if (isOffline()) {\n    return queue\n  }\n\n  await pWhile(\n    () => queue.length > 0 && isOnline(),\n    async () => {\n      const ctx = queue.pop()\n      if (!ctx) {\n        return\n      }\n\n      const result = await attempt(ctx, xt)\n      const success = result instanceof Context\n      if (!success) {\n        failedQueue.push(ctx)\n      }\n    }\n  )\n\n  // re-add failed tasks\n  failedQueue.map((failed) => queue.pushWithBackoff(failed))\n  return queue\n}\n\nexport class LegacyDestination implements InternalPluginWithAddMiddleware {\n  name: string\n  version: string\n  settings: JSONObject\n  options: InitOptions = {}\n  readonly type = 'destination'\n  middleware: DestinationMiddlewareFunction[] = []\n\n  private _ready: boolean | undefined\n  private _initialized: boolean | undefined\n  private onReady: Promise<unknown> | undefined\n  private initializePromise = createDeferred<boolean>()\n  private disableAutoISOConversion: boolean\n\n  integrationSource?: ClassicIntegrationSource\n  integration: LegacyIntegration | undefined\n\n  buffer: PriorityQueue<Context>\n  flushing = false\n\n  constructor(\n    name: string,\n    version: string,\n    writeKey: string,\n    settings: JSONObject = {},\n    options: InitOptions,\n    integrationSource?: ClassicIntegrationSource\n  ) {\n    this.name = name\n    this.version = version\n    this.settings = { ...settings }\n    this.disableAutoISOConversion = options.disableAutoISOConversion || false\n    this.integrationSource = integrationSource\n\n    // AJS-Renderer sets an extraneous `type` setting that clobbers\n    // existing type defaults. We need to remove it if it's present\n    if (this.settings['type'] && this.settings['type'] === 'browser') {\n      delete this.settings['type']\n    }\n\n    this.initializePromise.promise.then(\n      (isInitialized) => (this._initialized = isInitialized),\n      () => {}\n    )\n\n    this.options = options\n    this.buffer = options.disableClientPersistence\n      ? new PriorityQueue(4, [])\n      : new PersistedPriorityQueue(4, `${writeKey}:dest-${name}`)\n\n    this.scheduleFlush()\n  }\n\n  isLoaded(): boolean {\n    return !!this._ready\n  }\n\n  ready(): Promise<unknown> {\n    return this.initializePromise.promise.then(\n      () => this.onReady ?? Promise.resolve()\n    )\n  }\n\n  async load(ctx: Context, analyticsInstance: Analytics): Promise<void> {\n    if (this._ready || this.onReady !== undefined) {\n      return\n    }\n\n    const integrationSource =\n      this.integrationSource ??\n      (await loadIntegration(\n        ctx,\n        this.name,\n        this.version,\n        this.options.obfuscate\n      ))\n\n    this.integration = buildIntegration(\n      integrationSource,\n      this.settings,\n      analyticsInstance\n    )\n\n    this.onReady = new Promise((resolve) => {\n      const onReadyFn = (): void => {\n        this._ready = true\n        resolve(true)\n      }\n\n      this.integration!.once('ready', onReadyFn)\n    })\n\n    this.integration!.on('initialize', () => {\n      this.initializePromise.resolve(true)\n    })\n\n    try {\n      recordIntegrationMetric(ctx, {\n        integrationName: this.name,\n        methodName: 'initialize',\n        type: 'classic',\n      })\n      this.integration.initialize()\n    } catch (error) {\n      recordIntegrationMetric(ctx, {\n        integrationName: this.name,\n        methodName: 'initialize',\n        type: 'classic',\n        didError: true,\n      })\n      this.initializePromise.resolve(false)\n      throw error\n    }\n  }\n\n  unload(_ctx: Context, _analyticsInstance: Analytics): Promise<void> {\n    return unloadIntegration(this.name, this.version, this.options.obfuscate)\n  }\n\n  addMiddleware(...fn: DestinationMiddlewareFunction[]): void {\n    this.middleware = this.middleware.concat(...fn)\n  }\n\n  shouldBuffer(ctx: Context): boolean {\n    return (\n      // page events can't be buffered because of destinations that automatically add page views\n      ctx.event.type !== 'page' &&\n      (isOffline() || this._ready !== true || this._initialized !== true)\n    )\n  }\n\n  private async send<T extends Facade>(\n    ctx: Context,\n    clz: ClassType<T>,\n    eventType: 'track' | 'identify' | 'page' | 'alias' | 'group'\n  ): Promise<Context> {\n    if (this.shouldBuffer(ctx)) {\n      this.buffer.push(ctx)\n      this.scheduleFlush()\n      return ctx\n    }\n\n    const plan = this.options?.plan?.track\n    const ev = ctx.event.event\n\n    if (plan && ev && this.name !== 'Segment.io') {\n      // events are always sent to segment (legacy behavior)\n      const planEvent = plan[ev]\n      if (!isPlanEventEnabled(plan, planEvent)) {\n        ctx.updateEvent('integrations', {\n          ...ctx.event.integrations,\n          All: false,\n          'Segment.io': true,\n        })\n        ctx.cancel(\n          new ContextCancelation({\n            retry: false,\n            reason: `Event ${ev} disabled for integration ${this.name} in tracking plan`,\n            type: 'Dropped by plan',\n          })\n        )\n      } else {\n        ctx.updateEvent('integrations', {\n          ...ctx.event.integrations,\n          ...planEvent?.integrations,\n        })\n      }\n\n      if (planEvent?.enabled && planEvent?.integrations![this.name] === false) {\n        ctx.cancel(\n          new ContextCancelation({\n            retry: false,\n            reason: `Event ${ev} disabled for integration ${this.name} in tracking plan`,\n            type: 'Dropped by plan',\n          })\n        )\n      }\n    }\n\n    const afterMiddleware = await applyDestinationMiddleware(\n      this.name,\n      ctx.event,\n      this.middleware\n    )\n\n    if (afterMiddleware === null) {\n      return ctx\n    }\n\n    const event = new clz(afterMiddleware, {\n      traverse: !this.disableAutoISOConversion,\n    })\n\n    recordIntegrationMetric(ctx, {\n      integrationName: this.name,\n      methodName: eventType,\n      type: 'classic',\n    })\n\n    try {\n      if (this.integration) {\n        await this.integration!.invoke.call(this.integration, eventType, event)\n      }\n    } catch (err) {\n      recordIntegrationMetric(ctx, {\n        integrationName: this.name,\n        methodName: eventType,\n        type: 'classic',\n        didError: true,\n      })\n      throw err\n    }\n\n    return ctx\n  }\n\n  async track(ctx: Context): Promise<Context> {\n    return this.send(ctx, Track as ClassType<Track>, 'track')\n  }\n\n  async page(ctx: Context): Promise<Context> {\n    if (this.integration?._assumesPageview && !this._initialized) {\n      this.integration.initialize()\n    }\n\n    await this.initializePromise.promise\n    return this.send(ctx, Page as ClassType<Page>, 'page')\n  }\n\n  async identify(ctx: Context): Promise<Context> {\n    return this.send(ctx, Identify as ClassType<Identify>, 'identify')\n  }\n\n  async alias(ctx: Context): Promise<Context> {\n    return this.send(ctx, Alias as ClassType<Alias>, 'alias')\n  }\n\n  async group(ctx: Context): Promise<Context> {\n    return this.send(ctx, Group as ClassType<Group>, 'group')\n  }\n\n  private scheduleFlush(): void {\n    if (this.flushing) {\n      return\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    setTimeout(async () => {\n      if (isOffline() || this._ready !== true || this._initialized !== true) {\n        this.scheduleFlush()\n        return\n      }\n\n      this.flushing = true\n      this.buffer = await flushQueue(this, this.buffer)\n      this.flushing = false\n\n      if (this.buffer.todo > 0) {\n        this.scheduleFlush()\n      }\n    }, Math.random() * 5000)\n  }\n}\n\nexport function ajsDestinations(\n  writeKey: string,\n  settings: CDNSettings,\n  integrations: IntegrationsInitOptions = {},\n  options: InitOptions = {},\n  routingMiddleware?: DestinationMiddlewareFunction,\n  legacyIntegrationSources?: ClassicIntegrationSource[]\n): LegacyDestination[] {\n  if (isServer()) {\n    return []\n  }\n\n  if (settings.plan) {\n    options = options ?? {}\n    options.plan = settings.plan\n  }\n\n  const routingRules = settings.middlewareSettings?.routingRules ?? []\n  const remoteIntegrationsConfig = settings.integrations\n  const localIntegrationsConfig = options.integrations\n  // merged remote CDN settings with user provided options\n  const integrationOptions = mergedOptions(settings, options ?? {}) as Record<\n    string,\n    JSONObject\n  >\n\n  const adhocIntegrationSources = legacyIntegrationSources?.reduce(\n    (acc, integrationSource) => ({\n      ...acc,\n      [resolveIntegrationNameFromSource(integrationSource)]: integrationSource,\n    }),\n    {} as Record<string, ClassicIntegrationSource>\n  )\n\n  const installableIntegrations = new Set([\n    // Remotely configured installable integrations\n    ...Object.keys(remoteIntegrationsConfig).filter((name) =>\n      isInstallableIntegration(name, remoteIntegrationsConfig[name])\n    ),\n\n    // Directly provided integration sources are only installable if settings for them are available\n    ...Object.keys(adhocIntegrationSources || {}).filter(\n      (name) =>\n        isPlainObject(remoteIntegrationsConfig[name]) ||\n        isPlainObject(localIntegrationsConfig?.[name])\n    ),\n  ])\n\n  return Array.from(installableIntegrations)\n    .filter((name) => !shouldSkipIntegration(name, integrations))\n    .map((name) => {\n      const integrationSettings = remoteIntegrationsConfig[name]\n      const version = resolveVersion(integrationSettings)\n      const destination = new LegacyDestination(\n        name,\n        version,\n        writeKey,\n        integrationOptions[name],\n        options,\n        adhocIntegrationSources?.[name]\n      )\n\n      const routing = routingRules.filter(\n        (rule) => rule.destinationName === name\n      )\n      if (routing.length > 0 && routingMiddleware) {\n        destination.addMiddleware(routingMiddleware)\n      }\n\n      return destination\n    })\n}\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.analyticsVideoPlugins=t():e.analyticsVideoPlugins=t()}(window,(function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=2)}([function(e,t,a){\"use strict\";a.r(t);var n=\"function\"==typeof fetch?fetch.bind():function(e,t){return t=t||{},new Promise((function(a,n){var i=new XMLHttpRequest;for(var r in i.open(t.method||\"get\",e,!0),t.headers)i.setRequestHeader(r,t.headers[r]);function o(){var e,t=[],a=[],n={};return i.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,(function(i,r,o){t.push(r=r.toLowerCase()),a.push([r,o]),e=n[r],n[r]=e?e+\",\"+o:o})),{ok:2==(i.status/100|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:o,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return t},entries:function(){return a},get:function(e){return n[e.toLowerCase()]},has:function(e){return e.toLowerCase()in n}}}}i.withCredentials=\"include\"==t.credentials,i.onload=function(){a(o())},i.onerror=n,i.send(t.body)}))};t.default=n},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var i=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.pluginName=t}return n(e,[{key:\"track\",value:function(e,t){window.analytics.track(e,t,{integration:{name:this.pluginName}})}}]),e}();t.default=i},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.YouTubeAnalytics=t.VimeoAnalytics=void 0;var n=r(a(3)),i=r(a(4));function r(e){return e&&e.__esModule?e:{default:e}}t.VimeoAnalytics=n.default,t.YouTubeAnalytics=i.default},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=r(a(0));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,\"VimeoAnalytics\"));return n.authToken=a,n.player=e,n.metadata={content:{},playback:{videoPlayer:\"Vimeo\"}},n.mostRecentHeartbeat=0,n.isPaused=!1,n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:\"initialize\",value:function(){var e=this,t={loaded:this.retrieveMetadata,play:this.trackPlay,pause:this.trackPause,ended:this.trackEnded,timeupdate:this.trackHeartbeat};for(var a in t)this.registerHandler(a,t[a]);this.player.getVideoId().then((function(t){e.retrieveMetadata({id:t})})).catch(console.error)}},{key:\"registerHandler\",value:function(e,t){var a=this;this.player.on(e,(function(e){a.updateMetadata(e),t.call(a,e)}))}},{key:\"trackPlay\",value:function(){this.isPaused?(this.track(\"Video Playback Resumed\",this.metadata.playback),this.isPaused=!1):(this.track(\"Video Playback Started\",this.metadata.playback),this.track(\"Video Content Started\",this.metadata.content))}},{key:\"trackEnded\",value:function(){this.track(\"Video Playback Completed\",this.metadata.playback),this.track(\"Video Content Completed\",this.metadata.content)}},{key:\"trackHeartbeat\",value:function(){var e=this.mostRecentHeartbeat,t=this.metadata.playback.position;t!==e&&t-e>=10&&(this.track(\"Video Content Playing\",this.metadata.content),this.mostRecentHeartbeat=Math.floor(t))}},{key:\"trackPause\",value:function(){this.isPaused=!0,this.track(\"Video Playback Paused\",this.metadata.playback)}},{key:\"retrieveMetadata\",value:function(e){var t=this;return new Promise((function(a,n){var r=e.id;(0,i.default)(\"https://api.vimeo.com/videos/\"+r,{headers:{Authorization:\"Bearer \"+t.authToken}}).then((function(e){return e.ok?e.json():n(e)})).then((function(e){t.metadata.content.title=e.name,t.metadata.content.description=e.description,t.metadata.content.publisher=e.user.name,t.metadata.playback.position=0,t.metadata.playback.totalLength=e.duration})).catch((function(e){return console.error(\"Request to Vimeo API Failed with: \",e),n(e)}))}))}},{key:\"updateMetadata\",value:function(e){var t=this;return new Promise((function(a,n){t.player.getVolume().then((function(n){n&&(t.metadata.playback.sound=100*n),t.metadata.playback.position=e.seconds,a()})).catch(n)}))}}]),t}(r(a(1)).default);t.default=o},function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=o(a(0)),r=o(a(1));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,\"YoutubeAnalytics\"));return n.player=e,n.apiKey=a,n.playerLoaded=!1,n.playbackStarted=!1,n.contentStarted=!1,n.isPaused=!1,n.isBuffering=!1,n.isSeeking=!1,n.lastRecordedTime={timeReported:Date.now(),timeElapsed:0},n.metadata=[{playback:{video_player:\"youtube\"},content:{}}],n.playlistIndex=0,n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:\"initialize\",value:function(){window.segmentYoutubeOnStateChange=this.onPlayerStateChange.bind(this),window.segmentYoutubeOnReady=this.onPlayerReady.bind(this),this.player.addEventListener(\"onReady\",\"segmentYoutubeOnReady\"),this.player.addEventListener(\"onStateChange\",\"segmentYoutubeOnStateChange\")}},{key:\"onPlayerReady\",value:function(e){this.retrieveMetadata()}},{key:\"onPlayerStateChange\",value:function(e){var t=this.player.getCurrentTime();switch(this.metadata[this.playlistIndex]&&(this.metadata[this.playlistIndex].playback.position=this.metadata[this.playlistIndex].content.position=t,this.metadata[this.playlistIndex].playback.quality=this.player.getPlaybackQuality(),this.metadata[this.playlistIndex].playback.sound=this.player.isMuted()?0:this.player.getVolume()),e.data){case-1:if(this.playerLoaded)break;this.retrieveMetadata(),this.playerLoaded=!0;break;case YT.PlayerState.BUFFERING:this.handleBuffer();break;case YT.PlayerState.PLAYING:this.handlePlay();break;case YT.PlayerState.PAUSED:this.handlePause();break;case YT.PlayerState.ENDED:this.handleEnd()}this.lastRecordedTime={timeReported:Date.now(),timeElapsed:1e3*this.player.getCurrentTime()}}},{key:\"retrieveMetadata\",value:function(){var e=this;return new Promise((function(t,a){var n=e.player.getVideoData(),r=e.player.getPlaylist()||[n.video_id],o=r.join();(0,i.default)(\"https://www.googleapis.com/youtube/v3/videos?id=\"+o+\"&part=snippet,contentDetails&key=\"+e.apiKey).then((function(e){if(!e.ok){var t=new Error(\"Segment request to Youtube API failed (likely due to a bad API Key. Events will still be sent but will not contain video metadata)\");throw t.response=e,t}return e.json()})).then((function(a){e.metadata=[];for(var n=0,i=0;i<r.length;i++){var o=a.items[i];e.metadata.push({content:{title:o.snippet.title,description:o.snippet.description,keywords:o.snippet.tags,channel:o.snippet.channelTitle,airdate:o.snippet.publishedAt}}),n+=l(o.contentDetails.duration)}for(i=0;i<r.length;i++)e.metadata[i].playback={total_length:n,video_player:\"youtube\"};t()})).catch((function(t){e.metadata=r.map((function(e){return{playback:{video_player:\"youtube\"},content:{}}})),a(t)}))}))}},{key:\"handleBuffer\",value:function(){var e=this.determineSeek();this.playbackStarted||(this.playbackStarted=!0,this.track(\"Video Playback Started\",this.metadata[this.playlistIndex].playback)),e&&!this.isSeeking&&(this.isSeeking=!0,this.track(\"Video Playback Seek Started\",this.metadata[this.playlistIndex].playback)),this.isSeeking&&(this.track(\"Video Playback Seek Completed\",this.metadata[this.playlistIndex].playback),this.isSeeking=!1);var t=this.player.getPlaylist();t&&0===this.player.getCurrentTime()&&this.player.getPlaylistIndex()!==this.playlistIndex&&(this.contentStarted=!1,this.playlistIndex===t.length-1&&0===this.player.getPlaylistIndex()&&(this.track(\"Video Playback Completed\",this.metadata[this.player.getPlaylistIndex()].playback),this.track(\"Video Playback Started\",this.metadata[this.player.getPlaylistIndex()].playback))),this.track(\"Video Playback Buffer Started\",this.metadata[this.playlistIndex].playback),this.isBuffering=!0}},{key:\"handlePlay\",value:function(){this.contentStarted||(this.playlistIndex=this.player.getPlaylistIndex(),-1===this.playlistIndex&&(this.playlistIndex=0),this.track(\"Video Content Started\",this.metadata[this.playlistIndex].content),this.contentStarted=!0),this.isBuffering&&(this.track(\"Video Playback Buffer Completed\",this.metadata[this.playlistIndex].playback),this.isBuffering=!1),this.isPaused&&(this.track(\"Video Playback Resumed\",this.metadata[this.playlistIndex].playback),this.isPaused=!1)}},{key:\"handlePause\",value:function(){var e=this.determineSeek();this.isBuffering&&(this.track(\"Video Playback Buffer Completed\",this.metadata[this.playlistIndex].playback),this.isBuffering=!1),this.isPaused||(e?(this.track(\"Video Playback Seek Started\",this.metadata[this.playlistIndex].playback),this.isSeeking=!0):(this.track(\"Video Playback Paused\",this.metadata[this.playlistIndex].playback),this.isPaused=!0))}},{key:\"handleEnd\",value:function(){this.track(\"Video Content Completed\",this.metadata[this.playlistIndex].content),this.contentStarted=!1;var e=this.player.getPlaylistIndex(),t=this.player.getPlaylist();(t&&e===t.length-1||-1===e)&&(this.track(\"Video Playback Completed\",this.metadata[this.playlistIndex].playback),this.playbackStarted=!1)}},{key:\"determineSeek\",value:function(){var e=this.isPaused||this.isBuffering?0:Date.now()-this.lastRecordedTime.timeReported,t=1e3*this.player.getCurrentTime()-this.lastRecordedTime.timeElapsed;return Math.abs(e-t)>2e3}}]),t}(r.default);function l(e){var t=e.match(/PT(\\d+H)?(\\d+M)?(\\d+S)?/);return t=t.slice(1).map((function(e){if(null!=e)return e.replace(/\\D/,\"\")})),3600*(parseInt(t[0])||0)+60*(parseInt(t[1])||0)+(parseInt(t[2])||0)}t.default=s}])}));","import { Analytics } from '../../core/analytics'\n\nexport async function loadLegacyVideoPlugins(\n  analytics: Analytics\n): Promise<void> {\n  const plugins = await import(\n    // @ts-expect-error\n    '@segment/analytics.js-video-plugins/dist/index.umd.js'\n  )\n\n  // This is super gross, but we need to support the `window.analytics.plugins` namespace\n  // that is linked in the segment docs in order to be backwards compatible with ajs-classic\n\n  // @ts-expect-error\n  analytics._plugins = plugins\n}\n","import { CDNSettings } from '../../browser'\nimport { Context } from '../../core/context'\nimport { PlanEvent, TrackPlan } from '../../core/events/interfaces'\nimport { Plugin } from '../../core/plugin'\nimport { isPlanEventEnabled } from '../../lib/is-plan-event-enabled'\nimport { RemotePlugin } from '../remote-loader'\n\nfunction disabledActionDestinations(\n  plan: PlanEvent | undefined,\n  settings: CDNSettings\n): { [destination: string]: string[] } {\n  if (!plan || !Object.keys(plan)) {\n    return {}\n  }\n\n  const disabledIntegrations = plan.integrations\n    ? Object.keys(plan.integrations).filter(\n        (i) => plan.integrations![i] === false\n      )\n    : []\n\n  // This accounts for cases like Fullstory, where the settings.integrations\n  // contains a \"Fullstory\" object but settings.remotePlugins contains \"Fullstory (Actions)\"\n  const disabledRemotePlugins: string[] = []\n  ;(settings.remotePlugins ?? []).forEach((p: RemotePlugin) => {\n    disabledIntegrations.forEach((int) => {\n      if (p.creationName == int) {\n        disabledRemotePlugins.push(p.name)\n      }\n    })\n  })\n\n  return (settings.remotePlugins ?? []).reduce((acc, p) => {\n    if (p.settings['subscriptions']) {\n      if (disabledRemotePlugins.includes(p.name)) {\n        // @ts-expect-error element implicitly has an 'any' type because p.settings is a JSONObject\n        p.settings['subscriptions'].forEach(\n          // @ts-expect-error parameter 'sub' implicitly has an 'any' type\n          (sub) => (acc[`${p.name} ${sub.partnerAction}`] = false)\n        )\n      }\n    }\n    return acc\n  }, {})\n}\n\nexport function schemaFilter(\n  track: TrackPlan | undefined,\n  settings: CDNSettings\n): Plugin {\n  function filter(ctx: Context): Context {\n    const plan = track\n    const ev = ctx.event.event\n\n    if (plan && ev) {\n      const planEvent = plan[ev]\n      if (!isPlanEventEnabled(plan, planEvent)) {\n        ctx.updateEvent('integrations', {\n          ...ctx.event.integrations,\n          All: false,\n          'Segment.io': true,\n        })\n        return ctx\n      } else {\n        const disabledActions = disabledActionDestinations(planEvent, settings)\n\n        ctx.updateEvent('integrations', {\n          ...ctx.event.integrations,\n          ...planEvent?.integrations,\n          ...disabledActions,\n        })\n      }\n    }\n\n    return ctx\n  }\n\n  return {\n    name: 'Schema Filter',\n    version: '0.1.0',\n    isLoaded: () => true,\n    load: () => Promise.resolve(),\n    type: 'before',\n    page: filter,\n    alias: filter,\n    track: filter,\n    identify: filter,\n    group: filter,\n  }\n}\n","import { CDNSettings } from '../../browser'\nimport { Context } from '../../core/context'\nimport { isServer } from '../../core/environment'\nimport { loadScript } from '../../lib/load-script'\nimport { getNextIntegrationsURL } from '../../lib/parse-cdn'\nimport { MiddlewareFunction } from '../middleware'\n\nexport async function remoteMiddlewares(\n  ctx: Context,\n  settings: CDNSettings,\n  obfuscate?: boolean\n): Promise<MiddlewareFunction[]> {\n  if (isServer()) {\n    return []\n  }\n  const path = getNextIntegrationsURL()\n  const remoteMiddleware = settings.enabledMiddleware ?? {}\n  const names = Object.entries(remoteMiddleware)\n    .filter(([_, enabled]) => enabled)\n    .map(([name]) => name)\n\n  const scripts = names.map(async (name) => {\n    const nonNamespaced = name.replace('@segment/', '')\n    let bundleName = nonNamespaced\n    if (obfuscate) {\n      bundleName = btoa(nonNamespaced).replace(/=/g, '')\n    }\n    const fullPath = `${path}/middleware/${bundleName}/latest/${bundleName}.js.gz`\n\n    try {\n      await loadScript(fullPath)\n      // @ts-ignore\n      return window[`${nonNamespaced}Middleware`] as MiddlewareFunction\n    } catch (error: any) {\n      ctx.log('error', error)\n      ctx.stats.increment('failed_remote_middleware')\n    }\n  })\n\n  let middleware = await Promise.all(scripts)\n  middleware = middleware.filter(Boolean)\n\n  return middleware as MiddlewareFunction[]\n}\n","export { TrackingSdkFactory } from \"./sdk\";\n","import type { Environment } from \"../sdk.types\";\n\nexport interface EnvironmentConfig {\n  BUY_API_URL: string;\n  FIREBASE_API_KEY: string;\n  FIREBASE_AUTH_DOMAIN: string;\n  FIREBASE_PROJECT_ID: string;\n  FIREBASE_STORAGE_BUCKET: string;\n  FIREBASE_MESSAGING_SENDER_ID: string;\n  FIREBASE_APP_ID: string;\n  SEGMENT_WRITE_KEY: string;\n  FIREBASE_MIN_FETCH_INTERVAL_MS?: number;\n}\n\nexport const environmentConfig: Record<Environment, EnvironmentConfig> = {\n  staging: {\n    BUY_API_URL: \"https://buy.api.live.ppr.ledger-test.com\",\n    FIREBASE_API_KEY: \"AIzaSyAIAfZg0OiTitWI8VhC5EAteiG55YV58aI\",\n    FIREBASE_AUTH_DOMAIN: \"buy-sell-live-app-staging.firebaseapp.com\",\n    FIREBASE_PROJECT_ID: \"buy-sell-live-app-staging\",\n    FIREBASE_STORAGE_BUCKET: \"buy-sell-live-app-staging.appspot.com\",\n    FIREBASE_MESSAGING_SENDER_ID: \"996080982816\",\n    FIREBASE_APP_ID: \"1:996080982816:web:fe9b2f6d848cc66ec49545\",\n    SEGMENT_WRITE_KEY: \"1IEy9yPIYksh4yrYeKvYciLgXS9HJDbA\",\n    FIREBASE_MIN_FETCH_INTERVAL_MS: 0,\n  },\n  production: {\n    BUY_API_URL: \"https://buy.api.live.ledger.com\",\n    FIREBASE_API_KEY: \"AIzaSyAIAfZg0OiTitWI8VhC5EAteiG55YV58aI\",\n    FIREBASE_AUTH_DOMAIN: \"buy-sell-live-app-staging.firebaseapp.com\",\n    FIREBASE_PROJECT_ID: \"buy-sell-live-app-staging\",\n    FIREBASE_STORAGE_BUCKET: \"buy-sell-live-app-staging.appspot.com\",\n    FIREBASE_MESSAGING_SENDER_ID: \"996080982816\",\n    FIREBASE_APP_ID: \"1:996080982816:web:fe9b2f6d848cc66ec49545\",\n    SEGMENT_WRITE_KEY: \"STAGING_SEGMENT_WRITE_KEY\",\n    FIREBASE_MIN_FETCH_INTERVAL_MS: 7200000, // 2 hours\n  },\n};\n","export * as core from \"../core/index.js\";\nexport * from \"./schemas.js\";\nexport * from \"./checks.js\";\nexport * from \"./errors.js\";\nexport * from \"./parse.js\";\nexport * from \"./compat.js\";\n// zod-specified\nimport { config } from \"../core/index.js\";\nimport en from \"../locales/en.js\";\nconfig(en());\nexport { globalRegistry, registry, config, $output, $input, $brand, clone, regexes, treeifyError, prettifyError, formatError, flattenError, toJSONSchema, TimePrecision, util, NEVER, } from \"../core/index.js\";\nexport * as locales from \"../locales/index.js\";\n// iso\n// must be exported from top-level\n// https://github.com/colinhacks/zod/issues/4491\nexport { ZodISODateTime, ZodISODate, ZodISOTime, ZodISODuration } from \"./iso.js\";\nexport * as iso from \"./iso.js\";\nexport * as coerce from \"./coerce.js\";\n","export * from \"./core.js\";\nexport * from \"./parse.js\";\nexport * from \"./errors.js\";\nexport * from \"./schemas.js\";\nexport * from \"./checks.js\";\nexport * from \"./versions.js\";\nexport * as util from \"./util.js\";\nexport * as regexes from \"./regexes.js\";\nexport * as locales from \"../locales/index.js\";\nexport * from \"./registries.js\";\nexport * from \"./doc.js\";\nexport * from \"./api.js\";\nexport * from \"./to-json-schema.js\";\nexport * as JSONSchema from \"./json-schema.js\";\n","/** A special constant with type `never` */\nexport const NEVER = Object.freeze({\n    status: \"aborted\",\n});\nexport /*@__NO_SIDE_EFFECTS__*/ function $constructor(name, initializer, params) {\n    function init(inst, def) {\n        var _a;\n        Object.defineProperty(inst, \"_zod\", {\n            value: inst._zod ?? {},\n            enumerable: false,\n        });\n        (_a = inst._zod).traits ?? (_a.traits = new Set());\n        inst._zod.traits.add(name);\n        initializer(inst, def);\n        // support prototype modifications\n        for (const k in _.prototype) {\n            if (!(k in inst))\n                Object.defineProperty(inst, k, { value: _.prototype[k].bind(inst) });\n        }\n        inst._zod.constr = _;\n        inst._zod.def = def;\n    }\n    // doesn't work if Parent has a constructor with arguments\n    const Parent = params?.Parent ?? Object;\n    class Definition extends Parent {\n    }\n    Object.defineProperty(Definition, \"name\", { value: name });\n    function _(def) {\n        var _a;\n        const inst = params?.Parent ? new Definition() : this;\n        init(inst, def);\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        for (const fn of inst._zod.deferred) {\n            fn();\n        }\n        return inst;\n    }\n    Object.defineProperty(_, \"init\", { value: init });\n    Object.defineProperty(_, Symbol.hasInstance, {\n        value: (inst) => {\n            if (params?.Parent && inst instanceof params.Parent)\n                return true;\n            return inst?._zod?.traits?.has(name);\n        },\n    });\n    Object.defineProperty(_, \"name\", { value: name });\n    return _;\n}\n//////////////////////////////   UTILITIES   ///////////////////////////////////////\nexport const $brand = Symbol(\"zod_brand\");\nexport class $ZodAsyncError extends Error {\n    constructor() {\n        super(`Encountered Promise during synchronous parse. Use .parseAsync() instead.`);\n    }\n}\nexport class $ZodEncodeError extends Error {\n    constructor(name) {\n        super(`Encountered unidirectional transform during encode: ${name}`);\n        this.name = \"ZodEncodeError\";\n    }\n}\nexport const globalConfig = {};\nexport function config(newConfig) {\n    if (newConfig)\n        Object.assign(globalConfig, newConfig);\n    return globalConfig;\n}\n","// functions\nexport function assertEqual(val) {\n    return val;\n}\nexport function assertNotEqual(val) {\n    return val;\n}\nexport function assertIs(_arg) { }\nexport function assertNever(_x) {\n    throw new Error();\n}\nexport function assert(_) { }\nexport function getEnumValues(entries) {\n    const numericValues = Object.values(entries).filter((v) => typeof v === \"number\");\n    const values = Object.entries(entries)\n        .filter(([k, _]) => numericValues.indexOf(+k) === -1)\n        .map(([_, v]) => v);\n    return values;\n}\nexport function joinValues(array, separator = \"|\") {\n    return array.map((val) => stringifyPrimitive(val)).join(separator);\n}\nexport function jsonStringifyReplacer(_, value) {\n    if (typeof value === \"bigint\")\n        return value.toString();\n    return value;\n}\nexport function cached(getter) {\n    const set = false;\n    return {\n        get value() {\n            if (!set) {\n                const value = getter();\n                Object.defineProperty(this, \"value\", { value });\n                return value;\n            }\n            throw new Error(\"cached value already set\");\n        },\n    };\n}\nexport function nullish(input) {\n    return input === null || input === undefined;\n}\nexport function cleanRegex(source) {\n    const start = source.startsWith(\"^\") ? 1 : 0;\n    const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n    return source.slice(start, end);\n}\nexport function floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepString = step.toString();\n    let stepDecCount = (stepString.split(\".\")[1] || \"\").length;\n    if (stepDecCount === 0 && /\\d?e-\\d?/.test(stepString)) {\n        const match = stepString.match(/\\d?e-(\\d?)/);\n        if (match?.[1]) {\n            stepDecCount = Number.parseInt(match[1]);\n        }\n    }\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nconst EVALUATING = Symbol(\"evaluating\");\nexport function defineLazy(object, key, getter) {\n    let value = undefined;\n    Object.defineProperty(object, key, {\n        get() {\n            if (value === EVALUATING) {\n                // Circular reference detected, return undefined to break the cycle\n                return undefined;\n            }\n            if (value === undefined) {\n                value = EVALUATING;\n                value = getter();\n            }\n            return value;\n        },\n        set(v) {\n            Object.defineProperty(object, key, {\n                value: v,\n                // configurable: true,\n            });\n            // object[key] = v;\n        },\n        configurable: true,\n    });\n}\nexport function objectClone(obj) {\n    return Object.create(Object.getPrototypeOf(obj), Object.getOwnPropertyDescriptors(obj));\n}\nexport function assignProp(target, prop, value) {\n    Object.defineProperty(target, prop, {\n        value,\n        writable: true,\n        enumerable: true,\n        configurable: true,\n    });\n}\nexport function mergeDefs(...defs) {\n    const mergedDescriptors = {};\n    for (const def of defs) {\n        const descriptors = Object.getOwnPropertyDescriptors(def);\n        Object.assign(mergedDescriptors, descriptors);\n    }\n    return Object.defineProperties({}, mergedDescriptors);\n}\nexport function cloneDef(schema) {\n    return mergeDefs(schema._zod.def);\n}\nexport function getElementAtPath(obj, path) {\n    if (!path)\n        return obj;\n    return path.reduce((acc, key) => acc?.[key], obj);\n}\nexport function promiseAllObject(promisesObj) {\n    const keys = Object.keys(promisesObj);\n    const promises = keys.map((key) => promisesObj[key]);\n    return Promise.all(promises).then((results) => {\n        const resolvedObj = {};\n        for (let i = 0; i < keys.length; i++) {\n            resolvedObj[keys[i]] = results[i];\n        }\n        return resolvedObj;\n    });\n}\nexport function randomString(length = 10) {\n    const chars = \"abcdefghijklmnopqrstuvwxyz\";\n    let str = \"\";\n    for (let i = 0; i < length; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\nexport function esc(str) {\n    return JSON.stringify(str);\n}\nexport const captureStackTrace = (\"captureStackTrace\" in Error ? Error.captureStackTrace : (..._args) => { });\nexport function isObject(data) {\n    return typeof data === \"object\" && data !== null && !Array.isArray(data);\n}\nexport const allowsEval = cached(() => {\n    // @ts-ignore\n    if (typeof navigator !== \"undefined\" && navigator?.userAgent?.includes(\"Cloudflare\")) {\n        return false;\n    }\n    try {\n        const F = Function;\n        new F(\"\");\n        return true;\n    }\n    catch (_) {\n        return false;\n    }\n});\nexport function isPlainObject(o) {\n    if (isObject(o) === false)\n        return false;\n    // modified constructor\n    const ctor = o.constructor;\n    if (ctor === undefined)\n        return true;\n    // modified prototype\n    const prot = ctor.prototype;\n    if (isObject(prot) === false)\n        return false;\n    // ctor doesn't have static `isPrototypeOf`\n    if (Object.prototype.hasOwnProperty.call(prot, \"isPrototypeOf\") === false) {\n        return false;\n    }\n    return true;\n}\nexport function shallowClone(o) {\n    if (isPlainObject(o))\n        return { ...o };\n    if (Array.isArray(o))\n        return [...o];\n    return o;\n}\nexport function numKeys(data) {\n    let keyCount = 0;\n    for (const key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n            keyCount++;\n        }\n    }\n    return keyCount;\n}\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return \"undefined\";\n        case \"string\":\n            return \"string\";\n        case \"number\":\n            return Number.isNaN(data) ? \"nan\" : \"number\";\n        case \"boolean\":\n            return \"boolean\";\n        case \"function\":\n            return \"function\";\n        case \"bigint\":\n            return \"bigint\";\n        case \"symbol\":\n            return \"symbol\";\n        case \"object\":\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return \"promise\";\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return \"map\";\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return \"set\";\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return \"date\";\n            }\n            // @ts-ignore\n            if (typeof File !== \"undefined\" && data instanceof File) {\n                return \"file\";\n            }\n            return \"object\";\n        default:\n            throw new Error(`Unknown data type: ${t}`);\n    }\n};\nexport const propertyKeyTypes = new Set([\"string\", \"number\", \"symbol\"]);\nexport const primitiveTypes = new Set([\"string\", \"number\", \"bigint\", \"boolean\", \"symbol\", \"undefined\"]);\nexport function escapeRegex(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n// zod-specific utils\nexport function clone(inst, def, params) {\n    const cl = new inst._zod.constr(def ?? inst._zod.def);\n    if (!def || params?.parent)\n        cl._zod.parent = inst;\n    return cl;\n}\nexport function normalizeParams(_params) {\n    const params = _params;\n    if (!params)\n        return {};\n    if (typeof params === \"string\")\n        return { error: () => params };\n    if (params?.message !== undefined) {\n        if (params?.error !== undefined)\n            throw new Error(\"Cannot specify both `message` and `error` params\");\n        params.error = params.message;\n    }\n    delete params.message;\n    if (typeof params.error === \"string\")\n        return { ...params, error: () => params.error };\n    return params;\n}\nexport function createTransparentProxy(getter) {\n    let target;\n    return new Proxy({}, {\n        get(_, prop, receiver) {\n            target ?? (target = getter());\n            return Reflect.get(target, prop, receiver);\n        },\n        set(_, prop, value, receiver) {\n            target ?? (target = getter());\n            return Reflect.set(target, prop, value, receiver);\n        },\n        has(_, prop) {\n            target ?? (target = getter());\n            return Reflect.has(target, prop);\n        },\n        deleteProperty(_, prop) {\n            target ?? (target = getter());\n            return Reflect.deleteProperty(target, prop);\n        },\n        ownKeys(_) {\n            target ?? (target = getter());\n            return Reflect.ownKeys(target);\n        },\n        getOwnPropertyDescriptor(_, prop) {\n            target ?? (target = getter());\n            return Reflect.getOwnPropertyDescriptor(target, prop);\n        },\n        defineProperty(_, prop, descriptor) {\n            target ?? (target = getter());\n            return Reflect.defineProperty(target, prop, descriptor);\n        },\n    });\n}\nexport function stringifyPrimitive(value) {\n    if (typeof value === \"bigint\")\n        return value.toString() + \"n\";\n    if (typeof value === \"string\")\n        return `\"${value}\"`;\n    return `${value}`;\n}\nexport function optionalKeys(shape) {\n    return Object.keys(shape).filter((k) => {\n        return shape[k]._zod.optin === \"optional\" && shape[k]._zod.optout === \"optional\";\n    });\n}\nexport const NUMBER_FORMAT_RANGES = {\n    safeint: [Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\n    int32: [-2147483648, 2147483647],\n    uint32: [0, 4294967295],\n    float32: [-3.4028234663852886e38, 3.4028234663852886e38],\n    float64: [-Number.MAX_VALUE, Number.MAX_VALUE],\n};\nexport const BIGINT_FORMAT_RANGES = {\n    int64: [/* @__PURE__*/ BigInt(\"-9223372036854775808\"), /* @__PURE__*/ BigInt(\"9223372036854775807\")],\n    uint64: [/* @__PURE__*/ BigInt(0), /* @__PURE__*/ BigInt(\"18446744073709551615\")],\n};\nexport function pick(schema, mask) {\n    const currDef = schema._zod.def;\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const newShape = {};\n            for (const key in mask) {\n                if (!(key in currDef.shape)) {\n                    throw new Error(`Unrecognized key: \"${key}\"`);\n                }\n                if (!mask[key])\n                    continue;\n                newShape[key] = currDef.shape[key];\n            }\n            assignProp(this, \"shape\", newShape); // self-caching\n            return newShape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function omit(schema, mask) {\n    const currDef = schema._zod.def;\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const newShape = { ...schema._zod.def.shape };\n            for (const key in mask) {\n                if (!(key in currDef.shape)) {\n                    throw new Error(`Unrecognized key: \"${key}\"`);\n                }\n                if (!mask[key])\n                    continue;\n                delete newShape[key];\n            }\n            assignProp(this, \"shape\", newShape); // self-caching\n            return newShape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function extend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to extend: expected a plain object\");\n    }\n    const checks = schema._zod.def.checks;\n    const hasChecks = checks && checks.length > 0;\n    if (hasChecks) {\n        throw new Error(\"Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.\");\n    }\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function safeExtend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to safeExtend: expected a plain object\");\n    }\n    const def = {\n        ...schema._zod.def,\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        checks: schema._zod.def.checks,\n    };\n    return clone(schema, def);\n}\nexport function merge(a, b) {\n    const def = mergeDefs(a._zod.def, {\n        get shape() {\n            const _shape = { ...a._zod.def.shape, ...b._zod.def.shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        get catchall() {\n            return b._zod.def.catchall;\n        },\n        checks: [], // delete existing checks\n    });\n    return clone(a, def);\n}\nexport function partial(Class, schema, mask) {\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const oldShape = schema._zod.def.shape;\n            const shape = { ...oldShape };\n            if (mask) {\n                for (const key in mask) {\n                    if (!(key in oldShape)) {\n                        throw new Error(`Unrecognized key: \"${key}\"`);\n                    }\n                    if (!mask[key])\n                        continue;\n                    // if (oldShape[key]!._zod.optin === \"optional\") continue;\n                    shape[key] = Class\n                        ? new Class({\n                            type: \"optional\",\n                            innerType: oldShape[key],\n                        })\n                        : oldShape[key];\n                }\n            }\n            else {\n                for (const key in oldShape) {\n                    // if (oldShape[key]!._zod.optin === \"optional\") continue;\n                    shape[key] = Class\n                        ? new Class({\n                            type: \"optional\",\n                            innerType: oldShape[key],\n                        })\n                        : oldShape[key];\n                }\n            }\n            assignProp(this, \"shape\", shape); // self-caching\n            return shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function required(Class, schema, mask) {\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const oldShape = schema._zod.def.shape;\n            const shape = { ...oldShape };\n            if (mask) {\n                for (const key in mask) {\n                    if (!(key in shape)) {\n                        throw new Error(`Unrecognized key: \"${key}\"`);\n                    }\n                    if (!mask[key])\n                        continue;\n                    // overwrite with non-optional\n                    shape[key] = new Class({\n                        type: \"nonoptional\",\n                        innerType: oldShape[key],\n                    });\n                }\n            }\n            else {\n                for (const key in oldShape) {\n                    // overwrite with non-optional\n                    shape[key] = new Class({\n                        type: \"nonoptional\",\n                        innerType: oldShape[key],\n                    });\n                }\n            }\n            assignProp(this, \"shape\", shape); // self-caching\n            return shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\n// invalid_type | too_big | too_small | invalid_format | not_multiple_of | unrecognized_keys | invalid_union | invalid_key | invalid_element | invalid_value | custom\nexport function aborted(x, startIndex = 0) {\n    if (x.aborted === true)\n        return true;\n    for (let i = startIndex; i < x.issues.length; i++) {\n        if (x.issues[i]?.continue !== true) {\n            return true;\n        }\n    }\n    return false;\n}\nexport function prefixIssues(path, issues) {\n    return issues.map((iss) => {\n        var _a;\n        (_a = iss).path ?? (_a.path = []);\n        iss.path.unshift(path);\n        return iss;\n    });\n}\nexport function unwrapMessage(message) {\n    return typeof message === \"string\" ? message : message?.message;\n}\nexport function finalizeIssue(iss, ctx, config) {\n    const full = { ...iss, path: iss.path ?? [] };\n    // for backwards compatibility\n    if (!iss.message) {\n        const message = unwrapMessage(iss.inst?._zod.def?.error?.(iss)) ??\n            unwrapMessage(ctx?.error?.(iss)) ??\n            unwrapMessage(config.customError?.(iss)) ??\n            unwrapMessage(config.localeError?.(iss)) ??\n            \"Invalid input\";\n        full.message = message;\n    }\n    // delete (full as any).def;\n    delete full.inst;\n    delete full.continue;\n    if (!ctx?.reportInput) {\n        delete full.input;\n    }\n    return full;\n}\nexport function getSizableOrigin(input) {\n    if (input instanceof Set)\n        return \"set\";\n    if (input instanceof Map)\n        return \"map\";\n    // @ts-ignore\n    if (input instanceof File)\n        return \"file\";\n    return \"unknown\";\n}\nexport function getLengthableOrigin(input) {\n    if (Array.isArray(input))\n        return \"array\";\n    if (typeof input === \"string\")\n        return \"string\";\n    return \"unknown\";\n}\nexport function issue(...args) {\n    const [iss, input, inst] = args;\n    if (typeof iss === \"string\") {\n        return {\n            message: iss,\n            code: \"custom\",\n            input,\n            inst,\n        };\n    }\n    return { ...iss };\n}\nexport function cleanEnum(obj) {\n    return Object.entries(obj)\n        .filter(([k, _]) => {\n        // return true if NaN, meaning it's not a number, thus a string key\n        return Number.isNaN(Number.parseInt(k, 10));\n    })\n        .map((el) => el[1]);\n}\n// Codec utility functions\nexport function base64ToUint8Array(base64) {\n    const binaryString = atob(base64);\n    const bytes = new Uint8Array(binaryString.length);\n    for (let i = 0; i < binaryString.length; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes;\n}\nexport function uint8ArrayToBase64(bytes) {\n    let binaryString = \"\";\n    for (let i = 0; i < bytes.length; i++) {\n        binaryString += String.fromCharCode(bytes[i]);\n    }\n    return btoa(binaryString);\n}\nexport function base64urlToUint8Array(base64url) {\n    const base64 = base64url.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    const padding = \"=\".repeat((4 - (base64.length % 4)) % 4);\n    return base64ToUint8Array(base64 + padding);\n}\nexport function uint8ArrayToBase64url(bytes) {\n    return uint8ArrayToBase64(bytes).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n}\nexport function hexToUint8Array(hex) {\n    const cleanHex = hex.replace(/^0x/, \"\");\n    if (cleanHex.length % 2 !== 0) {\n        throw new Error(\"Invalid hex string length\");\n    }\n    const bytes = new Uint8Array(cleanHex.length / 2);\n    for (let i = 0; i < cleanHex.length; i += 2) {\n        bytes[i / 2] = Number.parseInt(cleanHex.slice(i, i + 2), 16);\n    }\n    return bytes;\n}\nexport function uint8ArrayToHex(bytes) {\n    return Array.from(bytes)\n        .map((b) => b.toString(16).padStart(2, \"0\"))\n        .join(\"\");\n}\n// instanceof\nexport class Class {\n    constructor(..._args) { }\n}\n","import { $constructor } from \"./core.js\";\nimport * as util from \"./util.js\";\nconst initializer = (inst, def) => {\n    inst.name = \"$ZodError\";\n    Object.defineProperty(inst, \"_zod\", {\n        value: inst._zod,\n        enumerable: false,\n    });\n    Object.defineProperty(inst, \"issues\", {\n        value: def,\n        enumerable: false,\n    });\n    inst.message = JSON.stringify(def, util.jsonStringifyReplacer, 2);\n    Object.defineProperty(inst, \"toString\", {\n        value: () => inst.message,\n        enumerable: false,\n    });\n};\nexport const $ZodError = $constructor(\"$ZodError\", initializer);\nexport const $ZodRealError = $constructor(\"$ZodError\", initializer, { Parent: Error });\nexport function flattenError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = {};\n    const formErrors = [];\n    for (const sub of error.issues) {\n        if (sub.path.length > 0) {\n            fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n            fieldErrors[sub.path[0]].push(mapper(sub));\n        }\n        else {\n            formErrors.push(mapper(sub));\n        }\n    }\n    return { formErrors, fieldErrors };\n}\nexport function formatError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = { _errors: [] };\n    const processError = (error) => {\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                issue.errors.map((issues) => processError({ issues }));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.path.length === 0) {\n                fieldErrors._errors.push(mapper(issue));\n            }\n            else {\n                let curr = fieldErrors;\n                let i = 0;\n                while (i < issue.path.length) {\n                    const el = issue.path[i];\n                    const terminal = i === issue.path.length - 1;\n                    if (!terminal) {\n                        curr[el] = curr[el] || { _errors: [] };\n                    }\n                    else {\n                        curr[el] = curr[el] || { _errors: [] };\n                        curr[el]._errors.push(mapper(issue));\n                    }\n                    curr = curr[el];\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return fieldErrors;\n}\nexport function treeifyError(error, mapper = (issue) => issue.message) {\n    const result = { errors: [] };\n    const processError = (error, path = []) => {\n        var _a, _b;\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                // regular union error\n                issue.errors.map((issues) => processError({ issues }, issue.path));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else {\n                const fullpath = [...path, ...issue.path];\n                if (fullpath.length === 0) {\n                    result.errors.push(mapper(issue));\n                    continue;\n                }\n                let curr = result;\n                let i = 0;\n                while (i < fullpath.length) {\n                    const el = fullpath[i];\n                    const terminal = i === fullpath.length - 1;\n                    if (typeof el === \"string\") {\n                        curr.properties ?? (curr.properties = {});\n                        (_a = curr.properties)[el] ?? (_a[el] = { errors: [] });\n                        curr = curr.properties[el];\n                    }\n                    else {\n                        curr.items ?? (curr.items = []);\n                        (_b = curr.items)[el] ?? (_b[el] = { errors: [] });\n                        curr = curr.items[el];\n                    }\n                    if (terminal) {\n                        curr.errors.push(mapper(issue));\n                    }\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return result;\n}\n/** Format a ZodError as a human-readable string in the following form.\n *\n * From\n *\n * ```ts\n * ZodError {\n *   issues: [\n *     {\n *       expected: 'string',\n *       code: 'invalid_type',\n *       path: [ 'username' ],\n *       message: 'Invalid input: expected string'\n *     },\n *     {\n *       expected: 'number',\n *       code: 'invalid_type',\n *       path: [ 'favoriteNumbers', 1 ],\n *       message: 'Invalid input: expected number'\n *     }\n *   ];\n * }\n * ```\n *\n * to\n *\n * ```\n * username\n *    Expected number, received string at \"username\n * favoriteNumbers[0]\n *    Invalid input: expected number\n * ```\n */\nexport function toDotPath(_path) {\n    const segs = [];\n    const path = _path.map((seg) => (typeof seg === \"object\" ? seg.key : seg));\n    for (const seg of path) {\n        if (typeof seg === \"number\")\n            segs.push(`[${seg}]`);\n        else if (typeof seg === \"symbol\")\n            segs.push(`[${JSON.stringify(String(seg))}]`);\n        else if (/[^\\w$]/.test(seg))\n            segs.push(`[${JSON.stringify(seg)}]`);\n        else {\n            if (segs.length)\n                segs.push(\".\");\n            segs.push(seg);\n        }\n    }\n    return segs.join(\"\");\n}\nexport function prettifyError(error) {\n    const lines = [];\n    // sort by path length\n    const issues = [...error.issues].sort((a, b) => (a.path ?? []).length - (b.path ?? []).length);\n    // Process each issue\n    for (const issue of issues) {\n        lines.push(` ${issue.message}`);\n        if (issue.path?.length)\n            lines.push(`   at ${toDotPath(issue.path)}`);\n    }\n    // Convert Map to formatted string\n    return lines.join(\"\\n\");\n}\n","import * as core from \"./core.js\";\nimport * as errors from \"./errors.js\";\nimport * as util from \"./util.js\";\nexport const _parse = (_Err) => (schema, value, _ctx, _params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: false }) : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    if (result.issues.length) {\n        const e = new (_params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, _params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parse = /* @__PURE__*/ _parse(errors.$ZodRealError);\nexport const _parseAsync = (_Err) => async (schema, value, _ctx, params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    if (result.issues.length) {\n        const e = new (params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parseAsync = /* @__PURE__*/ _parseAsync(errors.$ZodRealError);\nexport const _safeParse = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? { ..._ctx, async: false } : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    return result.issues.length\n        ? {\n            success: false,\n            error: new (_Err ?? errors.$ZodError)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParse = /* @__PURE__*/ _safeParse(errors.$ZodRealError);\nexport const _safeParseAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    return result.issues.length\n        ? {\n            success: false,\n            error: new _Err(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParseAsync = /* @__PURE__*/ _safeParseAsync(errors.$ZodRealError);\nexport const _encode = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _parse(_Err)(schema, value, ctx);\n};\nexport const encode = /* @__PURE__*/ _encode(errors.$ZodRealError);\nexport const _decode = (_Err) => (schema, value, _ctx) => {\n    return _parse(_Err)(schema, value, _ctx);\n};\nexport const decode = /* @__PURE__*/ _decode(errors.$ZodRealError);\nexport const _encodeAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _parseAsync(_Err)(schema, value, ctx);\n};\nexport const encodeAsync = /* @__PURE__*/ _encodeAsync(errors.$ZodRealError);\nexport const _decodeAsync = (_Err) => async (schema, value, _ctx) => {\n    return _parseAsync(_Err)(schema, value, _ctx);\n};\nexport const decodeAsync = /* @__PURE__*/ _decodeAsync(errors.$ZodRealError);\nexport const _safeEncode = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _safeParse(_Err)(schema, value, ctx);\n};\nexport const safeEncode = /* @__PURE__*/ _safeEncode(errors.$ZodRealError);\nexport const _safeDecode = (_Err) => (schema, value, _ctx) => {\n    return _safeParse(_Err)(schema, value, _ctx);\n};\nexport const safeDecode = /* @__PURE__*/ _safeDecode(errors.$ZodRealError);\nexport const _safeEncodeAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { direction: \"backward\" }) : { direction: \"backward\" };\n    return _safeParseAsync(_Err)(schema, value, ctx);\n};\nexport const safeEncodeAsync = /* @__PURE__*/ _safeEncodeAsync(errors.$ZodRealError);\nexport const _safeDecodeAsync = (_Err) => async (schema, value, _ctx) => {\n    return _safeParseAsync(_Err)(schema, value, _ctx);\n};\nexport const safeDecodeAsync = /* @__PURE__*/ _safeDecodeAsync(errors.$ZodRealError);\n","export const cuid = /^[cC][^\\s-]{8,}$/;\nexport const cuid2 = /^[0-9a-z]+$/;\nexport const ulid = /^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/;\nexport const xid = /^[0-9a-vA-V]{20}$/;\nexport const ksuid = /^[A-Za-z0-9]{27}$/;\nexport const nanoid = /^[a-zA-Z0-9_-]{21}$/;\n/** ISO 8601-1 duration regex. Does not support the 8601-2 extensions like negative durations or fractional/negative components. */\nexport const duration = /^P(?:(\\d+W)|(?!.*W)(?=\\d|T\\d)(\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+([.,]\\d+)?S)?)?)$/;\n/** Implements ISO 8601-2 extensions like explicit +- prefixes, mixing weeks with other units, and fractional/negative components. */\nexport const extendedDuration = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n/** A regex for any UUID-like identifier: 8-4-4-4-12 hex pattern */\nexport const guid = /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/;\n/** Returns a regex for validating an RFC 9562/4122 UUID.\n *\n * @param version Optionally specify a version 1-8. If no version is specified, all versions are supported. */\nexport const uuid = (version) => {\n    if (!version)\n        return /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;\n    return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${version}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`);\n};\nexport const uuid4 = /*@__PURE__*/ uuid(4);\nexport const uuid6 = /*@__PURE__*/ uuid(6);\nexport const uuid7 = /*@__PURE__*/ uuid(7);\n/** Practical email validation */\nexport const email = /^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/;\n/** Equivalent to the HTML5 input[type=email] validation implemented by browsers. Source: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email */\nexport const html5Email = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n/** The classic emailregex.com regex for RFC 5322-compliant emails */\nexport const rfc5322Email = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n/** A loose regex that allows Unicode characters, enforces length limits, and that's about it. */\nexport const unicodeEmail = /^[^\\s@\"]{1,64}@[^\\s@]{1,255}$/u;\nexport const idnEmail = unicodeEmail;\nexport const browserEmail = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emoji = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nexport function emoji() {\n    return new RegExp(_emoji, \"u\");\n}\nexport const ipv4 = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nexport const ipv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/;\nexport const cidrv4 = /^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/([0-9]|[1-2][0-9]|3[0-2])$/;\nexport const cidrv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nexport const base64 = /^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/;\nexport const base64url = /^[A-Za-z0-9_-]*$/;\n// based on https://stackoverflow.com/questions/106179/regular-expression-to-match-dns-hostname-or-ip-address\n// export const hostname: RegExp = /^([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+$/;\nexport const hostname = /^(?=.{1,253}\\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\\.?$/;\nexport const domain = /^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/;\n// https://blog.stevenlevithan.com/archives/validate-phone-number#r4-3 (regex sans spaces)\nexport const e164 = /^\\+(?:[0-9]){6,14}[0-9]$/;\n// const dateSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateSource = `(?:(?:\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\\\d|30)|(?:02)-(?:0[1-9]|1\\\\d|2[0-8])))`;\nexport const date = /*@__PURE__*/ new RegExp(`^${dateSource}$`);\nfunction timeSource(args) {\n    const hhmm = `(?:[01]\\\\d|2[0-3]):[0-5]\\\\d`;\n    const regex = typeof args.precision === \"number\"\n        ? args.precision === -1\n            ? `${hhmm}`\n            : args.precision === 0\n                ? `${hhmm}:[0-5]\\\\d`\n                : `${hhmm}:[0-5]\\\\d\\\\.\\\\d{${args.precision}}`\n        : `${hhmm}(?::[0-5]\\\\d(?:\\\\.\\\\d+)?)?`;\n    return regex;\n}\nexport function time(args) {\n    return new RegExp(`^${timeSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetime(args) {\n    const time = timeSource({ precision: args.precision });\n    const opts = [\"Z\"];\n    if (args.local)\n        opts.push(\"\");\n    // if (args.offset) opts.push(`([+-]\\\\d{2}:\\\\d{2})`);\n    if (args.offset)\n        opts.push(`([+-](?:[01]\\\\d|2[0-3]):[0-5]\\\\d)`);\n    const timeRegex = `${time}(?:${opts.join(\"|\")})`;\n    return new RegExp(`^${dateSource}T(?:${timeRegex})$`);\n}\nexport const string = (params) => {\n    const regex = params ? `[\\\\s\\\\S]{${params?.minimum ?? 0},${params?.maximum ?? \"\"}}` : `[\\\\s\\\\S]*`;\n    return new RegExp(`^${regex}$`);\n};\nexport const bigint = /^-?\\d+n?$/;\nexport const integer = /^-?\\d+$/;\nexport const number = /^-?\\d+(?:\\.\\d+)?/;\nexport const boolean = /^(?:true|false)$/i;\nconst _null = /^null$/i;\nexport { _null as null };\nconst _undefined = /^undefined$/i;\nexport { _undefined as undefined };\n// regex for string with no uppercase letters\nexport const lowercase = /^[^A-Z]*$/;\n// regex for string with no lowercase letters\nexport const uppercase = /^[^a-z]*$/;\n// regex for hexadecimal strings (any length)\nexport const hex = /^[0-9a-fA-F]*$/;\n// Hash regexes for different algorithms and encodings\n// Helper function to create base64 regex with exact length and padding\nfunction fixedBase64(bodyLength, padding) {\n    return new RegExp(`^[A-Za-z0-9+/]{${bodyLength}}${padding}$`);\n}\n// Helper function to create base64url regex with exact length (no padding)\nfunction fixedBase64url(length) {\n    return new RegExp(`^[A-Za-z0-9_-]{${length}}$`);\n}\n// MD5 (16 bytes): base64 = 24 chars total (22 + \"==\")\nexport const md5_hex = /^[0-9a-fA-F]{32}$/;\nexport const md5_base64 = /*@__PURE__*/ fixedBase64(22, \"==\");\nexport const md5_base64url = /*@__PURE__*/ fixedBase64url(22);\n// SHA1 (20 bytes): base64 = 28 chars total (27 + \"=\")\nexport const sha1_hex = /^[0-9a-fA-F]{40}$/;\nexport const sha1_base64 = /*@__PURE__*/ fixedBase64(27, \"=\");\nexport const sha1_base64url = /*@__PURE__*/ fixedBase64url(27);\n// SHA256 (32 bytes): base64 = 44 chars total (43 + \"=\")\nexport const sha256_hex = /^[0-9a-fA-F]{64}$/;\nexport const sha256_base64 = /*@__PURE__*/ fixedBase64(43, \"=\");\nexport const sha256_base64url = /*@__PURE__*/ fixedBase64url(43);\n// SHA384 (48 bytes): base64 = 64 chars total (no padding)\nexport const sha384_hex = /^[0-9a-fA-F]{96}$/;\nexport const sha384_base64 = /*@__PURE__*/ fixedBase64(64, \"\");\nexport const sha384_base64url = /*@__PURE__*/ fixedBase64url(64);\n// SHA512 (64 bytes): base64 = 88 chars total (86 + \"==\")\nexport const sha512_hex = /^[0-9a-fA-F]{128}$/;\nexport const sha512_base64 = /*@__PURE__*/ fixedBase64(86, \"==\");\nexport const sha512_base64url = /*@__PURE__*/ fixedBase64url(86);\n","// import { $ZodType } from \"./schemas.js\";\nimport * as core from \"./core.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nexport const $ZodCheck = /*@__PURE__*/ core.$constructor(\"$ZodCheck\", (inst, def) => {\n    var _a;\n    inst._zod ?? (inst._zod = {});\n    inst._zod.def = def;\n    (_a = inst._zod).onattach ?? (_a.onattach = []);\n});\nconst numericOriginMap = {\n    number: \"number\",\n    bigint: \"bigint\",\n    object: \"date\",\n};\nexport const $ZodCheckLessThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckLessThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.maximum : bag.exclusiveMaximum) ?? Number.POSITIVE_INFINITY;\n        if (def.value < curr) {\n            if (def.inclusive)\n                bag.maximum = def.value;\n            else\n                bag.exclusiveMaximum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value <= def.value : payload.value < def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckGreaterThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckGreaterThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.minimum : bag.exclusiveMinimum) ?? Number.NEGATIVE_INFINITY;\n        if (def.value > curr) {\n            if (def.inclusive)\n                bag.minimum = def.value;\n            else\n                bag.exclusiveMinimum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value >= def.value : payload.value > def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMultipleOf = \n/*@__PURE__*/ core.$constructor(\"$ZodCheckMultipleOf\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        var _a;\n        (_a = inst._zod.bag).multipleOf ?? (_a.multipleOf = def.value);\n    });\n    inst._zod.check = (payload) => {\n        if (typeof payload.value !== typeof def.value)\n            throw new Error(\"Cannot mix number and bigint in multiple_of check.\");\n        const isMultiple = typeof payload.value === \"bigint\"\n            ? payload.value % def.value === BigInt(0)\n            : util.floatSafeRemainder(payload.value, def.value) === 0;\n        if (isMultiple)\n            return;\n        payload.issues.push({\n            origin: typeof payload.value,\n            code: \"not_multiple_of\",\n            divisor: def.value,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckNumberFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    def.format = def.format || \"float64\";\n    const isInt = def.format?.includes(\"int\");\n    const origin = isInt ? \"int\" : \"number\";\n    const [minimum, maximum] = util.NUMBER_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n        if (isInt)\n            bag.pattern = regexes.integer;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (isInt) {\n            if (!Number.isInteger(input)) {\n                // invalid_format issue\n                // payload.issues.push({\n                //   expected: def.format,\n                //   format: def.format,\n                //   code: \"invalid_format\",\n                //   input,\n                //   inst,\n                // });\n                // invalid_type issue\n                payload.issues.push({\n                    expected: origin,\n                    format: def.format,\n                    code: \"invalid_type\",\n                    continue: false,\n                    input,\n                    inst,\n                });\n                return;\n                // not_multiple_of issue\n                // payload.issues.push({\n                //   code: \"not_multiple_of\",\n                //   origin: \"number\",\n                //   input,\n                //   inst,\n                //   divisor: 1,\n                // });\n            }\n            if (!Number.isSafeInteger(input)) {\n                if (input > 0) {\n                    // too_big\n                    payload.issues.push({\n                        input,\n                        code: \"too_big\",\n                        maximum: Number.MAX_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                else {\n                    // too_small\n                    payload.issues.push({\n                        input,\n                        code: \"too_small\",\n                        minimum: Number.MIN_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                return;\n            }\n        }\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_small\",\n                minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckBigIntFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    const [minimum, maximum] = util.BIGINT_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_small\",\n                minimum: minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckMaxSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size <= def.maximum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size >= def.minimum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckSizeEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckSizeEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.size;\n        bag.maximum = def.size;\n        bag.size = def.size;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size === def.size)\n            return;\n        const tooBig = size > def.size;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            ...(tooBig ? { code: \"too_big\", maximum: def.size } : { code: \"too_small\", minimum: def.size }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMaxLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length <= def.maximum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length >= def.minimum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLengthEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckLengthEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.length;\n        bag.maximum = def.length;\n        bag.length = def.length;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length === def.length)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        const tooBig = length > def.length;\n        payload.issues.push({\n            origin,\n            ...(tooBig ? { code: \"too_big\", maximum: def.length } : { code: \"too_small\", minimum: def.length }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckStringFormat\", (inst, def) => {\n    var _a, _b;\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        if (def.pattern) {\n            bag.patterns ?? (bag.patterns = new Set());\n            bag.patterns.add(def.pattern);\n        }\n    });\n    if (def.pattern)\n        (_a = inst._zod).check ?? (_a.check = (payload) => {\n            def.pattern.lastIndex = 0;\n            if (def.pattern.test(payload.value))\n                return;\n            payload.issues.push({\n                origin: \"string\",\n                code: \"invalid_format\",\n                format: def.format,\n                input: payload.value,\n                ...(def.pattern ? { pattern: def.pattern.toString() } : {}),\n                inst,\n                continue: !def.abort,\n            });\n        });\n    else\n        (_b = inst._zod).check ?? (_b.check = () => { });\n});\nexport const $ZodCheckRegex = /*@__PURE__*/ core.$constructor(\"$ZodCheckRegex\", (inst, def) => {\n    $ZodCheckStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        def.pattern.lastIndex = 0;\n        if (def.pattern.test(payload.value))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"regex\",\n            input: payload.value,\n            pattern: def.pattern.toString(),\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLowerCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckLowerCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.lowercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckUpperCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckUpperCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.uppercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckIncludes = /*@__PURE__*/ core.$constructor(\"$ZodCheckIncludes\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const escapedRegex = util.escapeRegex(def.includes);\n    const pattern = new RegExp(typeof def.position === \"number\" ? `^.{${def.position}}${escapedRegex}` : escapedRegex);\n    def.pattern = pattern;\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.includes(def.includes, def.position))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"includes\",\n            includes: def.includes,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStartsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckStartsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`^${util.escapeRegex(def.prefix)}.*`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.startsWith(def.prefix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"starts_with\",\n            prefix: def.prefix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckEndsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckEndsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`.*${util.escapeRegex(def.suffix)}$`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.endsWith(def.suffix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"ends_with\",\n            suffix: def.suffix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n///////////////////////////////////\n/////    $ZodCheckProperty    /////\n///////////////////////////////////\nfunction handleCheckPropertyResult(result, payload, property) {\n    if (result.issues.length) {\n        payload.issues.push(...util.prefixIssues(property, result.issues));\n    }\n}\nexport const $ZodCheckProperty = /*@__PURE__*/ core.$constructor(\"$ZodCheckProperty\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        const result = def.schema._zod.run({\n            value: payload.value[def.property],\n            issues: [],\n        }, {});\n        if (result instanceof Promise) {\n            return result.then((result) => handleCheckPropertyResult(result, payload, def.property));\n        }\n        handleCheckPropertyResult(result, payload, def.property);\n        return;\n    };\n});\nexport const $ZodCheckMimeType = /*@__PURE__*/ core.$constructor(\"$ZodCheckMimeType\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const mimeSet = new Set(def.mime);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.mime = def.mime;\n    });\n    inst._zod.check = (payload) => {\n        if (mimeSet.has(payload.value.type))\n            return;\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.mime,\n            input: payload.value.type,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckOverwrite = /*@__PURE__*/ core.$constructor(\"$ZodCheckOverwrite\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        payload.value = def.tx(payload.value);\n    };\n});\n","export class Doc {\n    constructor(args = []) {\n        this.content = [];\n        this.indent = 0;\n        if (this)\n            this.args = args;\n    }\n    indented(fn) {\n        this.indent += 1;\n        fn(this);\n        this.indent -= 1;\n    }\n    write(arg) {\n        if (typeof arg === \"function\") {\n            arg(this, { execution: \"sync\" });\n            arg(this, { execution: \"async\" });\n            return;\n        }\n        const content = arg;\n        const lines = content.split(\"\\n\").filter((x) => x);\n        const minIndent = Math.min(...lines.map((x) => x.length - x.trimStart().length));\n        const dedented = lines.map((x) => x.slice(minIndent)).map((x) => \" \".repeat(this.indent * 2) + x);\n        for (const line of dedented) {\n            this.content.push(line);\n        }\n    }\n    compile() {\n        const F = Function;\n        const args = this?.args;\n        const content = this?.content ?? [``];\n        const lines = [...content.map((x) => `  ${x}`)];\n        // console.log(lines.join(\"\\n\"));\n        return new F(...args, lines.join(\"\\n\"));\n    }\n}\n","export const version = {\n    major: 4,\n    minor: 1,\n    patch: 12,\n};\n","import * as checks from \"./checks.js\";\nimport * as core from \"./core.js\";\nimport { Doc } from \"./doc.js\";\nimport { parse, parseAsync, safeParse, safeParseAsync } from \"./parse.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nimport { version } from \"./versions.js\";\nexport const $ZodType = /*@__PURE__*/ core.$constructor(\"$ZodType\", (inst, def) => {\n    var _a;\n    inst ?? (inst = {});\n    inst._zod.def = def; // set _def property\n    inst._zod.bag = inst._zod.bag || {}; // initialize _bag object\n    inst._zod.version = version;\n    const checks = [...(inst._zod.def.checks ?? [])];\n    // if inst is itself a checks.$ZodCheck, run it as a check\n    if (inst._zod.traits.has(\"$ZodCheck\")) {\n        checks.unshift(inst);\n    }\n    for (const ch of checks) {\n        for (const fn of ch._zod.onattach) {\n            fn(inst);\n        }\n    }\n    if (checks.length === 0) {\n        // deferred initializer\n        // inst._zod.parse is not yet defined\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        inst._zod.deferred?.push(() => {\n            inst._zod.run = inst._zod.parse;\n        });\n    }\n    else {\n        const runChecks = (payload, checks, ctx) => {\n            let isAborted = util.aborted(payload);\n            let asyncResult;\n            for (const ch of checks) {\n                if (ch._zod.def.when) {\n                    const shouldRun = ch._zod.def.when(payload);\n                    if (!shouldRun)\n                        continue;\n                }\n                else if (isAborted) {\n                    continue;\n                }\n                const currLen = payload.issues.length;\n                const _ = ch._zod.check(payload);\n                if (_ instanceof Promise && ctx?.async === false) {\n                    throw new core.$ZodAsyncError();\n                }\n                if (asyncResult || _ instanceof Promise) {\n                    asyncResult = (asyncResult ?? Promise.resolve()).then(async () => {\n                        await _;\n                        const nextLen = payload.issues.length;\n                        if (nextLen === currLen)\n                            return;\n                        if (!isAborted)\n                            isAborted = util.aborted(payload, currLen);\n                    });\n                }\n                else {\n                    const nextLen = payload.issues.length;\n                    if (nextLen === currLen)\n                        continue;\n                    if (!isAborted)\n                        isAborted = util.aborted(payload, currLen);\n                }\n            }\n            if (asyncResult) {\n                return asyncResult.then(() => {\n                    return payload;\n                });\n            }\n            return payload;\n        };\n        // const handleChecksResult = (\n        //   checkResult: ParsePayload,\n        //   originalResult: ParsePayload,\n        //   ctx: ParseContextInternal\n        // ): util.MaybeAsync<ParsePayload> => {\n        //   // if the checks mutated the value && there are no issues, re-parse the result\n        //   if (checkResult.value !== originalResult.value && !checkResult.issues.length)\n        //     return inst._zod.parse(checkResult, ctx);\n        //   return originalResult;\n        // };\n        const handleCanaryResult = (canary, payload, ctx) => {\n            // abort if the canary is aborted\n            if (util.aborted(canary)) {\n                canary.aborted = true;\n                return canary;\n            }\n            // run checks first, then\n            const checkResult = runChecks(payload, checks, ctx);\n            if (checkResult instanceof Promise) {\n                if (ctx.async === false)\n                    throw new core.$ZodAsyncError();\n                return checkResult.then((checkResult) => inst._zod.parse(checkResult, ctx));\n            }\n            return inst._zod.parse(checkResult, ctx);\n        };\n        inst._zod.run = (payload, ctx) => {\n            if (ctx.skipChecks) {\n                return inst._zod.parse(payload, ctx);\n            }\n            if (ctx.direction === \"backward\") {\n                // run canary\n                // initial pass (no checks)\n                const canary = inst._zod.parse({ value: payload.value, issues: [] }, { ...ctx, skipChecks: true });\n                if (canary instanceof Promise) {\n                    return canary.then((canary) => {\n                        return handleCanaryResult(canary, payload, ctx);\n                    });\n                }\n                return handleCanaryResult(canary, payload, ctx);\n            }\n            // forward\n            const result = inst._zod.parse(payload, ctx);\n            if (result instanceof Promise) {\n                if (ctx.async === false)\n                    throw new core.$ZodAsyncError();\n                return result.then((result) => runChecks(result, checks, ctx));\n            }\n            return runChecks(result, checks, ctx);\n        };\n    }\n    inst[\"~standard\"] = {\n        validate: (value) => {\n            try {\n                const r = safeParse(inst, value);\n                return r.success ? { value: r.data } : { issues: r.error?.issues };\n            }\n            catch (_) {\n                return safeParseAsync(inst, value).then((r) => (r.success ? { value: r.data } : { issues: r.error?.issues }));\n            }\n        },\n        vendor: \"zod\",\n        version: 1,\n    };\n});\nexport { clone } from \"./util.js\";\nexport const $ZodString = /*@__PURE__*/ core.$constructor(\"$ZodString\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = [...(inst?._zod.bag?.patterns ?? [])].pop() ?? regexes.string(inst._zod.bag);\n    inst._zod.parse = (payload, _) => {\n        if (def.coerce)\n            try {\n                payload.value = String(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"string\")\n            return payload;\n        payload.issues.push({\n            expected: \"string\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodStringFormat\", (inst, def) => {\n    // check initialization must come first\n    checks.$ZodCheckStringFormat.init(inst, def);\n    $ZodString.init(inst, def);\n});\nexport const $ZodGUID = /*@__PURE__*/ core.$constructor(\"$ZodGUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.guid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodUUID = /*@__PURE__*/ core.$constructor(\"$ZodUUID\", (inst, def) => {\n    if (def.version) {\n        const versionMap = {\n            v1: 1,\n            v2: 2,\n            v3: 3,\n            v4: 4,\n            v5: 5,\n            v6: 6,\n            v7: 7,\n            v8: 8,\n        };\n        const v = versionMap[def.version];\n        if (v === undefined)\n            throw new Error(`Invalid UUID version: \"${def.version}\"`);\n        def.pattern ?? (def.pattern = regexes.uuid(v));\n    }\n    else\n        def.pattern ?? (def.pattern = regexes.uuid());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodEmail = /*@__PURE__*/ core.$constructor(\"$ZodEmail\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.email);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodURL = /*@__PURE__*/ core.$constructor(\"$ZodURL\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        try {\n            // Trim whitespace from input\n            const trimmed = payload.value.trim();\n            // @ts-ignore\n            const url = new URL(trimmed);\n            if (def.hostname) {\n                def.hostname.lastIndex = 0;\n                if (!def.hostname.test(url.hostname)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid hostname\",\n                        pattern: regexes.hostname.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            if (def.protocol) {\n                def.protocol.lastIndex = 0;\n                if (!def.protocol.test(url.protocol.endsWith(\":\") ? url.protocol.slice(0, -1) : url.protocol)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid protocol\",\n                        pattern: def.protocol.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            // Set the output value based on normalize flag\n            if (def.normalize) {\n                // Use normalized URL\n                payload.value = url.href;\n            }\n            else {\n                // Preserve the original input (trimmed)\n                payload.value = trimmed;\n            }\n            return;\n        }\n        catch (_) {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"url\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodEmoji = /*@__PURE__*/ core.$constructor(\"$ZodEmoji\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.emoji());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodNanoID = /*@__PURE__*/ core.$constructor(\"$ZodNanoID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.nanoid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID = /*@__PURE__*/ core.$constructor(\"$ZodCUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID2 = /*@__PURE__*/ core.$constructor(\"$ZodCUID2\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid2);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodULID = /*@__PURE__*/ core.$constructor(\"$ZodULID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ulid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodXID = /*@__PURE__*/ core.$constructor(\"$ZodXID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.xid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodKSUID = /*@__PURE__*/ core.$constructor(\"$ZodKSUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ksuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODateTime = /*@__PURE__*/ core.$constructor(\"$ZodISODateTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.datetime(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODate = /*@__PURE__*/ core.$constructor(\"$ZodISODate\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.date);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISOTime = /*@__PURE__*/ core.$constructor(\"$ZodISOTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.time(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODuration = /*@__PURE__*/ core.$constructor(\"$ZodISODuration\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.duration);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodIPv4 = /*@__PURE__*/ core.$constructor(\"$ZodIPv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv4);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv4`;\n    });\n});\nexport const $ZodIPv6 = /*@__PURE__*/ core.$constructor(\"$ZodIPv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv6);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv6`;\n    });\n    inst._zod.check = (payload) => {\n        try {\n            // @ts-ignore\n            new URL(`http://[${payload.value}]`);\n            // return;\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"ipv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv4);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv6); // not used for validation\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        const parts = payload.value.split(\"/\");\n        try {\n            if (parts.length !== 2)\n                throw new Error();\n            const [address, prefix] = parts;\n            if (!prefix)\n                throw new Error();\n            const prefixNum = Number(prefix);\n            if (`${prefixNum}` !== prefix)\n                throw new Error();\n            if (prefixNum < 0 || prefixNum > 128)\n                throw new Error();\n            // @ts-ignore\n            new URL(`http://[${address}]`);\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"cidrv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64(data) {\n    if (data === \"\")\n        return true;\n    if (data.length % 4 !== 0)\n        return false;\n    try {\n        // @ts-ignore\n        atob(data);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodBase64 = /*@__PURE__*/ core.$constructor(\"$ZodBase64\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64URL(data) {\n    if (!regexes.base64url.test(data))\n        return false;\n    const base64 = data.replace(/[-_]/g, (c) => (c === \"-\" ? \"+\" : \"/\"));\n    const padded = base64.padEnd(Math.ceil(base64.length / 4) * 4, \"=\");\n    return isValidBase64(padded);\n}\nexport const $ZodBase64URL = /*@__PURE__*/ core.$constructor(\"$ZodBase64URL\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64url);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64url\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64URL(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64url\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodE164 = /*@__PURE__*/ core.$constructor(\"$ZodE164\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.e164);\n    $ZodStringFormat.init(inst, def);\n});\n//////////////////////////////   ZodJWT   //////////////////////////////\nexport function isValidJWT(token, algorithm = null) {\n    try {\n        const tokensParts = token.split(\".\");\n        if (tokensParts.length !== 3)\n            return false;\n        const [header] = tokensParts;\n        if (!header)\n            return false;\n        // @ts-ignore\n        const parsedHeader = JSON.parse(atob(header));\n        if (\"typ\" in parsedHeader && parsedHeader?.typ !== \"JWT\")\n            return false;\n        if (!parsedHeader.alg)\n            return false;\n        if (algorithm && (!(\"alg\" in parsedHeader) || parsedHeader.alg !== algorithm))\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodJWT = /*@__PURE__*/ core.$constructor(\"$ZodJWT\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (isValidJWT(payload.value, def.alg))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"jwt\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCustomStringFormat\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (def.fn(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: def.format,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodNumber = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = inst._zod.bag.pattern ?? regexes.number;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Number(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"number\" && !Number.isNaN(input) && Number.isFinite(input)) {\n            return payload;\n        }\n        const received = typeof input === \"number\"\n            ? Number.isNaN(input)\n                ? \"NaN\"\n                : !Number.isFinite(input)\n                    ? \"Infinity\"\n                    : undefined\n            : undefined;\n        payload.issues.push({\n            expected: \"number\",\n            code: \"invalid_type\",\n            input,\n            inst,\n            ...(received ? { received } : {}),\n        });\n        return payload;\n    };\n});\nexport const $ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    checks.$ZodCheckNumberFormat.init(inst, def);\n    $ZodNumber.init(inst, def); // no format checksp\n});\nexport const $ZodBoolean = /*@__PURE__*/ core.$constructor(\"$ZodBoolean\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.boolean;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Boolean(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"boolean\")\n            return payload;\n        payload.issues.push({\n            expected: \"boolean\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigInt = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.bigint;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = BigInt(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"bigint\")\n            return payload;\n        payload.issues.push({\n            expected: \"bigint\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    checks.$ZodCheckBigIntFormat.init(inst, def);\n    $ZodBigInt.init(inst, def); // no format checks\n});\nexport const $ZodSymbol = /*@__PURE__*/ core.$constructor(\"$ZodSymbol\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"symbol\")\n            return payload;\n        payload.issues.push({\n            expected: \"symbol\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodUndefined = /*@__PURE__*/ core.$constructor(\"$ZodUndefined\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.undefined;\n    inst._zod.values = new Set([undefined]);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"undefined\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodNull = /*@__PURE__*/ core.$constructor(\"$ZodNull\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.null;\n    inst._zod.values = new Set([null]);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (input === null)\n            return payload;\n        payload.issues.push({\n            expected: \"null\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodAny = /*@__PURE__*/ core.$constructor(\"$ZodAny\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodUnknown = /*@__PURE__*/ core.$constructor(\"$ZodUnknown\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodNever = /*@__PURE__*/ core.$constructor(\"$ZodNever\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.issues.push({\n            expected: \"never\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodVoid = /*@__PURE__*/ core.$constructor(\"$ZodVoid\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"void\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodDate = /*@__PURE__*/ core.$constructor(\"$ZodDate\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce) {\n            try {\n                payload.value = new Date(payload.value);\n            }\n            catch (_err) { }\n        }\n        const input = payload.value;\n        const isDate = input instanceof Date;\n        const isValidDate = isDate && !Number.isNaN(input.getTime());\n        if (isValidDate)\n            return payload;\n        payload.issues.push({\n            expected: \"date\",\n            code: \"invalid_type\",\n            input,\n            ...(isDate ? { received: \"Invalid Date\" } : {}),\n            inst,\n        });\n        return payload;\n    };\n});\nfunction handleArrayResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodArray = /*@__PURE__*/ core.$constructor(\"$ZodArray\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                expected: \"array\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = Array(input.length);\n        const proms = [];\n        for (let i = 0; i < input.length; i++) {\n            const item = input[i];\n            const result = def.element._zod.run({\n                value: item,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleArrayResult(result, payload, i)));\n            }\n            else {\n                handleArrayResult(result, payload, i);\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload; //handleArrayResultsAsync(parseResults, final);\n    };\n});\nfunction handlePropertyResult(result, final, key, input) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(key, result.issues));\n    }\n    if (result.value === undefined) {\n        if (key in input) {\n            final.value[key] = undefined;\n        }\n    }\n    else {\n        final.value[key] = result.value;\n    }\n}\nfunction normalizeDef(def) {\n    const keys = Object.keys(def.shape);\n    for (const k of keys) {\n        if (!def.shape?.[k]?._zod?.traits?.has(\"$ZodType\")) {\n            throw new Error(`Invalid element at key \"${k}\": expected a Zod schema`);\n        }\n    }\n    const okeys = util.optionalKeys(def.shape);\n    return {\n        ...def,\n        keys,\n        keySet: new Set(keys),\n        numKeys: keys.length,\n        optionalKeys: new Set(okeys),\n    };\n}\nfunction handleCatchall(proms, input, payload, ctx, def, inst) {\n    const unrecognized = [];\n    // iterate over input keys\n    const keySet = def.keySet;\n    const _catchall = def.catchall._zod;\n    const t = _catchall.def.type;\n    for (const key of Object.keys(input)) {\n        if (keySet.has(key))\n            continue;\n        if (t === \"never\") {\n            unrecognized.push(key);\n            continue;\n        }\n        const r = _catchall.run({ value: input[key], issues: [] }, ctx);\n        if (r instanceof Promise) {\n            proms.push(r.then((r) => handlePropertyResult(r, payload, key, input)));\n        }\n        else {\n            handlePropertyResult(r, payload, key, input);\n        }\n    }\n    if (unrecognized.length) {\n        payload.issues.push({\n            code: \"unrecognized_keys\",\n            keys: unrecognized,\n            input,\n            inst,\n        });\n    }\n    if (!proms.length)\n        return payload;\n    return Promise.all(proms).then(() => {\n        return payload;\n    });\n}\nexport const $ZodObject = /*@__PURE__*/ core.$constructor(\"$ZodObject\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodType.init(inst, def);\n    // const sh = def.shape;\n    const desc = Object.getOwnPropertyDescriptor(def, \"shape\");\n    if (!desc?.get) {\n        const sh = def.shape;\n        Object.defineProperty(def, \"shape\", {\n            get: () => {\n                const newSh = { ...sh };\n                Object.defineProperty(def, \"shape\", {\n                    value: newSh,\n                });\n                return newSh;\n            },\n        });\n    }\n    const _normalized = util.cached(() => normalizeDef(def));\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const shape = def.shape;\n        const propValues = {};\n        for (const key in shape) {\n            const field = shape[key]._zod;\n            if (field.values) {\n                propValues[key] ?? (propValues[key] = new Set());\n                for (const v of field.values)\n                    propValues[key].add(v);\n            }\n        }\n        return propValues;\n    });\n    const isObject = util.isObject;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = {};\n        const proms = [];\n        const shape = value.shape;\n        for (const key of value.keys) {\n            const el = shape[key];\n            const r = el._zod.run({ value: input[key], issues: [] }, ctx);\n            if (r instanceof Promise) {\n                proms.push(r.then((r) => handlePropertyResult(r, payload, key, input)));\n            }\n            else {\n                handlePropertyResult(r, payload, key, input);\n            }\n        }\n        if (!catchall) {\n            return proms.length ? Promise.all(proms).then(() => payload) : payload;\n        }\n        return handleCatchall(proms, input, payload, ctx, _normalized.value, inst);\n    };\n});\nexport const $ZodObjectJIT = /*@__PURE__*/ core.$constructor(\"$ZodObjectJIT\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodObject.init(inst, def);\n    const superParse = inst._zod.parse;\n    const _normalized = util.cached(() => normalizeDef(def));\n    const generateFastpass = (shape) => {\n        const doc = new Doc([\"shape\", \"payload\", \"ctx\"]);\n        const normalized = _normalized.value;\n        const parseStr = (key) => {\n            const k = util.esc(key);\n            return `shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`;\n        };\n        doc.write(`const input = payload.value;`);\n        const ids = Object.create(null);\n        let counter = 0;\n        for (const key of normalized.keys) {\n            ids[key] = `key_${counter++}`;\n        }\n        // A: preserve key order {\n        doc.write(`const newResult = {};`);\n        for (const key of normalized.keys) {\n            const id = ids[key];\n            const k = util.esc(key);\n            doc.write(`const ${id} = ${parseStr(key)};`);\n            doc.write(`\n        if (${id}.issues.length) {\n          payload.issues = payload.issues.concat(${id}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${k}, ...iss.path] : [${k}]\n          })));\n        }\n        \n        \n        if (${id}.value === undefined) {\n          if (${k} in input) {\n            newResult[${k}] = undefined;\n          }\n        } else {\n          newResult[${k}] = ${id}.value;\n        }\n        \n      `);\n        }\n        doc.write(`payload.value = newResult;`);\n        doc.write(`return payload;`);\n        const fn = doc.compile();\n        return (payload, ctx) => fn(shape, payload, ctx);\n    };\n    let fastpass;\n    const isObject = util.isObject;\n    const jit = !core.globalConfig.jitless;\n    const allowsEval = util.allowsEval;\n    const fastEnabled = jit && allowsEval.value; // && !def.catchall;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        if (jit && fastEnabled && ctx?.async === false && ctx.jitless !== true) {\n            // always synchronous\n            if (!fastpass)\n                fastpass = generateFastpass(def.shape);\n            payload = fastpass(payload, ctx);\n            if (!catchall)\n                return payload;\n            return handleCatchall([], input, payload, ctx, value, inst);\n        }\n        return superParse(payload, ctx);\n    };\n});\nfunction handleUnionResults(results, final, inst, ctx) {\n    for (const result of results) {\n        if (result.issues.length === 0) {\n            final.value = result.value;\n            return final;\n        }\n    }\n    const nonaborted = results.filter((r) => !util.aborted(r));\n    if (nonaborted.length === 1) {\n        final.value = nonaborted[0].value;\n        return nonaborted[0];\n    }\n    final.issues.push({\n        code: \"invalid_union\",\n        input: final.value,\n        inst,\n        errors: results.map((result) => result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n    });\n    return final;\n}\nexport const $ZodUnion = /*@__PURE__*/ core.$constructor(\"$ZodUnion\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.options.some((o) => o._zod.optin === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"optout\", () => def.options.some((o) => o._zod.optout === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"values\", () => {\n        if (def.options.every((o) => o._zod.values)) {\n            return new Set(def.options.flatMap((option) => Array.from(option._zod.values)));\n        }\n        return undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        if (def.options.every((o) => o._zod.pattern)) {\n            const patterns = def.options.map((o) => o._zod.pattern);\n            return new RegExp(`^(${patterns.map((p) => util.cleanRegex(p.source)).join(\"|\")})$`);\n        }\n        return undefined;\n    });\n    const single = def.options.length === 1;\n    const first = def.options[0]._zod.run;\n    inst._zod.parse = (payload, ctx) => {\n        if (single) {\n            return first(payload, ctx);\n        }\n        let async = false;\n        const results = [];\n        for (const option of def.options) {\n            const result = option._zod.run({\n                value: payload.value,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                results.push(result);\n                async = true;\n            }\n            else {\n                if (result.issues.length === 0)\n                    return result;\n                results.push(result);\n            }\n        }\n        if (!async)\n            return handleUnionResults(results, payload, inst, ctx);\n        return Promise.all(results).then((results) => {\n            return handleUnionResults(results, payload, inst, ctx);\n        });\n    };\n});\nexport const $ZodDiscriminatedUnion = \n/*@__PURE__*/\ncore.$constructor(\"$ZodDiscriminatedUnion\", (inst, def) => {\n    $ZodUnion.init(inst, def);\n    const _super = inst._zod.parse;\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const propValues = {};\n        for (const option of def.options) {\n            const pv = option._zod.propValues;\n            if (!pv || Object.keys(pv).length === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(option)}\"`);\n            for (const [k, v] of Object.entries(pv)) {\n                if (!propValues[k])\n                    propValues[k] = new Set();\n                for (const val of v) {\n                    propValues[k].add(val);\n                }\n            }\n        }\n        return propValues;\n    });\n    const disc = util.cached(() => {\n        const opts = def.options;\n        const map = new Map();\n        for (const o of opts) {\n            const values = o._zod.propValues?.[def.discriminator];\n            if (!values || values.size === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(o)}\"`);\n            for (const v of values) {\n                if (map.has(v)) {\n                    throw new Error(`Duplicate discriminator value \"${String(v)}\"`);\n                }\n                map.set(v, o);\n            }\n        }\n        return map;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isObject(input)) {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"object\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const opt = disc.value.get(input?.[def.discriminator]);\n        if (opt) {\n            return opt._zod.run(payload, ctx);\n        }\n        if (def.unionFallback) {\n            return _super(payload, ctx);\n        }\n        // no matching discriminator\n        payload.issues.push({\n            code: \"invalid_union\",\n            errors: [],\n            note: \"No matching discriminator\",\n            discriminator: def.discriminator,\n            input,\n            path: [def.discriminator],\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodIntersection = /*@__PURE__*/ core.$constructor(\"$ZodIntersection\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        const left = def.left._zod.run({ value: input, issues: [] }, ctx);\n        const right = def.right._zod.run({ value: input, issues: [] }, ctx);\n        const async = left instanceof Promise || right instanceof Promise;\n        if (async) {\n            return Promise.all([left, right]).then(([left, right]) => {\n                return handleIntersectionResults(payload, left, right);\n            });\n        }\n        return handleIntersectionResults(payload, left, right);\n    };\n});\nfunction mergeValues(a, b) {\n    // const aType = parse.t(a);\n    // const bType = parse.t(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    if (a instanceof Date && b instanceof Date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    if (util.isPlainObject(a) && util.isPlainObject(b)) {\n        const bKeys = Object.keys(b);\n        const sharedKeys = Object.keys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [key, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    if (Array.isArray(a) && Array.isArray(b)) {\n        if (a.length !== b.length) {\n            return { valid: false, mergeErrorPath: [] };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [index, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    return { valid: false, mergeErrorPath: [] };\n}\nfunction handleIntersectionResults(result, left, right) {\n    if (left.issues.length) {\n        result.issues.push(...left.issues);\n    }\n    if (right.issues.length) {\n        result.issues.push(...right.issues);\n    }\n    if (util.aborted(result))\n        return result;\n    const merged = mergeValues(left.value, right.value);\n    if (!merged.valid) {\n        throw new Error(`Unmergable intersection. Error path: ` + `${JSON.stringify(merged.mergeErrorPath)}`);\n    }\n    result.value = merged.data;\n    return result;\n}\nexport const $ZodTuple = /*@__PURE__*/ core.$constructor(\"$ZodTuple\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const items = def.items;\n    const optStart = items.length - [...items].reverse().findIndex((item) => item._zod.optin !== \"optional\");\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"tuple\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        payload.value = [];\n        const proms = [];\n        if (!def.rest) {\n            const tooBig = input.length > items.length;\n            const tooSmall = input.length < optStart - 1;\n            if (tooBig || tooSmall) {\n                payload.issues.push({\n                    ...(tooBig ? { code: \"too_big\", maximum: items.length } : { code: \"too_small\", minimum: items.length }),\n                    input,\n                    inst,\n                    origin: \"array\",\n                });\n                return payload;\n            }\n        }\n        let i = -1;\n        for (const item of items) {\n            i++;\n            if (i >= input.length)\n                if (i >= optStart)\n                    continue;\n            const result = item._zod.run({\n                value: input[i],\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n            }\n            else {\n                handleTupleResult(result, payload, i);\n            }\n        }\n        if (def.rest) {\n            const rest = input.slice(items.length);\n            for (const el of rest) {\n                i++;\n                const result = def.rest._zod.run({\n                    value: el,\n                    issues: [],\n                }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n                }\n                else {\n                    handleTupleResult(result, payload, i);\n                }\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleTupleResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodRecord = /*@__PURE__*/ core.$constructor(\"$ZodRecord\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isPlainObject(input)) {\n            payload.issues.push({\n                expected: \"record\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        if (def.keyType._zod.values) {\n            const values = def.keyType._zod.values;\n            payload.value = {};\n            for (const key of values) {\n                if (typeof key === \"string\" || typeof key === \"number\" || typeof key === \"symbol\") {\n                    const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                    if (result instanceof Promise) {\n                        proms.push(result.then((result) => {\n                            if (result.issues.length) {\n                                payload.issues.push(...util.prefixIssues(key, result.issues));\n                            }\n                            payload.value[key] = result.value;\n                        }));\n                    }\n                    else {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[key] = result.value;\n                    }\n                }\n            }\n            let unrecognized;\n            for (const key in input) {\n                if (!values.has(key)) {\n                    unrecognized = unrecognized ?? [];\n                    unrecognized.push(key);\n                }\n            }\n            if (unrecognized && unrecognized.length > 0) {\n                payload.issues.push({\n                    code: \"unrecognized_keys\",\n                    input,\n                    inst,\n                    keys: unrecognized,\n                });\n            }\n        }\n        else {\n            payload.value = {};\n            for (const key of Reflect.ownKeys(input)) {\n                if (key === \"__proto__\")\n                    continue;\n                const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n                if (keyResult instanceof Promise) {\n                    throw new Error(\"Async schemas not supported in object keys currently\");\n                }\n                if (keyResult.issues.length) {\n                    payload.issues.push({\n                        code: \"invalid_key\",\n                        origin: \"record\",\n                        issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        input: key,\n                        path: [key],\n                        inst,\n                    });\n                    payload.value[keyResult.value] = keyResult.value;\n                    continue;\n                }\n                const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[keyResult.value] = result.value;\n                    }));\n                }\n                else {\n                    if (result.issues.length) {\n                        payload.issues.push(...util.prefixIssues(key, result.issues));\n                    }\n                    payload.value[keyResult.value] = result.value;\n                }\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload;\n    };\n});\nexport const $ZodMap = /*@__PURE__*/ core.$constructor(\"$ZodMap\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Map)) {\n            payload.issues.push({\n                expected: \"map\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Map();\n        for (const [key, value] of input) {\n            const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n            const valueResult = def.valueType._zod.run({ value: value, issues: [] }, ctx);\n            if (keyResult instanceof Promise || valueResult instanceof Promise) {\n                proms.push(Promise.all([keyResult, valueResult]).then(([keyResult, valueResult]) => {\n                    handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n                }));\n            }\n            else {\n                handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleMapResult(keyResult, valueResult, final, key, input, inst, ctx) {\n    if (keyResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, keyResult.issues));\n        }\n        else {\n            final.issues.push({\n                code: \"invalid_key\",\n                origin: \"map\",\n                input,\n                inst,\n                issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    if (valueResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, valueResult.issues));\n        }\n        else {\n            final.issues.push({\n                origin: \"map\",\n                code: \"invalid_element\",\n                input,\n                inst,\n                key: key,\n                issues: valueResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    final.value.set(keyResult.value, valueResult.value);\n}\nexport const $ZodSet = /*@__PURE__*/ core.$constructor(\"$ZodSet\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Set)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"set\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Set();\n        for (const item of input) {\n            const result = def.valueType._zod.run({ value: item, issues: [] }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleSetResult(result, payload)));\n            }\n            else\n                handleSetResult(result, payload);\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleSetResult(result, final) {\n    if (result.issues.length) {\n        final.issues.push(...result.issues);\n    }\n    final.value.add(result.value);\n}\nexport const $ZodEnum = /*@__PURE__*/ core.$constructor(\"$ZodEnum\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const values = util.getEnumValues(def.entries);\n    const valuesSet = new Set(values);\n    inst._zod.values = valuesSet;\n    inst._zod.pattern = new RegExp(`^(${values\n        .filter((k) => util.propertyKeyTypes.has(typeof k))\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o.toString()))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (valuesSet.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodLiteral = /*@__PURE__*/ core.$constructor(\"$ZodLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    if (def.values.length === 0) {\n        throw new Error(\"Cannot create literal schema with no valid values\");\n    }\n    inst._zod.values = new Set(def.values);\n    inst._zod.pattern = new RegExp(`^(${def.values\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o ? util.escapeRegex(o.toString()) : String(o)))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (inst._zod.values.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodFile = /*@__PURE__*/ core.$constructor(\"$ZodFile\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        // @ts-ignore\n        if (input instanceof File)\n            return payload;\n        payload.issues.push({\n            expected: \"file\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodTransform = /*@__PURE__*/ core.$constructor(\"$ZodTransform\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(inst.constructor.name);\n        }\n        const _out = def.transform(payload.value, payload);\n        if (ctx.async) {\n            const output = _out instanceof Promise ? _out : Promise.resolve(_out);\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        if (_out instanceof Promise) {\n            throw new core.$ZodAsyncError();\n        }\n        payload.value = _out;\n        return payload;\n    };\n});\nfunction handleOptionalResult(result, input) {\n    if (result.issues.length && input === undefined) {\n        return { issues: [], value: undefined };\n    }\n    return result;\n}\nexport const $ZodOptional = /*@__PURE__*/ core.$constructor(\"$ZodOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, undefined]) : undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)})?$`) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        if (def.innerType._zod.optin === \"optional\") {\n            const result = def.innerType._zod.run(payload, ctx);\n            if (result instanceof Promise)\n                return result.then((r) => handleOptionalResult(r, payload.value));\n            return handleOptionalResult(result, payload.value);\n        }\n        if (payload.value === undefined) {\n            return payload;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNullable = /*@__PURE__*/ core.$constructor(\"$ZodNullable\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)}|null)$`) : undefined;\n    });\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, null]) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        // Forward direction (decode): allow null to pass through\n        if (payload.value === null)\n            return payload;\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodDefault = /*@__PURE__*/ core.$constructor(\"$ZodDefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // inst._zod.qin = \"true\";\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply defaults for undefined input\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n            /**\n             * $ZodDefault returns the default value immediately in forward direction.\n             * It doesn't pass the default value into the validator (\"prefault\"). There's no reason to pass the default value through validation. The validity of the default is enforced by TypeScript statically. Otherwise, it's the responsibility of the user to ensure the default is valid. In the case of pipes with divergent in/out types, you can specify the default on the `in` schema of your ZodPipe to set a \"prefault\" for the pipe.   */\n            return payload;\n        }\n        // Forward direction: continue with default handling\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleDefaultResult(result, def));\n        }\n        return handleDefaultResult(result, def);\n    };\n});\nfunction handleDefaultResult(payload, def) {\n    if (payload.value === undefined) {\n        payload.value = def.defaultValue;\n    }\n    return payload;\n}\nexport const $ZodPrefault = /*@__PURE__*/ core.$constructor(\"$ZodPrefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply prefault for undefined input\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNonOptional = /*@__PURE__*/ core.$constructor(\"$ZodNonOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => {\n        const v = def.innerType._zod.values;\n        return v ? new Set([...v].filter((x) => x !== undefined)) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleNonOptionalResult(result, inst));\n        }\n        return handleNonOptionalResult(result, inst);\n    };\n});\nfunction handleNonOptionalResult(payload, inst) {\n    if (!payload.issues.length && payload.value === undefined) {\n        payload.issues.push({\n            code: \"invalid_type\",\n            expected: \"nonoptional\",\n            input: payload.value,\n            inst,\n        });\n    }\n    return payload;\n}\nexport const $ZodSuccess = /*@__PURE__*/ core.$constructor(\"$ZodSuccess\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(\"ZodSuccess\");\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.issues.length === 0;\n                return payload;\n            });\n        }\n        payload.value = result.issues.length === 0;\n        return payload;\n    };\n});\nexport const $ZodCatch = /*@__PURE__*/ core.$constructor(\"$ZodCatch\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        // Forward direction (decode): apply catch logic\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.value;\n                if (result.issues.length) {\n                    payload.value = def.catchValue({\n                        ...payload,\n                        error: {\n                            issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        },\n                        input: payload.value,\n                    });\n                    payload.issues = [];\n                }\n                return payload;\n            });\n        }\n        payload.value = result.value;\n        if (result.issues.length) {\n            payload.value = def.catchValue({\n                ...payload,\n                error: {\n                    issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                },\n                input: payload.value,\n            });\n            payload.issues = [];\n        }\n        return payload;\n    };\n});\nexport const $ZodNaN = /*@__PURE__*/ core.$constructor(\"$ZodNaN\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"number\" || !Number.isNaN(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"nan\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodPipe = /*@__PURE__*/ core.$constructor(\"$ZodPipe\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    util.defineLazy(inst._zod, \"propValues\", () => def.in._zod.propValues);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            const right = def.out._zod.run(payload, ctx);\n            if (right instanceof Promise) {\n                return right.then((right) => handlePipeResult(right, def.in, ctx));\n            }\n            return handlePipeResult(right, def.in, ctx);\n        }\n        const left = def.in._zod.run(payload, ctx);\n        if (left instanceof Promise) {\n            return left.then((left) => handlePipeResult(left, def.out, ctx));\n        }\n        return handlePipeResult(left, def.out, ctx);\n    };\n});\nfunction handlePipeResult(left, next, ctx) {\n    if (left.issues.length) {\n        // prevent further checks\n        left.aborted = true;\n        return left;\n    }\n    return next._zod.run({ value: left.value, issues: left.issues }, ctx);\n}\nexport const $ZodCodec = /*@__PURE__*/ core.$constructor(\"$ZodCodec\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    util.defineLazy(inst._zod, \"propValues\", () => def.in._zod.propValues);\n    inst._zod.parse = (payload, ctx) => {\n        const direction = ctx.direction || \"forward\";\n        if (direction === \"forward\") {\n            const left = def.in._zod.run(payload, ctx);\n            if (left instanceof Promise) {\n                return left.then((left) => handleCodecAResult(left, def, ctx));\n            }\n            return handleCodecAResult(left, def, ctx);\n        }\n        else {\n            const right = def.out._zod.run(payload, ctx);\n            if (right instanceof Promise) {\n                return right.then((right) => handleCodecAResult(right, def, ctx));\n            }\n            return handleCodecAResult(right, def, ctx);\n        }\n    };\n});\nfunction handleCodecAResult(result, def, ctx) {\n    if (result.issues.length) {\n        // prevent further checks\n        result.aborted = true;\n        return result;\n    }\n    const direction = ctx.direction || \"forward\";\n    if (direction === \"forward\") {\n        const transformed = def.transform(result.value, result);\n        if (transformed instanceof Promise) {\n            return transformed.then((value) => handleCodecTxResult(result, value, def.out, ctx));\n        }\n        return handleCodecTxResult(result, transformed, def.out, ctx);\n    }\n    else {\n        const transformed = def.reverseTransform(result.value, result);\n        if (transformed instanceof Promise) {\n            return transformed.then((value) => handleCodecTxResult(result, value, def.in, ctx));\n        }\n        return handleCodecTxResult(result, transformed, def.in, ctx);\n    }\n}\nfunction handleCodecTxResult(left, value, nextSchema, ctx) {\n    // Check if transform added any issues\n    if (left.issues.length) {\n        left.aborted = true;\n        return left;\n    }\n    return nextSchema._zod.run({ value, issues: left.issues }, ctx);\n}\nexport const $ZodReadonly = /*@__PURE__*/ core.$constructor(\"$ZodReadonly\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"propValues\", () => def.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    inst._zod.parse = (payload, ctx) => {\n        if (ctx.direction === \"backward\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then(handleReadonlyResult);\n        }\n        return handleReadonlyResult(result);\n    };\n});\nfunction handleReadonlyResult(payload) {\n    payload.value = Object.freeze(payload.value);\n    return payload;\n}\nexport const $ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"$ZodTemplateLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const regexParts = [];\n    for (const part of def.parts) {\n        if (typeof part === \"object\" && part !== null) {\n            // is Zod schema\n            if (!part._zod.pattern) {\n                // if (!source)\n                throw new Error(`Invalid template literal part, no pattern found: ${[...part._zod.traits].shift()}`);\n            }\n            const source = part._zod.pattern instanceof RegExp ? part._zod.pattern.source : part._zod.pattern;\n            if (!source)\n                throw new Error(`Invalid template literal part: ${part._zod.traits}`);\n            const start = source.startsWith(\"^\") ? 1 : 0;\n            const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n            regexParts.push(source.slice(start, end));\n        }\n        else if (part === null || util.primitiveTypes.has(typeof part)) {\n            regexParts.push(util.escapeRegex(`${part}`));\n        }\n        else {\n            throw new Error(`Invalid template literal part: ${part}`);\n        }\n    }\n    inst._zod.pattern = new RegExp(`^${regexParts.join(\"\")}$`);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"string\") {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"template_literal\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        inst._zod.pattern.lastIndex = 0;\n        if (!inst._zod.pattern.test(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                code: \"invalid_format\",\n                format: def.format ?? \"template_literal\",\n                pattern: inst._zod.pattern.source,\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodFunction = /*@__PURE__*/ core.$constructor(\"$ZodFunction\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._def = def;\n    inst._zod.def = def;\n    inst.implement = (func) => {\n        if (typeof func !== \"function\") {\n            throw new Error(\"implement() must be called with a function\");\n        }\n        return function (...args) {\n            const parsedArgs = inst._def.input ? parse(inst._def.input, args) : args;\n            const result = Reflect.apply(func, this, parsedArgs);\n            if (inst._def.output) {\n                return parse(inst._def.output, result);\n            }\n            return result;\n        };\n    };\n    inst.implementAsync = (func) => {\n        if (typeof func !== \"function\") {\n            throw new Error(\"implementAsync() must be called with a function\");\n        }\n        return async function (...args) {\n            const parsedArgs = inst._def.input ? await parseAsync(inst._def.input, args) : args;\n            const result = await Reflect.apply(func, this, parsedArgs);\n            if (inst._def.output) {\n                return await parseAsync(inst._def.output, result);\n            }\n            return result;\n        };\n    };\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"function\") {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"function\",\n                input: payload.value,\n                inst,\n            });\n            return payload;\n        }\n        // Check if output is a promise type to determine if we should use async implementation\n        const hasPromiseOutput = inst._def.output && inst._def.output._zod.def.type === \"promise\";\n        if (hasPromiseOutput) {\n            payload.value = inst.implementAsync(payload.value);\n        }\n        else {\n            payload.value = inst.implement(payload.value);\n        }\n        return payload;\n    };\n    inst.input = (...args) => {\n        const F = inst.constructor;\n        if (Array.isArray(args[0])) {\n            return new F({\n                type: \"function\",\n                input: new $ZodTuple({\n                    type: \"tuple\",\n                    items: args[0],\n                    rest: args[1],\n                }),\n                output: inst._def.output,\n            });\n        }\n        return new F({\n            type: \"function\",\n            input: args[0],\n            output: inst._def.output,\n        });\n    };\n    inst.output = (output) => {\n        const F = inst.constructor;\n        return new F({\n            type: \"function\",\n            input: inst._def.input,\n            output,\n        });\n    };\n    return inst;\n});\nexport const $ZodPromise = /*@__PURE__*/ core.$constructor(\"$ZodPromise\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        return Promise.resolve(payload.value).then((inner) => def.innerType._zod.run({ value: inner, issues: [] }, ctx));\n    };\n});\nexport const $ZodLazy = /*@__PURE__*/ core.$constructor(\"$ZodLazy\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // let _innerType!: any;\n    // util.defineLazy(def, \"getter\", () => {\n    //   if (!_innerType) {\n    //     _innerType = def.getter();\n    //   }\n    //   return () => _innerType;\n    // });\n    util.defineLazy(inst._zod, \"innerType\", () => def.getter());\n    util.defineLazy(inst._zod, \"pattern\", () => inst._zod.innerType._zod.pattern);\n    util.defineLazy(inst._zod, \"propValues\", () => inst._zod.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"optin\", () => inst._zod.innerType._zod.optin ?? undefined);\n    util.defineLazy(inst._zod, \"optout\", () => inst._zod.innerType._zod.optout ?? undefined);\n    inst._zod.parse = (payload, ctx) => {\n        const inner = inst._zod.innerType;\n        return inner._zod.run(payload, ctx);\n    };\n});\nexport const $ZodCustom = /*@__PURE__*/ core.$constructor(\"$ZodCustom\", (inst, def) => {\n    checks.$ZodCheck.init(inst, def);\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _) => {\n        return payload;\n    };\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const r = def.fn(input);\n        if (r instanceof Promise) {\n            return r.then((r) => handleRefineResult(r, payload, input, inst));\n        }\n        handleRefineResult(r, payload, input, inst);\n        return;\n    };\n});\nfunction handleRefineResult(result, payload, input, inst) {\n    if (!result) {\n        const _iss = {\n            code: \"custom\",\n            input,\n            inst, // incorporates params.error into issue reporting\n            path: [...(inst._zod.def.path ?? [])], // incorporates params.error into issue reporting\n            continue: !inst._zod.def.abort,\n            // params: inst._zod.def.params,\n        };\n        if (inst._zod.def.params)\n            _iss.params = inst._zod.def.params;\n        payload.issues.push(util.issue(_iss));\n    }\n}\n","export { default as ar } from \"./ar.js\";\nexport { default as az } from \"./az.js\";\nexport { default as be } from \"./be.js\";\nexport { default as bg } from \"./bg.js\";\nexport { default as ca } from \"./ca.js\";\nexport { default as cs } from \"./cs.js\";\nexport { default as da } from \"./da.js\";\nexport { default as de } from \"./de.js\";\nexport { default as en } from \"./en.js\";\nexport { default as eo } from \"./eo.js\";\nexport { default as es } from \"./es.js\";\nexport { default as fa } from \"./fa.js\";\nexport { default as fi } from \"./fi.js\";\nexport { default as fr } from \"./fr.js\";\nexport { default as frCA } from \"./fr-CA.js\";\nexport { default as he } from \"./he.js\";\nexport { default as hu } from \"./hu.js\";\nexport { default as id } from \"./id.js\";\nexport { default as is } from \"./is.js\";\nexport { default as it } from \"./it.js\";\nexport { default as ja } from \"./ja.js\";\nexport { default as ka } from \"./ka.js\";\nexport { default as kh } from \"./kh.js\";\nexport { default as km } from \"./km.js\";\nexport { default as ko } from \"./ko.js\";\nexport { default as lt } from \"./lt.js\";\nexport { default as mk } from \"./mk.js\";\nexport { default as ms } from \"./ms.js\";\nexport { default as nl } from \"./nl.js\";\nexport { default as no } from \"./no.js\";\nexport { default as ota } from \"./ota.js\";\nexport { default as ps } from \"./ps.js\";\nexport { default as pl } from \"./pl.js\";\nexport { default as pt } from \"./pt.js\";\nexport { default as ru } from \"./ru.js\";\nexport { default as sl } from \"./sl.js\";\nexport { default as sv } from \"./sv.js\";\nexport { default as ta } from \"./ta.js\";\nexport { default as th } from \"./th.js\";\nexport { default as tr } from \"./tr.js\";\nexport { default as ua } from \"./ua.js\";\nexport { default as uk } from \"./uk.js\";\nexport { default as ur } from \"./ur.js\";\nexport { default as vi } from \"./vi.js\";\nexport { default as zhCN } from \"./zh-CN.js\";\nexport { default as zhTW } from \"./zh-TW.js\";\nexport { default as yo } from \"./yo.js\";\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \" \" },\n        file: { unit: \"\", verb: \" \" },\n        array: { unit: \"\", verb: \" \" },\n        set: { unit: \"\", verb: \" \" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\",\n        email: \" \",\n        url: \"\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"   ISO\",\n        date: \"  ISO\",\n        time: \"  ISO\",\n        duration: \"  ISO\",\n        ipv4: \" IPv4\",\n        ipv6: \" IPv6\",\n        cidrv4: \"   IPv4\",\n        cidrv6: \"   IPv6\",\n        base64: \"  base64-encoded\",\n        base64url: \"  base64url-encoded\",\n        json_string: \"   JSON\",\n        e164: \"   E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `  :   ${issue.expected}    ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `  :   ${util.stringifyPrimitive(issue.values[0])}`;\n                return `  :     : ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `   :    ${issue.origin ?? \"\"} ${adj} ${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return `  :    ${issue.origin ?? \"\"} ${adj} ${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `  :   ${issue.origin}   ${adj} ${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `  :   ${issue.origin}   ${adj} ${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `  :     \"${issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `  :     \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `  :    \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `  :     ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format}  `;\n            }\n            case \"not_multiple_of\":\n                return `  :      ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\" : \"\"} ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \" \")}`;\n            case \"invalid_key\":\n                return `    ${issue.origin}`;\n            case \"invalid_union\":\n                return \"  \";\n            case \"invalid_element\":\n                return `    ${issue.origin}`;\n            default:\n                return \"  \";\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"simvol\", verb: \"olmaldr\" },\n        file: { unit: \"bayt\", verb: \"olmaldr\" },\n        array: { unit: \"element\", verb: \"olmaldr\" },\n        set: { unit: \"element\", verb: \"olmaldr\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"input\",\n        email: \"email address\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO datetime\",\n        date: \"ISO date\",\n        time: \"ISO time\",\n        duration: \"ISO duration\",\n        ipv4: \"IPv4 address\",\n        ipv6: \"IPv6 address\",\n        cidrv4: \"IPv4 range\",\n        cidrv6: \"IPv6 range\",\n        base64: \"base64-encoded string\",\n        base64url: \"base64url-encoded string\",\n        json_string: \"JSON string\",\n        e164: \"E.164 number\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Yanl dyr: gzlniln ${issue.expected}, daxil olan ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Yanl dyr: gzlniln ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Yanl seim: aadaklardan biri olmaldr: ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `ox byk: gzlniln ${issue.origin ?? \"dyr\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"element\"}`;\n                return `ox byk: gzlniln ${issue.origin ?? \"dyr\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `ox kiik: gzlniln ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                return `ox kiik: gzlniln ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Yanl mtn: \"${_issue.prefix}\" il balamaldr`;\n                if (_issue.format === \"ends_with\")\n                    return `Yanl mtn: \"${_issue.suffix}\" il bitmlidir`;\n                if (_issue.format === \"includes\")\n                    return `Yanl mtn: \"${_issue.includes}\" daxil olmaldr`;\n                if (_issue.format === \"regex\")\n                    return `Yanl mtn: ${_issue.pattern} ablonuna uyun olmaldr`;\n                return `Yanl ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Yanl dd: ${issue.divisor} il bln biln olmaldr`;\n            case \"unrecognized_keys\":\n                return `Tannmayan aar${issue.keys.length > 1 ? \"lar\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} daxilind yanl aar`;\n            case \"invalid_union\":\n                return \"Yanl dyr\";\n            case \"invalid_element\":\n                return `${issue.origin} daxilind yanl dyr`;\n            default:\n                return `Yanl dyr`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nfunction getBelarusianPlural(count, one, few, many) {\n    const absCount = Math.abs(count);\n    const lastDigit = absCount % 10;\n    const lastTwoDigits = absCount % 100;\n    if (lastTwoDigits >= 11 && lastTwoDigits <= 19) {\n        return many;\n    }\n    if (lastDigit === 1) {\n        return one;\n    }\n    if (lastDigit >= 2 && lastDigit <= 4) {\n        return few;\n    }\n    return many;\n}\nconst error = () => {\n    const Sizable = {\n        string: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        array: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        set: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        file: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\",\n        email: \"email \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO   \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"   base64\",\n        base64url: \"   base64url\",\n        json_string: \"JSON \",\n        e164: \" E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return ` :  ${issue.expected},  ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` :    ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    const maxValue = Number(issue.maximum);\n                    const unit = getBelarusianPlural(maxValue, sizing.unit.one, sizing.unit.few, sizing.unit.many);\n                    return ` : ,  ${issue.origin ?? \"\"}  ${sizing.verb} ${adj}${issue.maximum.toString()} ${unit}`;\n                }\n                return ` : ,  ${issue.origin ?? \"\"}   ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    const minValue = Number(issue.minimum);\n                    const unit = getBelarusianPlural(minValue, sizing.unit.one, sizing.unit.few, sizing.unit.many);\n                    return ` : ,  ${issue.origin}  ${sizing.verb} ${adj}${issue.minimum.toString()} ${unit}`;\n                }\n                return ` : ,  ${issue.origin}   ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return ` :    \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return ` :    \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return ` :   \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return ` :    ${_issue.pattern}`;\n                return ` ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` :    ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return ` ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin}`;\n            case \"invalid_union\":\n                return \" \";\n            case \"invalid_element\":\n                return `   ${issue.origin}`;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nexport const parsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"number\": {\n            return Number.isNaN(data) ? \"NaN\" : \"\";\n        }\n        case \"object\": {\n            if (Array.isArray(data)) {\n                return \"\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                return data.constructor.name;\n            }\n        }\n    }\n    return t;\n};\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \" \" },\n        file: { unit: \"\", verb: \" \" },\n        array: { unit: \"\", verb: \" \" },\n        set: { unit: \"\", verb: \" \" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const Nouns = {\n        regex: \"\",\n        email: \" \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64- \",\n        base64url: \"base64url- \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return ` :  ${issue.expected},  ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` :    ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` :   ${issue.origin ?? \"\"}   ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return ` :   ${issue.origin ?? \"\"}   ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` :   ${issue.origin}   ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return ` :   ${issue.origin}   ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` :     \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return ` :     \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return ` :    \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return ` :     ${_issue.pattern}`;\n                let invalid_adj = \"\";\n                if (_issue.format === \"emoji\")\n                    invalid_adj = \"\";\n                if (_issue.format === \"datetime\")\n                    invalid_adj = \"\";\n                if (_issue.format === \"date\")\n                    invalid_adj = \"\";\n                if (_issue.format === \"time\")\n                    invalid_adj = \"\";\n                if (_issue.format === \"duration\")\n                    invalid_adj = \"\";\n                return `${invalid_adj} ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` :      ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\" : \"\"} ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin}`;\n            case \"invalid_union\":\n                return \" \";\n            case \"invalid_element\":\n                return `   ${issue.origin}`;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"carcters\", verb: \"contenir\" },\n        file: { unit: \"bytes\", verb: \"contenir\" },\n        array: { unit: \"elements\", verb: \"contenir\" },\n        set: { unit: \"elements\", verb: \"contenir\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"entrada\",\n        email: \"adrea electrnica\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"data i hora ISO\",\n        date: \"data ISO\",\n        time: \"hora ISO\",\n        duration: \"durada ISO\",\n        ipv4: \"adrea IPv4\",\n        ipv6: \"adrea IPv6\",\n        cidrv4: \"rang IPv4\",\n        cidrv6: \"rang IPv6\",\n        base64: \"cadena codificada en base64\",\n        base64url: \"cadena codificada en base64url\",\n        json_string: \"cadena JSON\",\n        e164: \"nmero E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entrada\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Tipus invlid: s'esperava ${issue.expected}, s'ha rebut ${parsedType(issue.input)}`;\n            // return `Tipus invlid: s'esperava ${issue.expected}, s'ha rebut ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Valor invlid: s'esperava ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Opci invlida: s'esperava una de ${util.joinValues(issue.values, \" o \")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"com a mxim\" : \"menys de\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Massa gran: s'esperava que ${issue.origin ?? \"el valor\"} contingus ${adj} ${issue.maximum.toString()} ${sizing.unit ?? \"elements\"}`;\n                return `Massa gran: s'esperava que ${issue.origin ?? \"el valor\"} fos ${adj} ${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"com a mnim\" : \"ms de\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Massa petit: s'esperava que ${issue.origin} contingus ${adj} ${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Massa petit: s'esperava que ${issue.origin} fos ${adj} ${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Format invlid: ha de comenar amb \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Format invlid: ha d'acabar amb \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Format invlid: ha d'incloure \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Format invlid: ha de coincidir amb el patr ${_issue.pattern}`;\n                return `Format invlid per a ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Nmero invlid: ha de ser mltiple de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Clau${issue.keys.length > 1 ? \"s\" : \"\"} no reconeguda${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Clau invlida a ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Entrada invlida\"; // Could also be \"Tipus d'uni invlid\" but \"Entrada invlida\" is more general\n            case \"invalid_element\":\n                return `Element invlid a ${issue.origin}`;\n            default:\n                return `Entrada invlida`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"znak\", verb: \"mt\" },\n        file: { unit: \"bajt\", verb: \"mt\" },\n        array: { unit: \"prvk\", verb: \"mt\" },\n        set: { unit: \"prvk\", verb: \"mt\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"slo\";\n            }\n            case \"string\": {\n                return \"etzec\";\n            }\n            case \"boolean\": {\n                return \"boolean\";\n            }\n            case \"bigint\": {\n                return \"bigint\";\n            }\n            case \"function\": {\n                return \"funkce\";\n            }\n            case \"symbol\": {\n                return \"symbol\";\n            }\n            case \"undefined\": {\n                return \"undefined\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"pole\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"regulrn vraz\",\n        email: \"e-mailov adresa\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"datum a as ve formtu ISO\",\n        date: \"datum ve formtu ISO\",\n        time: \"as ve formtu ISO\",\n        duration: \"doba trvn ISO\",\n        ipv4: \"IPv4 adresa\",\n        ipv6: \"IPv6 adresa\",\n        cidrv4: \"rozsah IPv4\",\n        cidrv6: \"rozsah IPv6\",\n        base64: \"etzec zakdovan ve formtu base64\",\n        base64url: \"etzec zakdovan ve formtu base64url\",\n        json_string: \"etzec ve formtu JSON\",\n        e164: \"slo E.164\",\n        jwt: \"JWT\",\n        template_literal: \"vstup\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Neplatn vstup: oekvno ${issue.expected}, obdreno ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Neplatn vstup: oekvno ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Neplatn monost: oekvna jedna z hodnot ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Hodnota je pli velk: ${issue.origin ?? \"hodnota\"} mus mt ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"prvk\"}`;\n                }\n                return `Hodnota je pli velk: ${issue.origin ?? \"hodnota\"} mus bt ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Hodnota je pli mal: ${issue.origin ?? \"hodnota\"} mus mt ${adj}${issue.minimum.toString()} ${sizing.unit ?? \"prvk\"}`;\n                }\n                return `Hodnota je pli mal: ${issue.origin ?? \"hodnota\"} mus bt ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Neplatn etzec: mus zanat na \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Neplatn etzec: mus konit na \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Neplatn etzec: mus obsahovat \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Neplatn etzec: mus odpovdat vzoru ${_issue.pattern}`;\n                return `Neplatn formt ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Neplatn slo: mus bt nsobkem ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Neznm kle: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Neplatn kl v ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Neplatn vstup\";\n            case \"invalid_element\":\n                return `Neplatn hodnota v ${issue.origin}`;\n            default:\n                return `Neplatn vstup`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"tegn\", verb: \"havde\" },\n        file: { unit: \"bytes\", verb: \"havde\" },\n        array: { unit: \"elementer\", verb: \"indeholdt\" },\n        set: { unit: \"elementer\", verb: \"indeholdt\" },\n    };\n    const TypeNames = {\n        string: \"streng\",\n        number: \"tal\",\n        boolean: \"boolean\",\n        array: \"liste\",\n        object: \"objekt\",\n        set: \"st\",\n        file: \"fil\",\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    function getTypeName(type) {\n        return TypeNames[type] ?? type;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"tal\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"liste\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n                return \"objekt\";\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"input\",\n        email: \"e-mailadresse\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO dato- og klokkeslt\",\n        date: \"ISO-dato\",\n        time: \"ISO-klokkeslt\",\n        duration: \"ISO-varighed\",\n        ipv4: \"IPv4-omrde\",\n        ipv6: \"IPv6-omrde\",\n        cidrv4: \"IPv4-spektrum\",\n        cidrv6: \"IPv6-spektrum\",\n        base64: \"base64-kodet streng\",\n        base64url: \"base64url-kodet streng\",\n        json_string: \"JSON-streng\",\n        e164: \"E.164-nummer\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Ugyldigt input: forventede ${getTypeName(issue.expected)}, fik ${getTypeName(parsedType(issue.input))}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ugyldig vrdi: forventede ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ugyldigt valg: forventede en af flgende ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                const origin = getTypeName(issue.origin);\n                if (sizing)\n                    return `For stor: forventede ${origin ?? \"value\"} ${sizing.verb} ${adj} ${issue.maximum.toString()} ${sizing.unit ?? \"elementer\"}`;\n                return `For stor: forventede ${origin ?? \"value\"} havde ${adj} ${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                const origin = getTypeName(issue.origin);\n                if (sizing) {\n                    return `For lille: forventede ${origin} ${sizing.verb} ${adj} ${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `For lille: forventede ${origin} havde ${adj} ${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Ugyldig streng: skal starte med \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Ugyldig streng: skal ende med \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Ugyldig streng: skal indeholde \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Ugyldig streng: skal matche mnsteret ${_issue.pattern}`;\n                return `Ugyldig ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ugyldigt tal: skal vre deleligt med ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"Ukendte ngler\" : \"Ukendt ngle\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Ugyldig ngle i ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Ugyldigt input: matcher ingen af de tilladte typer\";\n            case \"invalid_element\":\n                return `Ugyldig vrdi i ${issue.origin}`;\n            default:\n                return `Ugyldigt input`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"Zeichen\", verb: \"zu haben\" },\n        file: { unit: \"Bytes\", verb: \"zu haben\" },\n        array: { unit: \"Elemente\", verb: \"zu haben\" },\n        set: { unit: \"Elemente\", verb: \"zu haben\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"Zahl\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"Array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"Eingabe\",\n        email: \"E-Mail-Adresse\",\n        url: \"URL\",\n        emoji: \"Emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO-Datum und -Uhrzeit\",\n        date: \"ISO-Datum\",\n        time: \"ISO-Uhrzeit\",\n        duration: \"ISO-Dauer\",\n        ipv4: \"IPv4-Adresse\",\n        ipv6: \"IPv6-Adresse\",\n        cidrv4: \"IPv4-Bereich\",\n        cidrv6: \"IPv6-Bereich\",\n        base64: \"Base64-codierter String\",\n        base64url: \"Base64-URL-codierter String\",\n        json_string: \"JSON-String\",\n        e164: \"E.164-Nummer\",\n        jwt: \"JWT\",\n        template_literal: \"Eingabe\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Ungltige Eingabe: erwartet ${issue.expected}, erhalten ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ungltige Eingabe: erwartet ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ungltige Option: erwartet eine von ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Zu gro: erwartet, dass ${issue.origin ?? \"Wert\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"Elemente\"} hat`;\n                return `Zu gro: erwartet, dass ${issue.origin ?? \"Wert\"} ${adj}${issue.maximum.toString()} ist`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Zu klein: erwartet, dass ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit} hat`;\n                }\n                return `Zu klein: erwartet, dass ${issue.origin} ${adj}${issue.minimum.toString()} ist`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Ungltiger String: muss mit \"${_issue.prefix}\" beginnen`;\n                if (_issue.format === \"ends_with\")\n                    return `Ungltiger String: muss mit \"${_issue.suffix}\" enden`;\n                if (_issue.format === \"includes\")\n                    return `Ungltiger String: muss \"${_issue.includes}\" enthalten`;\n                if (_issue.format === \"regex\")\n                    return `Ungltiger String: muss dem Muster ${_issue.pattern} entsprechen`;\n                return `Ungltig: ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ungltige Zahl: muss ein Vielfaches von ${issue.divisor} sein`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"Unbekannte Schlssel\" : \"Unbekannter Schlssel\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Ungltiger Schlssel in ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Ungltige Eingabe\";\n            case \"invalid_element\":\n                return `Ungltiger Wert in ${issue.origin}`;\n            default:\n                return `Ungltige Eingabe`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nexport const parsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"number\": {\n            return Number.isNaN(data) ? \"NaN\" : \"number\";\n        }\n        case \"object\": {\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                return data.constructor.name;\n            }\n        }\n    }\n    return t;\n};\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"characters\", verb: \"to have\" },\n        file: { unit: \"bytes\", verb: \"to have\" },\n        array: { unit: \"items\", verb: \"to have\" },\n        set: { unit: \"items\", verb: \"to have\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const Nouns = {\n        regex: \"input\",\n        email: \"email address\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO datetime\",\n        date: \"ISO date\",\n        time: \"ISO time\",\n        duration: \"ISO duration\",\n        ipv4: \"IPv4 address\",\n        ipv6: \"IPv6 address\",\n        cidrv4: \"IPv4 range\",\n        cidrv6: \"IPv6 range\",\n        base64: \"base64-encoded string\",\n        base64url: \"base64url-encoded string\",\n        json_string: \"JSON string\",\n        e164: \"E.164 number\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Invalid input: expected ${issue.expected}, received ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Invalid input: expected ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Invalid option: expected one of ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Too big: expected ${issue.origin ?? \"value\"} to have ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elements\"}`;\n                return `Too big: expected ${issue.origin ?? \"value\"} to be ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Too small: expected ${issue.origin} to have ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Too small: expected ${issue.origin} to be ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Invalid string: must start with \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Invalid string: must end with \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Invalid string: must include \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Invalid string: must match pattern ${_issue.pattern}`;\n                return `Invalid ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Invalid number: must be a multiple of ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Unrecognized key${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Invalid key in ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Invalid input\";\n            case \"invalid_element\":\n                return `Invalid value in ${issue.origin}`;\n            default:\n                return `Invalid input`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nexport const parsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"number\": {\n            return Number.isNaN(data) ? \"NaN\" : \"nombro\";\n        }\n        case \"object\": {\n            if (Array.isArray(data)) {\n                return \"tabelo\";\n            }\n            if (data === null) {\n                return \"senvalora\";\n            }\n            if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                return data.constructor.name;\n            }\n        }\n    }\n    return t;\n};\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"karaktrojn\", verb: \"havi\" },\n        file: { unit: \"bajtojn\", verb: \"havi\" },\n        array: { unit: \"elementojn\", verb: \"havi\" },\n        set: { unit: \"elementojn\", verb: \"havi\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const Nouns = {\n        regex: \"enigo\",\n        email: \"retadreso\",\n        url: \"URL\",\n        emoji: \"emoio\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO-datotempo\",\n        date: \"ISO-dato\",\n        time: \"ISO-tempo\",\n        duration: \"ISO-daro\",\n        ipv4: \"IPv4-adreso\",\n        ipv6: \"IPv6-adreso\",\n        cidrv4: \"IPv4-rango\",\n        cidrv6: \"IPv6-rango\",\n        base64: \"64-ume kodita karaktraro\",\n        base64url: \"URL-64-ume kodita karaktraro\",\n        json_string: \"JSON-karaktraro\",\n        e164: \"E.164-nombro\",\n        jwt: \"JWT\",\n        template_literal: \"enigo\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Nevalida enigo: atendiis ${issue.expected}, riceviis ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Nevalida enigo: atendiis ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Nevalida opcio: atendiis unu el ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Tro granda: atendiis ke ${issue.origin ?? \"valoro\"} havu ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementojn\"}`;\n                return `Tro granda: atendiis ke ${issue.origin ?? \"valoro\"} havu ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Tro malgranda: atendiis ke ${issue.origin} havu ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Tro malgranda: atendiis ke ${issue.origin} estu ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Nevalida karaktraro: devas komencii per \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Nevalida karaktraro: devas finii per \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Nevalida karaktraro: devas inkluzivi \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Nevalida karaktraro: devas kongrui kun la modelo ${_issue.pattern}`;\n                return `Nevalida ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Nevalida nombro: devas esti oblo de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Nekonata${issue.keys.length > 1 ? \"j\" : \"\"} losilo${issue.keys.length > 1 ? \"j\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Nevalida losilo en ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Nevalida enigo\";\n            case \"invalid_element\":\n                return `Nevalida valoro en ${issue.origin}`;\n            default:\n                return `Nevalida enigo`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caracteres\", verb: \"tener\" },\n        file: { unit: \"bytes\", verb: \"tener\" },\n        array: { unit: \"elementos\", verb: \"tener\" },\n        set: { unit: \"elementos\", verb: \"tener\" },\n    };\n    const TypeNames = {\n        string: \"texto\",\n        number: \"nmero\",\n        boolean: \"booleano\",\n        array: \"arreglo\",\n        object: \"objeto\",\n        set: \"conjunto\",\n        file: \"archivo\",\n        date: \"fecha\",\n        bigint: \"nmero grande\",\n        symbol: \"smbolo\",\n        undefined: \"indefinido\",\n        null: \"nulo\",\n        function: \"funcin\",\n        map: \"mapa\",\n        record: \"registro\",\n        tuple: \"tupla\",\n        enum: \"enumeracin\",\n        union: \"unin\",\n        literal: \"literal\",\n        promise: \"promesa\",\n        void: \"vaco\",\n        never: \"nunca\",\n        unknown: \"desconocido\",\n        any: \"cualquiera\",\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    function getTypeName(type) {\n        return TypeNames[type] ?? type;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype) {\n                    return data.constructor.name;\n                }\n                return \"object\";\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"entrada\",\n        email: \"direccin de correo electrnico\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"fecha y hora ISO\",\n        date: \"fecha ISO\",\n        time: \"hora ISO\",\n        duration: \"duracin ISO\",\n        ipv4: \"direccin IPv4\",\n        ipv6: \"direccin IPv6\",\n        cidrv4: \"rango IPv4\",\n        cidrv6: \"rango IPv6\",\n        base64: \"cadena codificada en base64\",\n        base64url: \"URL codificada en base64\",\n        json_string: \"cadena JSON\",\n        e164: \"nmero E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entrada\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Entrada invlida: se esperaba ${getTypeName(issue.expected)}, recibido ${getTypeName(parsedType(issue.input))}`;\n            // return `Entrada invlida: se esperaba ${issue.expected}, recibido ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Entrada invlida: se esperaba ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Opcin invlida: se esperaba una de ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                const origin = getTypeName(issue.origin);\n                if (sizing)\n                    return `Demasiado grande: se esperaba que ${origin ?? \"valor\"} tuviera ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementos\"}`;\n                return `Demasiado grande: se esperaba que ${origin ?? \"valor\"} fuera ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                const origin = getTypeName(issue.origin);\n                if (sizing) {\n                    return `Demasiado pequeo: se esperaba que ${origin} tuviera ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Demasiado pequeo: se esperaba que ${origin} fuera ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Cadena invlida: debe comenzar con \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Cadena invlida: debe terminar en \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Cadena invlida: debe incluir \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Cadena invlida: debe coincidir con el patrn ${_issue.pattern}`;\n                return `Invlido ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Nmero invlido: debe ser mltiplo de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Llave${issue.keys.length > 1 ? \"s\" : \"\"} desconocida${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Llave invlida en ${getTypeName(issue.origin)}`;\n            case \"invalid_union\":\n                return \"Entrada invlida\";\n            case \"invalid_element\":\n                return `Valor invlido en ${getTypeName(issue.origin)}`;\n            default:\n                return `Entrada invlida`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \" \" },\n        file: { unit: \"\", verb: \" \" },\n        array: { unit: \"\", verb: \" \" },\n        set: { unit: \"\", verb: \" \" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\",\n        email: \" \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"   \",\n        date: \" \",\n        time: \" \",\n        duration: \"  \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64-encoded \",\n        base64url: \"base64url-encoded \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return ` :  ${issue.expected}  ${parsedType(issue.input)}  `;\n            case \"invalid_value\":\n                if (issue.values.length === 1) {\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])} `;\n                }\n                return ` :    ${util.joinValues(issue.values, \"|\")} `;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` : ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"} `;\n                }\n                return ` : ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()} `;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` : ${issue.origin}  ${adj}${issue.minimum.toString()} ${sizing.unit} `;\n                }\n                return ` : ${issue.origin}  ${adj}${issue.minimum.toString()} `;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` :   \"${_issue.prefix}\"  `;\n                }\n                if (_issue.format === \"ends_with\") {\n                    return ` :   \"${_issue.suffix}\"  `;\n                }\n                if (_issue.format === \"includes\") {\n                    return ` :   \"${_issue.includes}\" `;\n                }\n                if (_issue.format === \"regex\") {\n                    return ` :    ${_issue.pattern}   `;\n                }\n                return `${Nouns[_issue.format] ?? issue.format} `;\n            }\n            case \"not_multiple_of\":\n                return ` :   ${issue.divisor} `;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\" : \"\"} : ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin}`;\n            case \"invalid_union\":\n                return ` `;\n            case \"invalid_element\":\n                return `   ${issue.origin}`;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"merkki\", subject: \"merkkijonon\" },\n        file: { unit: \"tavua\", subject: \"tiedoston\" },\n        array: { unit: \"alkiota\", subject: \"listan\" },\n        set: { unit: \"alkiota\", subject: \"joukon\" },\n        number: { unit: \"\", subject: \"luvun\" },\n        bigint: { unit: \"\", subject: \"suuren kokonaisluvun\" },\n        int: { unit: \"\", subject: \"kokonaisluvun\" },\n        date: { unit: \"\", subject: \"pivmrn\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"snnllinen lauseke\",\n        email: \"shkpostiosoite\",\n        url: \"URL-osoite\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO-aikaleima\",\n        date: \"ISO-pivmr\",\n        time: \"ISO-aika\",\n        duration: \"ISO-kesto\",\n        ipv4: \"IPv4-osoite\",\n        ipv6: \"IPv6-osoite\",\n        cidrv4: \"IPv4-alue\",\n        cidrv6: \"IPv6-alue\",\n        base64: \"base64-koodattu merkkijono\",\n        base64url: \"base64url-koodattu merkkijono\",\n        json_string: \"JSON-merkkijono\",\n        e164: \"E.164-luku\",\n        jwt: \"JWT\",\n        template_literal: \"templaattimerkkijono\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Virheellinen tyyppi: odotettiin ${issue.expected}, oli ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Virheellinen syte: tytyy olla ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Virheellinen valinta: tytyy olla yksi seuraavista: ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Liian suuri: ${sizing.subject} tytyy olla ${adj}${issue.maximum.toString()} ${sizing.unit}`.trim();\n                }\n                return `Liian suuri: arvon tytyy olla ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Liian pieni: ${sizing.subject} tytyy olla ${adj}${issue.minimum.toString()} ${sizing.unit}`.trim();\n                }\n                return `Liian pieni: arvon tytyy olla ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Virheellinen syte: tytyy alkaa \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Virheellinen syte: tytyy loppua \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Virheellinen syte: tytyy sislt \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\") {\n                    return `Virheellinen syte: tytyy vastata snnllist lauseketta ${_issue.pattern}`;\n                }\n                return `Virheellinen ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Virheellinen luku: tytyy olla luvun ${issue.divisor} monikerta`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"Tuntemattomat avaimet\" : \"Tuntematon avain\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return \"Virheellinen avain tietueessa\";\n            case \"invalid_union\":\n                return \"Virheellinen unioni\";\n            case \"invalid_element\":\n                return \"Virheellinen arvo joukossa\";\n            default:\n                return `Virheellinen syte`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caractres\", verb: \"avoir\" },\n        file: { unit: \"octets\", verb: \"avoir\" },\n        array: { unit: \"lments\", verb: \"avoir\" },\n        set: { unit: \"lments\", verb: \"avoir\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"nombre\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"tableau\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"entre\",\n        email: \"adresse e-mail\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"date et heure ISO\",\n        date: \"date ISO\",\n        time: \"heure ISO\",\n        duration: \"dure ISO\",\n        ipv4: \"adresse IPv4\",\n        ipv6: \"adresse IPv6\",\n        cidrv4: \"plage IPv4\",\n        cidrv6: \"plage IPv6\",\n        base64: \"chane encode en base64\",\n        base64url: \"chane encode en base64url\",\n        json_string: \"chane JSON\",\n        e164: \"numro E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entre\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Entre invalide : ${issue.expected} attendu, ${parsedType(issue.input)} reu`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Entre invalide : ${util.stringifyPrimitive(issue.values[0])} attendu`;\n                return `Option invalide : une valeur parmi ${util.joinValues(issue.values, \"|\")} attendue`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Trop grand : ${issue.origin ?? \"valeur\"} doit ${sizing.verb} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"lment(s)\"}`;\n                return `Trop grand : ${issue.origin ?? \"valeur\"} doit tre ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Trop petit : ${issue.origin} doit ${sizing.verb} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Trop petit : ${issue.origin} doit tre ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Chane invalide : doit commencer par \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Chane invalide : doit se terminer par \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Chane invalide : doit inclure \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Chane invalide : doit correspondre au modle ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format} invalide`;\n            }\n            case \"not_multiple_of\":\n                return `Nombre invalide : doit tre un multiple de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Cl${issue.keys.length > 1 ? \"s\" : \"\"} non reconnue${issue.keys.length > 1 ? \"s\" : \"\"} : ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Cl invalide dans ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Entre invalide\";\n            case \"invalid_element\":\n                return `Valeur invalide dans ${issue.origin}`;\n            default:\n                return `Entre invalide`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caractres\", verb: \"avoir\" },\n        file: { unit: \"octets\", verb: \"avoir\" },\n        array: { unit: \"lments\", verb: \"avoir\" },\n        set: { unit: \"lments\", verb: \"avoir\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"entre\",\n        email: \"adresse courriel\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"date-heure ISO\",\n        date: \"date ISO\",\n        time: \"heure ISO\",\n        duration: \"dure ISO\",\n        ipv4: \"adresse IPv4\",\n        ipv6: \"adresse IPv6\",\n        cidrv4: \"plage IPv4\",\n        cidrv6: \"plage IPv6\",\n        base64: \"chane encode en base64\",\n        base64url: \"chane encode en base64url\",\n        json_string: \"chane JSON\",\n        e164: \"numro E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entre\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Entre invalide : attendu ${issue.expected}, reu ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Entre invalide : attendu ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Option invalide : attendu l'une des valeurs suivantes ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Trop grand : attendu que ${issue.origin ?? \"la valeur\"} ait ${adj}${issue.maximum.toString()} ${sizing.unit}`;\n                return `Trop grand : attendu que ${issue.origin ?? \"la valeur\"} soit ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Trop petit : attendu que ${issue.origin} ait ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Trop petit : attendu que ${issue.origin} soit ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Chane invalide : doit commencer par \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Chane invalide : doit se terminer par \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Chane invalide : doit inclure \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Chane invalide : doit correspondre au motif ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format} invalide`;\n            }\n            case \"not_multiple_of\":\n                return `Nombre invalide : doit tre un multiple de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Cl${issue.keys.length > 1 ? \"s\" : \"\"} non reconnue${issue.keys.length > 1 ? \"s\" : \"\"} : ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Cl invalide dans ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Entre invalide\";\n            case \"invalid_element\":\n                return `Valeur invalide dans ${issue.origin}`;\n            default:\n                return `Entre invalide`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\",\n        email: \" \",\n        url: \" \",\n        emoji: \"'\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"  ISO\",\n        date: \" ISO\",\n        time: \" ISO\",\n        duration: \"  ISO\",\n        ipv4: \" IPv4\",\n        ipv6: \" IPv6\",\n        cidrv4: \" IPv4\",\n        cidrv6: \" IPv6\",\n        base64: \"  64\",\n        base64url: \"  64  \",\n        json_string: \" JSON\",\n        e164: \" E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `  :  ${issue.expected},  ${parsedType(issue.input)}`;\n            // return `Invalid input: expected ${issue.expected}, received ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `  :  ${util.stringifyPrimitive(issue.values[0])}`;\n                return `  :     ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` : ${issue.origin ?? \"value\"}   ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elements\"}`;\n                return ` : ${issue.origin ?? \"value\"}   ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` : ${issue.origin}   ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return ` : ${issue.origin}   ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `  :   \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `  :    \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `  :   \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `  :    ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format}  `;\n            }\n            case \"not_multiple_of\":\n                return `  :     ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\" : \"\"}  ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin}`;\n            case \"invalid_union\":\n                return \"  \";\n            case \"invalid_element\":\n                return `   ${issue.origin}`;\n            default:\n                return `  `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"karakter\", verb: \"legyen\" },\n        file: { unit: \"byte\", verb: \"legyen\" },\n        array: { unit: \"elem\", verb: \"legyen\" },\n        set: { unit: \"elem\", verb: \"legyen\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"szm\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"tmb\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"bemenet\",\n        email: \"email cm\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO idblyeg\",\n        date: \"ISO dtum\",\n        time: \"ISO id\",\n        duration: \"ISO idintervallum\",\n        ipv4: \"IPv4 cm\",\n        ipv6: \"IPv6 cm\",\n        cidrv4: \"IPv4 tartomny\",\n        cidrv6: \"IPv6 tartomny\",\n        base64: \"base64-kdolt string\",\n        base64url: \"base64url-kdolt string\",\n        json_string: \"JSON string\",\n        e164: \"E.164 szm\",\n        jwt: \"JWT\",\n        template_literal: \"bemenet\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `rvnytelen bemenet: a vrt rtk ${issue.expected}, a kapott rtk ${parsedType(issue.input)}`;\n            // return `Invalid input: expected ${issue.expected}, received ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `rvnytelen bemenet: a vrt rtk ${util.stringifyPrimitive(issue.values[0])}`;\n                return `rvnytelen opci: valamelyik rtk vrt ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Tl nagy: ${issue.origin ?? \"rtk\"} mrete tl nagy ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elem\"}`;\n                return `Tl nagy: a bemeneti rtk ${issue.origin ?? \"rtk\"} tl nagy: ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Tl kicsi: a bemeneti rtk ${issue.origin} mrete tl kicsi ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Tl kicsi: a bemeneti rtk ${issue.origin} tl kicsi ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `rvnytelen string: \"${_issue.prefix}\" rtkkel kell kezddnie`;\n                if (_issue.format === \"ends_with\")\n                    return `rvnytelen string: \"${_issue.suffix}\" rtkkel kell vgzdnie`;\n                if (_issue.format === \"includes\")\n                    return `rvnytelen string: \"${_issue.includes}\" rtket kell tartalmaznia`;\n                if (_issue.format === \"regex\")\n                    return `rvnytelen string: ${_issue.pattern} mintnak kell megfelelnie`;\n                return `rvnytelen ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `rvnytelen szm: ${issue.divisor} tbbszrsnek kell lennie`;\n            case \"unrecognized_keys\":\n                return `Ismeretlen kulcs${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `rvnytelen kulcs ${issue.origin}`;\n            case \"invalid_union\":\n                return \"rvnytelen bemenet\";\n            case \"invalid_element\":\n                return `rvnytelen rtk: ${issue.origin}`;\n            default:\n                return `rvnytelen bemenet`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"karakter\", verb: \"memiliki\" },\n        file: { unit: \"byte\", verb: \"memiliki\" },\n        array: { unit: \"item\", verb: \"memiliki\" },\n        set: { unit: \"item\", verb: \"memiliki\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"input\",\n        email: \"alamat email\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"tanggal dan waktu format ISO\",\n        date: \"tanggal format ISO\",\n        time: \"jam format ISO\",\n        duration: \"durasi format ISO\",\n        ipv4: \"alamat IPv4\",\n        ipv6: \"alamat IPv6\",\n        cidrv4: \"rentang alamat IPv4\",\n        cidrv6: \"rentang alamat IPv6\",\n        base64: \"string dengan enkode base64\",\n        base64url: \"string dengan enkode base64url\",\n        json_string: \"string JSON\",\n        e164: \"angka E.164\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Input tidak valid: diharapkan ${issue.expected}, diterima ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Input tidak valid: diharapkan ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Pilihan tidak valid: diharapkan salah satu dari ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Terlalu besar: diharapkan ${issue.origin ?? \"value\"} memiliki ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elemen\"}`;\n                return `Terlalu besar: diharapkan ${issue.origin ?? \"value\"} menjadi ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Terlalu kecil: diharapkan ${issue.origin} memiliki ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Terlalu kecil: diharapkan ${issue.origin} menjadi ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `String tidak valid: harus dimulai dengan \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `String tidak valid: harus berakhir dengan \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `String tidak valid: harus menyertakan \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `String tidak valid: harus sesuai pola ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format} tidak valid`;\n            }\n            case \"not_multiple_of\":\n                return `Angka tidak valid: harus kelipatan dari ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Kunci tidak dikenali ${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Kunci tidak valid di ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Input tidak valid\";\n            case \"invalid_element\":\n                return `Nilai tidak valid di ${issue.origin}`;\n            default:\n                return `Input tidak valid`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nexport const parsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"number\": {\n            return Number.isNaN(data) ? \"NaN\" : \"nmer\";\n        }\n        case \"object\": {\n            if (Array.isArray(data)) {\n                return \"fylki\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                return data.constructor.name;\n            }\n        }\n    }\n    return t;\n};\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"stafi\", verb: \"a hafa\" },\n        file: { unit: \"bti\", verb: \"a hafa\" },\n        array: { unit: \"hluti\", verb: \"a hafa\" },\n        set: { unit: \"hluti\", verb: \"a hafa\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const Nouns = {\n        regex: \"gildi\",\n        email: \"netfang\",\n        url: \"vefsl\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO dagsetning og tmi\",\n        date: \"ISO dagsetning\",\n        time: \"ISO tmi\",\n        duration: \"ISO tmalengd\",\n        ipv4: \"IPv4 address\",\n        ipv6: \"IPv6 address\",\n        cidrv4: \"IPv4 range\",\n        cidrv6: \"IPv6 range\",\n        base64: \"base64-encoded strengur\",\n        base64url: \"base64url-encoded strengur\",\n        json_string: \"JSON strengur\",\n        e164: \"E.164 tlugildi\",\n        jwt: \"JWT\",\n        template_literal: \"gildi\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Rangt gildi:  slst inn ${parsedType(issue.input)} ar sem  a vera ${issue.expected}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Rangt gildi: gert r fyrir ${util.stringifyPrimitive(issue.values[0])}`;\n                return `gilt val: m vera eitt af eftirfarandi ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Of strt: gert er r fyrir a ${issue.origin ?? \"gildi\"} hafi ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"hluti\"}`;\n                return `Of strt: gert er r fyrir a ${issue.origin ?? \"gildi\"} s ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Of lti: gert er r fyrir a ${issue.origin} hafi ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Of lti: gert er r fyrir a ${issue.origin} s ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `gildur strengur: verur a byrja  \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `gildur strengur: verur a enda  \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `gildur strengur: verur a innihalda \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `gildur strengur: verur a fylgja mynstri ${_issue.pattern}`;\n                return `Rangt ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Rng tala: verur a vera margfeldi af ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `ekkt ${issue.keys.length > 1 ? \"ir lyklar\" : \"ur lykill\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Rangur lykill  ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Rangt gildi\";\n            case \"invalid_element\":\n                return `Rangt gildi  ${issue.origin}`;\n            default:\n                return `Rangt gildi`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caratteri\", verb: \"avere\" },\n        file: { unit: \"byte\", verb: \"avere\" },\n        array: { unit: \"elementi\", verb: \"avere\" },\n        set: { unit: \"elementi\", verb: \"avere\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"numero\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"vettore\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"input\",\n        email: \"indirizzo email\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"data e ora ISO\",\n        date: \"data ISO\",\n        time: \"ora ISO\",\n        duration: \"durata ISO\",\n        ipv4: \"indirizzo IPv4\",\n        ipv6: \"indirizzo IPv6\",\n        cidrv4: \"intervallo IPv4\",\n        cidrv6: \"intervallo IPv6\",\n        base64: \"stringa codificata in base64\",\n        base64url: \"URL codificata in base64\",\n        json_string: \"stringa JSON\",\n        e164: \"numero E.164\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Input non valido: atteso ${issue.expected}, ricevuto ${parsedType(issue.input)}`;\n            // return `Input non valido: atteso ${issue.expected}, ricevuto ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Input non valido: atteso ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Opzione non valida: atteso uno tra ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Troppo grande: ${issue.origin ?? \"valore\"} deve avere ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementi\"}`;\n                return `Troppo grande: ${issue.origin ?? \"valore\"} deve essere ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Troppo piccolo: ${issue.origin} deve avere ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Troppo piccolo: ${issue.origin} deve essere ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Stringa non valida: deve iniziare con \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Stringa non valida: deve terminare con \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Stringa non valida: deve includere \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Stringa non valida: deve corrispondere al pattern ${_issue.pattern}`;\n                return `Invalid ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Numero non valido: deve essere un multiplo di ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Chiav${issue.keys.length > 1 ? \"i\" : \"e\"} non riconosciut${issue.keys.length > 1 ? \"e\" : \"a\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Chiave non valida in ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Input non valido\";\n            case \"invalid_element\":\n                return `Valore non valido in ${issue.origin}`;\n            default:\n                return `Input non valido`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\",\n        email: \"\",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO\",\n        date: \"ISO\",\n        time: \"ISO\",\n        duration: \"ISO\",\n        ipv4: \"IPv4\",\n        ipv6: \"IPv6\",\n        cidrv4: \"IPv4\",\n        cidrv6: \"IPv6\",\n        base64: \"base64\",\n        base64url: \"base64url\",\n        json_string: \"JSON\",\n        e164: \"E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `: ${issue.expected}${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `: ${util.stringifyPrimitive(issue.values[0])}`;\n                return `: ${util.joinValues(issue.values, \"\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"\" : \"\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `: ${issue.origin ?? \"\"}${issue.maximum.toString()}${sizing.unit ?? \"\"}${adj}`;\n                return `: ${issue.origin ?? \"\"}${issue.maximum.toString()}${adj}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"\" : \"\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `: ${issue.origin}${issue.minimum.toString()}${sizing.unit}${adj}`;\n                return `: ${issue.origin}${issue.minimum.toString()}${adj}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `: \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `: \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `: \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `: ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `: ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \"\")}`;\n            case \"invalid_key\":\n                return `${issue.origin}`;\n            case \"invalid_union\":\n                return \"\";\n            case \"invalid_element\":\n                return `${issue.origin}`;\n            default:\n                return ``;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nexport const parsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"number\": {\n            return Number.isNaN(data) ? \"NaN\" : \"\";\n        }\n        case \"object\": {\n            if (Array.isArray(data)) {\n                return \"\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                return data.constructor.name;\n            }\n        }\n    }\n    const typeMap = {\n        string: \"\",\n        boolean: \"\",\n        undefined: \"undefined\",\n        bigint: \"bigint\",\n        symbol: \"symbol\",\n        function: \"\",\n    };\n    return typeMap[t] ?? t;\n};\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \" \" },\n        file: { unit: \"\", verb: \" \" },\n        array: { unit: \"\", verb: \" \" },\n        set: { unit: \"\", verb: \" \" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const Nouns = {\n        regex: \"\",\n        email: \"- \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"-\",\n        date: \"\",\n        time: \"\",\n        duration: \"\",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64- \",\n        base64url: \"base64url- \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return ` :  ${issue.expected},  ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` :  - ${util.joinValues(issue.values, \"|\")}-`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` :  ${issue.origin ?? \"\"} ${sizing.verb} ${adj}${issue.maximum.toString()} ${sizing.unit}`;\n                return ` :  ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` :  ${issue.origin} ${sizing.verb} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return ` :  ${issue.origin}  ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` :   \"${_issue.prefix}\"-`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return ` :   \"${_issue.suffix}\"-`;\n                if (_issue.format === \"includes\")\n                    return ` :   \"${_issue.includes}\"-`;\n                if (_issue.format === \"regex\")\n                    return ` :    ${_issue.pattern}`;\n                return ` ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` :   ${issue.divisor}- `;\n            case \"unrecognized_keys\":\n                return ` ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `  ${issue.origin}-`;\n            case \"invalid_union\":\n                return \" \";\n            case \"invalid_element\":\n                return `  ${issue.origin}-`;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \" (NaN)\" : \"\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \" (Array)\";\n                }\n                if (data === null) {\n                    return \" (null)\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\",\n        email: \"\",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"  ISO\",\n        date: \" ISO\",\n        time: \" ISO\",\n        duration: \" ISO\",\n        ipv4: \" IPv4\",\n        ipv6: \" IPv6\",\n        cidrv4: \" IPv4\",\n        cidrv6: \" IPv6\",\n        base64: \" base64\",\n        base64url: \" base64url\",\n        json_string: \" JSON\",\n        e164: \" E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `  ${issue.expected}  ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `  ${util.stringifyPrimitive(issue.values[0])}`;\n                return `  ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `  ${issue.origin ?? \"\"} ${adj} ${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return `  ${issue.origin ?? \"\"} ${adj} ${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `  ${issue.origin} ${adj} ${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `  ${issue.origin} ${adj} ${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `  \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `  \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `  \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `  ${_issue.pattern}`;\n                return ` ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `  ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return ` ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return ` ${issue.origin}`;\n            case \"invalid_union\":\n                return ``;\n            case \"invalid_element\":\n                return ` ${issue.origin}`;\n            default:\n                return ``;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import km from \"./km.js\";\n/** @deprecated Use `km` instead. */\nexport default function () {\n    return km();\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"to have\" },\n        file: { unit: \"\", verb: \"to have\" },\n        array: { unit: \"\", verb: \"to have\" },\n        set: { unit: \"\", verb: \"to have\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\",\n        email: \" \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64  \",\n        base64url: \"base64url  \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return ` :   ${issue.expected},   ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])}  `;\n                return ` : ${util.joinValues(issue.values, \" \")}   `;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"\" : \"\";\n                const suffix = adj === \"\" ? \" \" : \" \";\n                const sizing = getSizing(issue.origin);\n                const unit = sizing?.unit ?? \"\";\n                if (sizing)\n                    return `${issue.origin ?? \"\"}  : ${issue.maximum.toString()}${unit} ${adj}${suffix}`;\n                return `${issue.origin ?? \"\"}  : ${issue.maximum.toString()} ${adj}${suffix}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"\" : \"\";\n                const suffix = adj === \"\" ? \" \" : \" \";\n                const sizing = getSizing(issue.origin);\n                const unit = sizing?.unit ?? \"\";\n                if (sizing) {\n                    return `${issue.origin ?? \"\"}  : ${issue.minimum.toString()}${unit} ${adj}${suffix}`;\n                }\n                return `${issue.origin ?? \"\"}  : ${issue.minimum.toString()} ${adj}${suffix}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` : \"${_issue.prefix}\"()  `;\n                }\n                if (_issue.format === \"ends_with\")\n                    return ` : \"${_issue.suffix}\"()  `;\n                if (_issue.format === \"includes\")\n                    return ` : \"${_issue.includes}\"()  `;\n                if (_issue.format === \"regex\")\n                    return ` :  ${_issue.pattern}   `;\n                return ` ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` : ${issue.divisor}  `;\n            case \"unrecognized_keys\":\n                return `   : ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return ` : ${issue.origin}`;\n            case \"invalid_union\":\n                return ` `;\n            case \"invalid_element\":\n                return ` : ${issue.origin}`;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nexport const parsedType = (data) => {\n    const t = typeof data;\n    return parsedTypeFromType(t, data);\n};\nconst parsedTypeFromType = (t, data = undefined) => {\n    switch (t) {\n        case \"number\": {\n            return Number.isNaN(data) ? \"NaN\" : \"skaiius\";\n        }\n        case \"bigint\": {\n            return \"sveikasis skaiius\";\n        }\n        case \"string\": {\n            return \"eilut\";\n        }\n        case \"boolean\": {\n            return \"login reikm\";\n        }\n        case \"undefined\":\n        case \"void\": {\n            return \"neapibrta reikm\";\n        }\n        case \"function\": {\n            return \"funkcija\";\n        }\n        case \"symbol\": {\n            return \"simbolis\";\n        }\n        case \"object\": {\n            if (data === undefined)\n                return \"neinomas objektas\";\n            if (data === null)\n                return \"nulin reikm\";\n            if (Array.isArray(data))\n                return \"masyvas\";\n            if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                return data.constructor.name;\n            }\n            return \"objektas\";\n        }\n        //Zod types below\n        case \"null\": {\n            return \"nulin reikm\";\n        }\n    }\n    return t;\n};\nconst capitalizeFirstCharacter = (text) => {\n    return text.charAt(0).toUpperCase() + text.slice(1);\n};\nfunction getUnitTypeFromNumber(number) {\n    const abs = Math.abs(number);\n    const last = abs % 10;\n    const last2 = abs % 100;\n    if ((last2 >= 11 && last2 <= 19) || last === 0)\n        return \"many\";\n    if (last === 1)\n        return \"one\";\n    return \"few\";\n}\nconst error = () => {\n    const Sizable = {\n        string: {\n            unit: {\n                one: \"simbolis\",\n                few: \"simboliai\",\n                many: \"simboli\",\n            },\n            verb: {\n                smaller: {\n                    inclusive: \"turi bti ne ilgesn kaip\",\n                    notInclusive: \"turi bti trumpesn kaip\",\n                },\n                bigger: {\n                    inclusive: \"turi bti ne trumpesn kaip\",\n                    notInclusive: \"turi bti ilgesn kaip\",\n                },\n            },\n        },\n        file: {\n            unit: {\n                one: \"baitas\",\n                few: \"baitai\",\n                many: \"bait\",\n            },\n            verb: {\n                smaller: {\n                    inclusive: \"turi bti ne didesnis kaip\",\n                    notInclusive: \"turi bti maesnis kaip\",\n                },\n                bigger: {\n                    inclusive: \"turi bti ne maesnis kaip\",\n                    notInclusive: \"turi bti didesnis kaip\",\n                },\n            },\n        },\n        array: {\n            unit: {\n                one: \"element\",\n                few: \"elementus\",\n                many: \"element\",\n            },\n            verb: {\n                smaller: {\n                    inclusive: \"turi turti ne daugiau kaip\",\n                    notInclusive: \"turi turti maiau kaip\",\n                },\n                bigger: {\n                    inclusive: \"turi turti ne maiau kaip\",\n                    notInclusive: \"turi turti daugiau kaip\",\n                },\n            },\n        },\n        set: {\n            unit: {\n                one: \"element\",\n                few: \"elementus\",\n                many: \"element\",\n            },\n            verb: {\n                smaller: {\n                    inclusive: \"turi turti ne daugiau kaip\",\n                    notInclusive: \"turi turti maiau kaip\",\n                },\n                bigger: {\n                    inclusive: \"turi turti ne maiau kaip\",\n                    notInclusive: \"turi turti daugiau kaip\",\n                },\n            },\n        },\n    };\n    function getSizing(origin, unitType, inclusive, targetShouldBe) {\n        const result = Sizable[origin] ?? null;\n        if (result === null)\n            return result;\n        return {\n            unit: result.unit[unitType],\n            verb: result.verb[targetShouldBe][inclusive ? \"inclusive\" : \"notInclusive\"],\n        };\n    }\n    const Nouns = {\n        regex: \"vestis\",\n        email: \"el. pato adresas\",\n        url: \"URL\",\n        emoji: \"jaustukas\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO data ir laikas\",\n        date: \"ISO data\",\n        time: \"ISO laikas\",\n        duration: \"ISO trukm\",\n        ipv4: \"IPv4 adresas\",\n        ipv6: \"IPv6 adresas\",\n        cidrv4: \"IPv4 tinklo prefiksas (CIDR)\",\n        cidrv6: \"IPv6 tinklo prefiksas (CIDR)\",\n        base64: \"base64 ukoduota eilut\",\n        base64url: \"base64url ukoduota eilut\",\n        json_string: \"JSON eilut\",\n        e164: \"E.164 numeris\",\n        jwt: \"JWT\",\n        template_literal: \"vestis\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Gautas tipas ${parsedType(issue.input)}, o tiktasi - ${parsedTypeFromType(issue.expected)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Privalo bti ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Privalo bti vienas i ${util.joinValues(issue.values, \"|\")} pasirinkim`;\n            case \"too_big\": {\n                const origin = parsedTypeFromType(issue.origin);\n                const sizing = getSizing(issue.origin, getUnitTypeFromNumber(Number(issue.maximum)), issue.inclusive ?? false, \"smaller\");\n                if (sizing?.verb)\n                    return `${capitalizeFirstCharacter(origin ?? issue.origin ?? \"reikm\")} ${sizing.verb} ${issue.maximum.toString()} ${sizing.unit ?? \"element\"}`;\n                const adj = issue.inclusive ? \"ne didesnis kaip\" : \"maesnis kaip\";\n                return `${capitalizeFirstCharacter(origin ?? issue.origin ?? \"reikm\")} turi bti ${adj} ${issue.maximum.toString()} ${sizing?.unit}`;\n            }\n            case \"too_small\": {\n                const origin = parsedTypeFromType(issue.origin);\n                const sizing = getSizing(issue.origin, getUnitTypeFromNumber(Number(issue.minimum)), issue.inclusive ?? false, \"bigger\");\n                if (sizing?.verb)\n                    return `${capitalizeFirstCharacter(origin ?? issue.origin ?? \"reikm\")} ${sizing.verb} ${issue.minimum.toString()} ${sizing.unit ?? \"element\"}`;\n                const adj = issue.inclusive ? \"ne maesnis kaip\" : \"didesnis kaip\";\n                return `${capitalizeFirstCharacter(origin ?? issue.origin ?? \"reikm\")} turi bti ${adj} ${issue.minimum.toString()} ${sizing?.unit}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Eilut privalo prasidti \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Eilut privalo pasibaigti \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Eilut privalo traukti \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Eilut privalo atitikti ${_issue.pattern}`;\n                return `Neteisingas ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Skaiius privalo bti ${issue.divisor} kartotinis.`;\n            case \"unrecognized_keys\":\n                return `Neatpaint${issue.keys.length > 1 ? \"i\" : \"as\"} rakt${issue.keys.length > 1 ? \"ai\" : \"as\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return \"Rastas klaidingas raktas\";\n            case \"invalid_union\":\n                return \"Klaidinga vestis\";\n            case \"invalid_element\": {\n                const origin = parsedTypeFromType(issue.origin);\n                return `${capitalizeFirstCharacter(origin ?? issue.origin ?? \"reikm\")} turi klaiding vest`;\n            }\n            default:\n                return \"Klaidinga vestis\";\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \" \" },\n        file: { unit: \"\", verb: \" \" },\n        array: { unit: \"\", verb: \" \" },\n        set: { unit: \"\", verb: \" \" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\",\n        email: \"  -\",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO   \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64- \",\n        base64url: \"base64url- \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return ` :   ${issue.expected},  ${parsedType(issue.input)}`;\n            // return `Invalid input: expected ${issue.expected}, received ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Invalid input: expected ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` :    ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` :   ${issue.origin ?? \"\"}   ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return ` :   ${issue.origin ?? \"\"}   ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` :   ${issue.origin}   ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return ` :   ${issue.origin}   ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` :     \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return ` :     \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return ` :    \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return ` :      ${_issue.pattern}`;\n                return `Invalid ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` :      ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \" \" : \" \"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin}`;\n            case \"invalid_union\":\n                return \" \";\n            case \"invalid_element\":\n                return `   ${issue.origin}`;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"aksara\", verb: \"mempunyai\" },\n        file: { unit: \"bait\", verb: \"mempunyai\" },\n        array: { unit: \"elemen\", verb: \"mempunyai\" },\n        set: { unit: \"elemen\", verb: \"mempunyai\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"nombor\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"input\",\n        email: \"alamat e-mel\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"tarikh masa ISO\",\n        date: \"tarikh ISO\",\n        time: \"masa ISO\",\n        duration: \"tempoh ISO\",\n        ipv4: \"alamat IPv4\",\n        ipv6: \"alamat IPv6\",\n        cidrv4: \"julat IPv4\",\n        cidrv6: \"julat IPv6\",\n        base64: \"string dikodkan base64\",\n        base64url: \"string dikodkan base64url\",\n        json_string: \"string JSON\",\n        e164: \"nombor E.164\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Input tidak sah: dijangka ${issue.expected}, diterima ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Input tidak sah: dijangka ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Pilihan tidak sah: dijangka salah satu daripada ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Terlalu besar: dijangka ${issue.origin ?? \"nilai\"} ${sizing.verb} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elemen\"}`;\n                return `Terlalu besar: dijangka ${issue.origin ?? \"nilai\"} adalah ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Terlalu kecil: dijangka ${issue.origin} ${sizing.verb} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Terlalu kecil: dijangka ${issue.origin} adalah ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `String tidak sah: mesti bermula dengan \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `String tidak sah: mesti berakhir dengan \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `String tidak sah: mesti mengandungi \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `String tidak sah: mesti sepadan dengan corak ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format} tidak sah`;\n            }\n            case \"not_multiple_of\":\n                return `Nombor tidak sah: perlu gandaan ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Kunci tidak dikenali: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Kunci tidak sah dalam ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Input tidak sah\";\n            case \"invalid_element\":\n                return `Nilai tidak sah dalam ${issue.origin}`;\n            default:\n                return `Input tidak sah`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"tekens\" },\n        file: { unit: \"bytes\" },\n        array: { unit: \"elementen\" },\n        set: { unit: \"elementen\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"getal\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"invoer\",\n        email: \"emailadres\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO datum en tijd\",\n        date: \"ISO datum\",\n        time: \"ISO tijd\",\n        duration: \"ISO duur\",\n        ipv4: \"IPv4-adres\",\n        ipv6: \"IPv6-adres\",\n        cidrv4: \"IPv4-bereik\",\n        cidrv6: \"IPv6-bereik\",\n        base64: \"base64-gecodeerde tekst\",\n        base64url: \"base64 URL-gecodeerde tekst\",\n        json_string: \"JSON string\",\n        e164: \"E.164-nummer\",\n        jwt: \"JWT\",\n        template_literal: \"invoer\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Ongeldige invoer: verwacht ${issue.expected}, ontving ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ongeldige invoer: verwacht ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ongeldige optie: verwacht n van ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Te lang: verwacht dat ${issue.origin ?? \"waarde\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementen\"} bevat`;\n                return `Te lang: verwacht dat ${issue.origin ?? \"waarde\"} ${adj}${issue.maximum.toString()} is`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Te kort: verwacht dat ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit} bevat`;\n                }\n                return `Te kort: verwacht dat ${issue.origin} ${adj}${issue.minimum.toString()} is`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Ongeldige tekst: moet met \"${_issue.prefix}\" beginnen`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Ongeldige tekst: moet op \"${_issue.suffix}\" eindigen`;\n                if (_issue.format === \"includes\")\n                    return `Ongeldige tekst: moet \"${_issue.includes}\" bevatten`;\n                if (_issue.format === \"regex\")\n                    return `Ongeldige tekst: moet overeenkomen met patroon ${_issue.pattern}`;\n                return `Ongeldig: ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ongeldig getal: moet een veelvoud van ${issue.divisor} zijn`;\n            case \"unrecognized_keys\":\n                return `Onbekende key${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Ongeldige key in ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Ongeldige invoer\";\n            case \"invalid_element\":\n                return `Ongeldige waarde in ${issue.origin}`;\n            default:\n                return `Ongeldige invoer`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"tegn\", verb: \" ha\" },\n        file: { unit: \"bytes\", verb: \" ha\" },\n        array: { unit: \"elementer\", verb: \" inneholde\" },\n        set: { unit: \"elementer\", verb: \" inneholde\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"tall\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"liste\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"input\",\n        email: \"e-postadresse\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO dato- og klokkeslett\",\n        date: \"ISO-dato\",\n        time: \"ISO-klokkeslett\",\n        duration: \"ISO-varighet\",\n        ipv4: \"IPv4-omrde\",\n        ipv6: \"IPv6-omrde\",\n        cidrv4: \"IPv4-spekter\",\n        cidrv6: \"IPv6-spekter\",\n        base64: \"base64-enkodet streng\",\n        base64url: \"base64url-enkodet streng\",\n        json_string: \"JSON-streng\",\n        e164: \"E.164-nummer\",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Ugyldig input: forventet ${issue.expected}, fikk ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ugyldig verdi: forventet ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ugyldig valg: forventet en av ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `For stor(t): forventet ${issue.origin ?? \"value\"} til  ha ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementer\"}`;\n                return `For stor(t): forventet ${issue.origin ?? \"value\"} til  ha ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `For lite(n): forventet ${issue.origin} til  ha ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `For lite(n): forventet ${issue.origin} til  ha ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Ugyldig streng: m starte med \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Ugyldig streng: m ende med \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Ugyldig streng: m inneholde \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Ugyldig streng: m matche mnsteret ${_issue.pattern}`;\n                return `Ugyldig ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ugyldig tall: m vre et multiplum av ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"Ukjente nkler\" : \"Ukjent nkkel\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Ugyldig nkkel i ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Ugyldig input\";\n            case \"invalid_element\":\n                return `Ugyldig verdi i ${issue.origin}`;\n            default:\n                return `Ugyldig input`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"harf\", verb: \"olmaldr\" },\n        file: { unit: \"bayt\", verb: \"olmaldr\" },\n        array: { unit: \"unsur\", verb: \"olmaldr\" },\n        set: { unit: \"unsur\", verb: \"olmaldr\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"numara\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"saf\";\n                }\n                if (data === null) {\n                    return \"gayb\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"giren\",\n        email: \"epostagh\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO hengm\",\n        date: \"ISO tarihi\",\n        time: \"ISO zaman\",\n        duration: \"ISO mddeti\",\n        ipv4: \"IPv4 nin\",\n        ipv6: \"IPv6 nin\",\n        cidrv4: \"IPv4 menzili\",\n        cidrv6: \"IPv6 menzili\",\n        base64: \"base64-ifreli metin\",\n        base64url: \"base64url-ifreli metin\",\n        json_string: \"JSON metin\",\n        e164: \"E.164 says\",\n        jwt: \"JWT\",\n        template_literal: \"giren\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Fsit giren: umulan ${issue.expected}, alnan ${parsedType(issue.input)}`;\n            // return `Fsit giren: umulan ${issue.expected}, alnan ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Fsit giren: umulan ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Fsit tercih: mteberler ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Fazla byk: ${issue.origin ?? \"value\"}, ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elements\"} sahip olmalyd.`;\n                return `Fazla byk: ${issue.origin ?? \"value\"}, ${adj}${issue.maximum.toString()} olmalyd.`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Fazla kk: ${issue.origin}, ${adj}${issue.minimum.toString()} ${sizing.unit} sahip olmalyd.`;\n                }\n                return `Fazla kk: ${issue.origin}, ${adj}${issue.minimum.toString()} olmalyd.`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Fsit metin: \"${_issue.prefix}\" ile balamal.`;\n                if (_issue.format === \"ends_with\")\n                    return `Fsit metin: \"${_issue.suffix}\" ile bitmeli.`;\n                if (_issue.format === \"includes\")\n                    return `Fsit metin: \"${_issue.includes}\" ihtiv etmeli.`;\n                if (_issue.format === \"regex\")\n                    return `Fsit metin: ${_issue.pattern} nakna uymal.`;\n                return `Fsit ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Fsit say: ${issue.divisor} kat olmalyd.`;\n            case \"unrecognized_keys\":\n                return `Tannmayan anahtar ${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} iin tannmayan anahtar var.`;\n            case \"invalid_union\":\n                return \"Giren tannamad.\";\n            case \"invalid_element\":\n                return `${issue.origin} iin tannmayan kymet var.`;\n            default:\n                return `Kymet tannamad.`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\",\n        email: \"\",\n        url: \"  \",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"  \",\n        date: \"\",\n        time: \"\",\n        duration: \"\",\n        ipv4: \" IPv4 \",\n        ipv6: \" IPv6 \",\n        cidrv4: \" IPv4 \",\n        cidrv6: \" IPv6 \",\n        base64: \"base64-encoded \",\n        base64url: \"base64url-encoded \",\n        json_string: \"JSON \",\n        e164: \" E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return ` :  ${issue.expected} ,  ${parsedType(issue.input)}  `;\n            case \"invalid_value\":\n                if (issue.values.length === 1) {\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])} `;\n                }\n                return ` :    ${util.joinValues(issue.values, \"|\")}  `;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` : ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"} `;\n                }\n                return ` : ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()} `;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` : ${issue.origin}  ${adj}${issue.minimum.toString()} ${sizing.unit} `;\n                }\n                return ` : ${issue.origin}  ${adj}${issue.minimum.toString()} `;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` :   \"${_issue.prefix}\"   `;\n                }\n                if (_issue.format === \"ends_with\") {\n                    return ` :   \"${_issue.suffix}\"    `;\n                }\n                if (_issue.format === \"includes\") {\n                    return ` :  \"${_issue.includes}\" `;\n                }\n                if (_issue.format === \"regex\") {\n                    return ` :   ${_issue.pattern}   `;\n                }\n                return `${Nouns[_issue.format] ?? issue.format}  `;\n            }\n            case \"not_multiple_of\":\n                return ` :   ${issue.divisor}  `;\n            case \"unrecognized_keys\":\n                return ` ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin} `;\n            case \"invalid_union\":\n                return ` `;\n            case \"invalid_element\":\n                return `   ${issue.origin} `;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"znakw\", verb: \"mie\" },\n        file: { unit: \"bajtw\", verb: \"mie\" },\n        array: { unit: \"elementw\", verb: \"mie\" },\n        set: { unit: \"elementw\", verb: \"mie\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"liczba\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"tablica\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"wyraenie\",\n        email: \"adres email\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"data i godzina w formacie ISO\",\n        date: \"data w formacie ISO\",\n        time: \"godzina w formacie ISO\",\n        duration: \"czas trwania ISO\",\n        ipv4: \"adres IPv4\",\n        ipv6: \"adres IPv6\",\n        cidrv4: \"zakres IPv4\",\n        cidrv6: \"zakres IPv6\",\n        base64: \"cig znakw zakodowany w formacie base64\",\n        base64url: \"cig znakw zakodowany w formacie base64url\",\n        json_string: \"cig znakw w formacie JSON\",\n        e164: \"liczba E.164\",\n        jwt: \"JWT\",\n        template_literal: \"wejcie\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Nieprawidowe dane wejciowe: oczekiwano ${issue.expected}, otrzymano ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Nieprawidowe dane wejciowe: oczekiwano ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Nieprawidowa opcja: oczekiwano jednej z wartoci ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Za dua warto: oczekiwano, e ${issue.origin ?? \"warto\"} bdzie mie ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementw\"}`;\n                }\n                return `Zbyt du(y/a/e): oczekiwano, e ${issue.origin ?? \"warto\"} bdzie wynosi ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Za maa warto: oczekiwano, e ${issue.origin ?? \"warto\"} bdzie mie ${adj}${issue.minimum.toString()} ${sizing.unit ?? \"elementw\"}`;\n                }\n                return `Zbyt ma(y/a/e): oczekiwano, e ${issue.origin ?? \"warto\"} bdzie wynosi ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Nieprawidowy cig znakw: musi zaczyna si od \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Nieprawidowy cig znakw: musi koczy si na \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Nieprawidowy cig znakw: musi zawiera \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Nieprawidowy cig znakw: musi odpowiada wzorcowi ${_issue.pattern}`;\n                return `Nieprawidow(y/a/e) ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Nieprawidowa liczba: musi by wielokrotnoci ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Nierozpoznane klucze${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Nieprawidowy klucz w ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Nieprawidowe dane wejciowe\";\n            case \"invalid_element\":\n                return `Nieprawidowa warto w ${issue.origin}`;\n            default:\n                return `Nieprawidowe dane wejciowe`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"caracteres\", verb: \"ter\" },\n        file: { unit: \"bytes\", verb: \"ter\" },\n        array: { unit: \"itens\", verb: \"ter\" },\n        set: { unit: \"itens\", verb: \"ter\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"nmero\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"nulo\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"padro\",\n        email: \"endereo de e-mail\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"data e hora ISO\",\n        date: \"data ISO\",\n        time: \"hora ISO\",\n        duration: \"durao ISO\",\n        ipv4: \"endereo IPv4\",\n        ipv6: \"endereo IPv6\",\n        cidrv4: \"faixa de IPv4\",\n        cidrv6: \"faixa de IPv6\",\n        base64: \"texto codificado em base64\",\n        base64url: \"URL codificada em base64\",\n        json_string: \"texto JSON\",\n        e164: \"nmero E.164\",\n        jwt: \"JWT\",\n        template_literal: \"entrada\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Tipo invlido: esperado ${issue.expected}, recebido ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Entrada invlida: esperado ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Opo invlida: esperada uma das ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Muito grande: esperado que ${issue.origin ?? \"valor\"} tivesse ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementos\"}`;\n                return `Muito grande: esperado que ${issue.origin ?? \"valor\"} fosse ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Muito pequeno: esperado que ${issue.origin} tivesse ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Muito pequeno: esperado que ${issue.origin} fosse ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Texto invlido: deve comear com \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Texto invlido: deve terminar com \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Texto invlido: deve incluir \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Texto invlido: deve corresponder ao padro ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format} invlido`;\n            }\n            case \"not_multiple_of\":\n                return `Nmero invlido: deve ser mltiplo de ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Chave${issue.keys.length > 1 ? \"s\" : \"\"} desconhecida${issue.keys.length > 1 ? \"s\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Chave invlida em ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Entrada invlida\";\n            case \"invalid_element\":\n                return `Valor invlido em ${issue.origin}`;\n            default:\n                return `Campo invlido`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nfunction getRussianPlural(count, one, few, many) {\n    const absCount = Math.abs(count);\n    const lastDigit = absCount % 10;\n    const lastTwoDigits = absCount % 100;\n    if (lastTwoDigits >= 11 && lastTwoDigits <= 19) {\n        return many;\n    }\n    if (lastDigit === 1) {\n        return one;\n    }\n    if (lastDigit >= 2 && lastDigit <= 4) {\n        return few;\n    }\n    return many;\n}\nconst error = () => {\n    const Sizable = {\n        string: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        file: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        array: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n        set: {\n            unit: {\n                one: \"\",\n                few: \"\",\n                many: \"\",\n            },\n            verb: \"\",\n        },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\",\n        email: \"email \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO   \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"   base64\",\n        base64url: \"   base64url\",\n        json_string: \"JSON \",\n        e164: \" E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return ` :  ${issue.expected},  ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` :    ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    const maxValue = Number(issue.maximum);\n                    const unit = getRussianPlural(maxValue, sizing.unit.one, sizing.unit.few, sizing.unit.many);\n                    return `  : ,  ${issue.origin ?? \"\"}   ${adj}${issue.maximum.toString()} ${unit}`;\n                }\n                return `  : ,  ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    const minValue = Number(issue.minimum);\n                    const unit = getRussianPlural(minValue, sizing.unit.one, sizing.unit.few, sizing.unit.many);\n                    return `  : ,  ${issue.origin}   ${adj}${issue.minimum.toString()} ${unit}`;\n                }\n                return `  : ,  ${issue.origin}  ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return ` :    \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return ` :    \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return ` :   \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return ` :    ${_issue.pattern}`;\n                return ` ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` :    ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\" : \"\"} ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin}`;\n            case \"invalid_union\":\n                return \"  \";\n            case \"invalid_element\":\n                return `   ${issue.origin}`;\n            default:\n                return `  `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"znakov\", verb: \"imeti\" },\n        file: { unit: \"bajtov\", verb: \"imeti\" },\n        array: { unit: \"elementov\", verb: \"imeti\" },\n        set: { unit: \"elementov\", verb: \"imeti\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"tevilo\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"tabela\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"vnos\",\n        email: \"e-potni naslov\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO datum in as\",\n        date: \"ISO datum\",\n        time: \"ISO as\",\n        duration: \"ISO trajanje\",\n        ipv4: \"IPv4 naslov\",\n        ipv6: \"IPv6 naslov\",\n        cidrv4: \"obseg IPv4\",\n        cidrv6: \"obseg IPv6\",\n        base64: \"base64 kodiran niz\",\n        base64url: \"base64url kodiran niz\",\n        json_string: \"JSON niz\",\n        e164: \"E.164 tevilka\",\n        jwt: \"JWT\",\n        template_literal: \"vnos\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Neveljaven vnos: priakovano ${issue.expected}, prejeto ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Neveljaven vnos: priakovano ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Neveljavna monost: priakovano eno izmed ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Preveliko: priakovano, da bo ${issue.origin ?? \"vrednost\"} imelo ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"elementov\"}`;\n                return `Preveliko: priakovano, da bo ${issue.origin ?? \"vrednost\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Premajhno: priakovano, da bo ${issue.origin} imelo ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Premajhno: priakovano, da bo ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Neveljaven niz: mora se zaeti z \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Neveljaven niz: mora se konati z \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Neveljaven niz: mora vsebovati \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Neveljaven niz: mora ustrezati vzorcu ${_issue.pattern}`;\n                return `Neveljaven ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Neveljavno tevilo: mora biti vekratnik ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Neprepoznan${issue.keys.length > 1 ? \"i kljui\" : \" klju\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Neveljaven klju v ${issue.origin}`;\n            case \"invalid_union\":\n                return \"Neveljaven vnos\";\n            case \"invalid_element\":\n                return `Neveljavna vrednost v ${issue.origin}`;\n            default:\n                return \"Neveljaven vnos\";\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"tecken\", verb: \"att ha\" },\n        file: { unit: \"bytes\", verb: \"att ha\" },\n        array: { unit: \"objekt\", verb: \"att innehlla\" },\n        set: { unit: \"objekt\", verb: \"att innehlla\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"antal\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"lista\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"reguljrt uttryck\",\n        email: \"e-postadress\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO-datum och tid\",\n        date: \"ISO-datum\",\n        time: \"ISO-tid\",\n        duration: \"ISO-varaktighet\",\n        ipv4: \"IPv4-intervall\",\n        ipv6: \"IPv6-intervall\",\n        cidrv4: \"IPv4-spektrum\",\n        cidrv6: \"IPv6-spektrum\",\n        base64: \"base64-kodad strng\",\n        base64url: \"base64url-kodad strng\",\n        json_string: \"JSON-strng\",\n        e164: \"E.164-nummer\",\n        jwt: \"JWT\",\n        template_literal: \"mall-literal\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Ogiltig inmatning: frvntat ${issue.expected}, fick ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Ogiltig inmatning: frvntat ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ogiltigt val: frvntade en av ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Fr stor(t): frvntade ${issue.origin ?? \"vrdet\"} att ha ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"element\"}`;\n                }\n                return `Fr stor(t): frvntat ${issue.origin ?? \"vrdet\"} att ha ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Fr lite(t): frvntade ${issue.origin ?? \"vrdet\"} att ha ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Fr lite(t): frvntade ${issue.origin ?? \"vrdet\"} att ha ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `Ogiltig strng: mste brja med \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `Ogiltig strng: mste sluta med \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Ogiltig strng: mste innehlla \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Ogiltig strng: mste matcha mnstret \"${_issue.pattern}\"`;\n                return `Ogiltig(t) ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Ogiltigt tal: mste vara en multipel av ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"Oknda nycklar\" : \"Oknd nyckel\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Ogiltig nyckel i ${issue.origin ?? \"vrdet\"}`;\n            case \"invalid_union\":\n                return \"Ogiltig input\";\n            case \"invalid_element\":\n                return `Ogiltigt vrde i ${issue.origin ?? \"vrdet\"}`;\n            default:\n                return `Ogiltig input`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \" \" },\n        file: { unit: \"\", verb: \" \" },\n        array: { unit: \"\", verb: \" \" },\n        set: { unit: \"\", verb: \" \" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \" \" : \"\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\";\n                }\n                if (data === null) {\n                    return \"\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\",\n        email: \" \",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO  \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO  \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64-encoded \",\n        base64url: \"base64url-encoded \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"input\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return ` :  ${issue.expected},  ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` :  ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` :  ${util.joinValues(issue.values, \"|\")}  `;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` :  ${issue.origin ?? \"\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"}   `;\n                }\n                return ` :  ${issue.origin ?? \"\"} ${adj}${issue.maximum.toString()}   `;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` :  ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit}   `; //\n                }\n                return ` :  ${issue.origin} ${adj}${issue.minimum.toString()}   `;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return ` : \"${_issue.prefix}\"   `;\n                if (_issue.format === \"ends_with\")\n                    return ` : \"${_issue.suffix}\"   `;\n                if (_issue.format === \"includes\")\n                    return ` : \"${_issue.includes}\"   `;\n                if (_issue.format === \"regex\")\n                    return ` : ${_issue.pattern}   `;\n                return ` ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` : ${issue.divisor}    `;\n            case \"unrecognized_keys\":\n                return `  ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin}   `;\n            case \"invalid_union\":\n                return \" \";\n            case \"invalid_element\":\n                return `${issue.origin}   `;\n            default:\n                return ` `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \" (NaN)\" : \"\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \" (Array)\";\n                }\n                if (data === null) {\n                    return \" (null)\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\",\n        email: \"\",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \" ISO\",\n        date: \" ISO\",\n        time: \" ISO\",\n        duration: \" ISO\",\n        ipv4: \" IPv4\",\n        ipv6: \" IPv6\",\n        cidrv4: \" IP  IPv4\",\n        cidrv6: \" IP  IPv6\",\n        base64: \" Base64\",\n        base64url: \" Base64  URL\",\n        json_string: \" JSON\",\n        e164: \" (E.164)\",\n        jwt: \" JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `:  ${issue.expected}  ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `:  ${util.stringifyPrimitive(issue.values[0])}`;\n                return `:  ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"\" : \"\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `: ${issue.origin ?? \"\"} ${adj} ${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return `: ${issue.origin ?? \"\"} ${adj} ${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \"\" : \"\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `: ${issue.origin} ${adj} ${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `: ${issue.origin} ${adj} ${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return `:  \"${_issue.prefix}\"`;\n                }\n                if (_issue.format === \"ends_with\")\n                    return `:  \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `:  \"${_issue.includes}\" `;\n                if (_issue.format === \"regex\")\n                    return `:  ${_issue.pattern}`;\n                return `: ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `:  ${issue.divisor} `;\n            case \"unrecognized_keys\":\n                return `: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return ` ${issue.origin}`;\n            case \"invalid_union\":\n                return \": \";\n            case \"invalid_element\":\n                return ` ${issue.origin}`;\n            default:\n                return ``;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nexport const parsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"number\": {\n            return Number.isNaN(data) ? \"NaN\" : \"number\";\n        }\n        case \"object\": {\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                return data.constructor.name;\n            }\n        }\n    }\n    return t;\n};\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"karakter\", verb: \"olmal\" },\n        file: { unit: \"bayt\", verb: \"olmal\" },\n        array: { unit: \"e\", verb: \"olmal\" },\n        set: { unit: \"e\", verb: \"olmal\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const Nouns = {\n        regex: \"girdi\",\n        email: \"e-posta adresi\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO tarih ve saat\",\n        date: \"ISO tarih\",\n        time: \"ISO saat\",\n        duration: \"ISO sre\",\n        ipv4: \"IPv4 adresi\",\n        ipv6: \"IPv6 adresi\",\n        cidrv4: \"IPv4 aral\",\n        cidrv6: \"IPv6 aral\",\n        base64: \"base64 ile ifrelenmi metin\",\n        base64url: \"base64url ile ifrelenmi metin\",\n        json_string: \"JSON dizesi\",\n        e164: \"E.164 says\",\n        jwt: \"JWT\",\n        template_literal: \"ablon dizesi\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `Geersiz deer: beklenen ${issue.expected}, alnan ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `Geersiz deer: beklenen ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Geersiz seenek: aadakilerden biri olmal: ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `ok byk: beklenen ${issue.origin ?? \"deer\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"e\"}`;\n                return `ok byk: beklenen ${issue.origin ?? \"deer\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `ok kk: beklenen ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                return `ok kk: beklenen ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Geersiz metin: \"${_issue.prefix}\" ile balamal`;\n                if (_issue.format === \"ends_with\")\n                    return `Geersiz metin: \"${_issue.suffix}\" ile bitmeli`;\n                if (_issue.format === \"includes\")\n                    return `Geersiz metin: \"${_issue.includes}\" iermeli`;\n                if (_issue.format === \"regex\")\n                    return `Geersiz metin: ${_issue.pattern} desenine uymal`;\n                return `Geersiz ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Geersiz say: ${issue.divisor} ile tam blnebilmeli`;\n            case \"unrecognized_keys\":\n                return `Tannmayan anahtar${issue.keys.length > 1 ? \"lar\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} iinde geersiz anahtar`;\n            case \"invalid_union\":\n                return \"Geersiz deer\";\n            case \"invalid_element\":\n                return `${issue.origin} iinde geersiz deer`;\n            default:\n                return `Geersiz deer`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \" \",\n        email: \"  \",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"   ISO\",\n        date: \" ISO\",\n        time: \" ISO\",\n        duration: \" ISO\",\n        ipv4: \" IPv4\",\n        ipv6: \" IPv6\",\n        cidrv4: \" IPv4\",\n        cidrv6: \" IPv6\",\n        base64: \"   base64\",\n        base64url: \"   base64url\",\n        json_string: \" JSON\",\n        e164: \" E.164\",\n        jwt: \"JWT\",\n        template_literal: \" \",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `  :  ${issue.expected},  ${parsedType(issue.input)}`;\n            // return `  :  ${issue.expected},  ${util.getParsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `  :  ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` :    ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` : ,  ${issue.origin ?? \"\"} ${sizing.verb} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return ` : ,  ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` : ,  ${issue.origin} ${sizing.verb} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return ` : ,  ${issue.origin}  ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return ` :    \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return ` :    \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return ` :   \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return ` :    ${_issue.pattern}`;\n                return ` ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` :    ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return ` ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `   ${issue.origin}`;\n            case \"invalid_union\":\n                return \"  \";\n            case \"invalid_element\":\n                return `   ${issue.origin}`;\n            default:\n                return `  `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import uk from \"./uk.js\";\n/** @deprecated Use `uk` instead. */\nexport default function () {\n    return uk();\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\";\n                }\n                if (data === null) {\n                    return \"\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \" \",\n        email: \"  \",\n        url: \"  \",\n        emoji: \"\",\n        uuid: \"   \",\n        uuidv4: \"     4\",\n        uuidv6: \"     6\",\n        nanoid: \"  \",\n        guid: \"   \",\n        cuid: \"   \",\n        cuid2: \"    2\",\n        ulid: \"   \",\n        xid: \"  \",\n        ksuid: \"    \",\n        datetime: \"    \",\n        date: \"   \",\n        time: \"   \",\n        duration: \"   \",\n        ipv4: \"   4 \",\n        ipv6: \"   6 \",\n        cidrv4: \"   4 \",\n        cidrv6: \"   6 \",\n        base64: \" 64   \",\n        base64url: \" 64      \",\n        json_string: \"    \",\n        e164: \" 164 \",\n        jwt: \"  \",\n        template_literal: \" \",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `  : ${issue.expected}   ${parsedType(issue.input)}  `;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `  : ${util.stringifyPrimitive(issue.values[0])}  `;\n                return ` : ${util.joinValues(issue.values, \"|\")}     `;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` : ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"}   `;\n                return ` : ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()}   `;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` : ${issue.origin}  ${adj}${issue.minimum.toString()} ${sizing.unit}   `;\n                }\n                return ` : ${issue.origin}  ${adj}${issue.minimum.toString()}   `;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` : \"${_issue.prefix}\"    `;\n                }\n                if (_issue.format === \"ends_with\")\n                    return ` : \"${_issue.suffix}\"    `;\n                if (_issue.format === \"includes\")\n                    return ` : \"${_issue.includes}\"   `;\n                if (_issue.format === \"regex\")\n                    return ` :  ${_issue.pattern}    `;\n                return ` ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` : ${issue.divisor}    `;\n            case \"unrecognized_keys\":\n                return `   ${issue.keys.length > 1 ? \"\" : \"\"}: ${util.joinValues(issue.keys, \" \")}`;\n            case \"invalid_key\":\n                return `${issue.origin}   `;\n            case \"invalid_union\":\n                return \"  \";\n            case \"invalid_element\":\n                return `${issue.origin}   `;\n            default:\n                return `  `;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"k t\", verb: \"c\" },\n        file: { unit: \"byte\", verb: \"c\" },\n        array: { unit: \"phn t\", verb: \"c\" },\n        set: { unit: \"phn t\", verb: \"c\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"s\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"mng\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"u vo\",\n        email: \"a ch email\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ngy gi ISO\",\n        date: \"ngy ISO\",\n        time: \"gi ISO\",\n        duration: \"khong thi gian ISO\",\n        ipv4: \"a ch IPv4\",\n        ipv6: \"a ch IPv6\",\n        cidrv4: \"di IPv4\",\n        cidrv6: \"di IPv6\",\n        base64: \"chui m ha base64\",\n        base64url: \"chui m ha base64url\",\n        json_string: \"chui JSON\",\n        e164: \"s E.164\",\n        jwt: \"JWT\",\n        template_literal: \"u vo\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `u vo khng hp l: mong i ${issue.expected}, nhn c ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `u vo khng hp l: mong i ${util.stringifyPrimitive(issue.values[0])}`;\n                return `Ty chn khng hp l: mong i mt trong cc gi tr ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Qu ln: mong i ${issue.origin ?? \"gi tr\"} ${sizing.verb} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"phn t\"}`;\n                return `Qu ln: mong i ${issue.origin ?? \"gi tr\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return `Qu nh: mong i ${issue.origin} ${sizing.verb} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return `Qu nh: mong i ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `Chui khng hp l: phi bt u bng \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `Chui khng hp l: phi kt thc bng \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `Chui khng hp l: phi bao gm \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `Chui khng hp l: phi khp vi mu ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format} khng hp l`;\n            }\n            case \"not_multiple_of\":\n                return `S khng hp l: phi l bi s ca ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Kha khng c nhn dng: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Kha khng hp l trong ${issue.origin}`;\n            case \"invalid_union\":\n                return \"u vo khng hp l\";\n            case \"invalid_element\":\n                return `Gi tr khng hp l trong ${issue.origin}`;\n            default:\n                return `u vo khng hp l`;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"(NaN)\" : \"\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"\";\n                }\n                if (data === null) {\n                    return \"(null)\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\",\n        email: \"\",\n        url: \"URL\",\n        emoji: \"\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO\",\n        date: \"ISO\",\n        time: \"ISO\",\n        duration: \"ISO\",\n        ipv4: \"IPv4\",\n        ipv6: \"IPv6\",\n        cidrv4: \"IPv4\",\n        cidrv6: \"IPv6\",\n        base64: \"base64\",\n        base64url: \"base64url\",\n        json_string: \"JSON\",\n        e164: \"E.164\",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return ` ${issue.expected} ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` ${issue.origin ?? \"\"} ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return ` ${issue.origin ?? \"\"} ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` ${issue.origin} ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return ` ${issue.origin} ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return ` \"${_issue.prefix}\" `;\n                if (_issue.format === \"ends_with\")\n                    return ` \"${_issue.suffix}\" `;\n                if (_issue.format === \"includes\")\n                    return ` \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return ` ${_issue.pattern}`;\n                return `${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` ${issue.divisor} `;\n            case \"unrecognized_keys\":\n                return `(key): ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `${issue.origin} (key)`;\n            case \"invalid_union\":\n                return \"\";\n            case \"invalid_element\":\n                return `${issue.origin} (value)`;\n            default:\n                return ``;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"\", verb: \"\" },\n        file: { unit: \"\", verb: \"\" },\n        array: { unit: \"\", verb: \"\" },\n        set: { unit: \"\", verb: \"\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"number\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"array\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"\",\n        email: \"\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"ISO \",\n        date: \"ISO \",\n        time: \"ISO \",\n        duration: \"ISO \",\n        ipv4: \"IPv4 \",\n        ipv6: \"IPv6 \",\n        cidrv4: \"IPv4 \",\n        cidrv6: \"IPv6 \",\n        base64: \"base64 \",\n        base64url: \"base64url \",\n        json_string: \"JSON \",\n        e164: \"E.164 \",\n        jwt: \"JWT\",\n        template_literal: \"\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return ` ${issue.expected} ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return ` ${util.stringifyPrimitive(issue.values[0])}`;\n                return ` ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return ` ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()} ${sizing.unit ?? \"\"}`;\n                return ` ${issue.origin ?? \"\"}  ${adj}${issue.maximum.toString()}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing) {\n                    return ` ${issue.origin}  ${adj}${issue.minimum.toString()} ${sizing.unit}`;\n                }\n                return ` ${issue.origin}  ${adj}${issue.minimum.toString()}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\") {\n                    return ` \"${_issue.prefix}\" `;\n                }\n                if (_issue.format === \"ends_with\")\n                    return ` \"${_issue.suffix}\" `;\n                if (_issue.format === \"includes\")\n                    return ` \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return ` ${_issue.pattern}`;\n                return ` ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return ` ${issue.divisor} `;\n            case \"unrecognized_keys\":\n                return `${issue.keys.length > 1 ? \"\" : \"\"}${util.joinValues(issue.keys, \"\")}`;\n            case \"invalid_key\":\n                return `${issue.origin} `;\n            case \"invalid_union\":\n                return \"\";\n            case \"invalid_element\":\n                return `${issue.origin} `;\n            default:\n                return ``;\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","import * as util from \"../core/util.js\";\nconst error = () => {\n    const Sizable = {\n        string: { unit: \"mi\", verb: \"n\" },\n        file: { unit: \"bytes\", verb: \"n\" },\n        array: { unit: \"nkan\", verb: \"n\" },\n        set: { unit: \"nkan\", verb: \"n\" },\n    };\n    function getSizing(origin) {\n        return Sizable[origin] ?? null;\n    }\n    const parsedType = (data) => {\n        const t = typeof data;\n        switch (t) {\n            case \"number\": {\n                return Number.isNaN(data) ? \"NaN\" : \"nmb\";\n            }\n            case \"object\": {\n                if (Array.isArray(data)) {\n                    return \"akop\";\n                }\n                if (data === null) {\n                    return \"null\";\n                }\n                if (Object.getPrototypeOf(data) !== Object.prototype && data.constructor) {\n                    return data.constructor.name;\n                }\n            }\n        }\n        return t;\n    };\n    const Nouns = {\n        regex: \"r bwl\",\n        email: \"drs ml\",\n        url: \"URL\",\n        emoji: \"emoji\",\n        uuid: \"UUID\",\n        uuidv4: \"UUIDv4\",\n        uuidv6: \"UUIDv6\",\n        nanoid: \"nanoid\",\n        guid: \"GUID\",\n        cuid: \"cuid\",\n        cuid2: \"cuid2\",\n        ulid: \"ULID\",\n        xid: \"XID\",\n        ksuid: \"KSUID\",\n        datetime: \"kk ISO\",\n        date: \"j ISO\",\n        time: \"kk ISO\",\n        duration: \"kk t p ISO\",\n        ipv4: \"drs IPv4\",\n        ipv6: \"drs IPv6\",\n        cidrv4: \"gbgb IPv4\",\n        cidrv6: \"gbgb IPv6\",\n        base64: \"r t a k n base64\",\n        base64url: \"r base64url\",\n        json_string: \"r JSON\",\n        e164: \"nmb E.164\",\n        jwt: \"JWT\",\n        template_literal: \"r bwl\",\n    };\n    return (issue) => {\n        switch (issue.code) {\n            case \"invalid_type\":\n                return `bwl ae: a n lti fi ${issue.expected}, m a r ${parsedType(issue.input)}`;\n            case \"invalid_value\":\n                if (issue.values.length === 1)\n                    return `bwl ae: a n lti fi ${util.stringifyPrimitive(issue.values[0])}`;\n                return `yn ae: yan kan lra ${util.joinValues(issue.values, \"|\")}`;\n            case \"too_big\": {\n                const adj = issue.inclusive ? \"<=\" : \"<\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `T p j: a n lti j p ${issue.origin ?? \"iye\"} ${sizing.verb} ${adj}${issue.maximum} ${sizing.unit}`;\n                return `T p j: a n lti j ${adj}${issue.maximum}`;\n            }\n            case \"too_small\": {\n                const adj = issue.inclusive ? \">=\" : \">\";\n                const sizing = getSizing(issue.origin);\n                if (sizing)\n                    return `Kr ju: a n lti j p ${issue.origin} ${sizing.verb} ${adj}${issue.minimum} ${sizing.unit}`;\n                return `Kr ju: a n lti j ${adj}${issue.minimum}`;\n            }\n            case \"invalid_format\": {\n                const _issue = issue;\n                if (_issue.format === \"starts_with\")\n                    return `r ae: gbd br pl \"${_issue.prefix}\"`;\n                if (_issue.format === \"ends_with\")\n                    return `r ae: gbd par pl \"${_issue.suffix}\"`;\n                if (_issue.format === \"includes\")\n                    return `r ae: gbd n \"${_issue.includes}\"`;\n                if (_issue.format === \"regex\")\n                    return `r ae: gbd b pr mu ${_issue.pattern}`;\n                return `Ae: ${Nouns[_issue.format] ?? issue.format}`;\n            }\n            case \"not_multiple_of\":\n                return `Nmb ae: gbd j y ppn ti ${issue.divisor}`;\n            case \"unrecognized_keys\":\n                return `Btn m: ${util.joinValues(issue.keys, \", \")}`;\n            case \"invalid_key\":\n                return `Btn ae nn ${issue.origin}`;\n            case \"invalid_union\":\n                return \"bwl ae\";\n            case \"invalid_element\":\n                return `Iye ae nn ${issue.origin}`;\n            default:\n                return \"bwl ae\";\n        }\n    };\n};\nexport default function () {\n    return {\n        localeError: error(),\n    };\n}\n","export const $output = Symbol(\"ZodOutput\");\nexport const $input = Symbol(\"ZodInput\");\nexport class $ZodRegistry {\n    constructor() {\n        this._map = new WeakMap();\n        this._idmap = new Map();\n    }\n    add(schema, ..._meta) {\n        const meta = _meta[0];\n        this._map.set(schema, meta);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            if (this._idmap.has(meta.id)) {\n                throw new Error(`ID ${meta.id} already exists in the registry`);\n            }\n            this._idmap.set(meta.id, schema);\n        }\n        return this;\n    }\n    clear() {\n        this._map = new WeakMap();\n        this._idmap = new Map();\n        return this;\n    }\n    remove(schema) {\n        const meta = this._map.get(schema);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            this._idmap.delete(meta.id);\n        }\n        this._map.delete(schema);\n        return this;\n    }\n    get(schema) {\n        // return this._map.get(schema) as any;\n        // inherit metadata\n        const p = schema._zod.parent;\n        if (p) {\n            const pm = { ...(this.get(p) ?? {}) };\n            delete pm.id; // do not inherit id\n            const f = { ...pm, ...this._map.get(schema) };\n            return Object.keys(f).length ? f : undefined;\n        }\n        return this._map.get(schema);\n    }\n    has(schema) {\n        return this._map.has(schema);\n    }\n}\n// registries\nexport function registry() {\n    return new $ZodRegistry();\n}\nexport const globalRegistry = /*@__PURE__*/ registry();\n","import * as checks from \"./checks.js\";\nimport * as schemas from \"./schemas.js\";\nimport * as util from \"./util.js\";\nexport function _string(Class, params) {\n    return new Class({\n        type: \"string\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedString(Class, params) {\n    return new Class({\n        type: \"string\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _email(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"email\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _guid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"guid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v4\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v6\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv7(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v7\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _emoji(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"emoji\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nanoid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"nanoid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid2(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid2\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ulid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ulid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _xid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"xid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ksuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ksuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _e164(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"e164\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _jwt(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"jwt\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport const TimePrecision = {\n    Any: null,\n    Minute: -1,\n    Second: 0,\n    Millisecond: 3,\n    Microsecond: 6,\n};\nexport function _isoDateTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"datetime\",\n        check: \"string_format\",\n        offset: false,\n        local: false,\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDate(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"date\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"time\",\n        check: \"string_format\",\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDuration(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"duration\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _number(Class, params) {\n    return new Class({\n        type: \"number\",\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedNumber(Class, params) {\n    return new Class({\n        type: \"number\",\n        coerce: true,\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"safeint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float64(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"int32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"uint32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _boolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBoolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _bigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"int64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"uint64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _symbol(Class, params) {\n    return new Class({\n        type: \"symbol\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _undefined(Class, params) {\n    return new Class({\n        type: \"undefined\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _null(Class, params) {\n    return new Class({\n        type: \"null\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _any(Class) {\n    return new Class({\n        type: \"any\",\n    });\n}\nexport function _unknown(Class) {\n    return new Class({\n        type: \"unknown\",\n    });\n}\nexport function _never(Class, params) {\n    return new Class({\n        type: \"never\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _void(Class, params) {\n    return new Class({\n        type: \"void\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _date(Class, params) {\n    return new Class({\n        type: \"date\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedDate(Class, params) {\n    return new Class({\n        type: \"date\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nan(Class, params) {\n    return new Class({\n        type: \"nan\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lt(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _lte(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.lte()` instead. */\n_lte as _max, };\nexport function _gt(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _gte(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.gte()` instead. */\n_gte as _min, };\nexport function _positive(params) {\n    return _gt(0, params);\n}\n// negative\nexport function _negative(params) {\n    return _lt(0, params);\n}\n// nonpositive\nexport function _nonpositive(params) {\n    return _lte(0, params);\n}\n// nonnegative\nexport function _nonnegative(params) {\n    return _gte(0, params);\n}\nexport function _multipleOf(value, params) {\n    return new checks.$ZodCheckMultipleOf({\n        check: \"multiple_of\",\n        ...util.normalizeParams(params),\n        value,\n    });\n}\nexport function _maxSize(maximum, params) {\n    return new checks.$ZodCheckMaxSize({\n        check: \"max_size\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n}\nexport function _minSize(minimum, params) {\n    return new checks.$ZodCheckMinSize({\n        check: \"min_size\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _size(size, params) {\n    return new checks.$ZodCheckSizeEquals({\n        check: \"size_equals\",\n        ...util.normalizeParams(params),\n        size,\n    });\n}\nexport function _maxLength(maximum, params) {\n    const ch = new checks.$ZodCheckMaxLength({\n        check: \"max_length\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n    return ch;\n}\nexport function _minLength(minimum, params) {\n    return new checks.$ZodCheckMinLength({\n        check: \"min_length\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _length(length, params) {\n    return new checks.$ZodCheckLengthEquals({\n        check: \"length_equals\",\n        ...util.normalizeParams(params),\n        length,\n    });\n}\nexport function _regex(pattern, params) {\n    return new checks.$ZodCheckRegex({\n        check: \"string_format\",\n        format: \"regex\",\n        ...util.normalizeParams(params),\n        pattern,\n    });\n}\nexport function _lowercase(params) {\n    return new checks.$ZodCheckLowerCase({\n        check: \"string_format\",\n        format: \"lowercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uppercase(params) {\n    return new checks.$ZodCheckUpperCase({\n        check: \"string_format\",\n        format: \"uppercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _includes(includes, params) {\n    return new checks.$ZodCheckIncludes({\n        check: \"string_format\",\n        format: \"includes\",\n        ...util.normalizeParams(params),\n        includes,\n    });\n}\nexport function _startsWith(prefix, params) {\n    return new checks.$ZodCheckStartsWith({\n        check: \"string_format\",\n        format: \"starts_with\",\n        ...util.normalizeParams(params),\n        prefix,\n    });\n}\nexport function _endsWith(suffix, params) {\n    return new checks.$ZodCheckEndsWith({\n        check: \"string_format\",\n        format: \"ends_with\",\n        ...util.normalizeParams(params),\n        suffix,\n    });\n}\nexport function _property(property, schema, params) {\n    return new checks.$ZodCheckProperty({\n        check: \"property\",\n        property,\n        schema,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _mime(types, params) {\n    return new checks.$ZodCheckMimeType({\n        check: \"mime_type\",\n        mime: types,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _overwrite(tx) {\n    return new checks.$ZodCheckOverwrite({\n        check: \"overwrite\",\n        tx,\n    });\n}\n// normalize\nexport function _normalize(form) {\n    return _overwrite((input) => input.normalize(form));\n}\n// trim\nexport function _trim() {\n    return _overwrite((input) => input.trim());\n}\n// toLowerCase\nexport function _toLowerCase() {\n    return _overwrite((input) => input.toLowerCase());\n}\n// toUpperCase\nexport function _toUpperCase() {\n    return _overwrite((input) => input.toUpperCase());\n}\nexport function _array(Class, element, params) {\n    return new Class({\n        type: \"array\",\n        element,\n        // get element() {\n        //   return element;\n        // },\n        ...util.normalizeParams(params),\n    });\n}\nexport function _union(Class, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _discriminatedUnion(Class, discriminator, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _intersection(Class, left, right) {\n    return new Class({\n        type: \"intersection\",\n        left,\n        right,\n    });\n}\n// export function _tuple(\n//   Class: util.SchemaClass<schemas.$ZodTuple>,\n//   items: [],\n//   params?: string | $ZodTupleParams\n// ): schemas.$ZodTuple<[], null>;\nexport function _tuple(Class, items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof schemas.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new Class({\n        type: \"tuple\",\n        items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _record(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"record\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _map(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"map\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _set(Class, valueType, params) {\n    return new Class({\n        type: \"set\",\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _enum(Class, values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    // if (Array.isArray(values)) {\n    //   for (const value of values) {\n    //     entries[value] = value;\n    //   }\n    // } else {\n    //   Object.assign(entries, values);\n    // }\n    // const entries: util.EnumLike = {};\n    // for (const val of values) {\n    //   entries[val] = val;\n    // }\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function _nativeEnum(Class, entries, params) {\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _literal(Class, value, params) {\n    return new Class({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _file(Class, params) {\n    return new Class({\n        type: \"file\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _transform(Class, fn) {\n    return new Class({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport function _optional(Class, innerType) {\n    return new Class({\n        type: \"optional\",\n        innerType,\n    });\n}\nexport function _nullable(Class, innerType) {\n    return new Class({\n        type: \"nullable\",\n        innerType,\n    });\n}\nexport function _default(Class, innerType, defaultValue) {\n    return new Class({\n        type: \"default\",\n        innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\nexport function _nonoptional(Class, innerType, params) {\n    return new Class({\n        type: \"nonoptional\",\n        innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _success(Class, innerType) {\n    return new Class({\n        type: \"success\",\n        innerType,\n    });\n}\nexport function _catch(Class, innerType, catchValue) {\n    return new Class({\n        type: \"catch\",\n        innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport function _pipe(Class, in_, out) {\n    return new Class({\n        type: \"pipe\",\n        in: in_,\n        out,\n    });\n}\nexport function _readonly(Class, innerType) {\n    return new Class({\n        type: \"readonly\",\n        innerType,\n    });\n}\nexport function _templateLiteral(Class, parts, params) {\n    return new Class({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lazy(Class, getter) {\n    return new Class({\n        type: \"lazy\",\n        getter,\n    });\n}\nexport function _promise(Class, innerType) {\n    return new Class({\n        type: \"promise\",\n        innerType,\n    });\n}\nexport function _custom(Class, fn, _params) {\n    const norm = util.normalizeParams(_params);\n    norm.abort ?? (norm.abort = true); // default to abort:false\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...norm,\n    });\n    return schema;\n}\n// same as _custom but defaults to abort:false\nexport function _refine(Class, fn, _params) {\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...util.normalizeParams(_params),\n    });\n    return schema;\n}\nexport function _superRefine(fn) {\n    const ch = _check((payload) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, ch._zod.def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = ch);\n                _issue.continue ?? (_issue.continue = !ch._zod.def.abort); // abort is always undefined, so this is always true...\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        return fn(payload.value, payload);\n    });\n    return ch;\n}\nexport function _check(fn, params) {\n    const ch = new checks.$ZodCheck({\n        check: \"custom\",\n        ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function _stringbool(Classes, _params) {\n    const params = util.normalizeParams(_params);\n    let truthyArray = params.truthy ?? [\"true\", \"1\", \"yes\", \"on\", \"y\", \"enabled\"];\n    let falsyArray = params.falsy ?? [\"false\", \"0\", \"no\", \"off\", \"n\", \"disabled\"];\n    if (params.case !== \"sensitive\") {\n        truthyArray = truthyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n        falsyArray = falsyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n    }\n    const truthySet = new Set(truthyArray);\n    const falsySet = new Set(falsyArray);\n    const _Codec = Classes.Codec ?? schemas.$ZodCodec;\n    const _Boolean = Classes.Boolean ?? schemas.$ZodBoolean;\n    const _String = Classes.String ?? schemas.$ZodString;\n    const stringSchema = new _String({ type: \"string\", error: params.error });\n    const booleanSchema = new _Boolean({ type: \"boolean\", error: params.error });\n    const codec = new _Codec({\n        type: \"pipe\",\n        in: stringSchema,\n        out: booleanSchema,\n        transform: ((input, payload) => {\n            let data = input;\n            if (params.case !== \"sensitive\")\n                data = data.toLowerCase();\n            if (truthySet.has(data)) {\n                return true;\n            }\n            else if (falsySet.has(data)) {\n                return false;\n            }\n            else {\n                payload.issues.push({\n                    code: \"invalid_value\",\n                    expected: \"stringbool\",\n                    values: [...truthySet, ...falsySet],\n                    input: payload.value,\n                    inst: codec,\n                    continue: false,\n                });\n                return {};\n            }\n        }),\n        reverseTransform: ((input, _payload) => {\n            if (input === true) {\n                return truthyArray[0] || \"true\";\n            }\n            else {\n                return falsyArray[0] || \"false\";\n            }\n        }),\n        error: params.error,\n    });\n    return codec;\n}\nexport function _stringFormat(Class, format, fnOrRegex, _params = {}) {\n    const params = util.normalizeParams(_params);\n    const def = {\n        ...util.normalizeParams(_params),\n        check: \"string_format\",\n        type: \"string\",\n        format,\n        fn: typeof fnOrRegex === \"function\" ? fnOrRegex : (val) => fnOrRegex.test(val),\n        ...params,\n    };\n    if (fnOrRegex instanceof RegExp) {\n        def.pattern = fnOrRegex;\n    }\n    const inst = new Class(def);\n    return inst;\n}\n","import { $ZodRegistry, globalRegistry } from \"./registries.js\";\nimport { getEnumValues } from \"./util.js\";\nexport class JSONSchemaGenerator {\n    constructor(params) {\n        this.counter = 0;\n        this.metadataRegistry = params?.metadata ?? globalRegistry;\n        this.target = params?.target ?? \"draft-2020-12\";\n        this.unrepresentable = params?.unrepresentable ?? \"throw\";\n        this.override = params?.override ?? (() => { });\n        this.io = params?.io ?? \"output\";\n        this.seen = new Map();\n    }\n    process(schema, _params = { path: [], schemaPath: [] }) {\n        var _a;\n        const def = schema._zod.def;\n        const formatMap = {\n            guid: \"uuid\",\n            url: \"uri\",\n            datetime: \"date-time\",\n            json_string: \"json-string\",\n            regex: \"\", // do not set\n        };\n        // check for schema in seens\n        const seen = this.seen.get(schema);\n        if (seen) {\n            seen.count++;\n            // check if cycle\n            const isCycle = _params.schemaPath.includes(schema);\n            if (isCycle) {\n                seen.cycle = _params.path;\n            }\n            return seen.schema;\n        }\n        // initialize\n        const result = { schema: {}, count: 1, cycle: undefined, path: _params.path };\n        this.seen.set(schema, result);\n        // custom method overrides default behavior\n        const overrideSchema = schema._zod.toJSONSchema?.();\n        if (overrideSchema) {\n            result.schema = overrideSchema;\n        }\n        else {\n            const params = {\n                ..._params,\n                schemaPath: [..._params.schemaPath, schema],\n                path: _params.path,\n            };\n            const parent = schema._zod.parent;\n            if (parent) {\n                // schema was cloned from another schema\n                result.ref = parent;\n                this.process(parent, params);\n                this.seen.get(parent).isParent = true;\n            }\n            else {\n                const _json = result.schema;\n                switch (def.type) {\n                    case \"string\": {\n                        const json = _json;\n                        json.type = \"string\";\n                        const { minimum, maximum, format, patterns, contentEncoding } = schema._zod\n                            .bag;\n                        if (typeof minimum === \"number\")\n                            json.minLength = minimum;\n                        if (typeof maximum === \"number\")\n                            json.maxLength = maximum;\n                        // custom pattern overrides format\n                        if (format) {\n                            json.format = formatMap[format] ?? format;\n                            if (json.format === \"\")\n                                delete json.format; // empty format is not valid\n                        }\n                        if (contentEncoding)\n                            json.contentEncoding = contentEncoding;\n                        if (patterns && patterns.size > 0) {\n                            const regexes = [...patterns];\n                            if (regexes.length === 1)\n                                json.pattern = regexes[0].source;\n                            else if (regexes.length > 1) {\n                                result.schema.allOf = [\n                                    ...regexes.map((regex) => ({\n                                        ...(this.target === \"draft-7\" || this.target === \"draft-4\" || this.target === \"openapi-3.0\"\n                                            ? { type: \"string\" }\n                                            : {}),\n                                        pattern: regex.source,\n                                    })),\n                                ];\n                            }\n                        }\n                        break;\n                    }\n                    case \"number\": {\n                        const json = _json;\n                        const { minimum, maximum, format, multipleOf, exclusiveMaximum, exclusiveMinimum } = schema._zod.bag;\n                        if (typeof format === \"string\" && format.includes(\"int\"))\n                            json.type = \"integer\";\n                        else\n                            json.type = \"number\";\n                        if (typeof exclusiveMinimum === \"number\") {\n                            if (this.target === \"draft-4\" || this.target === \"openapi-3.0\") {\n                                json.minimum = exclusiveMinimum;\n                                json.exclusiveMinimum = true;\n                            }\n                            else {\n                                json.exclusiveMinimum = exclusiveMinimum;\n                            }\n                        }\n                        if (typeof minimum === \"number\") {\n                            json.minimum = minimum;\n                            if (typeof exclusiveMinimum === \"number\" && this.target !== \"draft-4\") {\n                                if (exclusiveMinimum >= minimum)\n                                    delete json.minimum;\n                                else\n                                    delete json.exclusiveMinimum;\n                            }\n                        }\n                        if (typeof exclusiveMaximum === \"number\") {\n                            if (this.target === \"draft-4\" || this.target === \"openapi-3.0\") {\n                                json.maximum = exclusiveMaximum;\n                                json.exclusiveMaximum = true;\n                            }\n                            else {\n                                json.exclusiveMaximum = exclusiveMaximum;\n                            }\n                        }\n                        if (typeof maximum === \"number\") {\n                            json.maximum = maximum;\n                            if (typeof exclusiveMaximum === \"number\" && this.target !== \"draft-4\") {\n                                if (exclusiveMaximum <= maximum)\n                                    delete json.maximum;\n                                else\n                                    delete json.exclusiveMaximum;\n                            }\n                        }\n                        if (typeof multipleOf === \"number\")\n                            json.multipleOf = multipleOf;\n                        break;\n                    }\n                    case \"boolean\": {\n                        const json = _json;\n                        json.type = \"boolean\";\n                        break;\n                    }\n                    case \"bigint\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"BigInt cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"symbol\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Symbols cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"null\": {\n                        if (this.target === \"openapi-3.0\") {\n                            _json.type = \"string\";\n                            _json.nullable = true;\n                            _json.enum = [null];\n                        }\n                        else\n                            _json.type = \"null\";\n                        break;\n                    }\n                    case \"any\": {\n                        break;\n                    }\n                    case \"unknown\": {\n                        break;\n                    }\n                    case \"undefined\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Undefined cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"void\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Void cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"never\": {\n                        _json.not = {};\n                        break;\n                    }\n                    case \"date\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Date cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"array\": {\n                        const json = _json;\n                        const { minimum, maximum } = schema._zod.bag;\n                        if (typeof minimum === \"number\")\n                            json.minItems = minimum;\n                        if (typeof maximum === \"number\")\n                            json.maxItems = maximum;\n                        json.type = \"array\";\n                        json.items = this.process(def.element, { ...params, path: [...params.path, \"items\"] });\n                        break;\n                    }\n                    case \"object\": {\n                        const json = _json;\n                        json.type = \"object\";\n                        json.properties = {};\n                        const shape = def.shape; // params.shapeCache.get(schema)!;\n                        for (const key in shape) {\n                            json.properties[key] = this.process(shape[key], {\n                                ...params,\n                                path: [...params.path, \"properties\", key],\n                            });\n                        }\n                        // required keys\n                        const allKeys = new Set(Object.keys(shape));\n                        // const optionalKeys = new Set(def.optional);\n                        const requiredKeys = new Set([...allKeys].filter((key) => {\n                            const v = def.shape[key]._zod;\n                            if (this.io === \"input\") {\n                                return v.optin === undefined;\n                            }\n                            else {\n                                return v.optout === undefined;\n                            }\n                        }));\n                        if (requiredKeys.size > 0) {\n                            json.required = Array.from(requiredKeys);\n                        }\n                        // catchall\n                        if (def.catchall?._zod.def.type === \"never\") {\n                            // strict\n                            json.additionalProperties = false;\n                        }\n                        else if (!def.catchall) {\n                            // regular\n                            if (this.io === \"output\")\n                                json.additionalProperties = false;\n                        }\n                        else if (def.catchall) {\n                            json.additionalProperties = this.process(def.catchall, {\n                                ...params,\n                                path: [...params.path, \"additionalProperties\"],\n                            });\n                        }\n                        break;\n                    }\n                    case \"union\": {\n                        const json = _json;\n                        const options = def.options.map((x, i) => this.process(x, {\n                            ...params,\n                            path: [...params.path, \"anyOf\", i],\n                        }));\n                        json.anyOf = options;\n                        break;\n                    }\n                    case \"intersection\": {\n                        const json = _json;\n                        const a = this.process(def.left, {\n                            ...params,\n                            path: [...params.path, \"allOf\", 0],\n                        });\n                        const b = this.process(def.right, {\n                            ...params,\n                            path: [...params.path, \"allOf\", 1],\n                        });\n                        const isSimpleIntersection = (val) => \"allOf\" in val && Object.keys(val).length === 1;\n                        const allOf = [\n                            ...(isSimpleIntersection(a) ? a.allOf : [a]),\n                            ...(isSimpleIntersection(b) ? b.allOf : [b]),\n                        ];\n                        json.allOf = allOf;\n                        break;\n                    }\n                    case \"tuple\": {\n                        const json = _json;\n                        json.type = \"array\";\n                        const prefixPath = this.target === \"draft-2020-12\" ? \"prefixItems\" : \"items\";\n                        const restPath = this.target === \"draft-2020-12\" ? \"items\" : this.target === \"openapi-3.0\" ? \"items\" : \"additionalItems\";\n                        const prefixItems = def.items.map((x, i) => this.process(x, {\n                            ...params,\n                            path: [...params.path, prefixPath, i],\n                        }));\n                        const rest = def.rest\n                            ? this.process(def.rest, {\n                                ...params,\n                                path: [...params.path, restPath, ...(this.target === \"openapi-3.0\" ? [def.items.length] : [])],\n                            })\n                            : null;\n                        if (this.target === \"draft-2020-12\") {\n                            json.prefixItems = prefixItems;\n                            if (rest) {\n                                json.items = rest;\n                            }\n                        }\n                        else if (this.target === \"openapi-3.0\") {\n                            json.items = {\n                                anyOf: prefixItems,\n                            };\n                            if (rest) {\n                                json.items.anyOf.push(rest);\n                            }\n                            json.minItems = prefixItems.length;\n                            if (!rest) {\n                                json.maxItems = prefixItems.length;\n                            }\n                        }\n                        else {\n                            json.items = prefixItems;\n                            if (rest) {\n                                json.additionalItems = rest;\n                            }\n                        }\n                        // length\n                        const { minimum, maximum } = schema._zod.bag;\n                        if (typeof minimum === \"number\")\n                            json.minItems = minimum;\n                        if (typeof maximum === \"number\")\n                            json.maxItems = maximum;\n                        break;\n                    }\n                    case \"record\": {\n                        const json = _json;\n                        json.type = \"object\";\n                        if (this.target === \"draft-7\" || this.target === \"draft-2020-12\") {\n                            json.propertyNames = this.process(def.keyType, {\n                                ...params,\n                                path: [...params.path, \"propertyNames\"],\n                            });\n                        }\n                        json.additionalProperties = this.process(def.valueType, {\n                            ...params,\n                            path: [...params.path, \"additionalProperties\"],\n                        });\n                        break;\n                    }\n                    case \"map\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Map cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"set\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Set cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"enum\": {\n                        const json = _json;\n                        const values = getEnumValues(def.entries);\n                        // Number enums can have both string and number values\n                        if (values.every((v) => typeof v === \"number\"))\n                            json.type = \"number\";\n                        if (values.every((v) => typeof v === \"string\"))\n                            json.type = \"string\";\n                        json.enum = values;\n                        break;\n                    }\n                    case \"literal\": {\n                        const json = _json;\n                        const vals = [];\n                        for (const val of def.values) {\n                            if (val === undefined) {\n                                if (this.unrepresentable === \"throw\") {\n                                    throw new Error(\"Literal `undefined` cannot be represented in JSON Schema\");\n                                }\n                                else {\n                                    // do not add to vals\n                                }\n                            }\n                            else if (typeof val === \"bigint\") {\n                                if (this.unrepresentable === \"throw\") {\n                                    throw new Error(\"BigInt literals cannot be represented in JSON Schema\");\n                                }\n                                else {\n                                    vals.push(Number(val));\n                                }\n                            }\n                            else {\n                                vals.push(val);\n                            }\n                        }\n                        if (vals.length === 0) {\n                            // do nothing (an undefined literal was stripped)\n                        }\n                        else if (vals.length === 1) {\n                            const val = vals[0];\n                            json.type = val === null ? \"null\" : typeof val;\n                            if (this.target === \"draft-4\" || this.target === \"openapi-3.0\") {\n                                json.enum = [val];\n                            }\n                            else {\n                                json.const = val;\n                            }\n                        }\n                        else {\n                            if (vals.every((v) => typeof v === \"number\"))\n                                json.type = \"number\";\n                            if (vals.every((v) => typeof v === \"string\"))\n                                json.type = \"string\";\n                            if (vals.every((v) => typeof v === \"boolean\"))\n                                json.type = \"string\";\n                            if (vals.every((v) => v === null))\n                                json.type = \"null\";\n                            json.enum = vals;\n                        }\n                        break;\n                    }\n                    case \"file\": {\n                        const json = _json;\n                        const file = {\n                            type: \"string\",\n                            format: \"binary\",\n                            contentEncoding: \"binary\",\n                        };\n                        const { minimum, maximum, mime } = schema._zod.bag;\n                        if (minimum !== undefined)\n                            file.minLength = minimum;\n                        if (maximum !== undefined)\n                            file.maxLength = maximum;\n                        if (mime) {\n                            if (mime.length === 1) {\n                                file.contentMediaType = mime[0];\n                                Object.assign(json, file);\n                            }\n                            else {\n                                json.anyOf = mime.map((m) => {\n                                    const mFile = { ...file, contentMediaType: m };\n                                    return mFile;\n                                });\n                            }\n                        }\n                        else {\n                            Object.assign(json, file);\n                        }\n                        // if (this.unrepresentable === \"throw\") {\n                        //   throw new Error(\"File cannot be represented in JSON Schema\");\n                        // }\n                        break;\n                    }\n                    case \"transform\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Transforms cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"nullable\": {\n                        const inner = this.process(def.innerType, params);\n                        if (this.target === \"openapi-3.0\") {\n                            result.ref = def.innerType;\n                            _json.nullable = true;\n                        }\n                        else {\n                            _json.anyOf = [inner, { type: \"null\" }];\n                        }\n                        break;\n                    }\n                    case \"nonoptional\": {\n                        this.process(def.innerType, params);\n                        result.ref = def.innerType;\n                        break;\n                    }\n                    case \"success\": {\n                        const json = _json;\n                        json.type = \"boolean\";\n                        break;\n                    }\n                    case \"default\": {\n                        this.process(def.innerType, params);\n                        result.ref = def.innerType;\n                        _json.default = JSON.parse(JSON.stringify(def.defaultValue));\n                        break;\n                    }\n                    case \"prefault\": {\n                        this.process(def.innerType, params);\n                        result.ref = def.innerType;\n                        if (this.io === \"input\")\n                            _json._prefault = JSON.parse(JSON.stringify(def.defaultValue));\n                        break;\n                    }\n                    case \"catch\": {\n                        // use conditionals\n                        this.process(def.innerType, params);\n                        result.ref = def.innerType;\n                        let catchValue;\n                        try {\n                            catchValue = def.catchValue(undefined);\n                        }\n                        catch {\n                            throw new Error(\"Dynamic catch values are not supported in JSON Schema\");\n                        }\n                        _json.default = catchValue;\n                        break;\n                    }\n                    case \"nan\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"NaN cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"template_literal\": {\n                        const json = _json;\n                        const pattern = schema._zod.pattern;\n                        if (!pattern)\n                            throw new Error(\"Pattern not found in template literal\");\n                        json.type = \"string\";\n                        json.pattern = pattern.source;\n                        break;\n                    }\n                    case \"pipe\": {\n                        const innerType = this.io === \"input\" ? (def.in._zod.def.type === \"transform\" ? def.out : def.in) : def.out;\n                        this.process(innerType, params);\n                        result.ref = innerType;\n                        break;\n                    }\n                    case \"readonly\": {\n                        this.process(def.innerType, params);\n                        result.ref = def.innerType;\n                        _json.readOnly = true;\n                        break;\n                    }\n                    // passthrough types\n                    case \"promise\": {\n                        this.process(def.innerType, params);\n                        result.ref = def.innerType;\n                        break;\n                    }\n                    case \"optional\": {\n                        this.process(def.innerType, params);\n                        result.ref = def.innerType;\n                        break;\n                    }\n                    case \"lazy\": {\n                        const innerType = schema._zod.innerType;\n                        this.process(innerType, params);\n                        result.ref = innerType;\n                        break;\n                    }\n                    case \"custom\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Custom types cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    case \"function\": {\n                        if (this.unrepresentable === \"throw\") {\n                            throw new Error(\"Function types cannot be represented in JSON Schema\");\n                        }\n                        break;\n                    }\n                    default: {\n                        def;\n                    }\n                }\n            }\n        }\n        // metadata\n        const meta = this.metadataRegistry.get(schema);\n        if (meta)\n            Object.assign(result.schema, meta);\n        if (this.io === \"input\" && isTransforming(schema)) {\n            // examples/defaults only apply to output type of pipe\n            delete result.schema.examples;\n            delete result.schema.default;\n        }\n        // set prefault as default\n        if (this.io === \"input\" && result.schema._prefault)\n            (_a = result.schema).default ?? (_a.default = result.schema._prefault);\n        delete result.schema._prefault;\n        // pulling fresh from this.seen in case it was overwritten\n        const _result = this.seen.get(schema);\n        return _result.schema;\n    }\n    emit(schema, _params) {\n        const params = {\n            cycles: _params?.cycles ?? \"ref\",\n            reused: _params?.reused ?? \"inline\",\n            // unrepresentable: _params?.unrepresentable ?? \"throw\",\n            // uri: _params?.uri ?? ((id) => `${id}`),\n            external: _params?.external ?? undefined,\n        };\n        // iterate over seen map;\n        const root = this.seen.get(schema);\n        if (!root)\n            throw new Error(\"Unprocessed schema. This is a bug in Zod.\");\n        // initialize result with root schema fields\n        // Object.assign(result, seen.cached);\n        // returns a ref to the schema\n        // defId will be empty if the ref points to an external schema (or #)\n        const makeURI = (entry) => {\n            // comparing the seen objects because sometimes\n            // multiple schemas map to the same seen object.\n            // e.g. lazy\n            // external is configured\n            const defsSegment = this.target === \"draft-2020-12\" ? \"$defs\" : \"definitions\";\n            if (params.external) {\n                const externalId = params.external.registry.get(entry[0])?.id; // ?? \"__shared\";// `__schema${this.counter++}`;\n                // check if schema is in the external registry\n                const uriGenerator = params.external.uri ?? ((id) => id);\n                if (externalId) {\n                    return { ref: uriGenerator(externalId) };\n                }\n                // otherwise, add to __shared\n                const id = entry[1].defId ?? entry[1].schema.id ?? `schema${this.counter++}`;\n                entry[1].defId = id; // set defId so it will be reused if needed\n                return { defId: id, ref: `${uriGenerator(\"__shared\")}#/${defsSegment}/${id}` };\n            }\n            if (entry[1] === root) {\n                return { ref: \"#\" };\n            }\n            // self-contained schema\n            const uriPrefix = `#`;\n            const defUriPrefix = `${uriPrefix}/${defsSegment}/`;\n            const defId = entry[1].schema.id ?? `__schema${this.counter++}`;\n            return { defId, ref: defUriPrefix + defId };\n        };\n        // stored cached version in `def` property\n        // remove all properties, set $ref\n        const extractToDef = (entry) => {\n            // if the schema is already a reference, do not extract it\n            if (entry[1].schema.$ref) {\n                return;\n            }\n            const seen = entry[1];\n            const { ref, defId } = makeURI(entry);\n            seen.def = { ...seen.schema };\n            // defId won't be set if the schema is a reference to an external schema\n            if (defId)\n                seen.defId = defId;\n            // wipe away all properties except $ref\n            const schema = seen.schema;\n            for (const key in schema) {\n                delete schema[key];\n            }\n            schema.$ref = ref;\n        };\n        // throw on cycles\n        // break cycles\n        if (params.cycles === \"throw\") {\n            for (const entry of this.seen.entries()) {\n                const seen = entry[1];\n                if (seen.cycle) {\n                    throw new Error(\"Cycle detected: \" +\n                        `#/${seen.cycle?.join(\"/\")}/<root>` +\n                        '\\n\\nSet the `cycles` parameter to `\"ref\"` to resolve cyclical schemas with defs.');\n                }\n            }\n        }\n        // extract schemas into $defs\n        for (const entry of this.seen.entries()) {\n            const seen = entry[1];\n            // convert root schema to # $ref\n            if (schema === entry[0]) {\n                extractToDef(entry); // this has special handling for the root schema\n                continue;\n            }\n            // extract schemas that are in the external registry\n            if (params.external) {\n                const ext = params.external.registry.get(entry[0])?.id;\n                if (schema !== entry[0] && ext) {\n                    extractToDef(entry);\n                    continue;\n                }\n            }\n            // extract schemas with `id` meta\n            const id = this.metadataRegistry.get(entry[0])?.id;\n            if (id) {\n                extractToDef(entry);\n                continue;\n            }\n            // break cycles\n            if (seen.cycle) {\n                // any\n                extractToDef(entry);\n                continue;\n            }\n            // extract reused schemas\n            if (seen.count > 1) {\n                if (params.reused === \"ref\") {\n                    extractToDef(entry);\n                    // biome-ignore lint:\n                    continue;\n                }\n            }\n        }\n        // flatten _refs\n        const flattenRef = (zodSchema, params) => {\n            const seen = this.seen.get(zodSchema);\n            const schema = seen.def ?? seen.schema;\n            const _cached = { ...schema };\n            // already seen\n            if (seen.ref === null) {\n                return;\n            }\n            // flatten ref if defined\n            const ref = seen.ref;\n            seen.ref = null; // prevent recursion\n            if (ref) {\n                flattenRef(ref, params);\n                // merge referenced schema into current\n                const refSchema = this.seen.get(ref).schema;\n                if (refSchema.$ref &&\n                    (params.target === \"draft-7\" || params.target === \"draft-4\" || params.target === \"openapi-3.0\")) {\n                    schema.allOf = schema.allOf ?? [];\n                    schema.allOf.push(refSchema);\n                }\n                else {\n                    Object.assign(schema, refSchema);\n                    Object.assign(schema, _cached); // prevent overwriting any fields in the original schema\n                }\n            }\n            // execute overrides\n            if (!seen.isParent)\n                this.override({\n                    zodSchema: zodSchema,\n                    jsonSchema: schema,\n                    path: seen.path ?? [],\n                });\n        };\n        for (const entry of [...this.seen.entries()].reverse()) {\n            flattenRef(entry[0], { target: this.target });\n        }\n        const result = {};\n        if (this.target === \"draft-2020-12\") {\n            result.$schema = \"https://json-schema.org/draft/2020-12/schema\";\n        }\n        else if (this.target === \"draft-7\") {\n            result.$schema = \"http://json-schema.org/draft-07/schema#\";\n        }\n        else if (this.target === \"draft-4\") {\n            result.$schema = \"http://json-schema.org/draft-04/schema#\";\n        }\n        else if (this.target === \"openapi-3.0\") {\n            // OpenAPI 3.0 schema objects should not include a $schema property\n        }\n        else {\n            // @ts-ignore\n            console.warn(`Invalid target: ${this.target}`);\n        }\n        if (params.external?.uri) {\n            const id = params.external.registry.get(schema)?.id;\n            if (!id)\n                throw new Error(\"Schema is missing an `id` property\");\n            result.$id = params.external.uri(id);\n        }\n        Object.assign(result, root.def);\n        // build defs object\n        const defs = params.external?.defs ?? {};\n        for (const entry of this.seen.entries()) {\n            const seen = entry[1];\n            if (seen.def && seen.defId) {\n                defs[seen.defId] = seen.def;\n            }\n        }\n        // set definitions in result\n        if (params.external) {\n        }\n        else {\n            if (Object.keys(defs).length > 0) {\n                if (this.target === \"draft-2020-12\") {\n                    result.$defs = defs;\n                }\n                else {\n                    result.definitions = defs;\n                }\n            }\n        }\n        try {\n            // this \"finalizes\" this schema and ensures all cycles are removed\n            // each call to .emit() is functionally independent\n            // though the seen map is shared\n            return JSON.parse(JSON.stringify(result));\n        }\n        catch (_err) {\n            throw new Error(\"Error converting schema to JSON.\");\n        }\n    }\n}\nexport function toJSONSchema(input, _params) {\n    if (input instanceof $ZodRegistry) {\n        const gen = new JSONSchemaGenerator(_params);\n        const defs = {};\n        for (const entry of input._idmap.entries()) {\n            const [_, schema] = entry;\n            gen.process(schema);\n        }\n        const schemas = {};\n        const external = {\n            registry: input,\n            uri: _params?.uri,\n            defs,\n        };\n        for (const entry of input._idmap.entries()) {\n            const [key, schema] = entry;\n            schemas[key] = gen.emit(schema, {\n                ..._params,\n                external,\n            });\n        }\n        if (Object.keys(defs).length > 0) {\n            const defsSegment = gen.target === \"draft-2020-12\" ? \"$defs\" : \"definitions\";\n            schemas.__shared = {\n                [defsSegment]: defs,\n            };\n        }\n        return { schemas };\n    }\n    const gen = new JSONSchemaGenerator(_params);\n    gen.process(input);\n    return gen.emit(input, _params);\n}\nfunction isTransforming(_schema, _ctx) {\n    const ctx = _ctx ?? { seen: new Set() };\n    if (ctx.seen.has(_schema))\n        return false;\n    ctx.seen.add(_schema);\n    const schema = _schema;\n    const def = schema._zod.def;\n    switch (def.type) {\n        case \"string\":\n        case \"number\":\n        case \"bigint\":\n        case \"boolean\":\n        case \"date\":\n        case \"symbol\":\n        case \"undefined\":\n        case \"null\":\n        case \"any\":\n        case \"unknown\":\n        case \"never\":\n        case \"void\":\n        case \"literal\":\n        case \"enum\":\n        case \"nan\":\n        case \"file\":\n        case \"template_literal\":\n            return false;\n        case \"array\": {\n            return isTransforming(def.element, ctx);\n        }\n        case \"object\": {\n            for (const key in def.shape) {\n                if (isTransforming(def.shape[key], ctx))\n                    return true;\n            }\n            return false;\n        }\n        case \"union\": {\n            for (const option of def.options) {\n                if (isTransforming(option, ctx))\n                    return true;\n            }\n            return false;\n        }\n        case \"intersection\": {\n            return isTransforming(def.left, ctx) || isTransforming(def.right, ctx);\n        }\n        case \"tuple\": {\n            for (const item of def.items) {\n                if (isTransforming(item, ctx))\n                    return true;\n            }\n            if (def.rest && isTransforming(def.rest, ctx))\n                return true;\n            return false;\n        }\n        case \"record\": {\n            return isTransforming(def.keyType, ctx) || isTransforming(def.valueType, ctx);\n        }\n        case \"map\": {\n            return isTransforming(def.keyType, ctx) || isTransforming(def.valueType, ctx);\n        }\n        case \"set\": {\n            return isTransforming(def.valueType, ctx);\n        }\n        // inner types\n        case \"promise\":\n        case \"optional\":\n        case \"nonoptional\":\n        case \"nullable\":\n        case \"readonly\":\n            return isTransforming(def.innerType, ctx);\n        case \"lazy\":\n            return isTransforming(def.getter(), ctx);\n        case \"default\": {\n            return isTransforming(def.innerType, ctx);\n        }\n        case \"prefault\": {\n            return isTransforming(def.innerType, ctx);\n        }\n        case \"custom\": {\n            return false;\n        }\n        case \"transform\": {\n            return true;\n        }\n        case \"pipe\": {\n            return isTransforming(def.in, ctx) || isTransforming(def.out, ctx);\n        }\n        case \"success\": {\n            return false;\n        }\n        case \"catch\": {\n            return false;\n        }\n        case \"function\": {\n            return false;\n        }\n        default:\n            def;\n    }\n    throw new Error(`Unknown schema type: ${def.type}`);\n}\n","export {};\n","import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport const ZodISODateTime = /*@__PURE__*/ core.$constructor(\"ZodISODateTime\", (inst, def) => {\n    core.$ZodISODateTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function datetime(params) {\n    return core._isoDateTime(ZodISODateTime, params);\n}\nexport const ZodISODate = /*@__PURE__*/ core.$constructor(\"ZodISODate\", (inst, def) => {\n    core.$ZodISODate.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function date(params) {\n    return core._isoDate(ZodISODate, params);\n}\nexport const ZodISOTime = /*@__PURE__*/ core.$constructor(\"ZodISOTime\", (inst, def) => {\n    core.$ZodISOTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function time(params) {\n    return core._isoTime(ZodISOTime, params);\n}\nexport const ZodISODuration = /*@__PURE__*/ core.$constructor(\"ZodISODuration\", (inst, def) => {\n    core.$ZodISODuration.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function duration(params) {\n    return core._isoDuration(ZodISODuration, params);\n}\n","import * as core from \"../core/index.js\";\nimport { $ZodError } from \"../core/index.js\";\nimport * as util from \"../core/util.js\";\nconst initializer = (inst, issues) => {\n    $ZodError.init(inst, issues);\n    inst.name = \"ZodError\";\n    Object.defineProperties(inst, {\n        format: {\n            value: (mapper) => core.formatError(inst, mapper),\n            // enumerable: false,\n        },\n        flatten: {\n            value: (mapper) => core.flattenError(inst, mapper),\n            // enumerable: false,\n        },\n        addIssue: {\n            value: (issue) => {\n                inst.issues.push(issue);\n                inst.message = JSON.stringify(inst.issues, util.jsonStringifyReplacer, 2);\n            },\n            // enumerable: false,\n        },\n        addIssues: {\n            value: (issues) => {\n                inst.issues.push(...issues);\n                inst.message = JSON.stringify(inst.issues, util.jsonStringifyReplacer, 2);\n            },\n            // enumerable: false,\n        },\n        isEmpty: {\n            get() {\n                return inst.issues.length === 0;\n            },\n            // enumerable: false,\n        },\n    });\n    // Object.defineProperty(inst, \"isEmpty\", {\n    //   get() {\n    //     return inst.issues.length === 0;\n    //   },\n    // });\n};\nexport const ZodError = core.$constructor(\"ZodError\", initializer);\nexport const ZodRealError = core.$constructor(\"ZodError\", initializer, {\n    Parent: Error,\n});\n// /** @deprecated Use `z.core.$ZodErrorMapCtx` instead. */\n// export type ErrorMapCtx = core.$ZodErrorMapCtx;\n","import * as core from \"../core/index.js\";\nimport { ZodRealError } from \"./errors.js\";\nexport const parse = /* @__PURE__ */ core._parse(ZodRealError);\nexport const parseAsync = /* @__PURE__ */ core._parseAsync(ZodRealError);\nexport const safeParse = /* @__PURE__ */ core._safeParse(ZodRealError);\nexport const safeParseAsync = /* @__PURE__ */ core._safeParseAsync(ZodRealError);\n// Codec functions\nexport const encode = /* @__PURE__ */ core._encode(ZodRealError);\nexport const decode = /* @__PURE__ */ core._decode(ZodRealError);\nexport const encodeAsync = /* @__PURE__ */ core._encodeAsync(ZodRealError);\nexport const decodeAsync = /* @__PURE__ */ core._decodeAsync(ZodRealError);\nexport const safeEncode = /* @__PURE__ */ core._safeEncode(ZodRealError);\nexport const safeDecode = /* @__PURE__ */ core._safeDecode(ZodRealError);\nexport const safeEncodeAsync = /* @__PURE__ */ core._safeEncodeAsync(ZodRealError);\nexport const safeDecodeAsync = /* @__PURE__ */ core._safeDecodeAsync(ZodRealError);\n","import * as core from \"../core/index.js\";\nimport { util } from \"../core/index.js\";\nimport * as checks from \"./checks.js\";\nimport * as iso from \"./iso.js\";\nimport * as parse from \"./parse.js\";\nexport const ZodType = /*@__PURE__*/ core.$constructor(\"ZodType\", (inst, def) => {\n    core.$ZodType.init(inst, def);\n    inst.def = def;\n    inst.type = def.type;\n    Object.defineProperty(inst, \"_def\", { value: def });\n    // base methods\n    inst.check = (...checks) => {\n        return inst.clone(util.mergeDefs(def, {\n            checks: [\n                ...(def.checks ?? []),\n                ...checks.map((ch) => typeof ch === \"function\" ? { _zod: { check: ch, def: { check: \"custom\" }, onattach: [] } } : ch),\n            ],\n        }));\n    };\n    inst.clone = (def, params) => core.clone(inst, def, params);\n    inst.brand = () => inst;\n    inst.register = ((reg, meta) => {\n        reg.add(inst, meta);\n        return inst;\n    });\n    // parsing\n    inst.parse = (data, params) => parse.parse(inst, data, params, { callee: inst.parse });\n    inst.safeParse = (data, params) => parse.safeParse(inst, data, params);\n    inst.parseAsync = async (data, params) => parse.parseAsync(inst, data, params, { callee: inst.parseAsync });\n    inst.safeParseAsync = async (data, params) => parse.safeParseAsync(inst, data, params);\n    inst.spa = inst.safeParseAsync;\n    // encoding/decoding\n    inst.encode = (data, params) => parse.encode(inst, data, params);\n    inst.decode = (data, params) => parse.decode(inst, data, params);\n    inst.encodeAsync = async (data, params) => parse.encodeAsync(inst, data, params);\n    inst.decodeAsync = async (data, params) => parse.decodeAsync(inst, data, params);\n    inst.safeEncode = (data, params) => parse.safeEncode(inst, data, params);\n    inst.safeDecode = (data, params) => parse.safeDecode(inst, data, params);\n    inst.safeEncodeAsync = async (data, params) => parse.safeEncodeAsync(inst, data, params);\n    inst.safeDecodeAsync = async (data, params) => parse.safeDecodeAsync(inst, data, params);\n    // refinements\n    inst.refine = (check, params) => inst.check(refine(check, params));\n    inst.superRefine = (refinement) => inst.check(superRefine(refinement));\n    inst.overwrite = (fn) => inst.check(checks.overwrite(fn));\n    // wrappers\n    inst.optional = () => optional(inst);\n    inst.nullable = () => nullable(inst);\n    inst.nullish = () => optional(nullable(inst));\n    inst.nonoptional = (params) => nonoptional(inst, params);\n    inst.array = () => array(inst);\n    inst.or = (arg) => union([inst, arg]);\n    inst.and = (arg) => intersection(inst, arg);\n    inst.transform = (tx) => pipe(inst, transform(tx));\n    inst.default = (def) => _default(inst, def);\n    inst.prefault = (def) => prefault(inst, def);\n    // inst.coalesce = (def, params) => coalesce(inst, def, params);\n    inst.catch = (params) => _catch(inst, params);\n    inst.pipe = (target) => pipe(inst, target);\n    inst.readonly = () => readonly(inst);\n    // meta\n    inst.describe = (description) => {\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, { description });\n        return cl;\n    };\n    Object.defineProperty(inst, \"description\", {\n        get() {\n            return core.globalRegistry.get(inst)?.description;\n        },\n        configurable: true,\n    });\n    inst.meta = (...args) => {\n        if (args.length === 0) {\n            return core.globalRegistry.get(inst);\n        }\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, args[0]);\n        return cl;\n    };\n    // helpers\n    inst.isOptional = () => inst.safeParse(undefined).success;\n    inst.isNullable = () => inst.safeParse(null).success;\n    return inst;\n});\n/** @internal */\nexport const _ZodString = /*@__PURE__*/ core.$constructor(\"_ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    ZodType.init(inst, def);\n    const bag = inst._zod.bag;\n    inst.format = bag.format ?? null;\n    inst.minLength = bag.minimum ?? null;\n    inst.maxLength = bag.maximum ?? null;\n    // validations\n    inst.regex = (...args) => inst.check(checks.regex(...args));\n    inst.includes = (...args) => inst.check(checks.includes(...args));\n    inst.startsWith = (...args) => inst.check(checks.startsWith(...args));\n    inst.endsWith = (...args) => inst.check(checks.endsWith(...args));\n    inst.min = (...args) => inst.check(checks.minLength(...args));\n    inst.max = (...args) => inst.check(checks.maxLength(...args));\n    inst.length = (...args) => inst.check(checks.length(...args));\n    inst.nonempty = (...args) => inst.check(checks.minLength(1, ...args));\n    inst.lowercase = (params) => inst.check(checks.lowercase(params));\n    inst.uppercase = (params) => inst.check(checks.uppercase(params));\n    // transforms\n    inst.trim = () => inst.check(checks.trim());\n    inst.normalize = (...args) => inst.check(checks.normalize(...args));\n    inst.toLowerCase = () => inst.check(checks.toLowerCase());\n    inst.toUpperCase = () => inst.check(checks.toUpperCase());\n});\nexport const ZodString = /*@__PURE__*/ core.$constructor(\"ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    _ZodString.init(inst, def);\n    inst.email = (params) => inst.check(core._email(ZodEmail, params));\n    inst.url = (params) => inst.check(core._url(ZodURL, params));\n    inst.jwt = (params) => inst.check(core._jwt(ZodJWT, params));\n    inst.emoji = (params) => inst.check(core._emoji(ZodEmoji, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.uuid = (params) => inst.check(core._uuid(ZodUUID, params));\n    inst.uuidv4 = (params) => inst.check(core._uuidv4(ZodUUID, params));\n    inst.uuidv6 = (params) => inst.check(core._uuidv6(ZodUUID, params));\n    inst.uuidv7 = (params) => inst.check(core._uuidv7(ZodUUID, params));\n    inst.nanoid = (params) => inst.check(core._nanoid(ZodNanoID, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.cuid = (params) => inst.check(core._cuid(ZodCUID, params));\n    inst.cuid2 = (params) => inst.check(core._cuid2(ZodCUID2, params));\n    inst.ulid = (params) => inst.check(core._ulid(ZodULID, params));\n    inst.base64 = (params) => inst.check(core._base64(ZodBase64, params));\n    inst.base64url = (params) => inst.check(core._base64url(ZodBase64URL, params));\n    inst.xid = (params) => inst.check(core._xid(ZodXID, params));\n    inst.ksuid = (params) => inst.check(core._ksuid(ZodKSUID, params));\n    inst.ipv4 = (params) => inst.check(core._ipv4(ZodIPv4, params));\n    inst.ipv6 = (params) => inst.check(core._ipv6(ZodIPv6, params));\n    inst.cidrv4 = (params) => inst.check(core._cidrv4(ZodCIDRv4, params));\n    inst.cidrv6 = (params) => inst.check(core._cidrv6(ZodCIDRv6, params));\n    inst.e164 = (params) => inst.check(core._e164(ZodE164, params));\n    // iso\n    inst.datetime = (params) => inst.check(iso.datetime(params));\n    inst.date = (params) => inst.check(iso.date(params));\n    inst.time = (params) => inst.check(iso.time(params));\n    inst.duration = (params) => inst.check(iso.duration(params));\n});\nexport function string(params) {\n    return core._string(ZodString, params);\n}\nexport const ZodStringFormat = /*@__PURE__*/ core.$constructor(\"ZodStringFormat\", (inst, def) => {\n    core.$ZodStringFormat.init(inst, def);\n    _ZodString.init(inst, def);\n});\nexport const ZodEmail = /*@__PURE__*/ core.$constructor(\"ZodEmail\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmail.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function email(params) {\n    return core._email(ZodEmail, params);\n}\nexport const ZodGUID = /*@__PURE__*/ core.$constructor(\"ZodGUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodGUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function guid(params) {\n    return core._guid(ZodGUID, params);\n}\nexport const ZodUUID = /*@__PURE__*/ core.$constructor(\"ZodUUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodUUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function uuid(params) {\n    return core._uuid(ZodUUID, params);\n}\nexport function uuidv4(params) {\n    return core._uuidv4(ZodUUID, params);\n}\n// ZodUUIDv6\nexport function uuidv6(params) {\n    return core._uuidv6(ZodUUID, params);\n}\n// ZodUUIDv7\nexport function uuidv7(params) {\n    return core._uuidv7(ZodUUID, params);\n}\nexport const ZodURL = /*@__PURE__*/ core.$constructor(\"ZodURL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodURL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function url(params) {\n    return core._url(ZodURL, params);\n}\nexport function httpUrl(params) {\n    return core._url(ZodURL, {\n        protocol: /^https?$/,\n        hostname: core.regexes.domain,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEmoji = /*@__PURE__*/ core.$constructor(\"ZodEmoji\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmoji.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function emoji(params) {\n    return core._emoji(ZodEmoji, params);\n}\nexport const ZodNanoID = /*@__PURE__*/ core.$constructor(\"ZodNanoID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodNanoID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function nanoid(params) {\n    return core._nanoid(ZodNanoID, params);\n}\nexport const ZodCUID = /*@__PURE__*/ core.$constructor(\"ZodCUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid(params) {\n    return core._cuid(ZodCUID, params);\n}\nexport const ZodCUID2 = /*@__PURE__*/ core.$constructor(\"ZodCUID2\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID2.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid2(params) {\n    return core._cuid2(ZodCUID2, params);\n}\nexport const ZodULID = /*@__PURE__*/ core.$constructor(\"ZodULID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodULID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ulid(params) {\n    return core._ulid(ZodULID, params);\n}\nexport const ZodXID = /*@__PURE__*/ core.$constructor(\"ZodXID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodXID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function xid(params) {\n    return core._xid(ZodXID, params);\n}\nexport const ZodKSUID = /*@__PURE__*/ core.$constructor(\"ZodKSUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodKSUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ksuid(params) {\n    return core._ksuid(ZodKSUID, params);\n}\nexport const ZodIPv4 = /*@__PURE__*/ core.$constructor(\"ZodIPv4\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv4(params) {\n    return core._ipv4(ZodIPv4, params);\n}\nexport const ZodIPv6 = /*@__PURE__*/ core.$constructor(\"ZodIPv6\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv6(params) {\n    return core._ipv6(ZodIPv6, params);\n}\nexport const ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv4\", (inst, def) => {\n    core.$ZodCIDRv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv4(params) {\n    return core._cidrv4(ZodCIDRv4, params);\n}\nexport const ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv6\", (inst, def) => {\n    core.$ZodCIDRv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv6(params) {\n    return core._cidrv6(ZodCIDRv6, params);\n}\nexport const ZodBase64 = /*@__PURE__*/ core.$constructor(\"ZodBase64\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64(params) {\n    return core._base64(ZodBase64, params);\n}\nexport const ZodBase64URL = /*@__PURE__*/ core.$constructor(\"ZodBase64URL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64URL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64url(params) {\n    return core._base64url(ZodBase64URL, params);\n}\nexport const ZodE164 = /*@__PURE__*/ core.$constructor(\"ZodE164\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodE164.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function e164(params) {\n    return core._e164(ZodE164, params);\n}\nexport const ZodJWT = /*@__PURE__*/ core.$constructor(\"ZodJWT\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodJWT.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function jwt(params) {\n    return core._jwt(ZodJWT, params);\n}\nexport const ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"ZodCustomStringFormat\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCustomStringFormat.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function stringFormat(format, fnOrRegex, _params = {}) {\n    return core._stringFormat(ZodCustomStringFormat, format, fnOrRegex, _params);\n}\nexport function hostname(_params) {\n    return core._stringFormat(ZodCustomStringFormat, \"hostname\", core.regexes.hostname, _params);\n}\nexport function hex(_params) {\n    return core._stringFormat(ZodCustomStringFormat, \"hex\", core.regexes.hex, _params);\n}\nexport function hash(alg, params) {\n    const enc = params?.enc ?? \"hex\";\n    const format = `${alg}_${enc}`;\n    const regex = core.regexes[format];\n    if (!regex)\n        throw new Error(`Unrecognized hash format: ${format}`);\n    return core._stringFormat(ZodCustomStringFormat, format, regex, params);\n}\nexport const ZodNumber = /*@__PURE__*/ core.$constructor(\"ZodNumber\", (inst, def) => {\n    core.$ZodNumber.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.int = (params) => inst.check(int(params));\n    inst.safe = (params) => inst.check(int(params));\n    inst.positive = (params) => inst.check(checks.gt(0, params));\n    inst.nonnegative = (params) => inst.check(checks.gte(0, params));\n    inst.negative = (params) => inst.check(checks.lt(0, params));\n    inst.nonpositive = (params) => inst.check(checks.lte(0, params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    inst.step = (value, params) => inst.check(checks.multipleOf(value, params));\n    // inst.finite = (params) => inst.check(core.finite(params));\n    inst.finite = () => inst;\n    const bag = inst._zod.bag;\n    inst.minValue =\n        Math.max(bag.minimum ?? Number.NEGATIVE_INFINITY, bag.exclusiveMinimum ?? Number.NEGATIVE_INFINITY) ?? null;\n    inst.maxValue =\n        Math.min(bag.maximum ?? Number.POSITIVE_INFINITY, bag.exclusiveMaximum ?? Number.POSITIVE_INFINITY) ?? null;\n    inst.isInt = (bag.format ?? \"\").includes(\"int\") || Number.isSafeInteger(bag.multipleOf ?? 0.5);\n    inst.isFinite = true;\n    inst.format = bag.format ?? null;\n});\nexport function number(params) {\n    return core._number(ZodNumber, params);\n}\nexport const ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"ZodNumberFormat\", (inst, def) => {\n    core.$ZodNumberFormat.init(inst, def);\n    ZodNumber.init(inst, def);\n});\nexport function int(params) {\n    return core._int(ZodNumberFormat, params);\n}\nexport function float32(params) {\n    return core._float32(ZodNumberFormat, params);\n}\nexport function float64(params) {\n    return core._float64(ZodNumberFormat, params);\n}\nexport function int32(params) {\n    return core._int32(ZodNumberFormat, params);\n}\nexport function uint32(params) {\n    return core._uint32(ZodNumberFormat, params);\n}\nexport const ZodBoolean = /*@__PURE__*/ core.$constructor(\"ZodBoolean\", (inst, def) => {\n    core.$ZodBoolean.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function boolean(params) {\n    return core._boolean(ZodBoolean, params);\n}\nexport const ZodBigInt = /*@__PURE__*/ core.$constructor(\"ZodBigInt\", (inst, def) => {\n    core.$ZodBigInt.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.positive = (params) => inst.check(checks.gt(BigInt(0), params));\n    inst.negative = (params) => inst.check(checks.lt(BigInt(0), params));\n    inst.nonpositive = (params) => inst.check(checks.lte(BigInt(0), params));\n    inst.nonnegative = (params) => inst.check(checks.gte(BigInt(0), params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    const bag = inst._zod.bag;\n    inst.minValue = bag.minimum ?? null;\n    inst.maxValue = bag.maximum ?? null;\n    inst.format = bag.format ?? null;\n});\nexport function bigint(params) {\n    return core._bigint(ZodBigInt, params);\n}\nexport const ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"ZodBigIntFormat\", (inst, def) => {\n    core.$ZodBigIntFormat.init(inst, def);\n    ZodBigInt.init(inst, def);\n});\n// int64\nexport function int64(params) {\n    return core._int64(ZodBigIntFormat, params);\n}\n// uint64\nexport function uint64(params) {\n    return core._uint64(ZodBigIntFormat, params);\n}\nexport const ZodSymbol = /*@__PURE__*/ core.$constructor(\"ZodSymbol\", (inst, def) => {\n    core.$ZodSymbol.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function symbol(params) {\n    return core._symbol(ZodSymbol, params);\n}\nexport const ZodUndefined = /*@__PURE__*/ core.$constructor(\"ZodUndefined\", (inst, def) => {\n    core.$ZodUndefined.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _undefined(params) {\n    return core._undefined(ZodUndefined, params);\n}\nexport { _undefined as undefined };\nexport const ZodNull = /*@__PURE__*/ core.$constructor(\"ZodNull\", (inst, def) => {\n    core.$ZodNull.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _null(params) {\n    return core._null(ZodNull, params);\n}\nexport { _null as null };\nexport const ZodAny = /*@__PURE__*/ core.$constructor(\"ZodAny\", (inst, def) => {\n    core.$ZodAny.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function any() {\n    return core._any(ZodAny);\n}\nexport const ZodUnknown = /*@__PURE__*/ core.$constructor(\"ZodUnknown\", (inst, def) => {\n    core.$ZodUnknown.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function unknown() {\n    return core._unknown(ZodUnknown);\n}\nexport const ZodNever = /*@__PURE__*/ core.$constructor(\"ZodNever\", (inst, def) => {\n    core.$ZodNever.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function never(params) {\n    return core._never(ZodNever, params);\n}\nexport const ZodVoid = /*@__PURE__*/ core.$constructor(\"ZodVoid\", (inst, def) => {\n    core.$ZodVoid.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _void(params) {\n    return core._void(ZodVoid, params);\n}\nexport { _void as void };\nexport const ZodDate = /*@__PURE__*/ core.$constructor(\"ZodDate\", (inst, def) => {\n    core.$ZodDate.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    const c = inst._zod.bag;\n    inst.minDate = c.minimum ? new Date(c.minimum) : null;\n    inst.maxDate = c.maximum ? new Date(c.maximum) : null;\n});\nexport function date(params) {\n    return core._date(ZodDate, params);\n}\nexport const ZodArray = /*@__PURE__*/ core.$constructor(\"ZodArray\", (inst, def) => {\n    core.$ZodArray.init(inst, def);\n    ZodType.init(inst, def);\n    inst.element = def.element;\n    inst.min = (minLength, params) => inst.check(checks.minLength(minLength, params));\n    inst.nonempty = (params) => inst.check(checks.minLength(1, params));\n    inst.max = (maxLength, params) => inst.check(checks.maxLength(maxLength, params));\n    inst.length = (len, params) => inst.check(checks.length(len, params));\n    inst.unwrap = () => inst.element;\n});\nexport function array(element, params) {\n    return core._array(ZodArray, element, params);\n}\n// .keyof\nexport function keyof(schema) {\n    const shape = schema._zod.def.shape;\n    return _enum(Object.keys(shape));\n}\nexport const ZodObject = /*@__PURE__*/ core.$constructor(\"ZodObject\", (inst, def) => {\n    core.$ZodObjectJIT.init(inst, def);\n    ZodType.init(inst, def);\n    util.defineLazy(inst, \"shape\", () => {\n        return def.shape;\n    });\n    inst.keyof = () => _enum(Object.keys(inst._zod.def.shape));\n    inst.catchall = (catchall) => inst.clone({ ...inst._zod.def, catchall: catchall });\n    inst.passthrough = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.loose = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.strict = () => inst.clone({ ...inst._zod.def, catchall: never() });\n    inst.strip = () => inst.clone({ ...inst._zod.def, catchall: undefined });\n    inst.extend = (incoming) => {\n        return util.extend(inst, incoming);\n    };\n    inst.safeExtend = (incoming) => {\n        return util.safeExtend(inst, incoming);\n    };\n    inst.merge = (other) => util.merge(inst, other);\n    inst.pick = (mask) => util.pick(inst, mask);\n    inst.omit = (mask) => util.omit(inst, mask);\n    inst.partial = (...args) => util.partial(ZodOptional, inst, args[0]);\n    inst.required = (...args) => util.required(ZodNonOptional, inst, args[0]);\n});\nexport function object(shape, params) {\n    const def = {\n        type: \"object\",\n        shape: shape ?? {},\n        ...util.normalizeParams(params),\n    };\n    return new ZodObject(def);\n}\n// strictObject\nexport function strictObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        shape,\n        catchall: never(),\n        ...util.normalizeParams(params),\n    });\n}\n// looseObject\nexport function looseObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        shape,\n        catchall: unknown(),\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodUnion = /*@__PURE__*/ core.$constructor(\"ZodUnion\", (inst, def) => {\n    core.$ZodUnion.init(inst, def);\n    ZodType.init(inst, def);\n    inst.options = def.options;\n});\nexport function union(options, params) {\n    return new ZodUnion({\n        type: \"union\",\n        options: options,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodDiscriminatedUnion = /*@__PURE__*/ core.$constructor(\"ZodDiscriminatedUnion\", (inst, def) => {\n    ZodUnion.init(inst, def);\n    core.$ZodDiscriminatedUnion.init(inst, def);\n});\nexport function discriminatedUnion(discriminator, options, params) {\n    // const [options, params] = args;\n    return new ZodDiscriminatedUnion({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodIntersection = /*@__PURE__*/ core.$constructor(\"ZodIntersection\", (inst, def) => {\n    core.$ZodIntersection.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function intersection(left, right) {\n    return new ZodIntersection({\n        type: \"intersection\",\n        left: left,\n        right: right,\n    });\n}\nexport const ZodTuple = /*@__PURE__*/ core.$constructor(\"ZodTuple\", (inst, def) => {\n    core.$ZodTuple.init(inst, def);\n    ZodType.init(inst, def);\n    inst.rest = (rest) => inst.clone({\n        ...inst._zod.def,\n        rest: rest,\n    });\n});\nexport function tuple(items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof core.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new ZodTuple({\n        type: \"tuple\",\n        items: items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodRecord = /*@__PURE__*/ core.$constructor(\"ZodRecord\", (inst, def) => {\n    core.$ZodRecord.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function record(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\n// type alksjf = core.output<core.$ZodRecordKey>;\nexport function partialRecord(keyType, valueType, params) {\n    const k = core.clone(keyType);\n    k._zod.values = undefined;\n    return new ZodRecord({\n        type: \"record\",\n        keyType: k,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMap = /*@__PURE__*/ core.$constructor(\"ZodMap\", (inst, def) => {\n    core.$ZodMap.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function map(keyType, valueType, params) {\n    return new ZodMap({\n        type: \"map\",\n        keyType: keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSet = /*@__PURE__*/ core.$constructor(\"ZodSet\", (inst, def) => {\n    core.$ZodSet.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (...args) => inst.check(core._minSize(...args));\n    inst.nonempty = (params) => inst.check(core._minSize(1, params));\n    inst.max = (...args) => inst.check(core._maxSize(...args));\n    inst.size = (...args) => inst.check(core._size(...args));\n});\nexport function set(valueType, params) {\n    return new ZodSet({\n        type: \"set\",\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEnum = /*@__PURE__*/ core.$constructor(\"ZodEnum\", (inst, def) => {\n    core.$ZodEnum.init(inst, def);\n    ZodType.init(inst, def);\n    inst.enum = def.entries;\n    inst.options = Object.values(def.entries);\n    const keys = new Set(Object.keys(def.entries));\n    inst.extract = (values, params) => {\n        const newEntries = {};\n        for (const value of values) {\n            if (keys.has(value)) {\n                newEntries[value] = def.entries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n    inst.exclude = (values, params) => {\n        const newEntries = { ...def.entries };\n        for (const value of values) {\n            if (keys.has(value)) {\n                delete newEntries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n});\nfunction _enum(values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport { _enum as enum };\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function nativeEnum(entries, params) {\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLiteral = /*@__PURE__*/ core.$constructor(\"ZodLiteral\", (inst, def) => {\n    core.$ZodLiteral.init(inst, def);\n    ZodType.init(inst, def);\n    inst.values = new Set(def.values);\n    Object.defineProperty(inst, \"value\", {\n        get() {\n            if (def.values.length > 1) {\n                throw new Error(\"This schema contains multiple valid literal values. Use `.values` instead.\");\n            }\n            return def.values[0];\n        },\n    });\n});\nexport function literal(value, params) {\n    return new ZodLiteral({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodFile = /*@__PURE__*/ core.$constructor(\"ZodFile\", (inst, def) => {\n    core.$ZodFile.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (size, params) => inst.check(core._minSize(size, params));\n    inst.max = (size, params) => inst.check(core._maxSize(size, params));\n    inst.mime = (types, params) => inst.check(core._mime(Array.isArray(types) ? types : [types], params));\n});\nexport function file(params) {\n    return core._file(ZodFile, params);\n}\nexport const ZodTransform = /*@__PURE__*/ core.$constructor(\"ZodTransform\", (inst, def) => {\n    core.$ZodTransform.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (_ctx.direction === \"backward\") {\n            throw new core.$ZodEncodeError(inst.constructor.name);\n        }\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = inst);\n                // _issue.continue ??= true;\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        const output = def.transform(payload.value, payload);\n        if (output instanceof Promise) {\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        payload.value = output;\n        return payload;\n    };\n});\nexport function transform(fn) {\n    return new ZodTransform({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport const ZodOptional = /*@__PURE__*/ core.$constructor(\"ZodOptional\", (inst, def) => {\n    core.$ZodOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function optional(innerType) {\n    return new ZodOptional({\n        type: \"optional\",\n        innerType: innerType,\n    });\n}\nexport const ZodNullable = /*@__PURE__*/ core.$constructor(\"ZodNullable\", (inst, def) => {\n    core.$ZodNullable.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nullable(innerType) {\n    return new ZodNullable({\n        type: \"nullable\",\n        innerType: innerType,\n    });\n}\n// nullish\nexport function nullish(innerType) {\n    return optional(nullable(innerType));\n}\nexport const ZodDefault = /*@__PURE__*/ core.$constructor(\"ZodDefault\", (inst, def) => {\n    core.$ZodDefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeDefault = inst.unwrap;\n});\nexport function _default(innerType, defaultValue) {\n    return new ZodDefault({\n        type: \"default\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\nexport const ZodPrefault = /*@__PURE__*/ core.$constructor(\"ZodPrefault\", (inst, def) => {\n    core.$ZodPrefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function prefault(innerType, defaultValue) {\n    return new ZodPrefault({\n        type: \"prefault\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : util.shallowClone(defaultValue);\n        },\n    });\n}\nexport const ZodNonOptional = /*@__PURE__*/ core.$constructor(\"ZodNonOptional\", (inst, def) => {\n    core.$ZodNonOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nonoptional(innerType, params) {\n    return new ZodNonOptional({\n        type: \"nonoptional\",\n        innerType: innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSuccess = /*@__PURE__*/ core.$constructor(\"ZodSuccess\", (inst, def) => {\n    core.$ZodSuccess.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function success(innerType) {\n    return new ZodSuccess({\n        type: \"success\",\n        innerType: innerType,\n    });\n}\nexport const ZodCatch = /*@__PURE__*/ core.$constructor(\"ZodCatch\", (inst, def) => {\n    core.$ZodCatch.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeCatch = inst.unwrap;\n});\nfunction _catch(innerType, catchValue) {\n    return new ZodCatch({\n        type: \"catch\",\n        innerType: innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport { _catch as catch };\nexport const ZodNaN = /*@__PURE__*/ core.$constructor(\"ZodNaN\", (inst, def) => {\n    core.$ZodNaN.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function nan(params) {\n    return core._nan(ZodNaN, params);\n}\nexport const ZodPipe = /*@__PURE__*/ core.$constructor(\"ZodPipe\", (inst, def) => {\n    core.$ZodPipe.init(inst, def);\n    ZodType.init(inst, def);\n    inst.in = def.in;\n    inst.out = def.out;\n});\nexport function pipe(in_, out) {\n    return new ZodPipe({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        // ...util.normalizeParams(params),\n    });\n}\nexport const ZodCodec = /*@__PURE__*/ core.$constructor(\"ZodCodec\", (inst, def) => {\n    ZodPipe.init(inst, def);\n    core.$ZodCodec.init(inst, def);\n});\nexport function codec(in_, out, params) {\n    return new ZodCodec({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        transform: params.decode,\n        reverseTransform: params.encode,\n    });\n}\nexport const ZodReadonly = /*@__PURE__*/ core.$constructor(\"ZodReadonly\", (inst, def) => {\n    core.$ZodReadonly.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function readonly(innerType) {\n    return new ZodReadonly({\n        type: \"readonly\",\n        innerType: innerType,\n    });\n}\nexport const ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"ZodTemplateLiteral\", (inst, def) => {\n    core.$ZodTemplateLiteral.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function templateLiteral(parts, params) {\n    return new ZodTemplateLiteral({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLazy = /*@__PURE__*/ core.$constructor(\"ZodLazy\", (inst, def) => {\n    core.$ZodLazy.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.getter();\n});\nexport function lazy(getter) {\n    return new ZodLazy({\n        type: \"lazy\",\n        getter: getter,\n    });\n}\nexport const ZodPromise = /*@__PURE__*/ core.$constructor(\"ZodPromise\", (inst, def) => {\n    core.$ZodPromise.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function promise(innerType) {\n    return new ZodPromise({\n        type: \"promise\",\n        innerType: innerType,\n    });\n}\nexport const ZodFunction = /*@__PURE__*/ core.$constructor(\"ZodFunction\", (inst, def) => {\n    core.$ZodFunction.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function _function(params) {\n    return new ZodFunction({\n        type: \"function\",\n        input: Array.isArray(params?.input) ? tuple(params?.input) : (params?.input ?? array(unknown())),\n        output: params?.output ?? unknown(),\n    });\n}\nexport { _function as function };\nexport const ZodCustom = /*@__PURE__*/ core.$constructor(\"ZodCustom\", (inst, def) => {\n    core.$ZodCustom.init(inst, def);\n    ZodType.init(inst, def);\n});\n// custom checks\nexport function check(fn) {\n    const ch = new core.$ZodCheck({\n        check: \"custom\",\n        // ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function custom(fn, _params) {\n    return core._custom(ZodCustom, fn ?? (() => true), _params);\n}\nexport function refine(fn, _params = {}) {\n    return core._refine(ZodCustom, fn, _params);\n}\n// superRefine\nexport function superRefine(fn) {\n    return core._superRefine(fn);\n}\nfunction _instanceof(cls, params = {\n    error: `Input not instance of ${cls.name}`,\n}) {\n    const inst = new ZodCustom({\n        type: \"custom\",\n        check: \"custom\",\n        fn: (data) => data instanceof cls,\n        abort: true,\n        ...util.normalizeParams(params),\n    });\n    inst._zod.bag.Class = cls;\n    return inst;\n}\nexport { _instanceof as instanceof };\n// stringbool\nexport const stringbool = (...args) => core._stringbool({\n    Codec: ZodCodec,\n    Boolean: ZodBoolean,\n    String: ZodString,\n}, ...args);\nexport function json(params) {\n    const jsonSchema = lazy(() => {\n        return union([string(params), number(), boolean(), _null(), array(jsonSchema), record(string(), jsonSchema)]);\n    });\n    return jsonSchema;\n}\n// preprocess\n// /** @deprecated Use `z.pipe()` and `z.transform()` instead. */\nexport function preprocess(fn, schema) {\n    return pipe(transform(fn), schema);\n}\n","// Zod 3 compat layer\nimport * as core from \"../core/index.js\";\n/** @deprecated Use the raw string literal codes instead, e.g. \"invalid_type\". */\nexport const ZodIssueCode = {\n    invalid_type: \"invalid_type\",\n    too_big: \"too_big\",\n    too_small: \"too_small\",\n    invalid_format: \"invalid_format\",\n    not_multiple_of: \"not_multiple_of\",\n    unrecognized_keys: \"unrecognized_keys\",\n    invalid_union: \"invalid_union\",\n    invalid_key: \"invalid_key\",\n    invalid_element: \"invalid_element\",\n    invalid_value: \"invalid_value\",\n    custom: \"custom\",\n};\nexport { $brand, config } from \"../core/index.js\";\n/** @deprecated Use `z.config(params)` instead. */\nexport function setErrorMap(map) {\n    core.config({\n        customError: map,\n    });\n}\n/** @deprecated Use `z.config()` instead. */\nexport function getErrorMap() {\n    return core.config().customError;\n}\n/** @deprecated Do not use. Stub definition, only included for zod-to-json-schema compatibility. */\nexport var ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\n","import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport function string(params) {\n    return core._coercedString(schemas.ZodString, params);\n}\nexport function number(params) {\n    return core._coercedNumber(schemas.ZodNumber, params);\n}\nexport function boolean(params) {\n    return core._coercedBoolean(schemas.ZodBoolean, params);\n}\nexport function bigint(params) {\n    return core._coercedBigint(schemas.ZodBigInt, params);\n}\nexport function date(params) {\n    return core._coercedDate(schemas.ZodDate, params);\n}\n","import { z } from \"zod\";\n\nexport const eventSchemas = {\n  asset_clicked: z.object({\n    ledgerSessionId: z.string(),\n    page: z.string(),\n    flow: z.enum([\"buy\", \"sell\"]),\n    currency: z.string(),\n    live_app: z.string(),\n    anonymised_url: z.url(),\n  }),\n\n  quote_requested: z.object({\n    ledgerSessionId: z.string(),\n    amount: z.number(),\n    currency: z.string(),\n  }),\n};\n\nexport type EventMap = {\n  [K in keyof typeof eventSchemas]: z.infer<(typeof eventSchemas)[K]>;\n};\n","const getDefaultsFromPostinstall = () => (undefined);\nexport { getDefaultsFromPostinstall };","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\n */\n\nexport const CONSTANTS = {\n  /**\n   * @define {boolean} Whether this is the client Node.js SDK.\n   */\n  NODE_CLIENT: false,\n  /**\n   * @define {boolean} Whether this is the Admin Node.js SDK.\n   */\n  NODE_ADMIN: false,\n\n  /**\n   * Firebase SDK Version\n   */\n  SDK_VERSION: '${JSCORE_VERSION}'\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\n\n/**\n * Throws an error if the provided assertion is falsy\n */\nexport const assert = function (assertion: unknown, message: string): void {\n  if (!assertion) {\n    throw assertionError(message);\n  }\n};\n\n/**\n * Returns an Error object suitable for throwing.\n */\nexport const assertionError = function (message: string): Error {\n  return new Error(\n    'Firebase Database (' +\n      CONSTANTS.SDK_VERSION +\n      ') INTERNAL ASSERT FAILED: ' +\n      message\n  );\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst stringToByteArray = function (str: string): number[] {\n  // TODO(user): Use native implementations if/when available\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (\n      (c & 0xfc00) === 0xd800 &&\n      i + 1 < str.length &&\n      (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00\n    ) {\n      // Surrogate Pair\n      c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Turns an array of numbers into the string given by the concatenation of the\n * characters to which the numbers correspond.\n * @param bytes Array of numbers representing characters.\n * @return Stringification of the array.\n */\nconst byteArrayToString = function (bytes: number[]): string {\n  // TODO(user): Use native implementations if/when available\n  const out: string[] = [];\n  let pos = 0,\n    c = 0;\n  while (pos < bytes.length) {\n    const c1 = bytes[pos++];\n    if (c1 < 128) {\n      out[c++] = String.fromCharCode(c1);\n    } else if (c1 > 191 && c1 < 224) {\n      const c2 = bytes[pos++];\n      out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n    } else if (c1 > 239 && c1 < 365) {\n      // Surrogate Pair\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      const c4 = bytes[pos++];\n      const u =\n        (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\n        0x10000;\n      out[c++] = String.fromCharCode(0xd800 + (u >> 10));\n      out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\n    } else {\n      const c2 = bytes[pos++];\n      const c3 = bytes[pos++];\n      out[c++] = String.fromCharCode(\n        ((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)\n      );\n    }\n  }\n  return out.join('');\n};\n\ninterface Base64 {\n  byteToCharMap_: { [key: number]: string } | null;\n  charToByteMap_: { [key: string]: number } | null;\n  byteToCharMapWebSafe_: { [key: number]: string } | null;\n  charToByteMapWebSafe_: { [key: string]: number } | null;\n  ENCODED_VALS_BASE: string;\n  readonly ENCODED_VALS: string;\n  readonly ENCODED_VALS_WEBSAFE: string;\n  HAS_NATIVE_SUPPORT: boolean;\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string;\n  encodeString(input: string, webSafe?: boolean): string;\n  decodeString(input: string, webSafe: boolean): string;\n  decodeStringToByteArray(input: string, webSafe: boolean): number[];\n  init_(): void;\n}\n\n// We define it as an object literal instead of a class because a class compiled down to es5 can't\n// be treeshaked. https://github.com/rollup/rollup/issues/1691\n// Static lookup maps, lazily populated by init_()\n// TODO(dlarocque): Define this as a class, since we no longer target ES5.\nexport const base64: Base64 = {\n  /**\n   * Maps bytes to characters.\n   */\n  byteToCharMap_: null,\n\n  /**\n   * Maps characters to bytes.\n   */\n  charToByteMap_: null,\n\n  /**\n   * Maps bytes to websafe characters.\n   * @private\n   */\n  byteToCharMapWebSafe_: null,\n\n  /**\n   * Maps websafe characters to bytes.\n   * @private\n   */\n  charToByteMapWebSafe_: null,\n\n  /**\n   * Our default alphabet, shared between\n   * ENCODED_VALS and ENCODED_VALS_WEBSAFE\n   */\n  ENCODED_VALS_BASE:\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\n\n  /**\n   * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\n   */\n  get ENCODED_VALS() {\n    return this.ENCODED_VALS_BASE + '+/=';\n  },\n\n  /**\n   * Our websafe alphabet.\n   */\n  get ENCODED_VALS_WEBSAFE() {\n    return this.ENCODED_VALS_BASE + '-_.';\n  },\n\n  /**\n   * Whether this browser supports the atob and btoa functions. This extension\n   * started at Mozilla but is now implemented by many browsers. We use the\n   * ASSUME_* variables to avoid pulling in the full useragent detection library\n   * but still allowing the standard per-browser compilations.\n   *\n   */\n  HAS_NATIVE_SUPPORT: typeof atob === 'function',\n\n  /**\n   * Base64-encode an array of bytes.\n   *\n   * @param input An array of bytes (numbers with\n   *     value in [0, 255]) to encode.\n   * @param webSafe Boolean indicating we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeByteArray(input: number[] | Uint8Array, webSafe?: boolean): string {\n    if (!Array.isArray(input)) {\n      throw Error('encodeByteArray takes an array as a parameter');\n    }\n\n    this.init_();\n\n    const byteToCharMap = webSafe\n      ? this.byteToCharMapWebSafe_!\n      : this.byteToCharMap_!;\n\n    const output = [];\n\n    for (let i = 0; i < input.length; i += 3) {\n      const byte1 = input[i];\n      const haveByte2 = i + 1 < input.length;\n      const byte2 = haveByte2 ? input[i + 1] : 0;\n      const haveByte3 = i + 2 < input.length;\n      const byte3 = haveByte3 ? input[i + 2] : 0;\n\n      const outByte1 = byte1 >> 2;\n      const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\n      let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\n      let outByte4 = byte3 & 0x3f;\n\n      if (!haveByte3) {\n        outByte4 = 64;\n\n        if (!haveByte2) {\n          outByte3 = 64;\n        }\n      }\n\n      output.push(\n        byteToCharMap[outByte1],\n        byteToCharMap[outByte2],\n        byteToCharMap[outByte3],\n        byteToCharMap[outByte4]\n      );\n    }\n\n    return output.join('');\n  },\n\n  /**\n   * Base64-encode a string.\n   *\n   * @param input A string to encode.\n   * @param webSafe If true, we should use the\n   *     alternative alphabet.\n   * @return The base64 encoded string.\n   */\n  encodeString(input: string, webSafe?: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return btoa(input);\n    }\n    return this.encodeByteArray(stringToByteArray(input), webSafe);\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * @param input to decode.\n   * @param webSafe True if we should use the\n   *     alternative alphabet.\n   * @return string representing the decoded value.\n   */\n  decodeString(input: string, webSafe: boolean): string {\n    // Shortcut for Mozilla browsers that implement\n    // a native base64 encoder in the form of \"btoa/atob\"\n    if (this.HAS_NATIVE_SUPPORT && !webSafe) {\n      return atob(input);\n    }\n    return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\n  },\n\n  /**\n   * Base64-decode a string.\n   *\n   * In base-64 decoding, groups of four characters are converted into three\n   * bytes.  If the encoder did not apply padding, the input length may not\n   * be a multiple of 4.\n   *\n   * In this case, the last group will have fewer than 4 characters, and\n   * padding will be inferred.  If the group has one or two characters, it decodes\n   * to one byte.  If the group has three characters, it decodes to two bytes.\n   *\n   * @param input Input to decode.\n   * @param webSafe True if we should use the web-safe alphabet.\n   * @return bytes representing the decoded value.\n   */\n  decodeStringToByteArray(input: string, webSafe: boolean): number[] {\n    this.init_();\n\n    const charToByteMap = webSafe\n      ? this.charToByteMapWebSafe_!\n      : this.charToByteMap_!;\n\n    const output: number[] = [];\n\n    for (let i = 0; i < input.length; ) {\n      const byte1 = charToByteMap[input.charAt(i++)];\n\n      const haveByte2 = i < input.length;\n      const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\n      ++i;\n\n      const haveByte3 = i < input.length;\n      const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      const haveByte4 = i < input.length;\n      const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\n      ++i;\n\n      if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\n        throw new DecodeBase64StringError();\n      }\n\n      const outByte1 = (byte1 << 2) | (byte2 >> 4);\n      output.push(outByte1);\n\n      if (byte3 !== 64) {\n        const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\n        output.push(outByte2);\n\n        if (byte4 !== 64) {\n          const outByte3 = ((byte3 << 6) & 0xc0) | byte4;\n          output.push(outByte3);\n        }\n      }\n    }\n\n    return output;\n  },\n\n  /**\n   * Lazy static initialization function. Called before\n   * accessing any of the static map variables.\n   * @private\n   */\n  init_() {\n    if (!this.byteToCharMap_) {\n      this.byteToCharMap_ = {};\n      this.charToByteMap_ = {};\n      this.byteToCharMapWebSafe_ = {};\n      this.charToByteMapWebSafe_ = {};\n\n      // We want quick mappings back and forth, so we precompute two maps.\n      for (let i = 0; i < this.ENCODED_VALS.length; i++) {\n        this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\n        this.charToByteMap_[this.byteToCharMap_[i]] = i;\n        this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\n        this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\n\n        // Be forgiving when decoding and correctly decode both encodings.\n        if (i >= this.ENCODED_VALS_BASE.length) {\n          this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\n          this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\n        }\n      }\n    }\n  }\n};\n\n/**\n * An error encountered while decoding base64 string.\n */\nexport class DecodeBase64StringError extends Error {\n  readonly name = 'DecodeBase64StringError';\n}\n\n/**\n * URL-safe base64 encoding\n */\nexport const base64Encode = function (str: string): string {\n  const utf8Bytes = stringToByteArray(str);\n  return base64.encodeByteArray(utf8Bytes, true);\n};\n\n/**\n * URL-safe base64 encoding (without \".\" padding in the end).\n * e.g. Used in JSON Web Token (JWT) parts.\n */\nexport const base64urlEncodeWithoutPadding = function (str: string): string {\n  // Use base64url encoding and remove padding in the end (dot characters).\n  return base64Encode(str).replace(/\\./g, '');\n};\n\n/**\n * URL-safe base64 decoding\n *\n * NOTE: DO NOT use the global atob() function - it does NOT support the\n * base64Url variant encoding.\n *\n * @param str To be decoded\n * @return Decoded result, if possible\n */\nexport const base64Decode = function (str: string): string | null {\n  try {\n    return base64.decodeString(str, true);\n  } catch (e) {\n    console.error('base64Decode failed: ', e);\n  }\n  return null;\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Do a deep-copy of basic JavaScript Objects or Arrays.\n */\nexport function deepCopy<T>(value: T): T {\n  return deepExtend(undefined, value) as T;\n}\n\n/**\n * Copy properties from source to target (recursively allows extension\n * of Objects and Arrays).  Scalar values in the target are over-written.\n * If target is undefined, an object of the appropriate type will be created\n * (and returned).\n *\n * We recursively copy all child properties of plain Objects in the source- so\n * that namespace- like dictionaries are merged.\n *\n * Note that the target can be a function, in which case the properties in\n * the source Object are copied onto it as static properties of the Function.\n *\n * Note: we don't merge __proto__ to prevent prototype pollution\n */\nexport function deepExtend(target: unknown, source: unknown): unknown {\n  if (!(source instanceof Object)) {\n    return source;\n  }\n\n  switch (source.constructor) {\n    case Date:\n      // Treat Dates like scalars; if the target date object had any child\n      // properties - they will be lost!\n      const dateValue = source as Date;\n      return new Date(dateValue.getTime());\n\n    case Object:\n      if (target === undefined) {\n        target = {};\n      }\n      break;\n    case Array:\n      // Always copy the array source and overwrite the target.\n      target = [];\n      break;\n\n    default:\n      // Not a plain Object - treat it as a scalar.\n      return source;\n  }\n\n  for (const prop in source) {\n    // use isValidKey to guard against prototype pollution. See https://snyk.io/vuln/SNYK-JS-LODASH-450202\n    if (!source.hasOwnProperty(prop) || !isValidKey(prop)) {\n      continue;\n    }\n    (target as Record<string, unknown>)[prop] = deepExtend(\n      (target as Record<string, unknown>)[prop],\n      (source as Record<string, unknown>)[prop]\n    );\n  }\n\n  return target;\n}\n\nfunction isValidKey(key: string): boolean {\n  return key !== '__proto__';\n}\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Polyfill for `globalThis` object.\n * @returns the `globalThis` object for the given environment.\n * @public\n */\nexport function getGlobal(): typeof globalThis {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('Unable to locate global object.');\n}\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64Decode } from './crypt';\nimport { getGlobal } from './global';\nimport { getDefaultsFromPostinstall } from './postinstall';\n\n/**\n * Keys for experimental properties on the `FirebaseDefaults` object.\n * @public\n */\nexport type ExperimentalKey = 'authTokenSyncURL' | 'authIdTokenMaxAge';\n\n/**\n * An object that can be injected into the environment as __FIREBASE_DEFAULTS__,\n * either as a property of globalThis, a shell environment variable, or a\n * cookie.\n *\n * This object can be used to automatically configure and initialize\n * a Firebase app as well as any emulators.\n *\n * @public\n */\nexport interface FirebaseDefaults {\n  config?: Record<string, string>;\n  emulatorHosts?: Record<string, string>;\n  _authTokenSyncURL?: string;\n  _authIdTokenMaxAge?: number;\n  /**\n   * Override Firebase's runtime environment detection and\n   * force the SDK to act as if it were in the specified environment.\n   */\n  forceEnvironment?: 'browser' | 'node';\n  [key: string]: unknown;\n}\n\ndeclare global {\n  // Need `var` for this to work.\n  // eslint-disable-next-line no-var\n  var __FIREBASE_DEFAULTS__: FirebaseDefaults | undefined;\n}\n\nconst getDefaultsFromGlobal = (): FirebaseDefaults | undefined =>\n  getGlobal().__FIREBASE_DEFAULTS__;\n\n/**\n * Attempt to read defaults from a JSON string provided to\n * process(.)env(.)__FIREBASE_DEFAULTS__ or a JSON file whose path is in\n * process(.)env(.)__FIREBASE_DEFAULTS_PATH__\n * The dots are in parens because certain compilers (Vite?) cannot\n * handle seeing that variable in comments.\n * See https://github.com/firebase/firebase-js-sdk/issues/6838\n */\nconst getDefaultsFromEnvVariable = (): FirebaseDefaults | undefined => {\n  if (typeof process === 'undefined' || typeof process.env === 'undefined') {\n    return;\n  }\n  const defaultsJsonString = process.env.__FIREBASE_DEFAULTS__;\n  if (defaultsJsonString) {\n    return JSON.parse(defaultsJsonString);\n  }\n};\n\nconst getDefaultsFromCookie = (): FirebaseDefaults | undefined => {\n  if (typeof document === 'undefined') {\n    return;\n  }\n  let match;\n  try {\n    match = document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/);\n  } catch (e) {\n    // Some environments such as Angular Universal SSR have a\n    // `document` object but error on accessing `document.cookie`.\n    return;\n  }\n  const decoded = match && base64Decode(match[1]);\n  return decoded && JSON.parse(decoded);\n};\n\n/**\n * Get the __FIREBASE_DEFAULTS__ object. It checks in order:\n * (1) if such an object exists as a property of `globalThis`\n * (2) if such an object was provided on a shell environment variable\n * (3) if such an object exists in a cookie\n * @public\n */\nexport const getDefaults = (): FirebaseDefaults | undefined => {\n  try {\n    return (\n      getDefaultsFromPostinstall() ||\n      getDefaultsFromGlobal() ||\n      getDefaultsFromEnvVariable() ||\n      getDefaultsFromCookie()\n    );\n  } catch (e) {\n    /**\n     * Catch-all for being unable to get __FIREBASE_DEFAULTS__ due\n     * to any environment case we have not accounted for. Log to\n     * info instead of swallowing so we can find these unknown cases\n     * and add paths for them if needed.\n     */\n    console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);\n    return;\n  }\n};\n\n/**\n * Returns emulator host stored in the __FIREBASE_DEFAULTS__ object\n * for the given product.\n * @returns a URL host formatted like `127.0.0.1:9999` or `[::1]:4000` if available\n * @public\n */\nexport const getDefaultEmulatorHost = (\n  productName: string\n): string | undefined => getDefaults()?.emulatorHosts?.[productName];\n\n/**\n * Returns emulator hostname and port stored in the __FIREBASE_DEFAULTS__ object\n * for the given product.\n * @returns a pair of hostname and port like `[\"::1\", 4000]` if available\n * @public\n */\nexport const getDefaultEmulatorHostnameAndPort = (\n  productName: string\n): [hostname: string, port: number] | undefined => {\n  const host = getDefaultEmulatorHost(productName);\n  if (!host) {\n    return undefined;\n  }\n  const separatorIndex = host.lastIndexOf(':'); // Finding the last since IPv6 addr also has colons.\n  if (separatorIndex <= 0 || separatorIndex + 1 === host.length) {\n    throw new Error(`Invalid host ${host} with no separate hostname and port!`);\n  }\n  // eslint-disable-next-line no-restricted-globals\n  const port = parseInt(host.substring(separatorIndex + 1), 10);\n  if (host[0] === '[') {\n    // Bracket-quoted `[ipv6addr]:port` => return \"ipv6addr\" (without brackets).\n    return [host.substring(1, separatorIndex - 1), port];\n  } else {\n    return [host.substring(0, separatorIndex), port];\n  }\n};\n\n/**\n * Returns Firebase app config stored in the __FIREBASE_DEFAULTS__ object.\n * @public\n */\nexport const getDefaultAppConfig = (): Record<string, string> | undefined =>\n  getDefaults()?.config;\n\n/**\n * Returns an experimental setting on the __FIREBASE_DEFAULTS__ object (properties\n * prefixed by \"_\")\n * @public\n */\nexport const getExperimentalSetting = <T extends ExperimentalKey>(\n  name: T\n): FirebaseDefaults[`_${T}`] =>\n  getDefaults()?.[`_${name}`] as FirebaseDefaults[`_${T}`];\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class Deferred<R> {\n  promise: Promise<R>;\n  reject: (value?: unknown) => void = () => {};\n  resolve: (value?: unknown) => void = () => {};\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve as (value?: unknown) => void;\n      this.reject = reject as (value?: unknown) => void;\n    });\n  }\n\n  /**\n   * Our API internals are not promisified and cannot because our callback APIs have subtle expectations around\n   * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\n   * and returns a node-style callback which will resolve or reject the Deferred's promise.\n   */\n  wrapCallback(\n    callback?: (error?: unknown, value?: unknown) => void\n  ): (error: unknown, value?: unknown) => void {\n    return (error, value?) => {\n      if (error) {\n        this.reject(error);\n      } else {\n        this.resolve(value);\n      }\n      if (typeof callback === 'function') {\n        // Attaching noop handler just in case developer wasn't expecting\n        // promises\n        this.promise.catch(() => {});\n\n        // Some of our callbacks don't expect a value and our own tests\n        // assert that the parameter length is 1\n        if (callback.length === 1) {\n          callback(error);\n        } else {\n          callback(error, value);\n        }\n      }\n    };\n  }\n}\n","/**\n * @license\n * Copyright 2025 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Checks whether host is a cloud workstation or not.\n * @public\n */\nexport function isCloudWorkstation(url: string): boolean {\n  // `isCloudWorkstation` is called without protocol in certain connect*Emulator functions\n  // In HTTP request builders, it's called with the protocol.\n  // If called with protocol prefix, it's a valid URL, so we extract the hostname\n  // If called without, we assume the string is the hostname.\n  try {\n    const host =\n      url.startsWith('http://') || url.startsWith('https://')\n        ? new URL(url).hostname\n        : url;\n    return host.endsWith('.cloudworkstations.dev');\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Makes a fetch request to the given server.\n * Mostly used for forwarding cookies in Firebase Studio.\n * @public\n */\nexport async function pingServer(endpoint: string): Promise<boolean> {\n  const result = await fetch(endpoint, {\n    credentials: 'include'\n  });\n  return result.ok;\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64urlEncodeWithoutPadding } from './crypt';\nimport { isCloudWorkstation } from './url';\n\n// Firebase Auth tokens contain snake_case claims following the JWT standard / convention.\n/* eslint-disable camelcase */\n\nexport type FirebaseSignInProvider =\n  | 'custom'\n  | 'email'\n  | 'password'\n  | 'phone'\n  | 'anonymous'\n  | 'google.com'\n  | 'facebook.com'\n  | 'github.com'\n  | 'twitter.com'\n  | 'microsoft.com'\n  | 'apple.com';\n\ninterface FirebaseIdToken {\n  // Always set to https://securetoken.google.com/PROJECT_ID\n  iss: string;\n\n  // Always set to PROJECT_ID\n  aud: string;\n\n  // The user's unique ID\n  sub: string;\n\n  // The token issue time, in seconds since epoch\n  iat: number;\n\n  // The token expiry time, normally 'iat' + 3600\n  exp: number;\n\n  // The user's unique ID. Must be equal to 'sub'\n  user_id: string;\n\n  // The time the user authenticated, normally 'iat'\n  auth_time: number;\n\n  // The sign in provider, only set when the provider is 'anonymous'\n  provider_id?: 'anonymous';\n\n  // The user's primary email\n  email?: string;\n\n  // The user's email verification status\n  email_verified?: boolean;\n\n  // The user's primary phone number\n  phone_number?: string;\n\n  // The user's display name\n  name?: string;\n\n  // The user's profile photo URL\n  picture?: string;\n\n  // Information on all identities linked to this user\n  firebase: {\n    // The primary sign-in provider\n    sign_in_provider: FirebaseSignInProvider;\n\n    // A map of providers to the user's list of unique identifiers from\n    // each provider\n    identities?: { [provider in FirebaseSignInProvider]?: string[] };\n  };\n\n  // Custom claims set by the developer\n  [claim: string]: unknown;\n\n  uid?: never; // Try to catch a common mistake of \"uid\" (should be \"sub\" instead).\n}\n\nexport type EmulatorMockTokenOptions = ({ user_id: string } | { sub: string }) &\n  Partial<FirebaseIdToken>;\n\nexport function createMockUserToken(\n  token: EmulatorMockTokenOptions,\n  projectId?: string\n): string {\n  if (token.uid) {\n    throw new Error(\n      'The \"uid\" field is no longer supported by mockUserToken. Please use \"sub\" instead for Firebase Auth User ID.'\n    );\n  }\n  // Unsecured JWTs use \"none\" as the algorithm.\n  const header = {\n    alg: 'none',\n    type: 'JWT'\n  };\n\n  const project = projectId || 'demo-project';\n  const iat = token.iat || 0;\n  const sub = token.sub || token.user_id;\n  if (!sub) {\n    throw new Error(\"mockUserToken must contain 'sub' or 'user_id' field!\");\n  }\n\n  const payload: FirebaseIdToken = {\n    // Set all required fields to decent defaults\n    iss: `https://securetoken.google.com/${project}`,\n    aud: project,\n    iat,\n    exp: iat + 3600,\n    auth_time: iat,\n    sub,\n    user_id: sub,\n    firebase: {\n      sign_in_provider: 'custom',\n      identities: {}\n    },\n\n    // Override with user options\n    ...token\n  };\n\n  // Unsecured JWTs use the empty string as a signature.\n  const signature = '';\n  return [\n    base64urlEncodeWithoutPadding(JSON.stringify(header)),\n    base64urlEncodeWithoutPadding(JSON.stringify(payload)),\n    signature\n  ].join('.');\n}\n\ninterface EmulatorStatusMap {\n  [name: string]: boolean;\n}\nconst emulatorStatus: EmulatorStatusMap = {};\n\ninterface EmulatorSummary {\n  prod: string[];\n  emulator: string[];\n}\n\n// Checks whether any products are running on an emulator\nfunction getEmulatorSummary(): EmulatorSummary {\n  const summary: EmulatorSummary = {\n    prod: [],\n    emulator: []\n  };\n  for (const key of Object.keys(emulatorStatus)) {\n    if (emulatorStatus[key]) {\n      summary.emulator.push(key);\n    } else {\n      summary.prod.push(key);\n    }\n  }\n  return summary;\n}\n\nfunction getOrCreateEl(id: string): { created: boolean; element: HTMLElement } {\n  let parentDiv = document.getElementById(id);\n  let created = false;\n  if (!parentDiv) {\n    parentDiv = document.createElement('div');\n    parentDiv.setAttribute('id', id);\n    created = true;\n  }\n  return { created, element: parentDiv };\n}\n\nlet previouslyDismissed = false;\n/**\n * Updates Emulator Banner. Primarily used for Firebase Studio\n * @param name\n * @param isRunningEmulator\n * @public\n */\nexport function updateEmulatorBanner(\n  name: string,\n  isRunningEmulator: boolean\n): void {\n  if (\n    typeof window === 'undefined' ||\n    typeof document === 'undefined' ||\n    !isCloudWorkstation(window.location.host) ||\n    emulatorStatus[name] === isRunningEmulator ||\n    emulatorStatus[name] || // If already set to use emulator, can't go back to prod.\n    previouslyDismissed\n  ) {\n    return;\n  }\n\n  emulatorStatus[name] = isRunningEmulator;\n\n  function prefixedId(id: string): string {\n    return `__firebase__banner__${id}`;\n  }\n  const bannerId = '__firebase__banner';\n  const summary = getEmulatorSummary();\n  const showError = summary.prod.length > 0;\n\n  function tearDown(): void {\n    const element = document.getElementById(bannerId);\n    if (element) {\n      element.remove();\n    }\n  }\n\n  function setupBannerStyles(bannerEl: HTMLElement): void {\n    bannerEl.style.display = 'flex';\n    bannerEl.style.background = '#7faaf0';\n    bannerEl.style.position = 'fixed';\n    bannerEl.style.bottom = '5px';\n    bannerEl.style.left = '5px';\n    bannerEl.style.padding = '.5em';\n    bannerEl.style.borderRadius = '5px';\n    bannerEl.style.alignItems = 'center';\n  }\n\n  function setupIconStyles(prependIcon: SVGElement, iconId: string): void {\n    prependIcon.setAttribute('width', '24');\n    prependIcon.setAttribute('id', iconId);\n    prependIcon.setAttribute('height', '24');\n    prependIcon.setAttribute('viewBox', '0 0 24 24');\n    prependIcon.setAttribute('fill', 'none');\n    prependIcon.style.marginLeft = '-6px';\n  }\n\n  function setupCloseBtn(): HTMLSpanElement {\n    const closeBtn = document.createElement('span');\n    closeBtn.style.cursor = 'pointer';\n    closeBtn.style.marginLeft = '16px';\n    closeBtn.style.fontSize = '24px';\n    closeBtn.innerHTML = ' &times;';\n    closeBtn.onclick = () => {\n      previouslyDismissed = true;\n      tearDown();\n    };\n    return closeBtn;\n  }\n\n  function setupLinkStyles(\n    learnMoreLink: HTMLAnchorElement,\n    learnMoreId: string\n  ): void {\n    learnMoreLink.setAttribute('id', learnMoreId);\n    learnMoreLink.innerText = 'Learn more';\n    learnMoreLink.href =\n      'https://firebase.google.com/docs/studio/preview-apps#preview-backend';\n    learnMoreLink.setAttribute('target', '__blank');\n    learnMoreLink.style.paddingLeft = '5px';\n    learnMoreLink.style.textDecoration = 'underline';\n  }\n\n  function setupDom(): void {\n    const banner = getOrCreateEl(bannerId);\n    const firebaseTextId = prefixedId('text');\n    const firebaseText: HTMLSpanElement =\n      document.getElementById(firebaseTextId) || document.createElement('span');\n    const learnMoreId = prefixedId('learnmore');\n    const learnMoreLink: HTMLAnchorElement =\n      (document.getElementById(learnMoreId) as HTMLAnchorElement) ||\n      document.createElement('a');\n    const prependIconId = prefixedId('preprendIcon');\n    const prependIcon: SVGElement =\n      (document.getElementById(\n        prependIconId\n      ) as HTMLOrSVGElement as SVGElement) ||\n      document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    if (banner.created) {\n      // update styles\n      const bannerEl = banner.element;\n      setupBannerStyles(bannerEl);\n      setupLinkStyles(learnMoreLink, learnMoreId);\n      const closeBtn = setupCloseBtn();\n      setupIconStyles(prependIcon, prependIconId);\n      bannerEl.append(prependIcon, firebaseText, learnMoreLink, closeBtn);\n      document.body.appendChild(bannerEl);\n    }\n\n    if (showError) {\n      firebaseText.innerText = `Preview backend disconnected.`;\n      prependIcon.innerHTML = `<g clip-path=\"url(#clip0_6013_33858)\">\n<path d=\"M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z\" fill=\"#212121\"/>\n</g>\n<defs>\n<clipPath id=\"clip0_6013_33858\">\n<rect width=\"24\" height=\"24\" fill=\"white\"/>\n</clipPath>\n</defs>`;\n    } else {\n      prependIcon.innerHTML = `<g clip-path=\"url(#clip0_6083_34804)\">\n<path d=\"M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z\" fill=\"#212121\"/>\n</g>\n<defs>\n<clipPath id=\"clip0_6083_34804\">\n<rect width=\"24\" height=\"24\" fill=\"white\"/>\n</clipPath>\n</defs>`;\n      firebaseText.innerText = 'Preview backend running in this workspace.';\n    }\n    firebaseText.setAttribute('id', firebaseTextId);\n  }\n  if (document.readyState === 'loading') {\n    window.addEventListener('DOMContentLoaded', setupDom);\n  } else {\n    setupDom();\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './constants';\nimport { getDefaults } from './defaults';\n\n/**\n * Type placeholder for `WorkerGlobalScope` from `webworker`\n */\ndeclare class WorkerGlobalScope {}\n\n/**\n * Returns navigator.userAgent string or '' if it's not defined.\n * @return user agent string\n */\nexport function getUA(): string {\n  if (\n    typeof navigator !== 'undefined' &&\n    typeof navigator['userAgent'] === 'string'\n  ) {\n    return navigator['userAgent'];\n  } else {\n    return '';\n  }\n}\n\n/**\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\n *\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\n * wait for a callback.\n */\nexport function isMobileCordova(): boolean {\n  return (\n    typeof window !== 'undefined' &&\n    // @ts-ignore Setting up an broadly applicable index signature for Window\n    // just to deal with this case would probably be a bad idea.\n    !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\n    /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())\n  );\n}\n\n/**\n * Detect Node.js.\n *\n * @return true if Node.js environment is detected or specified.\n */\n// Node detection logic from: https://github.com/iliakan/detect-node/\nexport function isNode(): boolean {\n  const forceEnvironment = getDefaults()?.forceEnvironment;\n  if (forceEnvironment === 'node') {\n    return true;\n  } else if (forceEnvironment === 'browser') {\n    return false;\n  }\n\n  try {\n    return (\n      Object.prototype.toString.call(global.process) === '[object process]'\n    );\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Detect Browser Environment.\n * Note: This will return true for certain test frameworks that are incompletely\n * mimicking a browser, and should not lead to assuming all browser APIs are\n * available.\n */\nexport function isBrowser(): boolean {\n  return typeof window !== 'undefined' || isWebWorker();\n}\n\n/**\n * Detect Web Worker context.\n */\nexport function isWebWorker(): boolean {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    typeof self !== 'undefined' &&\n    self instanceof WorkerGlobalScope\n  );\n}\n\n/**\n * Detect Cloudflare Worker context.\n */\nexport function isCloudflareWorker(): boolean {\n  return (\n    typeof navigator !== 'undefined' &&\n    navigator.userAgent === 'Cloudflare-Workers'\n  );\n}\n\n/**\n * Detect browser extensions (Chrome and Firefox at least).\n */\ninterface BrowserRuntime {\n  id?: unknown;\n}\ndeclare const chrome: { runtime?: BrowserRuntime };\ndeclare const browser: { runtime?: BrowserRuntime };\nexport function isBrowserExtension(): boolean {\n  const runtime =\n    typeof chrome === 'object'\n      ? chrome.runtime\n      : typeof browser === 'object'\n      ? browser.runtime\n      : undefined;\n  return typeof runtime === 'object' && runtime.id !== undefined;\n}\n\n/**\n * Detect React Native.\n *\n * @return true if ReactNative environment is detected.\n */\nexport function isReactNative(): boolean {\n  return (\n    typeof navigator === 'object' && navigator['product'] === 'ReactNative'\n  );\n}\n\n/** Detects Electron apps. */\nexport function isElectron(): boolean {\n  return getUA().indexOf('Electron/') >= 0;\n}\n\n/** Detects Internet Explorer. */\nexport function isIE(): boolean {\n  const ua = getUA();\n  return ua.indexOf('MSIE ') >= 0 || ua.indexOf('Trident/') >= 0;\n}\n\n/** Detects Universal Windows Platform apps. */\nexport function isUWP(): boolean {\n  return getUA().indexOf('MSAppHost/') >= 0;\n}\n\n/**\n * Detect whether the current SDK build is the Node version.\n *\n * @return true if it's the Node SDK build.\n */\nexport function isNodeSdk(): boolean {\n  return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\n}\n\n/** Returns true if we are running in Safari. */\nexport function isSafari(): boolean {\n  return (\n    !isNode() &&\n    !!navigator.userAgent &&\n    navigator.userAgent.includes('Safari') &&\n    !navigator.userAgent.includes('Chrome')\n  );\n}\n\n/** Returns true if we are running in Safari or WebKit */\nexport function isSafariOrWebkit(): boolean {\n  return (\n    !isNode() &&\n    !!navigator.userAgent &&\n    (navigator.userAgent.includes('Safari') ||\n      navigator.userAgent.includes('WebKit')) &&\n    !navigator.userAgent.includes('Chrome')\n  );\n}\n\n/**\n * This method checks if indexedDB is supported by current browser/service worker context\n * @return true if indexedDB is supported by current browser/service worker context\n */\nexport function isIndexedDBAvailable(): boolean {\n  try {\n    return typeof indexedDB === 'object';\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * This method validates browser/sw context for indexedDB by opening a dummy indexedDB database and reject\n * if errors occur during the database open operation.\n *\n * @throws exception if current browser/sw context can't run idb.open (ex: Safari iframe, Firefox\n * private browsing)\n */\nexport function validateIndexedDBOpenable(): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    try {\n      let preExist: boolean = true;\n      const DB_CHECK_NAME =\n        'validate-browser-context-for-indexeddb-analytics-module';\n      const request = self.indexedDB.open(DB_CHECK_NAME);\n      request.onsuccess = () => {\n        request.result.close();\n        // delete database only when it doesn't pre-exist\n        if (!preExist) {\n          self.indexedDB.deleteDatabase(DB_CHECK_NAME);\n        }\n        resolve(true);\n      };\n      request.onupgradeneeded = () => {\n        preExist = false;\n      };\n\n      request.onerror = () => {\n        reject(request.error?.message || '');\n      };\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n\n/**\n *\n * This method checks whether cookie is enabled within current browser\n * @return true if cookie is enabled within current browser\n */\nexport function areCookiesEnabled(): boolean {\n  if (typeof navigator === 'undefined' || !navigator.cookieEnabled) {\n    return false;\n  }\n  return true;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @fileoverview Standardized Firebase Error.\n *\n * Usage:\n *\n *   // TypeScript string literals for type-safe codes\n *   type Err =\n *     'unknown' |\n *     'object-not-found'\n *     ;\n *\n *   // Closure enum for type-safe error codes\n *   // at-enum {string}\n *   var Err = {\n *     UNKNOWN: 'unknown',\n *     OBJECT_NOT_FOUND: 'object-not-found',\n *   }\n *\n *   let errors: Map<Err, string> = {\n *     'generic-error': \"Unknown error\",\n *     'file-not-found': \"Could not find file: {$file}\",\n *   };\n *\n *   // Type-safe function - must pass a valid error code as param.\n *   let error = new ErrorFactory<Err>('service', 'Service', errors);\n *\n *   ...\n *   throw error.create(Err.GENERIC);\n *   ...\n *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});\n *   ...\n *   // Service: Could not file file: foo.txt (service/file-not-found).\n *\n *   catch (e) {\n *     assert(e.message === \"Could not find file: foo.txt.\");\n *     if ((e as FirebaseError)?.code === 'service/file-not-found') {\n *       console.log(\"Could not read file: \" + e['file']);\n *     }\n *   }\n */\n\nexport type ErrorMap<ErrorCode extends string> = {\n  readonly [K in ErrorCode]: string;\n};\n\nconst ERROR_NAME = 'FirebaseError';\n\nexport interface StringLike {\n  toString(): string;\n}\n\nexport interface ErrorData {\n  [key: string]: unknown;\n}\n\n// Based on code from:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\nexport class FirebaseError extends Error {\n  /** The custom name for all FirebaseErrors. */\n  readonly name: string = ERROR_NAME;\n\n  constructor(\n    /** The error code for this error. */\n    readonly code: string,\n    message: string,\n    /** Custom data for this error. */\n    public customData?: Record<string, unknown>\n  ) {\n    super(message);\n\n    // Fix For ES5\n    // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n    // TODO(dlarocque): Replace this with `new.target`: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-2.html#support-for-newtarget\n    //                   which we can now use since we no longer target ES5.\n    Object.setPrototypeOf(this, FirebaseError.prototype);\n\n    // Maintains proper stack trace for where our error was thrown.\n    // Only available on V8.\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ErrorFactory.prototype.create);\n    }\n  }\n}\n\nexport class ErrorFactory<\n  ErrorCode extends string,\n  ErrorParams extends { readonly [K in ErrorCode]?: ErrorData } = {}\n> {\n  constructor(\n    private readonly service: string,\n    private readonly serviceName: string,\n    private readonly errors: ErrorMap<ErrorCode>\n  ) {}\n\n  create<K extends ErrorCode>(\n    code: K,\n    ...data: K extends keyof ErrorParams ? [ErrorParams[K]] : []\n  ): FirebaseError {\n    const customData = (data[0] as ErrorData) || {};\n    const fullCode = `${this.service}/${code}`;\n    const template = this.errors[code];\n\n    const message = template ? replaceTemplate(template, customData) : 'Error';\n    // Service Name: Error message (service/code).\n    const fullMessage = `${this.serviceName}: ${message} (${fullCode}).`;\n\n    const error = new FirebaseError(fullCode, fullMessage, customData);\n\n    return error;\n  }\n}\n\nfunction replaceTemplate(template: string, data: ErrorData): string {\n  return template.replace(PATTERN, (_, key) => {\n    const value = data[key];\n    return value != null ? String(value) : `<${key}?>`;\n  });\n}\n\nconst PATTERN = /\\{\\$([^}]+)}/g;\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Evaluates a JSON string into a javascript object.\n *\n * @param {string} str A string containing JSON.\n * @return {*} The javascript object representing the specified JSON.\n */\nexport function jsonEval(str: string): unknown {\n  return JSON.parse(str);\n}\n\n/**\n * Returns JSON representing a javascript object.\n * @param {*} data JavaScript object to be stringified.\n * @return {string} The JSON contents of the object.\n */\nexport function stringify(data: unknown): string {\n  return JSON.stringify(data);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { base64Decode } from './crypt';\nimport { jsonEval } from './json';\n\ninterface Claims {\n  [key: string]: {};\n}\n\ninterface DecodedToken {\n  header: object;\n  claims: Claims;\n  data: object;\n  signature: string;\n}\n\n/**\n * Decodes a Firebase auth. token into constituent parts.\n *\n * Notes:\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const decode = function (token: string): DecodedToken {\n  let header = {},\n    claims: Claims = {},\n    data = {},\n    signature = '';\n\n  try {\n    const parts = token.split('.');\n    header = jsonEval(base64Decode(parts[0]) || '') as object;\n    claims = jsonEval(base64Decode(parts[1]) || '') as Claims;\n    signature = parts[2];\n    data = claims['d'] || {};\n    delete claims['d'];\n  } catch (e) {}\n\n  return {\n    header,\n    claims,\n    data,\n    signature\n  };\n};\n\ninterface DecodedToken {\n  header: object;\n  claims: Claims;\n  data: object;\n  signature: string;\n}\n\n/**\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isValidTimestamp = function (token: string): boolean {\n  const claims: Claims = decode(token).claims;\n  const now: number = Math.floor(new Date().getTime() / 1000);\n  let validSince: number = 0,\n    validUntil: number = 0;\n\n  if (typeof claims === 'object') {\n    if (claims.hasOwnProperty('nbf')) {\n      validSince = claims['nbf'] as number;\n    } else if (claims.hasOwnProperty('iat')) {\n      validSince = claims['iat'] as number;\n    }\n\n    if (claims.hasOwnProperty('exp')) {\n      validUntil = claims['exp'] as number;\n    } else {\n      // token will expire after 24h by default\n      validUntil = validSince + 86400;\n    }\n  }\n\n  return (\n    !!now &&\n    !!validSince &&\n    !!validUntil &&\n    now >= validSince &&\n    now <= validUntil\n  );\n};\n\n/**\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\n *\n * Notes:\n * - May return null if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const issuedAtTime = function (token: string): number | null {\n  const claims: Claims = decode(token).claims;\n  if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {\n    return claims['iat'] as number;\n  }\n  return null;\n};\n\n/**\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isValidFormat = function (token: string): boolean {\n  const decoded = decode(token),\n    claims = decoded.claims;\n\n  return !!claims && typeof claims === 'object' && claims.hasOwnProperty('iat');\n};\n\n/**\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\n *\n * Notes:\n * - May return a false negative if there's no native base64 decoding support.\n * - Doesn't check if the token is actually valid.\n */\nexport const isAdmin = function (token: string): boolean {\n  const claims: Claims = decode(token).claims;\n  return typeof claims === 'object' && claims['admin'] === true;\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function contains<T extends object>(obj: T, key: string): boolean {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexport function safeGet<T extends object, K extends keyof T>(\n  obj: T,\n  key: K\n): T[K] | undefined {\n  if (Object.prototype.hasOwnProperty.call(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\nexport function isEmpty(obj: object): obj is {} {\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function map<K extends string, V, U>(\n  obj: { [key in K]: V },\n  fn: (value: V, key: K, obj: { [key in K]: V }) => U,\n  contextObj?: unknown\n): { [key in K]: U } {\n  const res: Partial<{ [key in K]: U }> = {};\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      res[key] = fn.call(contextObj, obj[key], key, obj);\n    }\n  }\n  return res as { [key in K]: U };\n}\n\n/**\n * Deep equal two objects. Support Arrays and Objects.\n */\nexport function deepEqual(a: object, b: object): boolean {\n  if (a === b) {\n    return true;\n  }\n\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  for (const k of aKeys) {\n    if (!bKeys.includes(k)) {\n      return false;\n    }\n\n    const aProp = (a as Record<string, unknown>)[k];\n    const bProp = (b as Record<string, unknown>)[k];\n    if (isObject(aProp) && isObject(bProp)) {\n      if (!deepEqual(aProp, bProp)) {\n        return false;\n      }\n    } else if (aProp !== bProp) {\n      return false;\n    }\n  }\n\n  for (const k of bKeys) {\n    if (!aKeys.includes(k)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction isObject(thing: unknown): thing is object {\n  return thing !== null && typeof thing === 'object';\n}\n","/**\n * @license\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Deferred } from './deferred';\n\n/**\n * Rejects if the given promise doesn't resolve in timeInMS milliseconds.\n * @internal\n */\nexport function promiseWithTimeout<T>(\n  promise: Promise<T>,\n  timeInMS = 2000\n): Promise<T> {\n  const deferredPromise = new Deferred<T>();\n  setTimeout(() => deferredPromise.reject('timeout!'), timeInMS);\n  promise.then(deferredPromise.resolve, deferredPromise.reject);\n  return deferredPromise.promise;\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a\n * params object (e.g. {arg: 'val', arg2: 'val2'})\n * Note: You must prepend it with ? when adding it to a URL.\n */\nexport function querystring(querystringParams: {\n  [key: string]: string | number;\n}): string {\n  const params = [];\n  for (const [key, value] of Object.entries(querystringParams)) {\n    if (Array.isArray(value)) {\n      value.forEach(arrayVal => {\n        params.push(\n          encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal)\n        );\n      });\n    } else {\n      params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n    }\n  }\n  return params.length ? '&' + params.join('&') : '';\n}\n\n/**\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object\n * (e.g. {arg: 'val', arg2: 'val2'})\n */\nexport function querystringDecode(querystring: string): Record<string, string> {\n  const obj: Record<string, string> = {};\n  const tokens = querystring.replace(/^\\?/, '').split('&');\n\n  tokens.forEach(token => {\n    if (token) {\n      const [key, value] = token.split('=');\n      obj[decodeURIComponent(key)] = decodeURIComponent(value);\n    }\n  });\n  return obj;\n}\n\n/**\n * Extract the query string part of a URL, including the leading question mark (if present).\n */\nexport function extractQuerystring(url: string): string {\n  const queryStart = url.indexOf('?');\n  if (!queryStart) {\n    return '';\n  }\n  const fragmentStart = url.indexOf('#', queryStart);\n  return url.substring(\n    queryStart,\n    fragmentStart > 0 ? fragmentStart : undefined\n  );\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview SHA-1 cryptographic hash.\n * Variable names follow the notation in FIPS PUB 180-3:\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\n *\n * Usage:\n *   var sha1 = new sha1();\n *   sha1.update(bytes);\n *   var hash = sha1.digest();\n *\n * Performance:\n *   Chrome 23:   ~400 Mbit/s\n *   Firefox 16:  ~250 Mbit/s\n *\n */\n\n/**\n * SHA-1 cryptographic hash constructor.\n *\n * The properties declared here are discussed in the above algorithm document.\n * @constructor\n * @final\n * @struct\n */\nexport class Sha1 {\n  /**\n   * Holds the previous values of accumulated variables a-e in the compress_\n   * function.\n   * @private\n   */\n  private chain_: number[] = [];\n\n  /**\n   * A buffer holding the partially computed hash result.\n   * @private\n   */\n  private buf_: number[] = [];\n\n  /**\n   * An array of 80 bytes, each a part of the message to be hashed.  Referred to\n   * as the message schedule in the docs.\n   * @private\n   */\n  private W_: number[] = [];\n\n  /**\n   * Contains data needed to pad messages less than 64 bytes.\n   * @private\n   */\n  private pad_: number[] = [];\n\n  /**\n   * @private {number}\n   */\n  private inbuf_: number = 0;\n\n  /**\n   * @private {number}\n   */\n  private total_: number = 0;\n\n  blockSize: number;\n\n  constructor() {\n    this.blockSize = 512 / 8;\n\n    this.pad_[0] = 128;\n    for (let i = 1; i < this.blockSize; ++i) {\n      this.pad_[i] = 0;\n    }\n\n    this.reset();\n  }\n\n  reset(): void {\n    this.chain_[0] = 0x67452301;\n    this.chain_[1] = 0xefcdab89;\n    this.chain_[2] = 0x98badcfe;\n    this.chain_[3] = 0x10325476;\n    this.chain_[4] = 0xc3d2e1f0;\n\n    this.inbuf_ = 0;\n    this.total_ = 0;\n  }\n\n  /**\n   * Internal compress helper function.\n   * @param buf Block to compress.\n   * @param offset Offset of the block in the buffer.\n   * @private\n   */\n  compress_(buf: number[] | Uint8Array | string, offset?: number): void {\n    if (!offset) {\n      offset = 0;\n    }\n\n    const W = this.W_;\n\n    // get 16 big endian words\n    if (typeof buf === 'string') {\n      for (let i = 0; i < 16; i++) {\n        // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\n        // have a bug that turns the post-increment ++ operator into pre-increment\n        // during JIT compilation.  We have code that depends heavily on SHA-1 for\n        // correctness and which is affected by this bug, so I've removed all uses\n        // of post-increment ++ in which the result value is used.  We can revert\n        // this change once the Safari bug\n        // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\n        // most clients have been updated.\n        W[i] =\n          (buf.charCodeAt(offset) << 24) |\n          (buf.charCodeAt(offset + 1) << 16) |\n          (buf.charCodeAt(offset + 2) << 8) |\n          buf.charCodeAt(offset + 3);\n        offset += 4;\n      }\n    } else {\n      for (let i = 0; i < 16; i++) {\n        W[i] =\n          (buf[offset] << 24) |\n          (buf[offset + 1] << 16) |\n          (buf[offset + 2] << 8) |\n          buf[offset + 3];\n        offset += 4;\n      }\n    }\n\n    // expand to 80 words\n    for (let i = 16; i < 80; i++) {\n      const t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\n      W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;\n    }\n\n    let a = this.chain_[0];\n    let b = this.chain_[1];\n    let c = this.chain_[2];\n    let d = this.chain_[3];\n    let e = this.chain_[4];\n    let f, k;\n\n    // TODO(user): Try to unroll this loop to speed up the computation.\n    for (let i = 0; i < 80; i++) {\n      if (i < 40) {\n        if (i < 20) {\n          f = d ^ (b & (c ^ d));\n          k = 0x5a827999;\n        } else {\n          f = b ^ c ^ d;\n          k = 0x6ed9eba1;\n        }\n      } else {\n        if (i < 60) {\n          f = (b & c) | (d & (b | c));\n          k = 0x8f1bbcdc;\n        } else {\n          f = b ^ c ^ d;\n          k = 0xca62c1d6;\n        }\n      }\n\n      const t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;\n      e = d;\n      d = c;\n      c = ((b << 30) | (b >>> 2)) & 0xffffffff;\n      b = a;\n      a = t;\n    }\n\n    this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;\n    this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;\n    this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;\n    this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;\n    this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;\n  }\n\n  update(bytes?: number[] | Uint8Array | string, length?: number): void {\n    // TODO(johnlenz): tighten the function signature and remove this check\n    if (bytes == null) {\n      return;\n    }\n\n    if (length === undefined) {\n      length = bytes.length;\n    }\n\n    const lengthMinusBlock = length - this.blockSize;\n    let n = 0;\n    // Using local instead of member variables gives ~5% speedup on Firefox 16.\n    const buf = this.buf_;\n    let inbuf = this.inbuf_;\n\n    // The outer while loop should execute at most twice.\n    while (n < length) {\n      // When we have no data in the block to top up, we can directly process the\n      // input buffer (assuming it contains sufficient data). This gives ~25%\n      // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\n      // the data is provided in large chunks (or in multiples of 64 bytes).\n      if (inbuf === 0) {\n        while (n <= lengthMinusBlock) {\n          this.compress_(bytes, n);\n          n += this.blockSize;\n        }\n      }\n\n      if (typeof bytes === 'string') {\n        while (n < length) {\n          buf[inbuf] = bytes.charCodeAt(n);\n          ++inbuf;\n          ++n;\n          if (inbuf === this.blockSize) {\n            this.compress_(buf);\n            inbuf = 0;\n            // Jump to the outer loop so we use the full-block optimization.\n            break;\n          }\n        }\n      } else {\n        while (n < length) {\n          buf[inbuf] = bytes[n];\n          ++inbuf;\n          ++n;\n          if (inbuf === this.blockSize) {\n            this.compress_(buf);\n            inbuf = 0;\n            // Jump to the outer loop so we use the full-block optimization.\n            break;\n          }\n        }\n      }\n    }\n\n    this.inbuf_ = inbuf;\n    this.total_ += length;\n  }\n\n  /** @override */\n  digest(): number[] {\n    const digest: number[] = [];\n    let totalBits = this.total_ * 8;\n\n    // Add pad 0x80 0x00*.\n    if (this.inbuf_ < 56) {\n      this.update(this.pad_, 56 - this.inbuf_);\n    } else {\n      this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\n    }\n\n    // Add # bits.\n    for (let i = this.blockSize - 1; i >= 56; i--) {\n      this.buf_[i] = totalBits & 255;\n      totalBits /= 256; // Don't use bit-shifting here!\n    }\n\n    this.compress_(this.buf_);\n\n    let n = 0;\n    for (let i = 0; i < 5; i++) {\n      for (let j = 24; j >= 0; j -= 8) {\n        digest[n] = (this.chain_[i] >> j) & 255;\n        ++n;\n      }\n    }\n    return digest;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport type NextFn<T> = (value: T) => void;\nexport type ErrorFn = (error: Error) => void;\nexport type CompleteFn = () => void;\n\nexport interface Observer<T> {\n  // Called once for each value in a stream of values.\n  next: NextFn<T>;\n\n  // A stream terminates by a single call to EITHER error() or complete().\n  error: ErrorFn;\n\n  // No events will be sent to next() once complete() is called.\n  complete: CompleteFn;\n}\n\nexport type PartialObserver<T> = Partial<Observer<T>>;\n\n// TODO: Support also Unsubscribe.unsubscribe?\nexport type Unsubscribe = () => void;\n\n/**\n * The Subscribe interface has two forms - passing the inline function\n * callbacks, or a object interface with callback properties.\n */\nexport interface Subscribe<T> {\n  (next?: NextFn<T>, error?: ErrorFn, complete?: CompleteFn): Unsubscribe;\n  (observer: PartialObserver<T>): Unsubscribe;\n}\n\nexport interface Observable<T> {\n  // Subscribe method\n  subscribe: Subscribe<T>;\n}\n\nexport type Executor<T> = (observer: Observer<T>) => void;\n\n/**\n * Helper to make a Subscribe function (just like Promise helps make a\n * Thenable).\n *\n * @param executor Function which can make calls to a single Observer\n *     as a proxy.\n * @param onNoObservers Callback when count of Observers goes to zero.\n */\nexport function createSubscribe<T>(\n  executor: Executor<T>,\n  onNoObservers?: Executor<T>\n): Subscribe<T> {\n  const proxy = new ObserverProxy<T>(executor, onNoObservers);\n  return proxy.subscribe.bind(proxy);\n}\n\n/**\n * Implement fan-out for any number of Observers attached via a subscribe\n * function.\n */\nclass ObserverProxy<T> implements Observer<T> {\n  private observers: Array<Observer<T>> | undefined = [];\n  private unsubscribes: Unsubscribe[] = [];\n  private onNoObservers: Executor<T> | undefined;\n  private observerCount = 0;\n  // Micro-task scheduling by calling task.then().\n  private task = Promise.resolve();\n  private finalized = false;\n  private finalError?: Error;\n\n  /**\n   * @param executor Function which can make calls to a single Observer\n   *     as a proxy.\n   * @param onNoObservers Callback when count of Observers goes to zero.\n   */\n  constructor(executor: Executor<T>, onNoObservers?: Executor<T>) {\n    this.onNoObservers = onNoObservers;\n    // Call the executor asynchronously so subscribers that are called\n    // synchronously after the creation of the subscribe function\n    // can still receive the very first value generated in the executor.\n    this.task\n      .then(() => {\n        executor(this);\n      })\n      .catch(e => {\n        this.error(e);\n      });\n  }\n\n  next(value: T): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.next(value);\n    });\n  }\n\n  error(error: Error): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.error(error);\n    });\n    this.close(error);\n  }\n\n  complete(): void {\n    this.forEachObserver((observer: Observer<T>) => {\n      observer.complete();\n    });\n    this.close();\n  }\n\n  /**\n   * Subscribe function that can be used to add an Observer to the fan-out list.\n   *\n   * - We require that no event is sent to a subscriber synchronously to their\n   *   call to subscribe().\n   */\n  subscribe(\n    nextOrObserver?: NextFn<T> | PartialObserver<T>,\n    error?: ErrorFn,\n    complete?: CompleteFn\n  ): Unsubscribe {\n    let observer: Observer<T>;\n\n    if (\n      nextOrObserver === undefined &&\n      error === undefined &&\n      complete === undefined\n    ) {\n      throw new Error('Missing Observer.');\n    }\n\n    // Assemble an Observer object when passed as callback functions.\n    if (\n      implementsAnyMethods(nextOrObserver as { [key: string]: unknown }, [\n        'next',\n        'error',\n        'complete'\n      ])\n    ) {\n      observer = nextOrObserver as Observer<T>;\n    } else {\n      observer = {\n        next: nextOrObserver as NextFn<T>,\n        error,\n        complete\n      } as Observer<T>;\n    }\n\n    if (observer.next === undefined) {\n      observer.next = noop as NextFn<T>;\n    }\n    if (observer.error === undefined) {\n      observer.error = noop as ErrorFn;\n    }\n    if (observer.complete === undefined) {\n      observer.complete = noop as CompleteFn;\n    }\n\n    const unsub = this.unsubscribeOne.bind(this, this.observers!.length);\n\n    // Attempt to subscribe to a terminated Observable - we\n    // just respond to the Observer with the final error or complete\n    // event.\n    if (this.finalized) {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      this.task.then(() => {\n        try {\n          if (this.finalError) {\n            observer.error(this.finalError);\n          } else {\n            observer.complete();\n          }\n        } catch (e) {\n          // nothing\n        }\n        return;\n      });\n    }\n\n    this.observers!.push(observer as Observer<T>);\n\n    return unsub;\n  }\n\n  // Unsubscribe is synchronous - we guarantee that no events are sent to\n  // any unsubscribed Observer.\n  private unsubscribeOne(i: number): void {\n    if (this.observers === undefined || this.observers[i] === undefined) {\n      return;\n    }\n\n    delete this.observers[i];\n\n    this.observerCount -= 1;\n    if (this.observerCount === 0 && this.onNoObservers !== undefined) {\n      this.onNoObservers(this);\n    }\n  }\n\n  private forEachObserver(fn: (observer: Observer<T>) => void): void {\n    if (this.finalized) {\n      // Already closed by previous event....just eat the additional values.\n      return;\n    }\n\n    // Since sendOne calls asynchronously - there is no chance that\n    // this.observers will become undefined.\n    for (let i = 0; i < this.observers!.length; i++) {\n      this.sendOne(i, fn);\n    }\n  }\n\n  // Call the Observer via one of it's callback function. We are careful to\n  // confirm that the observe has not been unsubscribed since this asynchronous\n  // function had been queued.\n  private sendOne(i: number, fn: (observer: Observer<T>) => void): void {\n    // Execute the callback asynchronously\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.task.then(() => {\n      if (this.observers !== undefined && this.observers[i] !== undefined) {\n        try {\n          fn(this.observers[i]);\n        } catch (e) {\n          // Ignore exceptions raised in Observers or missing methods of an\n          // Observer.\n          // Log error to console. b/31404806\n          if (typeof console !== 'undefined' && console.error) {\n            console.error(e);\n          }\n        }\n      }\n    });\n  }\n\n  private close(err?: Error): void {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    if (err !== undefined) {\n      this.finalError = err;\n    }\n    // Proxy is no longer needed - garbage collect references\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.task.then(() => {\n      this.observers = undefined;\n      this.onNoObservers = undefined;\n    });\n  }\n}\n\n/** Turn synchronous function into one called asynchronously. */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function async(fn: Function, onError?: ErrorFn): Function {\n  return (...args: unknown[]) => {\n    Promise.resolve(true)\n      .then(() => {\n        fn(...args);\n      })\n      .catch((error: Error) => {\n        if (onError) {\n          onError(error);\n        }\n      });\n  };\n}\n\n/**\n * Return true if the object passed in implements any of the named methods.\n */\nfunction implementsAnyMethods(\n  obj: { [key: string]: unknown },\n  methods: string[]\n): boolean {\n  if (typeof obj !== 'object' || obj === null) {\n    return false;\n  }\n\n  for (const method of methods) {\n    if (method in obj && typeof obj[method] === 'function') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction noop(): void {\n  // do nothing\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Check to make sure the appropriate number of arguments are provided for a public function.\n * Throws an error if it fails.\n *\n * @param fnName The function name\n * @param minCount The minimum number of arguments to allow for the function call\n * @param maxCount The maximum number of argument to allow for the function call\n * @param argCount The actual number of arguments provided.\n */\nexport const validateArgCount = function (\n  fnName: string,\n  minCount: number,\n  maxCount: number,\n  argCount: number\n): void {\n  let argError;\n  if (argCount < minCount) {\n    argError = 'at least ' + minCount;\n  } else if (argCount > maxCount) {\n    argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\n  }\n  if (argError) {\n    const error =\n      fnName +\n      ' failed: Was called with ' +\n      argCount +\n      (argCount === 1 ? ' argument.' : ' arguments.') +\n      ' Expects ' +\n      argError +\n      '.';\n    throw new Error(error);\n  }\n};\n\n/**\n * Generates a string to prefix an error message about failed argument validation\n *\n * @param fnName The function name\n * @param argName The name of the argument\n * @return The prefix to add to the error thrown for validation.\n */\nexport function errorPrefix(fnName: string, argName: string): string {\n  return `${fnName} failed: ${argName} argument `;\n}\n\n/**\n * @param fnName\n * @param argumentNumber\n * @param namespace\n * @param optional\n */\nexport function validateNamespace(\n  fnName: string,\n  namespace: string,\n  optional: boolean\n): void {\n  if (optional && !namespace) {\n    return;\n  }\n  if (typeof namespace !== 'string') {\n    //TODO: I should do more validation here. We only allow certain chars in namespaces.\n    throw new Error(\n      errorPrefix(fnName, 'namespace') + 'must be a valid firebase namespace.'\n    );\n  }\n}\n\nexport function validateCallback(\n  fnName: string,\n  argumentName: string,\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  callback: Function,\n  optional: boolean\n): void {\n  if (optional && !callback) {\n    return;\n  }\n  if (typeof callback !== 'function') {\n    throw new Error(\n      errorPrefix(fnName, argumentName) + 'must be a valid function.'\n    );\n  }\n}\n\nexport function validateContextObject(\n  fnName: string,\n  argumentName: string,\n  context: unknown,\n  optional: boolean\n): void {\n  if (optional && !context) {\n    return;\n  }\n  if (typeof context !== 'object' || context === null) {\n    throw new Error(\n      errorPrefix(fnName, argumentName) + 'must be a valid context object.'\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from './assert';\n\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\n// so it's been modified.\n\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\n// use 2 characters in JavaScript.  All 4-byte UTF-8 characters begin with a first\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\n// pair).\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\n\n/**\n * @param {string} str\n * @return {Array}\n */\nexport const stringToByteArray = function (str: string): number[] {\n  const out: number[] = [];\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n\n    // Is this the lead surrogate in a surrogate pair?\n    if (c >= 0xd800 && c <= 0xdbff) {\n      const high = c - 0xd800; // the high 10 bits.\n      i++;\n      assert(i < str.length, 'Surrogate pair missing trail surrogate.');\n      const low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\n      c = 0x10000 + (high << 10) + low;\n    }\n\n    if (c < 128) {\n      out[p++] = c;\n    } else if (c < 2048) {\n      out[p++] = (c >> 6) | 192;\n      out[p++] = (c & 63) | 128;\n    } else if (c < 65536) {\n      out[p++] = (c >> 12) | 224;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    } else {\n      out[p++] = (c >> 18) | 240;\n      out[p++] = ((c >> 12) & 63) | 128;\n      out[p++] = ((c >> 6) & 63) | 128;\n      out[p++] = (c & 63) | 128;\n    }\n  }\n  return out;\n};\n\n/**\n * Calculate length without actually converting; useful for doing cheaper validation.\n * @param {string} str\n * @return {number}\n */\nexport const stringLength = function (str: string): number {\n  let p = 0;\n  for (let i = 0; i < str.length; i++) {\n    const c = str.charCodeAt(i);\n    if (c < 128) {\n      p++;\n    } else if (c < 2048) {\n      p += 2;\n    } else if (c >= 0xd800 && c <= 0xdbff) {\n      // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\n      p += 4;\n      i++; // skip trail surrogate.\n    } else {\n      p += 3;\n    }\n  }\n  return p;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The amount of milliseconds to exponentially increase.\n */\nconst DEFAULT_INTERVAL_MILLIS = 1000;\n\n/**\n * The factor to backoff by.\n * Should be a number greater than 1.\n */\nconst DEFAULT_BACKOFF_FACTOR = 2;\n\n/**\n * The maximum milliseconds to increase to.\n *\n * <p>Visible for testing\n */\nexport const MAX_VALUE_MILLIS = 4 * 60 * 60 * 1000; // Four hours, like iOS and Android.\n\n/**\n * The percentage of backoff time to randomize by.\n * See\n * http://go/safe-client-behavior#step-1-determine-the-appropriate-retry-interval-to-handle-spike-traffic\n * for context.\n *\n * <p>Visible for testing\n */\nexport const RANDOM_FACTOR = 0.5;\n\n/**\n * Based on the backoff method from\n * https://github.com/google/closure-library/blob/master/closure/goog/math/exponentialbackoff.js.\n * Extracted here so we don't need to pass metadata and a stateful ExponentialBackoff object around.\n */\nexport function calculateBackoffMillis(\n  backoffCount: number,\n  intervalMillis: number = DEFAULT_INTERVAL_MILLIS,\n  backoffFactor: number = DEFAULT_BACKOFF_FACTOR\n): number {\n  // Calculates an exponentially increasing value.\n  // Deviation: calculates value from count and a constant interval, so we only need to save value\n  // and count to restore state.\n  const currBaseValue = intervalMillis * Math.pow(backoffFactor, backoffCount);\n\n  // A random \"fuzz\" to avoid waves of retries.\n  // Deviation: randomFactor is required.\n  const randomWait = Math.round(\n    // A fraction of the backoff value to add/subtract.\n    // Deviation: changes multiplication order to improve readability.\n    RANDOM_FACTOR *\n      currBaseValue *\n      // A random float (rounded to int by Math.round above) in the range [-1, 1]. Determines\n      // if we add or subtract.\n      (Math.random() - 0.5) *\n      2\n  );\n\n  // Limits backoff to max to avoid effectively permanent backoff.\n  return Math.min(MAX_VALUE_MILLIS, currBaseValue + randomWait);\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Provide English ordinal letters after a number\n */\nexport function ordinal(i: number): string {\n  if (!Number.isFinite(i)) {\n    return `${i}`;\n  }\n  return i + indicator(i);\n}\n\nfunction indicator(i: number): string {\n  i = Math.abs(i);\n  const cent = i % 100;\n  if (cent >= 10 && cent <= 20) {\n    return 'th';\n  }\n  const dec = i % 10;\n  if (dec === 1) {\n    return 'st';\n  }\n  if (dec === 2) {\n    return 'nd';\n  }\n  if (dec === 3) {\n    return 'rd';\n  }\n  return 'th';\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport interface Compat<T> {\n  _delegate: T;\n}\n\nexport function getModularInstance<ExpService>(\n  service: Compat<ExpService> | ExpService\n): ExpService {\n  if (service && (service as Compat<ExpService>)._delegate) {\n    return (service as Compat<ExpService>)._delegate;\n  } else {\n    return service as ExpService;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CONSTANTS } from './src/constants';\n\n// Overriding the constant (we should be the only ones doing this)\nCONSTANTS.NODE_CLIENT = true;\n\nexport * from './src/assert';\nexport * from './src/crypt';\nexport * from './src/constants';\nexport * from './src/deepCopy';\nexport * from './src/defaults';\nexport * from './src/deferred';\nexport * from './src/emulator';\nexport * from './src/environment';\nexport * from './src/errors';\nexport * from './src/json';\nexport * from './src/jwt';\nexport * from './src/obj';\nexport * from './src/promise';\nexport * from './src/query';\nexport * from './src/sha1';\nexport * from './src/subscribe';\nexport * from './src/validation';\nexport * from './src/utf8';\nexport * from './src/exponential_backoff';\nexport * from './src/formatters';\nexport * from './src/compat';\nexport * from './src/global';\nexport * from './src/url';\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  InstantiationMode,\n  InstanceFactory,\n  ComponentType,\n  Dictionary,\n  Name,\n  onInstanceCreatedCallback\n} from './types';\n\n/**\n * Component for service name T, e.g. `auth`, `auth-internal`\n */\nexport class Component<T extends Name = Name> {\n  multipleInstances = false;\n  /**\n   * Properties to be added to the service namespace\n   */\n  serviceProps: Dictionary = {};\n\n  instantiationMode = InstantiationMode.LAZY;\n\n  onInstanceCreated: onInstanceCreatedCallback<T> | null = null;\n\n  /**\n   *\n   * @param name The public service name, e.g. app, auth, firestore, database\n   * @param instanceFactory Service factory responsible for creating the public interface\n   * @param type whether the service provided by the component is public or private\n   */\n  constructor(\n    readonly name: T,\n    readonly instanceFactory: InstanceFactory<T>,\n    readonly type: ComponentType\n  ) {}\n\n  setInstantiationMode(mode: InstantiationMode): this {\n    this.instantiationMode = mode;\n    return this;\n  }\n\n  setMultipleInstances(multipleInstances: boolean): this {\n    this.multipleInstances = multipleInstances;\n    return this;\n  }\n\n  setServiceProps(props: Dictionary): this {\n    this.serviceProps = props;\n    return this;\n  }\n\n  setInstanceCreatedCallback(callback: onInstanceCreatedCallback<T>): this {\n    this.onInstanceCreated = callback;\n    return this;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const DEFAULT_ENTRY_NAME = '[DEFAULT]';\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Deferred } from '@firebase/util';\nimport { ComponentContainer } from './component_container';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport {\n  InitializeOptions,\n  InstantiationMode,\n  Name,\n  NameServiceMapping,\n  OnInitCallBack\n} from './types';\nimport { Component } from './component';\n\n/**\n * Provider for instance for service name T, e.g. 'auth', 'auth-internal'\n * NameServiceMapping[T] is an alias for the type of the instance\n */\nexport class Provider<T extends Name> {\n  private component: Component<T> | null = null;\n  private readonly instances: Map<string, NameServiceMapping[T]> = new Map();\n  private readonly instancesDeferred: Map<\n    string,\n    Deferred<NameServiceMapping[T]>\n  > = new Map();\n  private readonly instancesOptions: Map<string, Record<string, unknown>> =\n    new Map();\n  private onInitCallbacks: Map<string, Set<OnInitCallBack<T>>> = new Map();\n\n  constructor(\n    private readonly name: T,\n    private readonly container: ComponentContainer\n  ) {}\n\n  /**\n   * @param identifier A provider can provide multiple instances of a service\n   * if this.component.multipleInstances is true.\n   */\n  get(identifier?: string): Promise<NameServiceMapping[T]> {\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n\n    if (!this.instancesDeferred.has(normalizedIdentifier)) {\n      const deferred = new Deferred<NameServiceMapping[T]>();\n      this.instancesDeferred.set(normalizedIdentifier, deferred);\n\n      if (\n        this.isInitialized(normalizedIdentifier) ||\n        this.shouldAutoInitialize()\n      ) {\n        // initialize the service if it can be auto-initialized\n        try {\n          const instance = this.getOrInitializeService({\n            instanceIdentifier: normalizedIdentifier\n          });\n          if (instance) {\n            deferred.resolve(instance);\n          }\n        } catch (e) {\n          // when the instance factory throws an exception during get(), it should not cause\n          // a fatal error. We just return the unresolved promise in this case.\n        }\n      }\n    }\n\n    return this.instancesDeferred.get(normalizedIdentifier)!.promise;\n  }\n\n  /**\n   *\n   * @param options.identifier A provider can provide multiple instances of a service\n   * if this.component.multipleInstances is true.\n   * @param options.optional If optional is false or not provided, the method throws an error when\n   * the service is not immediately available.\n   * If optional is true, the method returns null if the service is not immediately available.\n   */\n  getImmediate(options: {\n    identifier?: string;\n    optional: true;\n  }): NameServiceMapping[T] | null;\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: false;\n  }): NameServiceMapping[T];\n  getImmediate(options?: {\n    identifier?: string;\n    optional?: boolean;\n  }): NameServiceMapping[T] | null {\n    // if multipleInstances is not supported, use the default name\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(\n      options?.identifier\n    );\n    const optional = options?.optional ?? false;\n\n    if (\n      this.isInitialized(normalizedIdentifier) ||\n      this.shouldAutoInitialize()\n    ) {\n      try {\n        return this.getOrInitializeService({\n          instanceIdentifier: normalizedIdentifier\n        });\n      } catch (e) {\n        if (optional) {\n          return null;\n        } else {\n          throw e;\n        }\n      }\n    } else {\n      // In case a component is not initialized and should/cannot be auto-initialized at the moment, return null if the optional flag is set, or throw\n      if (optional) {\n        return null;\n      } else {\n        throw Error(`Service ${this.name} is not available`);\n      }\n    }\n  }\n\n  getComponent(): Component<T> | null {\n    return this.component;\n  }\n\n  setComponent(component: Component<T>): void {\n    if (component.name !== this.name) {\n      throw Error(\n        `Mismatching Component ${component.name} for Provider ${this.name}.`\n      );\n    }\n\n    if (this.component) {\n      throw Error(`Component for ${this.name} has already been provided`);\n    }\n\n    this.component = component;\n\n    // return early without attempting to initialize the component if the component requires explicit initialization (calling `Provider.initialize()`)\n    if (!this.shouldAutoInitialize()) {\n      return;\n    }\n\n    // if the service is eager, initialize the default instance\n    if (isComponentEager(component)) {\n      try {\n        this.getOrInitializeService({ instanceIdentifier: DEFAULT_ENTRY_NAME });\n      } catch (e) {\n        // when the instance factory for an eager Component throws an exception during the eager\n        // initialization, it should not cause a fatal error.\n        // TODO: Investigate if we need to make it configurable, because some component may want to cause\n        // a fatal error in this case?\n      }\n    }\n\n    // Create service instances for the pending promises and resolve them\n    // NOTE: if this.multipleInstances is false, only the default instance will be created\n    // and all promises with resolve with it regardless of the identifier.\n    for (const [\n      instanceIdentifier,\n      instanceDeferred\n    ] of this.instancesDeferred.entries()) {\n      const normalizedIdentifier =\n        this.normalizeInstanceIdentifier(instanceIdentifier);\n\n      try {\n        // `getOrInitializeService()` should always return a valid instance since a component is guaranteed. use ! to make typescript happy.\n        const instance = this.getOrInitializeService({\n          instanceIdentifier: normalizedIdentifier\n        })!;\n        instanceDeferred.resolve(instance);\n      } catch (e) {\n        // when the instance factory throws an exception, it should not cause\n        // a fatal error. We just leave the promise unresolved.\n      }\n    }\n  }\n\n  clearInstance(identifier: string = DEFAULT_ENTRY_NAME): void {\n    this.instancesDeferred.delete(identifier);\n    this.instancesOptions.delete(identifier);\n    this.instances.delete(identifier);\n  }\n\n  // app.delete() will call this method on every provider to delete the services\n  // TODO: should we mark the provider as deleted?\n  async delete(): Promise<void> {\n    const services = Array.from(this.instances.values());\n\n    await Promise.all([\n      ...services\n        .filter(service => 'INTERNAL' in service) // legacy services\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .map(service => (service as any).INTERNAL!.delete()),\n      ...services\n        .filter(service => '_delete' in service) // modularized services\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .map(service => (service as any)._delete())\n    ]);\n  }\n\n  isComponentSet(): boolean {\n    return this.component != null;\n  }\n\n  isInitialized(identifier: string = DEFAULT_ENTRY_NAME): boolean {\n    return this.instances.has(identifier);\n  }\n\n  getOptions(identifier: string = DEFAULT_ENTRY_NAME): Record<string, unknown> {\n    return this.instancesOptions.get(identifier) || {};\n  }\n\n  initialize(opts: InitializeOptions = {}): NameServiceMapping[T] {\n    const { options = {} } = opts;\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(\n      opts.instanceIdentifier\n    );\n    if (this.isInitialized(normalizedIdentifier)) {\n      throw Error(\n        `${this.name}(${normalizedIdentifier}) has already been initialized`\n      );\n    }\n\n    if (!this.isComponentSet()) {\n      throw Error(`Component ${this.name} has not been registered yet`);\n    }\n\n    const instance = this.getOrInitializeService({\n      instanceIdentifier: normalizedIdentifier,\n      options\n    })!;\n\n    // resolve any pending promise waiting for the service instance\n    for (const [\n      instanceIdentifier,\n      instanceDeferred\n    ] of this.instancesDeferred.entries()) {\n      const normalizedDeferredIdentifier =\n        this.normalizeInstanceIdentifier(instanceIdentifier);\n      if (normalizedIdentifier === normalizedDeferredIdentifier) {\n        instanceDeferred.resolve(instance);\n      }\n    }\n\n    return instance;\n  }\n\n  /**\n   *\n   * @param callback - a function that will be invoked  after the provider has been initialized by calling provider.initialize().\n   * The function is invoked SYNCHRONOUSLY, so it should not execute any longrunning tasks in order to not block the program.\n   *\n   * @param identifier An optional instance identifier\n   * @returns a function to unregister the callback\n   */\n  onInit(callback: OnInitCallBack<T>, identifier?: string): () => void {\n    const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\n    const existingCallbacks =\n      this.onInitCallbacks.get(normalizedIdentifier) ??\n      new Set<OnInitCallBack<T>>();\n    existingCallbacks.add(callback);\n    this.onInitCallbacks.set(normalizedIdentifier, existingCallbacks);\n\n    const existingInstance = this.instances.get(normalizedIdentifier);\n    if (existingInstance) {\n      callback(existingInstance, normalizedIdentifier);\n    }\n\n    return () => {\n      existingCallbacks.delete(callback);\n    };\n  }\n\n  /**\n   * Invoke onInit callbacks synchronously\n   * @param instance the service instance`\n   */\n  private invokeOnInitCallbacks(\n    instance: NameServiceMapping[T],\n    identifier: string\n  ): void {\n    const callbacks = this.onInitCallbacks.get(identifier);\n    if (!callbacks) {\n      return;\n    }\n    for (const callback of callbacks) {\n      try {\n        callback(instance, identifier);\n      } catch {\n        // ignore errors in the onInit callback\n      }\n    }\n  }\n\n  private getOrInitializeService({\n    instanceIdentifier,\n    options = {}\n  }: {\n    instanceIdentifier: string;\n    options?: Record<string, unknown>;\n  }): NameServiceMapping[T] | null {\n    let instance = this.instances.get(instanceIdentifier);\n    if (!instance && this.component) {\n      instance = this.component.instanceFactory(this.container, {\n        instanceIdentifier: normalizeIdentifierForFactory(instanceIdentifier),\n        options\n      });\n      this.instances.set(instanceIdentifier, instance!);\n      this.instancesOptions.set(instanceIdentifier, options);\n\n      /**\n       * Invoke onInit listeners.\n       * Note this.component.onInstanceCreated is different, which is used by the component creator,\n       * while onInit listeners are registered by consumers of the provider.\n       */\n      this.invokeOnInitCallbacks(instance!, instanceIdentifier);\n\n      /**\n       * Order is important\n       * onInstanceCreated() should be called after this.instances.set(instanceIdentifier, instance); which\n       * makes `isInitialized()` return true.\n       */\n      if (this.component.onInstanceCreated) {\n        try {\n          this.component.onInstanceCreated(\n            this.container,\n            instanceIdentifier,\n            instance!\n          );\n        } catch {\n          // ignore errors in the onInstanceCreatedCallback\n        }\n      }\n    }\n\n    return instance || null;\n  }\n\n  private normalizeInstanceIdentifier(\n    identifier: string = DEFAULT_ENTRY_NAME\n  ): string {\n    if (this.component) {\n      return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME;\n    } else {\n      return identifier; // assume multiple instances are supported before the component is provided.\n    }\n  }\n\n  private shouldAutoInitialize(): boolean {\n    return (\n      !!this.component &&\n      this.component.instantiationMode !== InstantiationMode.EXPLICIT\n    );\n  }\n}\n\n// undefined should be passed to the service factory for the default instance\nfunction normalizeIdentifierForFactory(identifier: string): string | undefined {\n  return identifier === DEFAULT_ENTRY_NAME ? undefined : identifier;\n}\n\nfunction isComponentEager<T extends Name>(component: Component<T>): boolean {\n  return component.instantiationMode === InstantiationMode.EAGER;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Provider } from './provider';\nimport { Component } from './component';\nimport { Name } from './types';\n\n/**\n * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`\n */\nexport class ComponentContainer {\n  private readonly providers = new Map<string, Provider<Name>>();\n\n  constructor(private readonly name: string) {}\n\n  /**\n   *\n   * @param component Component being added\n   * @param overwrite When a component with the same name has already been registered,\n   * if overwrite is true: overwrite the existing component with the new component and create a new\n   * provider with the new component. It can be useful in tests where you want to use different mocks\n   * for different tests.\n   * if overwrite is false: throw an exception\n   */\n  addComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      throw new Error(\n        `Component ${component.name} has already been registered with ${this.name}`\n      );\n    }\n\n    provider.setComponent(component);\n  }\n\n  addOrOverwriteComponent<T extends Name>(component: Component<T>): void {\n    const provider = this.getProvider(component.name);\n    if (provider.isComponentSet()) {\n      // delete the existing provider from the container, so we can register the new component\n      this.providers.delete(component.name);\n    }\n\n    this.addComponent(component);\n  }\n\n  /**\n   * getProvider provides a type safe interface where it can only be called with a field name\n   * present in NameServiceMapping interface.\n   *\n   * Firebase SDKs providing services should extend NameServiceMapping interface to register\n   * themselves.\n   */\n  getProvider<T extends Name>(name: T): Provider<T> {\n    if (this.providers.has(name)) {\n      return this.providers.get(name) as unknown as Provider<T>;\n    }\n\n    // create a Provider for a service that hasn't registered with Firebase\n    const provider = new Provider<T>(name, this);\n    this.providers.set(name, provider as unknown as Provider<Name>);\n\n    return provider as Provider<T>;\n  }\n\n  getProviders(): Array<Provider<Name>> {\n    return Array.from(this.providers.values());\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport type LogLevelString =\n  | 'debug'\n  | 'verbose'\n  | 'info'\n  | 'warn'\n  | 'error'\n  | 'silent';\n\nexport interface LogOptions {\n  level: LogLevelString;\n}\n\nexport type LogCallback = (callbackParams: LogCallbackParams) => void;\n\nexport interface LogCallbackParams {\n  level: LogLevelString;\n  message: string;\n  args: unknown[];\n  type: string;\n}\n\n/**\n * A container for all of the Logger instances\n */\nexport const instances: Logger[] = [];\n\n/**\n * The JS SDK supports 5 log levels and also allows a user the ability to\n * silence the logs altogether.\n *\n * The order is a follows:\n * DEBUG < VERBOSE < INFO < WARN < ERROR\n *\n * All of the log types above the current log level will be captured (i.e. if\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\n * `VERBOSE` logs will not)\n */\nexport enum LogLevel {\n  DEBUG,\n  VERBOSE,\n  INFO,\n  WARN,\n  ERROR,\n  SILENT\n}\n\nconst levelStringToEnum: { [key in LogLevelString]: LogLevel } = {\n  'debug': LogLevel.DEBUG,\n  'verbose': LogLevel.VERBOSE,\n  'info': LogLevel.INFO,\n  'warn': LogLevel.WARN,\n  'error': LogLevel.ERROR,\n  'silent': LogLevel.SILENT\n};\n\n/**\n * The default log level\n */\nconst defaultLogLevel: LogLevel = LogLevel.INFO;\n\n/**\n * We allow users the ability to pass their own log handler. We will pass the\n * type of log, the current log level, and any other arguments passed (i.e. the\n * messages that the user wants to log) to this function.\n */\nexport type LogHandler = (\n  loggerInstance: Logger,\n  logType: LogLevel,\n  ...args: unknown[]\n) => void;\n\n/**\n * By default, `console.debug` is not displayed in the developer console (in\n * chrome). To avoid forcing users to have to opt-in to these logs twice\n * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\n * logs to the `console.log` function.\n */\nconst ConsoleMethod = {\n  [LogLevel.DEBUG]: 'log',\n  [LogLevel.VERBOSE]: 'log',\n  [LogLevel.INFO]: 'info',\n  [LogLevel.WARN]: 'warn',\n  [LogLevel.ERROR]: 'error'\n};\n\n/**\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\n * messages on to their corresponding console counterparts (if the log method\n * is supported by the current log level)\n */\nconst defaultLogHandler: LogHandler = (instance, logType, ...args): void => {\n  if (logType < instance.logLevel) {\n    return;\n  }\n  const now = new Date().toISOString();\n  const method = ConsoleMethod[logType as keyof typeof ConsoleMethod];\n  if (method) {\n    console[method as 'log' | 'info' | 'warn' | 'error'](\n      `[${now}]  ${instance.name}:`,\n      ...args\n    );\n  } else {\n    throw new Error(\n      `Attempted to log a message with an invalid logType (value: ${logType})`\n    );\n  }\n};\n\nexport class Logger {\n  /**\n   * Gives you an instance of a Logger to capture messages according to\n   * Firebase's logging scheme.\n   *\n   * @param name The name that the logs will be associated with\n   */\n  constructor(public name: string) {\n    /**\n     * Capture the current instance for later use\n     */\n    instances.push(this);\n  }\n\n  /**\n   * The log level of the given Logger instance.\n   */\n  private _logLevel = defaultLogLevel;\n\n  get logLevel(): LogLevel {\n    return this._logLevel;\n  }\n\n  set logLevel(val: LogLevel) {\n    if (!(val in LogLevel)) {\n      throw new TypeError(`Invalid value \"${val}\" assigned to \\`logLevel\\``);\n    }\n    this._logLevel = val;\n  }\n\n  // Workaround for setter/getter having to be the same type.\n  setLogLevel(val: LogLevel | LogLevelString): void {\n    this._logLevel = typeof val === 'string' ? levelStringToEnum[val] : val;\n  }\n\n  /**\n   * The main (internal) log handler for the Logger instance.\n   * Can be set to a new function in internal package code but not by user.\n   */\n  private _logHandler: LogHandler = defaultLogHandler;\n  get logHandler(): LogHandler {\n    return this._logHandler;\n  }\n  set logHandler(val: LogHandler) {\n    if (typeof val !== 'function') {\n      throw new TypeError('Value assigned to `logHandler` must be a function');\n    }\n    this._logHandler = val;\n  }\n\n  /**\n   * The optional, additional, user-defined log handler for the Logger instance.\n   */\n  private _userLogHandler: LogHandler | null = null;\n  get userLogHandler(): LogHandler | null {\n    return this._userLogHandler;\n  }\n  set userLogHandler(val: LogHandler | null) {\n    this._userLogHandler = val;\n  }\n\n  /**\n   * The functions below are all based on the `console` interface\n   */\n\n  debug(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.DEBUG, ...args);\n    this._logHandler(this, LogLevel.DEBUG, ...args);\n  }\n  log(...args: unknown[]): void {\n    this._userLogHandler &&\n      this._userLogHandler(this, LogLevel.VERBOSE, ...args);\n    this._logHandler(this, LogLevel.VERBOSE, ...args);\n  }\n  info(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.INFO, ...args);\n    this._logHandler(this, LogLevel.INFO, ...args);\n  }\n  warn(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.WARN, ...args);\n    this._logHandler(this, LogLevel.WARN, ...args);\n  }\n  error(...args: unknown[]): void {\n    this._userLogHandler && this._userLogHandler(this, LogLevel.ERROR, ...args);\n    this._logHandler(this, LogLevel.ERROR, ...args);\n  }\n}\n\nexport function setLogLevel(level: LogLevelString | LogLevel): void {\n  instances.forEach(inst => {\n    inst.setLogLevel(level);\n  });\n}\n\nexport function setUserLogHandler(\n  logCallback: LogCallback | null,\n  options?: LogOptions\n): void {\n  for (const instance of instances) {\n    let customLogLevel: LogLevel | null = null;\n    if (options && options.level) {\n      customLogLevel = levelStringToEnum[options.level];\n    }\n    if (logCallback === null) {\n      instance.userLogHandler = null;\n    } else {\n      instance.userLogHandler = (\n        instance: Logger,\n        level: LogLevel,\n        ...args: unknown[]\n      ) => {\n        const message = args\n          .map(arg => {\n            if (arg == null) {\n              return null;\n            } else if (typeof arg === 'string') {\n              return arg;\n            } else if (typeof arg === 'number' || typeof arg === 'boolean') {\n              return arg.toString();\n            } else if (arg instanceof Error) {\n              return arg.message;\n            } else {\n              try {\n                return JSON.stringify(arg);\n              } catch (ignored) {\n                return null;\n              }\n            }\n          })\n          .filter(arg => arg)\n          .join(' ');\n        if (level >= (customLogLevel ?? instance.logLevel)) {\n          logCallback({\n            level: LogLevel[level].toLowerCase() as LogLevelString,\n            message,\n            args,\n            type: instance.name\n          });\n        }\n      };\n    }\n  }\n}\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ComponentContainer,\n  ComponentType,\n  Provider,\n  Name\n} from '@firebase/component';\nimport { PlatformLoggerService, VersionService } from './types';\n\nexport class PlatformLoggerServiceImpl implements PlatformLoggerService {\n  constructor(private readonly container: ComponentContainer) {}\n  // In initial implementation, this will be called by installations on\n  // auth token refresh, and installations will send this string.\n  getPlatformInfoString(): string {\n    const providers = this.container.getProviders();\n    // Loop through providers and get library/version pairs from any that are\n    // version components.\n    return providers\n      .map(provider => {\n        if (isVersionServiceProvider(provider)) {\n          const service = provider.getImmediate() as VersionService;\n          return `${service.library}/${service.version}`;\n        } else {\n          return null;\n        }\n      })\n      .filter(logString => logString)\n      .join(' ');\n  }\n}\n/**\n *\n * @param provider check if this provider provides a VersionService\n *\n * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\n * provides VersionService. The provider is not necessarily a 'app-version'\n * provider.\n */\nfunction isVersionServiceProvider(provider: Provider<Name>): boolean {\n  const component = provider.getComponent();\n  return component?.type === ComponentType.VERSION;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Logger } from '@firebase/logger';\n\nexport const logger = new Logger('@firebase/app');\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { name as appName } from '../package.json';\nimport { name as appCompatName } from '../../app-compat/package.json';\nimport { name as analyticsCompatName } from '../../../packages/analytics-compat/package.json';\nimport { name as analyticsName } from '../../../packages/analytics/package.json';\nimport { name as appCheckCompatName } from '../../../packages/app-check-compat/package.json';\nimport { name as appCheckName } from '../../../packages/app-check/package.json';\nimport { name as authName } from '../../../packages/auth/package.json';\nimport { name as authCompatName } from '../../../packages/auth-compat/package.json';\nimport { name as databaseName } from '../../../packages/database/package.json';\nimport { name as dataconnectName } from '../../../packages/data-connect/package.json';\nimport { name as databaseCompatName } from '../../../packages/database-compat/package.json';\nimport { name as functionsName } from '../../../packages/functions/package.json';\nimport { name as functionsCompatName } from '../../../packages/functions-compat/package.json';\nimport { name as installationsName } from '../../../packages/installations/package.json';\nimport { name as installationsCompatName } from '../../../packages/installations-compat/package.json';\nimport { name as messagingName } from '../../../packages/messaging/package.json';\nimport { name as messagingCompatName } from '../../../packages/messaging-compat/package.json';\nimport { name as performanceName } from '../../../packages/performance/package.json';\nimport { name as performanceCompatName } from '../../../packages/performance-compat/package.json';\nimport { name as remoteConfigName } from '../../../packages/remote-config/package.json';\nimport { name as remoteConfigCompatName } from '../../../packages/remote-config-compat/package.json';\nimport { name as storageName } from '../../../packages/storage/package.json';\nimport { name as storageCompatName } from '../../../packages/storage-compat/package.json';\nimport { name as firestoreName } from '../../../packages/firestore/package.json';\nimport { name as aiName } from '../../../packages/ai/package.json';\nimport { name as firestoreCompatName } from '../../../packages/firestore-compat/package.json';\nimport { name as packageName } from '../../../packages/firebase/package.json';\n\n/**\n * The default app name\n *\n * @internal\n */\nexport const DEFAULT_ENTRY_NAME = '[DEFAULT]';\n\nexport const PLATFORM_LOG_STRING = {\n  [appName]: 'fire-core',\n  [appCompatName]: 'fire-core-compat',\n  [analyticsName]: 'fire-analytics',\n  [analyticsCompatName]: 'fire-analytics-compat',\n  [appCheckName]: 'fire-app-check',\n  [appCheckCompatName]: 'fire-app-check-compat',\n  [authName]: 'fire-auth',\n  [authCompatName]: 'fire-auth-compat',\n  [databaseName]: 'fire-rtdb',\n  [dataconnectName]: 'fire-data-connect',\n  [databaseCompatName]: 'fire-rtdb-compat',\n  [functionsName]: 'fire-fn',\n  [functionsCompatName]: 'fire-fn-compat',\n  [installationsName]: 'fire-iid',\n  [installationsCompatName]: 'fire-iid-compat',\n  [messagingName]: 'fire-fcm',\n  [messagingCompatName]: 'fire-fcm-compat',\n  [performanceName]: 'fire-perf',\n  [performanceCompatName]: 'fire-perf-compat',\n  [remoteConfigName]: 'fire-rc',\n  [remoteConfigCompatName]: 'fire-rc-compat',\n  [storageName]: 'fire-gcs',\n  [storageCompatName]: 'fire-gcs-compat',\n  [firestoreName]: 'fire-fst',\n  [firestoreCompatName]: 'fire-fst-compat',\n  [aiName]: 'fire-vertex',\n  'fire-js': 'fire-js', // Platform identifier for JS SDK.\n  [packageName]: 'fire-js-all'\n} as const;\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseAppSettings,\n  FirebaseServerAppSettings,\n  FirebaseOptions,\n  FirebaseServerApp\n} from './public-types';\nimport { Component, Provider, Name } from '@firebase/component';\nimport { logger } from './logger';\nimport { DEFAULT_ENTRY_NAME } from './constants';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { FirebaseServerAppImpl } from './firebaseServerApp';\n\n/**\n * @internal\n */\nexport const _apps = new Map<string, FirebaseApp>();\n\n/**\n * @internal\n */\nexport const _serverApps = new Map<string, FirebaseServerApp>();\n\n/**\n * Registered components.\n *\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const _components = new Map<string, Component<any>>();\n\n/**\n * @param component - the component being added to this app's container\n *\n * @internal\n */\nexport function _addComponent<T extends Name>(\n  app: FirebaseApp,\n  component: Component<T>\n): void {\n  try {\n    (app as FirebaseAppImpl).container.addComponent(component);\n  } catch (e) {\n    logger.debug(\n      `Component ${component.name} failed to register with FirebaseApp ${app.name}`,\n      e\n    );\n  }\n}\n\n/**\n *\n * @internal\n */\nexport function _addOrOverwriteComponent(\n  app: FirebaseApp,\n  component: Component\n): void {\n  (app as FirebaseAppImpl).container.addOrOverwriteComponent(component);\n}\n\n/**\n *\n * @param component - the component to register\n * @returns whether or not the component is registered successfully\n *\n * @internal\n */\nexport function _registerComponent<T extends Name>(\n  component: Component<T>\n): boolean {\n  const componentName = component.name;\n  if (_components.has(componentName)) {\n    logger.debug(\n      `There were multiple attempts to register component ${componentName}.`\n    );\n\n    return false;\n  }\n\n  _components.set(componentName, component);\n\n  // add the component to existing app instances\n  for (const app of _apps.values()) {\n    _addComponent(app as FirebaseAppImpl, component);\n  }\n\n  for (const serverApp of _serverApps.values()) {\n    _addComponent(serverApp as FirebaseServerAppImpl, component);\n  }\n\n  return true;\n}\n\n/**\n *\n * @param app - FirebaseApp instance\n * @param name - service name\n *\n * @returns the provider for the service with the matching name\n *\n * @internal\n */\nexport function _getProvider<T extends Name>(\n  app: FirebaseApp,\n  name: T\n): Provider<T> {\n  const heartbeatController = (app as FirebaseAppImpl).container\n    .getProvider('heartbeat')\n    .getImmediate({ optional: true });\n  if (heartbeatController) {\n    void heartbeatController.triggerHeartbeat();\n  }\n  return (app as FirebaseAppImpl).container.getProvider(name);\n}\n\n/**\n *\n * @param app - FirebaseApp instance\n * @param name - service name\n * @param instanceIdentifier - service instance identifier in case the service supports multiple instances\n *\n * @internal\n */\nexport function _removeServiceInstance<T extends Name>(\n  app: FirebaseApp,\n  name: T,\n  instanceIdentifier: string = DEFAULT_ENTRY_NAME\n): void {\n  _getProvider(app, name).clearInstance(instanceIdentifier);\n}\n\n/**\n *\n * @param obj - an object of type FirebaseApp, FirebaseOptions or FirebaseAppSettings.\n *\n * @returns true if the provide object is of type FirebaseApp.\n *\n * @internal\n */\nexport function _isFirebaseApp(\n  obj: FirebaseApp | FirebaseOptions | FirebaseAppSettings\n): obj is FirebaseApp {\n  return (obj as FirebaseApp).options !== undefined;\n}\n\n/**\n *\n * @param obj - an object of type FirebaseApp, FirebaseOptions or FirebaseAppSettings.\n *\n * @returns true if the provided object is of type FirebaseServerAppImpl.\n *\n * @internal\n */\nexport function _isFirebaseServerAppSettings(\n  obj: FirebaseApp | FirebaseOptions | FirebaseAppSettings\n): obj is FirebaseServerAppSettings {\n  if (_isFirebaseApp(obj)) {\n    return false;\n  }\n  return (\n    'authIdToken' in obj ||\n    'appCheckToken' in obj ||\n    'releaseOnDeref' in obj ||\n    'automaticDataCollectionEnabled' in obj\n  );\n}\n\n/**\n *\n * @param obj - an object of type FirebaseApp.\n *\n * @returns true if the provided object is of type FirebaseServerAppImpl.\n *\n * @internal\n */\nexport function _isFirebaseServerApp(\n  obj: FirebaseApp | FirebaseServerApp | null | undefined\n): obj is FirebaseServerApp {\n  if (obj === null || obj === undefined) {\n    return false;\n  }\n  return (obj as FirebaseServerApp).settings !== undefined;\n}\n\n/**\n * Test only\n *\n * @internal\n */\nexport function _clearComponents(): void {\n  _components.clear();\n}\n\n/**\n * Exported in order to be used in app-compat package\n */\nexport { DEFAULT_ENTRY_NAME as _DEFAULT_ENTRY_NAME };\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorFactory, ErrorMap } from '@firebase/util';\n\nexport const enum AppError {\n  NO_APP = 'no-app',\n  BAD_APP_NAME = 'bad-app-name',\n  DUPLICATE_APP = 'duplicate-app',\n  APP_DELETED = 'app-deleted',\n  SERVER_APP_DELETED = 'server-app-deleted',\n  NO_OPTIONS = 'no-options',\n  INVALID_APP_ARGUMENT = 'invalid-app-argument',\n  INVALID_LOG_ARGUMENT = 'invalid-log-argument',\n  IDB_OPEN = 'idb-open',\n  IDB_GET = 'idb-get',\n  IDB_WRITE = 'idb-set',\n  IDB_DELETE = 'idb-delete',\n  FINALIZATION_REGISTRY_NOT_SUPPORTED = 'finalization-registry-not-supported',\n  INVALID_SERVER_APP_ENVIRONMENT = 'invalid-server-app-environment'\n}\n\nconst ERRORS: ErrorMap<AppError> = {\n  [AppError.NO_APP]:\n    \"No Firebase App '{$appName}' has been created - \" +\n    'call initializeApp() first',\n  [AppError.BAD_APP_NAME]: \"Illegal App name: '{$appName}'\",\n  [AppError.DUPLICATE_APP]:\n    \"Firebase App named '{$appName}' already exists with different options or config\",\n  [AppError.APP_DELETED]: \"Firebase App named '{$appName}' already deleted\",\n  [AppError.SERVER_APP_DELETED]: 'Firebase Server App has been deleted',\n  [AppError.NO_OPTIONS]:\n    'Need to provide options, when not being deployed to hosting via source.',\n  [AppError.INVALID_APP_ARGUMENT]:\n    'firebase.{$appName}() takes either no argument or a ' +\n    'Firebase App instance.',\n  [AppError.INVALID_LOG_ARGUMENT]:\n    'First argument to `onLog` must be null or a function.',\n  [AppError.IDB_OPEN]:\n    'Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_GET]:\n    'Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_WRITE]:\n    'Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.IDB_DELETE]:\n    'Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.',\n  [AppError.FINALIZATION_REGISTRY_NOT_SUPPORTED]:\n    'FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.',\n  [AppError.INVALID_SERVER_APP_ENVIRONMENT]:\n    'FirebaseServerApp is not for use in browser environments.'\n};\n\ninterface ErrorParams {\n  [AppError.NO_APP]: { appName: string };\n  [AppError.BAD_APP_NAME]: { appName: string };\n  [AppError.DUPLICATE_APP]: { appName: string };\n  [AppError.APP_DELETED]: { appName: string };\n  [AppError.INVALID_APP_ARGUMENT]: { appName: string };\n  [AppError.IDB_OPEN]: { originalErrorMessage?: string };\n  [AppError.IDB_GET]: { originalErrorMessage?: string };\n  [AppError.IDB_WRITE]: { originalErrorMessage?: string };\n  [AppError.IDB_DELETE]: { originalErrorMessage?: string };\n  [AppError.FINALIZATION_REGISTRY_NOT_SUPPORTED]: { appName?: string };\n}\n\nexport const ERROR_FACTORY = new ErrorFactory<AppError, ErrorParams>(\n  'app',\n  'Firebase',\n  ERRORS\n);\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseOptions,\n  FirebaseAppSettings\n} from './public-types';\nimport {\n  ComponentContainer,\n  Component,\n  ComponentType\n} from '@firebase/component';\nimport { ERROR_FACTORY, AppError } from './errors';\n\nexport class FirebaseAppImpl implements FirebaseApp {\n  protected readonly _options: FirebaseOptions;\n  protected readonly _name: string;\n  /**\n   * Original config values passed in as a constructor parameter.\n   * It is only used to compare with another config object to support idempotent initializeApp().\n   *\n   * Updating automaticDataCollectionEnabled on the App instance will not change its value in _config.\n   */\n  private readonly _config: Required<FirebaseAppSettings>;\n  private _automaticDataCollectionEnabled: boolean;\n  protected _isDeleted = false;\n  private readonly _container: ComponentContainer;\n\n  constructor(\n    options: FirebaseOptions,\n    config: Required<FirebaseAppSettings>,\n    container: ComponentContainer\n  ) {\n    this._options = { ...options };\n    this._config = { ...config };\n    this._name = config.name;\n    this._automaticDataCollectionEnabled =\n      config.automaticDataCollectionEnabled;\n    this._container = container;\n    this.container.addComponent(\n      new Component('app', () => this, ComponentType.PUBLIC)\n    );\n  }\n\n  get automaticDataCollectionEnabled(): boolean {\n    this.checkDestroyed();\n    return this._automaticDataCollectionEnabled;\n  }\n\n  set automaticDataCollectionEnabled(val: boolean) {\n    this.checkDestroyed();\n    this._automaticDataCollectionEnabled = val;\n  }\n\n  get name(): string {\n    this.checkDestroyed();\n    return this._name;\n  }\n\n  get options(): FirebaseOptions {\n    this.checkDestroyed();\n    return this._options;\n  }\n\n  get config(): Required<FirebaseAppSettings> {\n    this.checkDestroyed();\n    return this._config;\n  }\n\n  get container(): ComponentContainer {\n    return this._container;\n  }\n\n  get isDeleted(): boolean {\n    return this._isDeleted;\n  }\n\n  set isDeleted(val: boolean) {\n    this._isDeleted = val;\n  }\n\n  /**\n   * This function will throw an Error if the App has already been deleted -\n   * use before performing API actions on the App.\n   */\n  protected checkDestroyed(): void {\n    if (this.isDeleted) {\n      throw ERROR_FACTORY.create(AppError.APP_DELETED, { appName: this._name });\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2023 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseAppSettings,\n  FirebaseServerApp,\n  FirebaseServerAppSettings,\n  FirebaseOptions\n} from './public-types';\nimport { deleteApp, registerVersion } from './api';\nimport { ComponentContainer } from '@firebase/component';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { ERROR_FACTORY, AppError } from './errors';\nimport { name as packageName, version } from '../package.json';\nimport { base64Decode } from '@firebase/util';\n\n// Parse the token and check to see if the `exp` claim is in the future.\n// Reports an error to the console if the token or claim could not be parsed, or if `exp` is in\n// the past.\nfunction validateTokenTTL(base64Token: string, tokenName: string): void {\n  const secondPart = base64Decode(base64Token.split('.')[1]);\n  if (secondPart === null) {\n    console.error(\n      `FirebaseServerApp ${tokenName} is invalid: second part could not be parsed.`\n    );\n    return;\n  }\n  const expClaim = JSON.parse(secondPart).exp;\n  if (expClaim === undefined) {\n    console.error(\n      `FirebaseServerApp ${tokenName} is invalid: expiration claim could not be parsed`\n    );\n    return;\n  }\n  const exp = JSON.parse(secondPart).exp * 1000;\n  const now = new Date().getTime();\n  const diff = exp - now;\n  if (diff <= 0) {\n    console.error(\n      `FirebaseServerApp ${tokenName} is invalid: the token has expired.`\n    );\n  }\n}\n\nexport class FirebaseServerAppImpl\n  extends FirebaseAppImpl\n  implements FirebaseServerApp\n{\n  private readonly _serverConfig: FirebaseServerAppSettings;\n  private _finalizationRegistry: FinalizationRegistry<object> | null;\n  private _refCount: number;\n\n  constructor(\n    options: FirebaseOptions | FirebaseAppImpl,\n    serverConfig: FirebaseServerAppSettings,\n    name: string,\n    container: ComponentContainer\n  ) {\n    // Build configuration parameters for the FirebaseAppImpl base class.\n    const automaticDataCollectionEnabled =\n      serverConfig.automaticDataCollectionEnabled !== undefined\n        ? serverConfig.automaticDataCollectionEnabled\n        : true;\n\n    // Create the FirebaseAppSettings object for the FirebaseAppImp constructor.\n    const config: Required<FirebaseAppSettings> = {\n      name,\n      automaticDataCollectionEnabled\n    };\n\n    if ((options as FirebaseOptions).apiKey !== undefined) {\n      // Construct the parent FirebaseAppImp object.\n      super(options as FirebaseOptions, config, container);\n    } else {\n      const appImpl: FirebaseAppImpl = options as FirebaseAppImpl;\n      super(appImpl.options, config, container);\n    }\n\n    // Now construct the data for the FirebaseServerAppImpl.\n    this._serverConfig = {\n      automaticDataCollectionEnabled,\n      ...serverConfig\n    };\n\n    // Ensure that the current time is within the `authIdtoken` window of validity.\n    if (this._serverConfig.authIdToken) {\n      validateTokenTTL(this._serverConfig.authIdToken, 'authIdToken');\n    }\n\n    // Ensure that the current time is within the `appCheckToken` window of validity.\n    if (this._serverConfig.appCheckToken) {\n      validateTokenTTL(this._serverConfig.appCheckToken, 'appCheckToken');\n    }\n\n    this._finalizationRegistry = null;\n    if (typeof FinalizationRegistry !== 'undefined') {\n      this._finalizationRegistry = new FinalizationRegistry(() => {\n        this.automaticCleanup();\n      });\n    }\n\n    this._refCount = 0;\n    this.incRefCount(this._serverConfig.releaseOnDeref);\n\n    // Do not retain a hard reference to the dref object, otherwise the FinalizationRegistry\n    // will never trigger.\n    this._serverConfig.releaseOnDeref = undefined;\n    serverConfig.releaseOnDeref = undefined;\n\n    registerVersion(packageName, version, 'serverapp');\n  }\n\n  toJSON(): undefined {\n    return undefined;\n  }\n\n  get refCount(): number {\n    return this._refCount;\n  }\n\n  // Increment the reference count of this server app. If an object is provided, register it\n  // with the finalization registry.\n  incRefCount(obj: object | undefined): void {\n    if (this.isDeleted) {\n      return;\n    }\n    this._refCount++;\n    if (obj !== undefined && this._finalizationRegistry !== null) {\n      this._finalizationRegistry.register(obj, this);\n    }\n  }\n\n  // Decrement the reference count.\n  decRefCount(): number {\n    if (this.isDeleted) {\n      return 0;\n    }\n    return --this._refCount;\n  }\n\n  // Invoked by the FinalizationRegistry callback to note that this app should go through its\n  // reference counts and delete itself if no reference count remain. The coordinating logic that\n  // handles this is in deleteApp(...).\n  private automaticCleanup(): void {\n    void deleteApp(this);\n  }\n\n  get settings(): FirebaseServerAppSettings {\n    this.checkDestroyed();\n    return this._serverConfig;\n  }\n\n  /**\n   * This function will throw an Error if the App has already been deleted -\n   * use before performing API actions on the App.\n   */\n  protected checkDestroyed(): void {\n    if (this.isDeleted) {\n      throw ERROR_FACTORY.create(AppError.SERVER_APP_DELETED);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FirebaseApp,\n  FirebaseServerApp,\n  FirebaseOptions,\n  FirebaseAppSettings,\n  FirebaseServerAppSettings\n} from './public-types';\nimport { DEFAULT_ENTRY_NAME, PLATFORM_LOG_STRING } from './constants';\nimport { ERROR_FACTORY, AppError } from './errors';\nimport {\n  ComponentContainer,\n  Component,\n  Name,\n  ComponentType\n} from '@firebase/component';\nimport { version } from '../../firebase/package.json';\nimport { FirebaseAppImpl } from './firebaseApp';\nimport { FirebaseServerAppImpl } from './firebaseServerApp';\nimport {\n  _apps,\n  _components,\n  _isFirebaseApp,\n  _isFirebaseServerAppSettings,\n  _registerComponent,\n  _serverApps\n} from './internal';\nimport { logger } from './logger';\nimport {\n  LogLevelString,\n  setLogLevel as setLogLevelImpl,\n  LogCallback,\n  LogOptions,\n  setUserLogHandler\n} from '@firebase/logger';\nimport {\n  deepEqual,\n  getDefaultAppConfig,\n  isBrowser,\n  isWebWorker\n} from '@firebase/util';\n\nexport { FirebaseError } from '@firebase/util';\n\n/**\n * The current SDK version.\n *\n * @public\n */\nexport const SDK_VERSION = version;\n\n/**\n * Creates and initializes a {@link @firebase/app#FirebaseApp} instance.\n *\n * See\n * {@link\n *   https://firebase.google.com/docs/web/setup#add_firebase_to_your_app\n *   | Add Firebase to your app} and\n * {@link\n *   https://firebase.google.com/docs/web/setup#multiple-projects\n *   | Initialize multiple projects} for detailed documentation.\n *\n * @example\n * ```javascript\n *\n * // Initialize default app\n * // Retrieve your own options values by adding a web app on\n * // https://console.firebase.google.com\n * initializeApp({\n *   apiKey: \"AIza....\",                             // Auth / General Use\n *   authDomain: \"YOUR_APP.firebaseapp.com\",         // Auth with popup/redirect\n *   databaseURL: \"https://YOUR_APP.firebaseio.com\", // Realtime Database\n *   storageBucket: \"YOUR_APP.appspot.com\",          // Storage\n *   messagingSenderId: \"123456789\"                  // Cloud Messaging\n * });\n * ```\n *\n * @example\n * ```javascript\n *\n * // Initialize another app\n * const otherApp = initializeApp({\n *   databaseURL: \"https://<OTHER_DATABASE_NAME>.firebaseio.com\",\n *   storageBucket: \"<OTHER_STORAGE_BUCKET>.appspot.com\"\n * }, \"otherApp\");\n * ```\n *\n * @param options - Options to configure the app's services.\n * @param name - Optional name of the app to initialize. If no name\n *   is provided, the default is `\"[DEFAULT]\"`.\n *\n * @returns The initialized app.\n *\n * @throws If the optional `name` parameter is malformed or empty.\n *\n * @throws If a `FirebaseApp` already exists with the same name but with a different configuration.\n *\n * @public\n */\nexport function initializeApp(\n  options: FirebaseOptions,\n  name?: string\n): FirebaseApp;\n/**\n * Creates and initializes a FirebaseApp instance.\n *\n * @param options - Options to configure the app's services.\n * @param config - FirebaseApp Configuration\n *\n * @throws If {@link FirebaseAppSettings.name} is defined but the value is malformed or empty.\n *\n * @throws If a `FirebaseApp` already exists with the same name but with a different configuration.\n * @public\n */\nexport function initializeApp(\n  options: FirebaseOptions,\n  config?: FirebaseAppSettings\n): FirebaseApp;\n/**\n * Creates and initializes a FirebaseApp instance.\n *\n * @public\n */\nexport function initializeApp(): FirebaseApp;\nexport function initializeApp(\n  _options?: FirebaseOptions,\n  rawConfig = {}\n): FirebaseApp {\n  let options = _options;\n\n  if (typeof rawConfig !== 'object') {\n    const name = rawConfig;\n    rawConfig = { name };\n  }\n\n  const config: Required<FirebaseAppSettings> = {\n    name: DEFAULT_ENTRY_NAME,\n    automaticDataCollectionEnabled: true,\n    ...rawConfig\n  };\n  const name = config.name;\n\n  if (typeof name !== 'string' || !name) {\n    throw ERROR_FACTORY.create(AppError.BAD_APP_NAME, {\n      appName: String(name)\n    });\n  }\n\n  options ||= getDefaultAppConfig();\n\n  if (!options) {\n    throw ERROR_FACTORY.create(AppError.NO_OPTIONS);\n  }\n\n  const existingApp = _apps.get(name) as FirebaseAppImpl;\n  if (existingApp) {\n    // return the existing app if options and config deep equal the ones in the existing app.\n    if (\n      deepEqual(options, existingApp.options) &&\n      deepEqual(config, existingApp.config)\n    ) {\n      return existingApp;\n    } else {\n      throw ERROR_FACTORY.create(AppError.DUPLICATE_APP, { appName: name });\n    }\n  }\n\n  const container = new ComponentContainer(name);\n  for (const component of _components.values()) {\n    container.addComponent(component);\n  }\n\n  const newApp = new FirebaseAppImpl(options, config, container);\n\n  _apps.set(name, newApp);\n\n  return newApp;\n}\n\n/**\n * Creates and initializes a {@link @firebase/app#FirebaseServerApp} instance.\n *\n * The `FirebaseServerApp` is similar to `FirebaseApp`, but is intended for execution in\n * server side rendering environments only. Initialization will fail if invoked from a\n * browser environment.\n *\n * See\n * {@link\n *   https://firebase.google.com/docs/web/setup#add_firebase_to_your_app\n *   | Add Firebase to your app} and\n * {@link\n *   https://firebase.google.com/docs/web/setup#multiple-projects\n *   | Initialize multiple projects} for detailed documentation.\n *\n * @example\n * ```javascript\n *\n * // Initialize an instance of `FirebaseServerApp`.\n * // Retrieve your own options values by adding a web app on\n * // https://console.firebase.google.com\n * initializeServerApp({\n *     apiKey: \"AIza....\",                             // Auth / General Use\n *     authDomain: \"YOUR_APP.firebaseapp.com\",         // Auth with popup/redirect\n *     databaseURL: \"https://YOUR_APP.firebaseio.com\", // Realtime Database\n *     storageBucket: \"YOUR_APP.appspot.com\",          // Storage\n *     messagingSenderId: \"123456789\"                  // Cloud Messaging\n *   },\n *   {\n *    authIdToken: \"Your Auth ID Token\"\n *   });\n * ```\n *\n * @param options - `Firebase.AppOptions` to configure the app's services, or a\n *   a `FirebaseApp` instance which contains the `AppOptions` within.\n * @param config - Optional `FirebaseServerApp` settings.\n *\n * @returns The initialized `FirebaseServerApp`.\n *\n * @throws If invoked in an unsupported non-server environment such as a browser.\n *\n * @throws If {@link FirebaseServerAppSettings.releaseOnDeref} is defined but the runtime doesn't\n *   provide Finalization Registry support.\n *\n * @public\n */\nexport function initializeServerApp(\n  options: FirebaseOptions | FirebaseApp,\n  config?: FirebaseServerAppSettings\n): FirebaseServerApp;\n\n/**\n * Creates and initializes a {@link @firebase/app#FirebaseServerApp} instance.\n *\n * @param config - Optional `FirebaseServerApp` settings.\n *\n * @returns The initialized `FirebaseServerApp`.\n *\n * @throws If invoked in an unsupported non-server environment such as a browser.\n * @throws If {@link FirebaseServerAppSettings.releaseOnDeref} is defined but the runtime doesn't\n *   provide Finalization Registry support.\n * @throws If the `FIREBASE_OPTIONS` environment variable does not contain a valid project\n *   configuration required for auto-initialization.\n *\n * @public\n */\nexport function initializeServerApp(\n  config?: FirebaseServerAppSettings\n): FirebaseServerApp;\nexport function initializeServerApp(\n  _options?: FirebaseApp | FirebaseServerAppSettings | FirebaseOptions,\n  _serverAppConfig: FirebaseServerAppSettings = {}\n): FirebaseServerApp {\n  if (isBrowser() && !isWebWorker()) {\n    // FirebaseServerApp isn't designed to be run in browsers.\n    throw ERROR_FACTORY.create(AppError.INVALID_SERVER_APP_ENVIRONMENT);\n  }\n\n  let firebaseOptions: FirebaseOptions | undefined;\n  let serverAppSettings: FirebaseServerAppSettings = _serverAppConfig || {};\n\n  if (_options) {\n    if (_isFirebaseApp(_options)) {\n      firebaseOptions = _options.options;\n    } else if (_isFirebaseServerAppSettings(_options)) {\n      serverAppSettings = _options;\n    } else {\n      firebaseOptions = _options;\n    }\n  }\n\n  if (serverAppSettings.automaticDataCollectionEnabled === undefined) {\n    serverAppSettings.automaticDataCollectionEnabled = true;\n  }\n\n  firebaseOptions ||= getDefaultAppConfig();\n  if (!firebaseOptions) {\n    throw ERROR_FACTORY.create(AppError.NO_OPTIONS);\n  }\n\n  // Build an app name based on a hash of the configuration options.\n  const nameObj = {\n    ...serverAppSettings,\n    ...firebaseOptions\n  };\n\n  // However, Do not mangle the name based on releaseOnDeref, since it will vary between the\n  // construction of FirebaseServerApp instances. For example, if the object is the request headers.\n  if (nameObj.releaseOnDeref !== undefined) {\n    delete nameObj.releaseOnDeref;\n  }\n\n  const hashCode = (s: string): number => {\n    return [...s].reduce(\n      (hash, c) => (Math.imul(31, hash) + c.charCodeAt(0)) | 0,\n      0\n    );\n  };\n\n  if (serverAppSettings.releaseOnDeref !== undefined) {\n    if (typeof FinalizationRegistry === 'undefined') {\n      throw ERROR_FACTORY.create(\n        AppError.FINALIZATION_REGISTRY_NOT_SUPPORTED,\n        {}\n      );\n    }\n  }\n\n  const nameString = '' + hashCode(JSON.stringify(nameObj));\n  const existingApp = _serverApps.get(nameString) as FirebaseServerApp;\n  if (existingApp) {\n    (existingApp as FirebaseServerAppImpl).incRefCount(\n      serverAppSettings.releaseOnDeref\n    );\n    return existingApp;\n  }\n\n  const container = new ComponentContainer(nameString);\n  for (const component of _components.values()) {\n    container.addComponent(component);\n  }\n\n  const newApp = new FirebaseServerAppImpl(\n    firebaseOptions,\n    serverAppSettings,\n    nameString,\n    container\n  );\n\n  _serverApps.set(nameString, newApp);\n\n  return newApp;\n}\n\n/**\n * Retrieves a {@link @firebase/app#FirebaseApp} instance.\n *\n * When called with no arguments, the default app is returned. When an app name\n * is provided, the app corresponding to that name is returned.\n *\n * An exception is thrown if the app being retrieved has not yet been\n * initialized.\n *\n * @example\n * ```javascript\n * // Return the default app\n * const app = getApp();\n * ```\n *\n * @example\n * ```javascript\n * // Return a named app\n * const otherApp = getApp(\"otherApp\");\n * ```\n *\n * @param name - Optional name of the app to return. If no name is\n *   provided, the default is `\"[DEFAULT]\"`.\n *\n * @returns The app corresponding to the provided app name.\n *   If no app name is provided, the default app is returned.\n *\n * @public\n */\nexport function getApp(name: string = DEFAULT_ENTRY_NAME): FirebaseApp {\n  const app = _apps.get(name);\n  if (!app && name === DEFAULT_ENTRY_NAME && getDefaultAppConfig()) {\n    return initializeApp();\n  }\n  if (!app) {\n    throw ERROR_FACTORY.create(AppError.NO_APP, { appName: name });\n  }\n\n  return app;\n}\n\n/**\n * A (read-only) array of all initialized apps.\n * @public\n */\nexport function getApps(): FirebaseApp[] {\n  return Array.from(_apps.values());\n}\n\n/**\n * Renders this app unusable and frees the resources of all associated\n * services.\n *\n * @example\n * ```javascript\n * deleteApp(app)\n *   .then(function() {\n *     console.log(\"App deleted successfully\");\n *   })\n *   .catch(function(error) {\n *     console.log(\"Error deleting app:\", error);\n *   });\n * ```\n *\n * @public\n */\nexport async function deleteApp(app: FirebaseApp): Promise<void> {\n  let cleanupProviders = false;\n  const name = app.name;\n  if (_apps.has(name)) {\n    cleanupProviders = true;\n    _apps.delete(name);\n  } else if (_serverApps.has(name)) {\n    const firebaseServerApp = app as FirebaseServerAppImpl;\n    if (firebaseServerApp.decRefCount() <= 0) {\n      _serverApps.delete(name);\n      cleanupProviders = true;\n    }\n  }\n\n  if (cleanupProviders) {\n    await Promise.all(\n      (app as FirebaseAppImpl).container\n        .getProviders()\n        .map(provider => provider.delete())\n    );\n    (app as FirebaseAppImpl).isDeleted = true;\n  }\n}\n\n/**\n * Registers a library's name and version for platform logging purposes.\n * @param library - Name of 1p or 3p library (e.g. firestore, angularfire)\n * @param version - Current version of that library.\n * @param variant - Bundle variant, e.g., node, rn, etc.\n *\n * @public\n */\nexport function registerVersion(\n  libraryKeyOrName: string,\n  version: string,\n  variant?: string\n): void {\n  // TODO: We can use this check to whitelist strings when/if we set up\n  // a good whitelist system.\n  let library = PLATFORM_LOG_STRING[libraryKeyOrName] ?? libraryKeyOrName;\n  if (variant) {\n    library += `-${variant}`;\n  }\n  const libraryMismatch = library.match(/\\s|\\//);\n  const versionMismatch = version.match(/\\s|\\//);\n  if (libraryMismatch || versionMismatch) {\n    const warning = [\n      `Unable to register library \"${library}\" with version \"${version}\":`\n    ];\n    if (libraryMismatch) {\n      warning.push(\n        `library name \"${library}\" contains illegal characters (whitespace or \"/\")`\n      );\n    }\n    if (libraryMismatch && versionMismatch) {\n      warning.push('and');\n    }\n    if (versionMismatch) {\n      warning.push(\n        `version name \"${version}\" contains illegal characters (whitespace or \"/\")`\n      );\n    }\n    logger.warn(warning.join(' '));\n    return;\n  }\n  _registerComponent(\n    new Component(\n      `${library}-version` as Name,\n      () => ({ library, version }),\n      ComponentType.VERSION\n    )\n  );\n}\n\n/**\n * Sets log handler for all Firebase SDKs.\n * @param logCallback - An optional custom log handler that executes user code whenever\n * the Firebase SDK makes a logging call.\n *\n * @public\n */\nexport function onLog(\n  logCallback: LogCallback | null,\n  options?: LogOptions\n): void {\n  if (logCallback !== null && typeof logCallback !== 'function') {\n    throw ERROR_FACTORY.create(AppError.INVALID_LOG_ARGUMENT);\n  }\n  setUserLogHandler(logCallback, options);\n}\n\n/**\n * Sets log level for all Firebase SDKs.\n *\n * All of the log types above the current log level are captured (i.e. if\n * you set the log level to `info`, errors are logged, but `debug` and\n * `verbose` logs are not).\n *\n * @public\n */\nexport function setLogLevel(logLevel: LogLevelString): void {\n  setLogLevelImpl(logLevel);\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseError } from '@firebase/util';\nimport { DBSchema, openDB, IDBPDatabase } from 'idb';\nimport { AppError, ERROR_FACTORY } from './errors';\nimport { FirebaseApp } from './public-types';\nimport { HeartbeatsInIndexedDB } from './types';\nimport { logger } from './logger';\n\nconst DB_NAME = 'firebase-heartbeat-database';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'firebase-heartbeat-store';\n\ninterface AppDB extends DBSchema {\n  'firebase-heartbeat-store': {\n    key: string;\n    value: HeartbeatsInIndexedDB;\n  };\n}\n\nlet dbPromise: Promise<IDBPDatabase<AppDB>> | null = null;\nfunction getDbPromise(): Promise<IDBPDatabase<AppDB>> {\n  if (!dbPromise) {\n    dbPromise = openDB<AppDB>(DB_NAME, DB_VERSION, {\n      upgrade: (db, oldVersion) => {\n        // We don't use 'break' in this switch statement, the fall-through\n        // behavior is what we want, because if there are multiple versions between\n        // the old version and the current version, we want ALL the migrations\n        // that correspond to those versions to run, not only the last one.\n        // eslint-disable-next-line default-case\n        switch (oldVersion) {\n          case 0:\n            try {\n              db.createObjectStore(STORE_NAME);\n            } catch (e) {\n              // Safari/iOS browsers throw occasional exceptions on\n              // db.createObjectStore() that may be a bug. Avoid blocking\n              // the rest of the app functionality.\n              console.warn(e);\n            }\n        }\n      }\n    }).catch(e => {\n      throw ERROR_FACTORY.create(AppError.IDB_OPEN, {\n        originalErrorMessage: e.message\n      });\n    });\n  }\n  return dbPromise;\n}\n\nexport async function readHeartbeatsFromIndexedDB(\n  app: FirebaseApp\n): Promise<HeartbeatsInIndexedDB | undefined> {\n  try {\n    const db = await getDbPromise();\n    const tx = db.transaction(STORE_NAME);\n    const result = await tx.objectStore(STORE_NAME).get(computeKey(app));\n    // We already have the value but tx.done can throw,\n    // so we need to await it here to catch errors\n    await tx.done;\n    return result;\n  } catch (e) {\n    if (e instanceof FirebaseError) {\n      logger.warn(e.message);\n    } else {\n      const idbGetError = ERROR_FACTORY.create(AppError.IDB_GET, {\n        originalErrorMessage: (e as Error)?.message\n      });\n      logger.warn(idbGetError.message);\n    }\n  }\n}\n\nexport async function writeHeartbeatsToIndexedDB(\n  app: FirebaseApp,\n  heartbeatObject: HeartbeatsInIndexedDB\n): Promise<void> {\n  try {\n    const db = await getDbPromise();\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const objectStore = tx.objectStore(STORE_NAME);\n    await objectStore.put(heartbeatObject, computeKey(app));\n    await tx.done;\n  } catch (e) {\n    if (e instanceof FirebaseError) {\n      logger.warn(e.message);\n    } else {\n      const idbGetError = ERROR_FACTORY.create(AppError.IDB_WRITE, {\n        originalErrorMessage: (e as Error)?.message\n      });\n      logger.warn(idbGetError.message);\n    }\n  }\n}\n\nfunction computeKey(app: FirebaseApp): string {\n  return `${app.name}!${app.options.appId}`;\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ComponentContainer } from '@firebase/component';\nimport {\n  base64urlEncodeWithoutPadding,\n  isIndexedDBAvailable,\n  validateIndexedDBOpenable\n} from '@firebase/util';\nimport {\n  readHeartbeatsFromIndexedDB,\n  writeHeartbeatsToIndexedDB\n} from './indexeddb';\nimport { FirebaseApp } from './public-types';\nimport {\n  HeartbeatsByUserAgent,\n  HeartbeatService,\n  HeartbeatsInIndexedDB,\n  HeartbeatStorage,\n  SingleDateHeartbeat\n} from './types';\nimport { logger } from './logger';\n\nconst MAX_HEADER_BYTES = 1024;\nexport const MAX_NUM_STORED_HEARTBEATS = 30;\n\nexport class HeartbeatServiceImpl implements HeartbeatService {\n  /**\n   * The persistence layer for heartbeats\n   * Leave public for easier testing.\n   */\n  _storage: HeartbeatStorageImpl;\n\n  /**\n   * In-memory cache for heartbeats, used by getHeartbeatsHeader() to generate\n   * the header string.\n   * Stores one record per date. This will be consolidated into the standard\n   * format of one record per user agent string before being sent as a header.\n   * Populated from indexedDB when the controller is instantiated and should\n   * be kept in sync with indexedDB.\n   * Leave public for easier testing.\n   */\n  _heartbeatsCache: HeartbeatsInIndexedDB | null = null;\n\n  /**\n   * the initialization promise for populating heartbeatCache.\n   * If getHeartbeatsHeader() is called before the promise resolves\n   * (heartbeatsCache == null), it should wait for this promise\n   * Leave public for easier testing.\n   */\n  _heartbeatsCachePromise: Promise<HeartbeatsInIndexedDB>;\n  constructor(private readonly container: ComponentContainer) {\n    const app = this.container.getProvider('app').getImmediate();\n    this._storage = new HeartbeatStorageImpl(app);\n    this._heartbeatsCachePromise = this._storage.read().then(result => {\n      this._heartbeatsCache = result;\n      return result;\n    });\n  }\n\n  /**\n   * Called to report a heartbeat. The function will generate\n   * a HeartbeatsByUserAgent object, update heartbeatsCache, and persist it\n   * to IndexedDB.\n   * Note that we only store one heartbeat per day. So if a heartbeat for today is\n   * already logged, subsequent calls to this function in the same day will be ignored.\n   */\n  async triggerHeartbeat(): Promise<void> {\n    try {\n      const platformLogger = this.container\n        .getProvider('platform-logger')\n        .getImmediate();\n\n      // This is the \"Firebase user agent\" string from the platform logger\n      // service, not the browser user agent.\n      const agent = platformLogger.getPlatformInfoString();\n      const date = getUTCDateString();\n      if (this._heartbeatsCache?.heartbeats == null) {\n        this._heartbeatsCache = await this._heartbeatsCachePromise;\n        // If we failed to construct a heartbeats cache, then return immediately.\n        if (this._heartbeatsCache?.heartbeats == null) {\n          return;\n        }\n      }\n      // Do not store a heartbeat if one is already stored for this day\n      // or if a header has already been sent today.\n      if (\n        this._heartbeatsCache.lastSentHeartbeatDate === date ||\n        this._heartbeatsCache.heartbeats.some(\n          singleDateHeartbeat => singleDateHeartbeat.date === date\n        )\n      ) {\n        return;\n      } else {\n        // There is no entry for this date. Create one.\n        this._heartbeatsCache.heartbeats.push({ date, agent });\n\n        // If the number of stored heartbeats exceeds the maximum number of stored heartbeats, remove the heartbeat with the earliest date.\n        // Since this is executed each time a heartbeat is pushed, the limit can only be exceeded by one, so only one needs to be removed.\n        if (\n          this._heartbeatsCache.heartbeats.length > MAX_NUM_STORED_HEARTBEATS\n        ) {\n          const earliestHeartbeatIdx = getEarliestHeartbeatIdx(\n            this._heartbeatsCache.heartbeats\n          );\n          this._heartbeatsCache.heartbeats.splice(earliestHeartbeatIdx, 1);\n        }\n      }\n\n      return this._storage.overwrite(this._heartbeatsCache);\n    } catch (e) {\n      logger.warn(e);\n    }\n  }\n\n  /**\n   * Returns a base64 encoded string which can be attached to the heartbeat-specific header directly.\n   * It also clears all heartbeats from memory as well as in IndexedDB.\n   *\n   * NOTE: Consuming product SDKs should not send the header if this method\n   * returns an empty string.\n   */\n  async getHeartbeatsHeader(): Promise<string> {\n    try {\n      if (this._heartbeatsCache === null) {\n        await this._heartbeatsCachePromise;\n      }\n      // If it's still null or the array is empty, there is no data to send.\n      if (\n        this._heartbeatsCache?.heartbeats == null ||\n        this._heartbeatsCache.heartbeats.length === 0\n      ) {\n        return '';\n      }\n      const date = getUTCDateString();\n      // Extract as many heartbeats from the cache as will fit under the size limit.\n      const { heartbeatsToSend, unsentEntries } = extractHeartbeatsForHeader(\n        this._heartbeatsCache.heartbeats\n      );\n      const headerString = base64urlEncodeWithoutPadding(\n        JSON.stringify({ version: 2, heartbeats: heartbeatsToSend })\n      );\n      // Store last sent date to prevent another being logged/sent for the same day.\n      this._heartbeatsCache.lastSentHeartbeatDate = date;\n      if (unsentEntries.length > 0) {\n        // Store any unsent entries if they exist.\n        this._heartbeatsCache.heartbeats = unsentEntries;\n        // This seems more likely than emptying the array (below) to lead to some odd state\n        // since the cache isn't empty and this will be called again on the next request,\n        // and is probably safest if we await it.\n        await this._storage.overwrite(this._heartbeatsCache);\n      } else {\n        this._heartbeatsCache.heartbeats = [];\n        // Do not wait for this, to reduce latency.\n        void this._storage.overwrite(this._heartbeatsCache);\n      }\n      return headerString;\n    } catch (e) {\n      logger.warn(e);\n      return '';\n    }\n  }\n}\n\nfunction getUTCDateString(): string {\n  const today = new Date();\n  // Returns date format 'YYYY-MM-DD'\n  return today.toISOString().substring(0, 10);\n}\n\nexport function extractHeartbeatsForHeader(\n  heartbeatsCache: SingleDateHeartbeat[],\n  maxSize = MAX_HEADER_BYTES\n): {\n  heartbeatsToSend: HeartbeatsByUserAgent[];\n  unsentEntries: SingleDateHeartbeat[];\n} {\n  // Heartbeats grouped by user agent in the standard format to be sent in\n  // the header.\n  const heartbeatsToSend: HeartbeatsByUserAgent[] = [];\n  // Single date format heartbeats that are not sent.\n  let unsentEntries = heartbeatsCache.slice();\n  for (const singleDateHeartbeat of heartbeatsCache) {\n    // Look for an existing entry with the same user agent.\n    const heartbeatEntry = heartbeatsToSend.find(\n      hb => hb.agent === singleDateHeartbeat.agent\n    );\n    if (!heartbeatEntry) {\n      // If no entry for this user agent exists, create one.\n      heartbeatsToSend.push({\n        agent: singleDateHeartbeat.agent,\n        dates: [singleDateHeartbeat.date]\n      });\n      if (countBytes(heartbeatsToSend) > maxSize) {\n        // If the header would exceed max size, remove the added heartbeat\n        // entry and stop adding to the header.\n        heartbeatsToSend.pop();\n        break;\n      }\n    } else {\n      heartbeatEntry.dates.push(singleDateHeartbeat.date);\n      // If the header would exceed max size, remove the added date\n      // and stop adding to the header.\n      if (countBytes(heartbeatsToSend) > maxSize) {\n        heartbeatEntry.dates.pop();\n        break;\n      }\n    }\n    // Pop unsent entry from queue. (Skipped if adding the entry exceeded\n    // quota and the loop breaks early.)\n    unsentEntries = unsentEntries.slice(1);\n  }\n  return {\n    heartbeatsToSend,\n    unsentEntries\n  };\n}\n\nexport class HeartbeatStorageImpl implements HeartbeatStorage {\n  private _canUseIndexedDBPromise: Promise<boolean>;\n  constructor(public app: FirebaseApp) {\n    this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck();\n  }\n  async runIndexedDBEnvironmentCheck(): Promise<boolean> {\n    if (!isIndexedDBAvailable()) {\n      return false;\n    } else {\n      return validateIndexedDBOpenable()\n        .then(() => true)\n        .catch(() => false);\n    }\n  }\n  /**\n   * Read all heartbeats.\n   */\n  async read(): Promise<HeartbeatsInIndexedDB> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return { heartbeats: [] };\n    } else {\n      const idbHeartbeatObject = await readHeartbeatsFromIndexedDB(this.app);\n      if (idbHeartbeatObject?.heartbeats) {\n        return idbHeartbeatObject;\n      } else {\n        return { heartbeats: [] };\n      }\n    }\n  }\n  // overwrite the storage with the provided heartbeats\n  async overwrite(heartbeatsObject: HeartbeatsInIndexedDB): Promise<void> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return;\n    } else {\n      const existingHeartbeatsObject = await this.read();\n      return writeHeartbeatsToIndexedDB(this.app, {\n        lastSentHeartbeatDate:\n          heartbeatsObject.lastSentHeartbeatDate ??\n          existingHeartbeatsObject.lastSentHeartbeatDate,\n        heartbeats: heartbeatsObject.heartbeats\n      });\n    }\n  }\n  // add heartbeats\n  async add(heartbeatsObject: HeartbeatsInIndexedDB): Promise<void> {\n    const canUseIndexedDB = await this._canUseIndexedDBPromise;\n    if (!canUseIndexedDB) {\n      return;\n    } else {\n      const existingHeartbeatsObject = await this.read();\n      return writeHeartbeatsToIndexedDB(this.app, {\n        lastSentHeartbeatDate:\n          heartbeatsObject.lastSentHeartbeatDate ??\n          existingHeartbeatsObject.lastSentHeartbeatDate,\n        heartbeats: [\n          ...existingHeartbeatsObject.heartbeats,\n          ...heartbeatsObject.heartbeats\n        ]\n      });\n    }\n  }\n}\n\n/**\n * Calculate bytes of a HeartbeatsByUserAgent array after being wrapped\n * in a platform logging header JSON object, stringified, and converted\n * to base 64.\n */\nexport function countBytes(heartbeatsCache: HeartbeatsByUserAgent[]): number {\n  // base64 has a restricted set of characters, all of which should be 1 byte.\n  return base64urlEncodeWithoutPadding(\n    // heartbeatsCache wrapper properties\n    JSON.stringify({ version: 2, heartbeats: heartbeatsCache })\n  ).length;\n}\n\n/**\n * Returns the index of the heartbeat with the earliest date.\n * If the heartbeats array is empty, -1 is returned.\n */\nexport function getEarliestHeartbeatIdx(\n  heartbeats: SingleDateHeartbeat[]\n): number {\n  if (heartbeats.length === 0) {\n    return -1;\n  }\n\n  let earliestHeartbeatIdx = 0;\n  let earliestHeartbeatDate = heartbeats[0].date;\n\n  for (let i = 1; i < heartbeats.length; i++) {\n    if (heartbeats[i].date < earliestHeartbeatDate) {\n      earliestHeartbeatDate = heartbeats[i].date;\n      earliestHeartbeatIdx = i;\n    }\n  }\n\n  return earliestHeartbeatIdx;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, ComponentType } from '@firebase/component';\nimport { PlatformLoggerServiceImpl } from './platformLoggerService';\nimport { name, version } from '../package.json';\nimport { _registerComponent } from './internal';\nimport { registerVersion } from './api';\nimport { HeartbeatServiceImpl } from './heartbeatService';\n\nexport function registerCoreComponents(variant?: string): void {\n  _registerComponent(\n    new Component(\n      'platform-logger',\n      container => new PlatformLoggerServiceImpl(container),\n      ComponentType.PRIVATE\n    )\n  );\n  _registerComponent(\n    new Component(\n      'heartbeat',\n      container => new HeartbeatServiceImpl(container),\n      ComponentType.PRIVATE\n    )\n  );\n\n  // Register `app` package.\n  registerVersion(name, version, variant);\n  // BUILD_TARGET will be replaced by values like esm, cjs, etc during the compilation\n  registerVersion(name, version, '__BUILD_TARGET__');\n  // Register platform SDK identifier (no version).\n  registerVersion('fire-js', '');\n}\n","/**\n * Firebase App\n *\n * @remarks This package coordinates the communication between the different Firebase components\n * @packageDocumentation\n */\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { registerCoreComponents } from './registerCoreComponents';\n\nexport * from './api';\nexport * from './internal';\nexport * from './public-types';\n\nregisterCoreComponents('__RUNTIME_ENV__');\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerVersion } from '@firebase/app';\nimport { name, version } from '../package.json';\n\nregisterVersion(name, version, 'app');\nexport * from '@firebase/app';\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { version } from '../../package.json';\n\nexport const PENDING_TIMEOUT_MS = 10000;\n\nexport const PACKAGE_VERSION = `w:${version}`;\nexport const INTERNAL_AUTH_VERSION = 'FIS_v2';\n\nexport const INSTALLATIONS_API_URL =\n  'https://firebaseinstallations.googleapis.com/v1';\n\nexport const TOKEN_EXPIRATION_BUFFER = 60 * 60 * 1000; // One hour\n\nexport const SERVICE = 'installations';\nexport const SERVICE_NAME = 'Installations';\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorFactory, FirebaseError } from '@firebase/util';\nimport { SERVICE, SERVICE_NAME } from './constants';\n\nexport const enum ErrorCode {\n  MISSING_APP_CONFIG_VALUES = 'missing-app-config-values',\n  NOT_REGISTERED = 'not-registered',\n  INSTALLATION_NOT_FOUND = 'installation-not-found',\n  REQUEST_FAILED = 'request-failed',\n  APP_OFFLINE = 'app-offline',\n  DELETE_PENDING_REGISTRATION = 'delete-pending-registration'\n}\n\nconst ERROR_DESCRIPTION_MAP: { readonly [key in ErrorCode]: string } = {\n  [ErrorCode.MISSING_APP_CONFIG_VALUES]:\n    'Missing App configuration value: \"{$valueName}\"',\n  [ErrorCode.NOT_REGISTERED]: 'Firebase Installation is not registered.',\n  [ErrorCode.INSTALLATION_NOT_FOUND]: 'Firebase Installation not found.',\n  [ErrorCode.REQUEST_FAILED]:\n    '{$requestName} request failed with error \"{$serverCode} {$serverStatus}: {$serverMessage}\"',\n  [ErrorCode.APP_OFFLINE]: 'Could not process request. Application offline.',\n  [ErrorCode.DELETE_PENDING_REGISTRATION]:\n    \"Can't delete installation while there is a pending registration request.\"\n};\n\ninterface ErrorParams {\n  [ErrorCode.MISSING_APP_CONFIG_VALUES]: {\n    valueName: string;\n  };\n  [ErrorCode.REQUEST_FAILED]: {\n    requestName: string;\n    [index: string]: string | number; // to make TypeScript 3.8 happy\n  } & ServerErrorData;\n}\n\nexport const ERROR_FACTORY = new ErrorFactory<ErrorCode, ErrorParams>(\n  SERVICE,\n  SERVICE_NAME,\n  ERROR_DESCRIPTION_MAP\n);\n\nexport interface ServerErrorData {\n  serverCode: number;\n  serverMessage: string;\n  serverStatus: string;\n}\n\nexport type ServerError = FirebaseError & { customData: ServerErrorData };\n\n/** Returns true if error is a FirebaseError that is based on an error from the server. */\nexport function isServerError(error: unknown): error is ServerError {\n  return (\n    error instanceof FirebaseError &&\n    error.code.includes(ErrorCode.REQUEST_FAILED)\n  );\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseError } from '@firebase/util';\nimport { GenerateAuthTokenResponse } from '../interfaces/api-response';\nimport {\n  CompletedAuthToken,\n  RegisteredInstallationEntry,\n  RequestStatus\n} from '../interfaces/installation-entry';\nimport {\n  INSTALLATIONS_API_URL,\n  INTERNAL_AUTH_VERSION\n} from '../util/constants';\nimport { ERROR_FACTORY, ErrorCode } from '../util/errors';\nimport { AppConfig } from '../interfaces/installation-impl';\n\nexport function getInstallationsEndpoint({ projectId }: AppConfig): string {\n  return `${INSTALLATIONS_API_URL}/projects/${projectId}/installations`;\n}\n\nexport function extractAuthTokenInfoFromResponse(\n  response: GenerateAuthTokenResponse\n): CompletedAuthToken {\n  return {\n    token: response.token,\n    requestStatus: RequestStatus.COMPLETED,\n    expiresIn: getExpiresInFromResponseExpiresIn(response.expiresIn),\n    creationTime: Date.now()\n  };\n}\n\nexport async function getErrorFromResponse(\n  requestName: string,\n  response: Response\n): Promise<FirebaseError> {\n  const responseJson: ErrorResponse = await response.json();\n  const errorData = responseJson.error;\n  return ERROR_FACTORY.create(ErrorCode.REQUEST_FAILED, {\n    requestName,\n    serverCode: errorData.code,\n    serverMessage: errorData.message,\n    serverStatus: errorData.status\n  });\n}\n\nexport function getHeaders({ apiKey }: AppConfig): Headers {\n  return new Headers({\n    'Content-Type': 'application/json',\n    Accept: 'application/json',\n    'x-goog-api-key': apiKey\n  });\n}\n\nexport function getHeadersWithAuth(\n  appConfig: AppConfig,\n  { refreshToken }: RegisteredInstallationEntry\n): Headers {\n  const headers = getHeaders(appConfig);\n  headers.append('Authorization', getAuthorizationHeader(refreshToken));\n  return headers;\n}\n\nexport interface ErrorResponse {\n  error: {\n    code: number;\n    message: string;\n    status: string;\n  };\n}\n\n/**\n * Calls the passed in fetch wrapper and returns the response.\n * If the returned response has a status of 5xx, re-runs the function once and\n * returns the response.\n */\nexport async function retryIfServerError(\n  fn: () => Promise<Response>\n): Promise<Response> {\n  const result = await fn();\n\n  if (result.status >= 500 && result.status < 600) {\n    // Internal Server Error. Retry request.\n    return fn();\n  }\n\n  return result;\n}\n\nfunction getExpiresInFromResponseExpiresIn(responseExpiresIn: string): number {\n  // This works because the server will never respond with fractions of a second.\n  return Number(responseExpiresIn.replace('s', '000'));\n}\n\nfunction getAuthorizationHeader(refreshToken: string): string {\n  return `${INTERNAL_AUTH_VERSION} ${refreshToken}`;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CreateInstallationResponse } from '../interfaces/api-response';\nimport {\n  InProgressInstallationEntry,\n  RegisteredInstallationEntry,\n  RequestStatus\n} from '../interfaces/installation-entry';\nimport { INTERNAL_AUTH_VERSION, PACKAGE_VERSION } from '../util/constants';\nimport {\n  extractAuthTokenInfoFromResponse,\n  getErrorFromResponse,\n  getHeaders,\n  getInstallationsEndpoint,\n  retryIfServerError\n} from './common';\nimport { FirebaseInstallationsImpl } from '../interfaces/installation-impl';\n\nexport async function createInstallationRequest(\n  { appConfig, heartbeatServiceProvider }: FirebaseInstallationsImpl,\n  { fid }: InProgressInstallationEntry\n): Promise<RegisteredInstallationEntry> {\n  const endpoint = getInstallationsEndpoint(appConfig);\n\n  const headers = getHeaders(appConfig);\n\n  // If heartbeat service exists, add the heartbeat string to the header.\n  const heartbeatService = heartbeatServiceProvider.getImmediate({\n    optional: true\n  });\n  if (heartbeatService) {\n    const heartbeatsHeader = await heartbeatService.getHeartbeatsHeader();\n    if (heartbeatsHeader) {\n      headers.append('x-firebase-client', heartbeatsHeader);\n    }\n  }\n\n  const body = {\n    fid,\n    authVersion: INTERNAL_AUTH_VERSION,\n    appId: appConfig.appId,\n    sdkVersion: PACKAGE_VERSION\n  };\n\n  const request: RequestInit = {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(body)\n  };\n\n  const response = await retryIfServerError(() => fetch(endpoint, request));\n  if (response.ok) {\n    const responseValue: CreateInstallationResponse = await response.json();\n    const registeredInstallationEntry: RegisteredInstallationEntry = {\n      fid: responseValue.fid || fid,\n      registrationStatus: RequestStatus.COMPLETED,\n      refreshToken: responseValue.refreshToken,\n      authToken: extractAuthTokenInfoFromResponse(responseValue.authToken)\n    };\n    return registeredInstallationEntry;\n  } else {\n    throw await getErrorFromResponse('Create Installation', response);\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** Returns a promise that resolves after given time passes. */\nexport function sleep(ms: number): Promise<void> {\n  return new Promise<void>(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function bufferToBase64UrlSafe(array: Uint8Array): string {\n  const b64 = btoa(String.fromCharCode(...array));\n  return b64.replace(/\\+/g, '-').replace(/\\//g, '_');\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { bufferToBase64UrlSafe } from './buffer-to-base64-url-safe';\n\nexport const VALID_FID_PATTERN = /^[cdef][\\w-]{21}$/;\nexport const INVALID_FID = '';\n\n/**\n * Generates a new FID using random values from Web Crypto API.\n * Returns an empty string if FID generation fails for any reason.\n */\nexport function generateFid(): string {\n  try {\n    // A valid FID has exactly 22 base64 characters, which is 132 bits, or 16.5\n    // bytes. our implementation generates a 17 byte array instead.\n    const fidByteArray = new Uint8Array(17);\n    const crypto =\n      self.crypto || (self as unknown as { msCrypto: Crypto }).msCrypto;\n    crypto.getRandomValues(fidByteArray);\n\n    // Replace the first 4 random bits with the constant FID header of 0b0111.\n    fidByteArray[0] = 0b01110000 + (fidByteArray[0] % 0b00010000);\n\n    const fid = encode(fidByteArray);\n\n    return VALID_FID_PATTERN.test(fid) ? fid : INVALID_FID;\n  } catch {\n    // FID generation errored\n    return INVALID_FID;\n  }\n}\n\n/** Converts a FID Uint8Array to a base64 string representation. */\nfunction encode(fidByteArray: Uint8Array): string {\n  const b64String = bufferToBase64UrlSafe(fidByteArray);\n\n  // Remove the 23rd character that was added because of the extra 4 bits at the\n  // end of our 17 byte array, and the '=' padding.\n  return b64String.substr(0, 22);\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AppConfig } from '../interfaces/installation-impl';\n\n/** Returns a string key that can be used to identify the app. */\nexport function getKey(appConfig: AppConfig): string {\n  return `${appConfig.appName}!${appConfig.appId}`;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getKey } from '../util/get-key';\nimport { AppConfig } from '../interfaces/installation-impl';\nimport { IdChangeCallbackFn } from '../api';\n\nconst fidChangeCallbacks: Map<string, Set<IdChangeCallbackFn>> = new Map();\n\n/**\n * Calls the onIdChange callbacks with the new FID value, and broadcasts the\n * change to other tabs.\n */\nexport function fidChanged(appConfig: AppConfig, fid: string): void {\n  const key = getKey(appConfig);\n\n  callFidChangeCallbacks(key, fid);\n  broadcastFidChange(key, fid);\n}\n\nexport function addCallback(\n  appConfig: AppConfig,\n  callback: IdChangeCallbackFn\n): void {\n  // Open the broadcast channel if it's not already open,\n  // to be able to listen to change events from other tabs.\n  getBroadcastChannel();\n\n  const key = getKey(appConfig);\n\n  let callbackSet = fidChangeCallbacks.get(key);\n  if (!callbackSet) {\n    callbackSet = new Set();\n    fidChangeCallbacks.set(key, callbackSet);\n  }\n  callbackSet.add(callback);\n}\n\nexport function removeCallback(\n  appConfig: AppConfig,\n  callback: IdChangeCallbackFn\n): void {\n  const key = getKey(appConfig);\n\n  const callbackSet = fidChangeCallbacks.get(key);\n\n  if (!callbackSet) {\n    return;\n  }\n\n  callbackSet.delete(callback);\n  if (callbackSet.size === 0) {\n    fidChangeCallbacks.delete(key);\n  }\n\n  // Close broadcast channel if there are no more callbacks.\n  closeBroadcastChannel();\n}\n\nfunction callFidChangeCallbacks(key: string, fid: string): void {\n  const callbacks = fidChangeCallbacks.get(key);\n  if (!callbacks) {\n    return;\n  }\n\n  for (const callback of callbacks) {\n    callback(fid);\n  }\n}\n\nfunction broadcastFidChange(key: string, fid: string): void {\n  const channel = getBroadcastChannel();\n  if (channel) {\n    channel.postMessage({ key, fid });\n  }\n  closeBroadcastChannel();\n}\n\nlet broadcastChannel: BroadcastChannel | null = null;\n/** Opens and returns a BroadcastChannel if it is supported by the browser. */\nfunction getBroadcastChannel(): BroadcastChannel | null {\n  if (!broadcastChannel && 'BroadcastChannel' in self) {\n    broadcastChannel = new BroadcastChannel('[Firebase] FID Change');\n    broadcastChannel.onmessage = e => {\n      callFidChangeCallbacks(e.data.key, e.data.fid);\n    };\n  }\n  return broadcastChannel;\n}\n\nfunction closeBroadcastChannel(): void {\n  if (fidChangeCallbacks.size === 0 && broadcastChannel) {\n    broadcastChannel.close();\n    broadcastChannel = null;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DBSchema, IDBPDatabase, openDB } from 'idb';\nimport { AppConfig } from '../interfaces/installation-impl';\nimport { InstallationEntry } from '../interfaces/installation-entry';\nimport { getKey } from '../util/get-key';\nimport { fidChanged } from './fid-changed';\n\nconst DATABASE_NAME = 'firebase-installations-database';\nconst DATABASE_VERSION = 1;\nconst OBJECT_STORE_NAME = 'firebase-installations-store';\n\ninterface InstallationsDB extends DBSchema {\n  'firebase-installations-store': {\n    key: string;\n    value: InstallationEntry | undefined;\n  };\n}\n\nlet dbPromise: Promise<IDBPDatabase<InstallationsDB>> | null = null;\nfunction getDbPromise(): Promise<IDBPDatabase<InstallationsDB>> {\n  if (!dbPromise) {\n    dbPromise = openDB(DATABASE_NAME, DATABASE_VERSION, {\n      upgrade: (db, oldVersion) => {\n        // We don't use 'break' in this switch statement, the fall-through\n        // behavior is what we want, because if there are multiple versions between\n        // the old version and the current version, we want ALL the migrations\n        // that correspond to those versions to run, not only the last one.\n        // eslint-disable-next-line default-case\n        switch (oldVersion) {\n          case 0:\n            db.createObjectStore(OBJECT_STORE_NAME);\n        }\n      }\n    });\n  }\n  return dbPromise;\n}\n\n/** Gets record(s) from the objectStore that match the given key. */\nexport async function get(\n  appConfig: AppConfig\n): Promise<InstallationEntry | undefined> {\n  const key = getKey(appConfig);\n  const db = await getDbPromise();\n  return db\n    .transaction(OBJECT_STORE_NAME)\n    .objectStore(OBJECT_STORE_NAME)\n    .get(key) as Promise<InstallationEntry>;\n}\n\n/** Assigns or overwrites the record for the given key with the given value. */\nexport async function set<ValueType extends InstallationEntry>(\n  appConfig: AppConfig,\n  value: ValueType\n): Promise<ValueType> {\n  const key = getKey(appConfig);\n  const db = await getDbPromise();\n  const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n  const objectStore = tx.objectStore(OBJECT_STORE_NAME);\n  const oldValue = (await objectStore.get(key)) as InstallationEntry;\n  await objectStore.put(value, key);\n  await tx.done;\n\n  if (!oldValue || oldValue.fid !== value.fid) {\n    fidChanged(appConfig, value.fid);\n  }\n\n  return value;\n}\n\n/** Removes record(s) from the objectStore that match the given key. */\nexport async function remove(appConfig: AppConfig): Promise<void> {\n  const key = getKey(appConfig);\n  const db = await getDbPromise();\n  const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n  await tx.objectStore(OBJECT_STORE_NAME).delete(key);\n  await tx.done;\n}\n\n/**\n * Atomically updates a record with the result of updateFn, which gets\n * called with the current value. If newValue is undefined, the record is\n * deleted instead.\n * @return Updated value\n */\nexport async function update<ValueType extends InstallationEntry | undefined>(\n  appConfig: AppConfig,\n  updateFn: (previousValue: InstallationEntry | undefined) => ValueType\n): Promise<ValueType> {\n  const key = getKey(appConfig);\n  const db = await getDbPromise();\n  const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n  const store = tx.objectStore(OBJECT_STORE_NAME);\n  const oldValue: InstallationEntry | undefined = (await store.get(\n    key\n  )) as InstallationEntry;\n  const newValue = updateFn(oldValue);\n\n  if (newValue === undefined) {\n    await store.delete(key);\n  } else {\n    await store.put(newValue, key);\n  }\n  await tx.done;\n\n  if (newValue && (!oldValue || oldValue.fid !== newValue.fid)) {\n    fidChanged(appConfig, newValue.fid);\n  }\n\n  return newValue;\n}\n\nexport async function clear(): Promise<void> {\n  const db = await getDbPromise();\n  const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n  await tx.objectStore(OBJECT_STORE_NAME).clear();\n  await tx.done;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createInstallationRequest } from '../functions/create-installation-request';\nimport {\n  AppConfig,\n  FirebaseInstallationsImpl\n} from '../interfaces/installation-impl';\nimport {\n  InProgressInstallationEntry,\n  InstallationEntry,\n  RegisteredInstallationEntry,\n  RequestStatus\n} from '../interfaces/installation-entry';\nimport { PENDING_TIMEOUT_MS } from '../util/constants';\nimport { ERROR_FACTORY, ErrorCode, isServerError } from '../util/errors';\nimport { sleep } from '../util/sleep';\nimport { generateFid, INVALID_FID } from './generate-fid';\nimport { remove, set, update } from './idb-manager';\n\nexport interface InstallationEntryWithRegistrationPromise {\n  installationEntry: InstallationEntry;\n  /** Exist iff the installationEntry is not registered. */\n  registrationPromise?: Promise<RegisteredInstallationEntry>;\n}\n\n/**\n * Updates and returns the InstallationEntry from the database.\n * Also triggers a registration request if it is necessary and possible.\n */\nexport async function getInstallationEntry(\n  installations: FirebaseInstallationsImpl\n): Promise<InstallationEntryWithRegistrationPromise> {\n  let registrationPromise: Promise<RegisteredInstallationEntry> | undefined;\n\n  const installationEntry = await update(installations.appConfig, oldEntry => {\n    const installationEntry = updateOrCreateInstallationEntry(oldEntry);\n    const entryWithPromise = triggerRegistrationIfNecessary(\n      installations,\n      installationEntry\n    );\n    registrationPromise = entryWithPromise.registrationPromise;\n    return entryWithPromise.installationEntry;\n  });\n\n  if (installationEntry.fid === INVALID_FID) {\n    // FID generation failed. Waiting for the FID from the server.\n    return { installationEntry: await registrationPromise! };\n  }\n\n  return {\n    installationEntry,\n    registrationPromise\n  };\n}\n\n/**\n * Creates a new Installation Entry if one does not exist.\n * Also clears timed out pending requests.\n */\nfunction updateOrCreateInstallationEntry(\n  oldEntry: InstallationEntry | undefined\n): InstallationEntry {\n  const entry: InstallationEntry = oldEntry || {\n    fid: generateFid(),\n    registrationStatus: RequestStatus.NOT_STARTED\n  };\n\n  return clearTimedOutRequest(entry);\n}\n\n/**\n * If the Firebase Installation is not registered yet, this will trigger the\n * registration and return an InProgressInstallationEntry.\n *\n * If registrationPromise does not exist, the installationEntry is guaranteed\n * to be registered.\n */\nfunction triggerRegistrationIfNecessary(\n  installations: FirebaseInstallationsImpl,\n  installationEntry: InstallationEntry\n): InstallationEntryWithRegistrationPromise {\n  if (installationEntry.registrationStatus === RequestStatus.NOT_STARTED) {\n    if (!navigator.onLine) {\n      // Registration required but app is offline.\n      const registrationPromiseWithError = Promise.reject(\n        ERROR_FACTORY.create(ErrorCode.APP_OFFLINE)\n      );\n      return {\n        installationEntry,\n        registrationPromise: registrationPromiseWithError\n      };\n    }\n\n    // Try registering. Change status to IN_PROGRESS.\n    const inProgressEntry: InProgressInstallationEntry = {\n      fid: installationEntry.fid,\n      registrationStatus: RequestStatus.IN_PROGRESS,\n      registrationTime: Date.now()\n    };\n    const registrationPromise = registerInstallation(\n      installations,\n      inProgressEntry\n    );\n    return { installationEntry: inProgressEntry, registrationPromise };\n  } else if (\n    installationEntry.registrationStatus === RequestStatus.IN_PROGRESS\n  ) {\n    return {\n      installationEntry,\n      registrationPromise: waitUntilFidRegistration(installations)\n    };\n  } else {\n    return { installationEntry };\n  }\n}\n\n/** This will be executed only once for each new Firebase Installation. */\nasync function registerInstallation(\n  installations: FirebaseInstallationsImpl,\n  installationEntry: InProgressInstallationEntry\n): Promise<RegisteredInstallationEntry> {\n  try {\n    const registeredInstallationEntry = await createInstallationRequest(\n      installations,\n      installationEntry\n    );\n    return set(installations.appConfig, registeredInstallationEntry);\n  } catch (e) {\n    if (isServerError(e) && e.customData.serverCode === 409) {\n      // Server returned a \"FID cannot be used\" error.\n      // Generate a new ID next time.\n      await remove(installations.appConfig);\n    } else {\n      // Registration failed. Set FID as not registered.\n      await set(installations.appConfig, {\n        fid: installationEntry.fid,\n        registrationStatus: RequestStatus.NOT_STARTED\n      });\n    }\n    throw e;\n  }\n}\n\n/** Call if FID registration is pending in another request. */\nasync function waitUntilFidRegistration(\n  installations: FirebaseInstallationsImpl\n): Promise<RegisteredInstallationEntry> {\n  // Unfortunately, there is no way of reliably observing when a value in\n  // IndexedDB changes (yet, see https://github.com/WICG/indexed-db-observers),\n  // so we need to poll.\n\n  let entry: InstallationEntry = await updateInstallationRequest(\n    installations.appConfig\n  );\n  while (entry.registrationStatus === RequestStatus.IN_PROGRESS) {\n    // createInstallation request still in progress.\n    await sleep(100);\n\n    entry = await updateInstallationRequest(installations.appConfig);\n  }\n\n  if (entry.registrationStatus === RequestStatus.NOT_STARTED) {\n    // The request timed out or failed in a different call. Try again.\n    const { installationEntry, registrationPromise } =\n      await getInstallationEntry(installations);\n\n    if (registrationPromise) {\n      return registrationPromise;\n    } else {\n      // if there is no registrationPromise, entry is registered.\n      return installationEntry as RegisteredInstallationEntry;\n    }\n  }\n\n  return entry;\n}\n\n/**\n * Called only if there is a CreateInstallation request in progress.\n *\n * Updates the InstallationEntry in the DB based on the status of the\n * CreateInstallation request.\n *\n * Returns the updated InstallationEntry.\n */\nfunction updateInstallationRequest(\n  appConfig: AppConfig\n): Promise<InstallationEntry> {\n  return update(appConfig, oldEntry => {\n    if (!oldEntry) {\n      throw ERROR_FACTORY.create(ErrorCode.INSTALLATION_NOT_FOUND);\n    }\n    return clearTimedOutRequest(oldEntry);\n  });\n}\n\nfunction clearTimedOutRequest(entry: InstallationEntry): InstallationEntry {\n  if (hasInstallationRequestTimedOut(entry)) {\n    return {\n      fid: entry.fid,\n      registrationStatus: RequestStatus.NOT_STARTED\n    };\n  }\n\n  return entry;\n}\n\nfunction hasInstallationRequestTimedOut(\n  installationEntry: InstallationEntry\n): boolean {\n  return (\n    installationEntry.registrationStatus === RequestStatus.IN_PROGRESS &&\n    installationEntry.registrationTime + PENDING_TIMEOUT_MS < Date.now()\n  );\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GenerateAuthTokenResponse } from '../interfaces/api-response';\nimport {\n  CompletedAuthToken,\n  RegisteredInstallationEntry\n} from '../interfaces/installation-entry';\nimport { PACKAGE_VERSION } from '../util/constants';\nimport {\n  extractAuthTokenInfoFromResponse,\n  getErrorFromResponse,\n  getHeadersWithAuth,\n  getInstallationsEndpoint,\n  retryIfServerError\n} from './common';\nimport {\n  FirebaseInstallationsImpl,\n  AppConfig\n} from '../interfaces/installation-impl';\n\nexport async function generateAuthTokenRequest(\n  { appConfig, heartbeatServiceProvider }: FirebaseInstallationsImpl,\n  installationEntry: RegisteredInstallationEntry\n): Promise<CompletedAuthToken> {\n  const endpoint = getGenerateAuthTokenEndpoint(appConfig, installationEntry);\n\n  const headers = getHeadersWithAuth(appConfig, installationEntry);\n\n  // If heartbeat service exists, add the heartbeat string to the header.\n  const heartbeatService = heartbeatServiceProvider.getImmediate({\n    optional: true\n  });\n  if (heartbeatService) {\n    const heartbeatsHeader = await heartbeatService.getHeartbeatsHeader();\n    if (heartbeatsHeader) {\n      headers.append('x-firebase-client', heartbeatsHeader);\n    }\n  }\n\n  const body = {\n    installation: {\n      sdkVersion: PACKAGE_VERSION,\n      appId: appConfig.appId\n    }\n  };\n\n  const request: RequestInit = {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(body)\n  };\n\n  const response = await retryIfServerError(() => fetch(endpoint, request));\n  if (response.ok) {\n    const responseValue: GenerateAuthTokenResponse = await response.json();\n    const completedAuthToken: CompletedAuthToken =\n      extractAuthTokenInfoFromResponse(responseValue);\n    return completedAuthToken;\n  } else {\n    throw await getErrorFromResponse('Generate Auth Token', response);\n  }\n}\n\nfunction getGenerateAuthTokenEndpoint(\n  appConfig: AppConfig,\n  { fid }: RegisteredInstallationEntry\n): string {\n  return `${getInstallationsEndpoint(appConfig)}/${fid}/authTokens:generate`;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { generateAuthTokenRequest } from '../functions/generate-auth-token-request';\nimport {\n  AppConfig,\n  FirebaseInstallationsImpl\n} from '../interfaces/installation-impl';\nimport {\n  AuthToken,\n  CompletedAuthToken,\n  InProgressAuthToken,\n  InstallationEntry,\n  RegisteredInstallationEntry,\n  RequestStatus\n} from '../interfaces/installation-entry';\nimport { PENDING_TIMEOUT_MS, TOKEN_EXPIRATION_BUFFER } from '../util/constants';\nimport { ERROR_FACTORY, ErrorCode, isServerError } from '../util/errors';\nimport { sleep } from '../util/sleep';\nimport { remove, set, update } from './idb-manager';\n\n/**\n * Returns a valid authentication token for the installation. Generates a new\n * token if one doesn't exist, is expired or about to expire.\n *\n * Should only be called if the Firebase Installation is registered.\n */\nexport async function refreshAuthToken(\n  installations: FirebaseInstallationsImpl,\n  forceRefresh = false\n): Promise<CompletedAuthToken> {\n  let tokenPromise: Promise<CompletedAuthToken> | undefined;\n  const entry = await update(installations.appConfig, oldEntry => {\n    if (!isEntryRegistered(oldEntry)) {\n      throw ERROR_FACTORY.create(ErrorCode.NOT_REGISTERED);\n    }\n\n    const oldAuthToken = oldEntry.authToken;\n    if (!forceRefresh && isAuthTokenValid(oldAuthToken)) {\n      // There is a valid token in the DB.\n      return oldEntry;\n    } else if (oldAuthToken.requestStatus === RequestStatus.IN_PROGRESS) {\n      // There already is a token request in progress.\n      tokenPromise = waitUntilAuthTokenRequest(installations, forceRefresh);\n      return oldEntry;\n    } else {\n      // No token or token expired.\n      if (!navigator.onLine) {\n        throw ERROR_FACTORY.create(ErrorCode.APP_OFFLINE);\n      }\n\n      const inProgressEntry = makeAuthTokenRequestInProgressEntry(oldEntry);\n      tokenPromise = fetchAuthTokenFromServer(installations, inProgressEntry);\n      return inProgressEntry;\n    }\n  });\n\n  const authToken = tokenPromise\n    ? await tokenPromise\n    : (entry.authToken as CompletedAuthToken);\n  return authToken;\n}\n\n/**\n * Call only if FID is registered and Auth Token request is in progress.\n *\n * Waits until the current pending request finishes. If the request times out,\n * tries once in this thread as well.\n */\nasync function waitUntilAuthTokenRequest(\n  installations: FirebaseInstallationsImpl,\n  forceRefresh: boolean\n): Promise<CompletedAuthToken> {\n  // Unfortunately, there is no way of reliably observing when a value in\n  // IndexedDB changes (yet, see https://github.com/WICG/indexed-db-observers),\n  // so we need to poll.\n\n  let entry = await updateAuthTokenRequest(installations.appConfig);\n  while (entry.authToken.requestStatus === RequestStatus.IN_PROGRESS) {\n    // generateAuthToken still in progress.\n    await sleep(100);\n\n    entry = await updateAuthTokenRequest(installations.appConfig);\n  }\n\n  const authToken = entry.authToken;\n  if (authToken.requestStatus === RequestStatus.NOT_STARTED) {\n    // The request timed out or failed in a different call. Try again.\n    return refreshAuthToken(installations, forceRefresh);\n  } else {\n    return authToken;\n  }\n}\n\n/**\n * Called only if there is a GenerateAuthToken request in progress.\n *\n * Updates the InstallationEntry in the DB based on the status of the\n * GenerateAuthToken request.\n *\n * Returns the updated InstallationEntry.\n */\nfunction updateAuthTokenRequest(\n  appConfig: AppConfig\n): Promise<RegisteredInstallationEntry> {\n  return update(appConfig, oldEntry => {\n    if (!isEntryRegistered(oldEntry)) {\n      throw ERROR_FACTORY.create(ErrorCode.NOT_REGISTERED);\n    }\n\n    const oldAuthToken = oldEntry.authToken;\n    if (hasAuthTokenRequestTimedOut(oldAuthToken)) {\n      return {\n        ...oldEntry,\n        authToken: { requestStatus: RequestStatus.NOT_STARTED }\n      };\n    }\n\n    return oldEntry;\n  });\n}\n\nasync function fetchAuthTokenFromServer(\n  installations: FirebaseInstallationsImpl,\n  installationEntry: RegisteredInstallationEntry\n): Promise<CompletedAuthToken> {\n  try {\n    const authToken = await generateAuthTokenRequest(\n      installations,\n      installationEntry\n    );\n    const updatedInstallationEntry: RegisteredInstallationEntry = {\n      ...installationEntry,\n      authToken\n    };\n    await set(installations.appConfig, updatedInstallationEntry);\n    return authToken;\n  } catch (e) {\n    if (\n      isServerError(e) &&\n      (e.customData.serverCode === 401 || e.customData.serverCode === 404)\n    ) {\n      // Server returned a \"FID not found\" or a \"Invalid authentication\" error.\n      // Generate a new ID next time.\n      await remove(installations.appConfig);\n    } else {\n      const updatedInstallationEntry: RegisteredInstallationEntry = {\n        ...installationEntry,\n        authToken: { requestStatus: RequestStatus.NOT_STARTED }\n      };\n      await set(installations.appConfig, updatedInstallationEntry);\n    }\n    throw e;\n  }\n}\n\nfunction isEntryRegistered(\n  installationEntry: InstallationEntry | undefined\n): installationEntry is RegisteredInstallationEntry {\n  return (\n    installationEntry !== undefined &&\n    installationEntry.registrationStatus === RequestStatus.COMPLETED\n  );\n}\n\nfunction isAuthTokenValid(authToken: AuthToken): boolean {\n  return (\n    authToken.requestStatus === RequestStatus.COMPLETED &&\n    !isAuthTokenExpired(authToken)\n  );\n}\n\nfunction isAuthTokenExpired(authToken: CompletedAuthToken): boolean {\n  const now = Date.now();\n  return (\n    now < authToken.creationTime ||\n    authToken.creationTime + authToken.expiresIn < now + TOKEN_EXPIRATION_BUFFER\n  );\n}\n\n/** Returns an updated InstallationEntry with an InProgressAuthToken. */\nfunction makeAuthTokenRequestInProgressEntry(\n  oldEntry: RegisteredInstallationEntry\n): RegisteredInstallationEntry {\n  const inProgressAuthToken: InProgressAuthToken = {\n    requestStatus: RequestStatus.IN_PROGRESS,\n    requestTime: Date.now()\n  };\n  return {\n    ...oldEntry,\n    authToken: inProgressAuthToken\n  };\n}\n\nfunction hasAuthTokenRequestTimedOut(authToken: AuthToken): boolean {\n  return (\n    authToken.requestStatus === RequestStatus.IN_PROGRESS &&\n    authToken.requestTime + PENDING_TIMEOUT_MS < Date.now()\n  );\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getInstallationEntry } from '../helpers/get-installation-entry';\nimport { refreshAuthToken } from '../helpers/refresh-auth-token';\nimport { FirebaseInstallationsImpl } from '../interfaces/installation-impl';\nimport { Installations } from '../interfaces/public-types';\n\n/**\n * Creates a Firebase Installation if there isn't one for the app and\n * returns the Installation ID.\n * @param installations - The `Installations` instance.\n *\n * @public\n */\nexport async function getId(installations: Installations): Promise<string> {\n  const installationsImpl = installations as FirebaseInstallationsImpl;\n  const { installationEntry, registrationPromise } = await getInstallationEntry(\n    installationsImpl\n  );\n\n  if (registrationPromise) {\n    registrationPromise.catch(console.error);\n  } else {\n    // If the installation is already registered, update the authentication\n    // token if needed.\n    refreshAuthToken(installationsImpl).catch(console.error);\n  }\n\n  return installationEntry.fid;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getInstallationEntry } from '../helpers/get-installation-entry';\nimport { refreshAuthToken } from '../helpers/refresh-auth-token';\nimport { FirebaseInstallationsImpl } from '../interfaces/installation-impl';\nimport { Installations } from '../interfaces/public-types';\n\n/**\n * Returns a Firebase Installations auth token, identifying the current\n * Firebase Installation.\n * @param installations - The `Installations` instance.\n * @param forceRefresh - Force refresh regardless of token expiration.\n *\n * @public\n */\nexport async function getToken(\n  installations: Installations,\n  forceRefresh = false\n): Promise<string> {\n  const installationsImpl = installations as FirebaseInstallationsImpl;\n  await completeInstallationRegistration(installationsImpl);\n\n  // At this point we either have a Registered Installation in the DB, or we've\n  // already thrown an error.\n  const authToken = await refreshAuthToken(installationsImpl, forceRefresh);\n  return authToken.token;\n}\n\nasync function completeInstallationRegistration(\n  installations: FirebaseInstallationsImpl\n): Promise<void> {\n  const { registrationPromise } = await getInstallationEntry(installations);\n\n  if (registrationPromise) {\n    // A createInstallation request is in progress. Wait until it finishes.\n    await registrationPromise;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AppConfig } from '../interfaces/installation-impl';\nimport { RegisteredInstallationEntry } from '../interfaces/installation-entry';\nimport {\n  getErrorFromResponse,\n  getHeadersWithAuth,\n  getInstallationsEndpoint,\n  retryIfServerError\n} from './common';\n\nexport async function deleteInstallationRequest(\n  appConfig: AppConfig,\n  installationEntry: RegisteredInstallationEntry\n): Promise<void> {\n  const endpoint = getDeleteEndpoint(appConfig, installationEntry);\n\n  const headers = getHeadersWithAuth(appConfig, installationEntry);\n  const request: RequestInit = {\n    method: 'DELETE',\n    headers\n  };\n\n  const response = await retryIfServerError(() => fetch(endpoint, request));\n  if (!response.ok) {\n    throw await getErrorFromResponse('Delete Installation', response);\n  }\n}\n\nfunction getDeleteEndpoint(\n  appConfig: AppConfig,\n  { fid }: RegisteredInstallationEntry\n): string {\n  return `${getInstallationsEndpoint(appConfig)}/${fid}`;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { deleteInstallationRequest } from '../functions/delete-installation-request';\nimport { remove, update } from '../helpers/idb-manager';\nimport { RequestStatus } from '../interfaces/installation-entry';\nimport { ERROR_FACTORY, ErrorCode } from '../util/errors';\nimport { FirebaseInstallationsImpl } from '../interfaces/installation-impl';\nimport { Installations } from '../interfaces/public-types';\n\n/**\n * Deletes the Firebase Installation and all associated data.\n * @param installations - The `Installations` instance.\n *\n * @public\n */\nexport async function deleteInstallations(\n  installations: Installations\n): Promise<void> {\n  const { appConfig } = installations as FirebaseInstallationsImpl;\n\n  const entry = await update(appConfig, oldEntry => {\n    if (oldEntry && oldEntry.registrationStatus === RequestStatus.NOT_STARTED) {\n      // Delete the unregistered entry without sending a deleteInstallation request.\n      return undefined;\n    }\n    return oldEntry;\n  });\n\n  if (entry) {\n    if (entry.registrationStatus === RequestStatus.IN_PROGRESS) {\n      // Can't delete while trying to register.\n      throw ERROR_FACTORY.create(ErrorCode.DELETE_PENDING_REGISTRATION);\n    } else if (entry.registrationStatus === RequestStatus.COMPLETED) {\n      if (!navigator.onLine) {\n        throw ERROR_FACTORY.create(ErrorCode.APP_OFFLINE);\n      } else {\n        await deleteInstallationRequest(appConfig, entry);\n        await remove(appConfig);\n      }\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { addCallback, removeCallback } from '../helpers/fid-changed';\nimport { FirebaseInstallationsImpl } from '../interfaces/installation-impl';\nimport { Installations } from '../interfaces/public-types';\n\n/**\n * An user defined callback function that gets called when Installations ID changes.\n *\n * @public\n */\nexport type IdChangeCallbackFn = (installationId: string) => void;\n/**\n * Unsubscribe a callback function previously added via {@link IdChangeCallbackFn}.\n *\n * @public\n */\nexport type IdChangeUnsubscribeFn = () => void;\n\n/**\n * Sets a new callback that will get called when Installation ID changes.\n * Returns an unsubscribe function that will remove the callback when called.\n * @param installations - The `Installations` instance.\n * @param callback - The callback function that is invoked when FID changes.\n * @returns A function that can be called to unsubscribe.\n *\n * @public\n */\nexport function onIdChange(\n  installations: Installations,\n  callback: IdChangeCallbackFn\n): IdChangeUnsubscribeFn {\n  const { appConfig } = installations as FirebaseInstallationsImpl;\n\n  addCallback(appConfig, callback);\n  return () => {\n    removeCallback(appConfig, callback);\n  };\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp, getApp, _getProvider } from '@firebase/app';\nimport { Installations } from '../interfaces/public-types';\n\n/**\n * Returns an instance of {@link Installations} associated with the given\n * {@link @firebase/app#FirebaseApp} instance.\n * @param app - The {@link @firebase/app#FirebaseApp} instance.\n *\n * @public\n */\nexport function getInstallations(app: FirebaseApp = getApp()): Installations {\n  const installationsImpl = _getProvider(app, 'installations').getImmediate();\n  return installationsImpl;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp, FirebaseOptions } from '@firebase/app';\nimport { FirebaseError } from '@firebase/util';\nimport { AppConfig } from '../interfaces/installation-impl';\nimport { ERROR_FACTORY, ErrorCode } from '../util/errors';\n\nexport function extractAppConfig(app: FirebaseApp): AppConfig {\n  if (!app || !app.options) {\n    throw getMissingValueError('App Configuration');\n  }\n\n  if (!app.name) {\n    throw getMissingValueError('App Name');\n  }\n\n  // Required app config keys\n  const configKeys: Array<keyof FirebaseOptions> = [\n    'projectId',\n    'apiKey',\n    'appId'\n  ];\n\n  for (const keyName of configKeys) {\n    if (!app.options[keyName]) {\n      throw getMissingValueError(keyName);\n    }\n  }\n\n  return {\n    appName: app.name,\n    projectId: app.options.projectId!,\n    apiKey: app.options.apiKey!,\n    appId: app.options.appId!\n  };\n}\n\nfunction getMissingValueError(valueName: string): FirebaseError {\n  return ERROR_FACTORY.create(ErrorCode.MISSING_APP_CONFIG_VALUES, {\n    valueName\n  });\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { _registerComponent, _getProvider } from '@firebase/app';\nimport {\n  Component,\n  ComponentType,\n  InstanceFactory,\n  ComponentContainer\n} from '@firebase/component';\nimport { getId, getToken } from '../api/index';\nimport { _FirebaseInstallationsInternal } from '../interfaces/public-types';\nimport { FirebaseInstallationsImpl } from '../interfaces/installation-impl';\nimport { extractAppConfig } from '../helpers/extract-app-config';\n\nconst INSTALLATIONS_NAME = 'installations';\nconst INSTALLATIONS_NAME_INTERNAL = 'installations-internal';\n\nconst publicFactory: InstanceFactory<'installations'> = (\n  container: ComponentContainer\n) => {\n  const app = container.getProvider('app').getImmediate();\n  // Throws if app isn't configured properly.\n  const appConfig = extractAppConfig(app);\n  const heartbeatServiceProvider = _getProvider(app, 'heartbeat');\n\n  const installationsImpl: FirebaseInstallationsImpl = {\n    app,\n    appConfig,\n    heartbeatServiceProvider,\n    _delete: () => Promise.resolve()\n  };\n  return installationsImpl;\n};\n\nconst internalFactory: InstanceFactory<'installations-internal'> = (\n  container: ComponentContainer\n) => {\n  const app = container.getProvider('app').getImmediate();\n  // Internal FIS instance relies on public FIS instance.\n  const installations = _getProvider(app, INSTALLATIONS_NAME).getImmediate();\n\n  const installationsInternal: _FirebaseInstallationsInternal = {\n    getId: () => getId(installations),\n    getToken: (forceRefresh?: boolean) => getToken(installations, forceRefresh)\n  };\n  return installationsInternal;\n};\n\nexport function registerInstallations(): void {\n  _registerComponent(\n    new Component(INSTALLATIONS_NAME, publicFactory, ComponentType.PUBLIC)\n  );\n  _registerComponent(\n    new Component(\n      INSTALLATIONS_NAME_INTERNAL,\n      internalFactory,\n      ComponentType.PRIVATE\n    )\n  );\n}\n","/**\n * The Firebase Installations Web SDK.\n * This SDK does not work in a Node.js environment.\n *\n * @packageDocumentation\n */\n\n/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { registerInstallations } from './functions/config';\nimport { registerVersion } from '@firebase/app';\nimport { name, version } from '../package.json';\n\nexport * from './api';\nexport * from './interfaces/public-types';\n\nregisterInstallations();\nregisterVersion(name, version);\n// BUILD_TARGET will be replaced by values like esm, cjs, etc during the compilation\nregisterVersion(name, version, '__BUILD_TARGET__');\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CustomSignals, FetchResponse, FetchType } from '../public_types';\n\n/**\n * Defines a client, as in https://en.wikipedia.org/wiki/Client%E2%80%93server_model, for the\n * Remote Config server (https://firebase.google.com/docs/reference/remote-config/rest).\n *\n * <p>Abstracts throttle, response cache and network implementation details.\n *\n * <p>Modeled after the native {@link GlobalFetch} interface, which is relatively modern and\n * convenient, but simplified for Remote Config's use case.\n *\n * Disambiguation: {@link GlobalFetch} interface and the Remote Config service define \"fetch\"\n * methods. The RestClient uses the former to make HTTP calls. This interface abstracts the latter.\n */\nexport interface RemoteConfigFetchClient {\n  /**\n   * @throws if response status is not 200 or 304.\n   */\n  fetch(request: FetchRequest): Promise<FetchResponse>;\n}\n\n/**\n * Shims a minimal AbortSignal.\n *\n * <p>AbortController's AbortSignal conveniently decouples fetch timeout logic from other aspects\n * of networking, such as retries. Firebase doesn't use AbortController enough to justify a\n * polyfill recommendation, like we do with the Fetch API, but this minimal shim can easily be\n * swapped out if/when we do.\n */\nexport class RemoteConfigAbortSignal {\n  listeners: Array<() => void> = [];\n  addEventListener(listener: () => void): void {\n    this.listeners.push(listener);\n  }\n  abort(): void {\n    this.listeners.forEach(listener => listener());\n  }\n}\n\n/**\n * Defines per-request inputs for the Remote Config fetch request.\n *\n * <p>Modeled after the native {@link Request} interface, but simplified for Remote Config's\n * use case.\n */\nexport interface FetchRequest {\n  /**\n   * Uses cached config if it is younger than this age.\n   *\n   * <p>Required because it's defined by settings, which always have a value.\n   *\n   * <p>Comparable to passing `headers = { 'Cache-Control': max-age <maxAge> }` to the native\n   * Fetch API.\n   */\n  cacheMaxAgeMillis: number;\n\n  /**\n   * An event bus for the signal to abort a request.\n   *\n   * <p>Required because all requests should be abortable.\n   *\n   * <p>Comparable to the native\n   * Fetch API's \"signal\" field on its request configuration object\n   * https://fetch.spec.whatwg.org/#dom-requestinit-signal.\n   *\n   * <p>Disambiguation: Remote Config commonly refers to API inputs as\n   * \"signals\". See the private ConfigFetchRequestBody interface for those:\n   * http://google3/firebase/remote_config/web/src/core/rest_client.ts?l=14&rcl=255515243.\n   */\n  signal: RemoteConfigAbortSignal;\n\n  /**\n   * The ETag header value from the last response.\n   *\n   * <p>Optional in case this is the first request.\n   *\n   * <p>Comparable to passing `headers = { 'If-None-Match': <eTag> }` to the native Fetch API.\n   */\n  eTag?: string;\n\n  /** The custom signals stored for the app instance.\n   *\n   * <p>Optional in case no custom signals are set for the instance.\n   */\n  customSignals?: CustomSignals;\n\n  /**\n   * The type of fetch to perform, such as a regular fetch or a real-time fetch.\n   *\n   * Optional as not all fetch requests need to be distinguished.\n   */\n  fetchType?: FetchType;\n\n  /**\n   * The number of fetch attempts made so far for this request.\n   *\n   * Optional as not all fetch requests are part of a retry series.\n   */\n  fetchAttempt?: number;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const RC_COMPONENT_NAME = 'remote-config';\nexport const RC_CUSTOM_SIGNAL_MAX_ALLOWED_SIGNALS = 100;\nexport const RC_CUSTOM_SIGNAL_KEY_MAX_LENGTH = 250;\nexport const RC_CUSTOM_SIGNAL_VALUE_MAX_LENGTH = 500;\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorFactory, FirebaseError } from '@firebase/util';\n\nexport const enum ErrorCode {\n  ALREADY_INITIALIZED = 'already-initialized',\n  REGISTRATION_WINDOW = 'registration-window',\n  REGISTRATION_PROJECT_ID = 'registration-project-id',\n  REGISTRATION_API_KEY = 'registration-api-key',\n  REGISTRATION_APP_ID = 'registration-app-id',\n  STORAGE_OPEN = 'storage-open',\n  STORAGE_GET = 'storage-get',\n  STORAGE_SET = 'storage-set',\n  STORAGE_DELETE = 'storage-delete',\n  FETCH_NETWORK = 'fetch-client-network',\n  FETCH_TIMEOUT = 'fetch-timeout',\n  FETCH_THROTTLE = 'fetch-throttle',\n  FETCH_PARSE = 'fetch-client-parse',\n  FETCH_STATUS = 'fetch-status',\n  INDEXED_DB_UNAVAILABLE = 'indexed-db-unavailable',\n  CUSTOM_SIGNAL_MAX_ALLOWED_SIGNALS = 'custom-signal-max-allowed-signals',\n  CONFIG_UPDATE_STREAM_ERROR = 'stream-error',\n  CONFIG_UPDATE_UNAVAILABLE = 'realtime-unavailable',\n  CONFIG_UPDATE_MESSAGE_INVALID = 'update-message-invalid',\n  CONFIG_UPDATE_NOT_FETCHED = 'update-not-fetched'\n}\n\nconst ERROR_DESCRIPTION_MAP: { readonly [key in ErrorCode]: string } = {\n  [ErrorCode.ALREADY_INITIALIZED]: 'Remote Config already initialized',\n  [ErrorCode.REGISTRATION_WINDOW]:\n    'Undefined window object. This SDK only supports usage in a browser environment.',\n  [ErrorCode.REGISTRATION_PROJECT_ID]:\n    'Undefined project identifier. Check Firebase app initialization.',\n  [ErrorCode.REGISTRATION_API_KEY]:\n    'Undefined API key. Check Firebase app initialization.',\n  [ErrorCode.REGISTRATION_APP_ID]:\n    'Undefined app identifier. Check Firebase app initialization.',\n  [ErrorCode.STORAGE_OPEN]:\n    'Error thrown when opening storage. Original error: {$originalErrorMessage}.',\n  [ErrorCode.STORAGE_GET]:\n    'Error thrown when reading from storage. Original error: {$originalErrorMessage}.',\n  [ErrorCode.STORAGE_SET]:\n    'Error thrown when writing to storage. Original error: {$originalErrorMessage}.',\n  [ErrorCode.STORAGE_DELETE]:\n    'Error thrown when deleting from storage. Original error: {$originalErrorMessage}.',\n  [ErrorCode.FETCH_NETWORK]:\n    'Fetch client failed to connect to a network. Check Internet connection.' +\n    ' Original error: {$originalErrorMessage}.',\n  [ErrorCode.FETCH_TIMEOUT]:\n    'The config fetch request timed out. ' +\n    ' Configure timeout using \"fetchTimeoutMillis\" SDK setting.',\n  [ErrorCode.FETCH_THROTTLE]:\n    'The config fetch request timed out while in an exponential backoff state.' +\n    ' Configure timeout using \"fetchTimeoutMillis\" SDK setting.' +\n    ' Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',\n  [ErrorCode.FETCH_PARSE]:\n    'Fetch client could not parse response.' +\n    ' Original error: {$originalErrorMessage}.',\n  [ErrorCode.FETCH_STATUS]:\n    'Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.',\n  [ErrorCode.INDEXED_DB_UNAVAILABLE]:\n    'Indexed DB is not supported by current browser',\n  [ErrorCode.CUSTOM_SIGNAL_MAX_ALLOWED_SIGNALS]:\n    'Setting more than {$maxSignals} custom signals is not supported.',\n  [ErrorCode.CONFIG_UPDATE_STREAM_ERROR]:\n    'The stream was not able to connect to the backend: {$originalErrorMessage}.',\n  [ErrorCode.CONFIG_UPDATE_UNAVAILABLE]:\n    'The Realtime service is unavailable: {$originalErrorMessage}',\n  [ErrorCode.CONFIG_UPDATE_MESSAGE_INVALID]:\n    'The stream invalidation message was unparsable: {$originalErrorMessage}',\n  [ErrorCode.CONFIG_UPDATE_NOT_FETCHED]:\n    'Unable to fetch the latest config: {$originalErrorMessage}'\n};\n\n// Note this is effectively a type system binding a code to params. This approach overlaps with the\n// role of TS interfaces, but works well for a few reasons:\n// 1) JS is unaware of TS interfaces, eg we can't test for interface implementation in JS\n// 2) callers should have access to a human-readable summary of the error and this interpolates\n//    params into an error message;\n// 3) callers should be able to programmatically access data associated with an error, which\n//    ErrorData provides.\ninterface ErrorParams {\n  [ErrorCode.STORAGE_OPEN]: { originalErrorMessage: string | undefined };\n  [ErrorCode.STORAGE_GET]: { originalErrorMessage: string | undefined };\n  [ErrorCode.STORAGE_SET]: { originalErrorMessage: string | undefined };\n  [ErrorCode.STORAGE_DELETE]: { originalErrorMessage: string | undefined };\n  [ErrorCode.FETCH_NETWORK]: { originalErrorMessage: string };\n  [ErrorCode.FETCH_THROTTLE]: { throttleEndTimeMillis: number };\n  [ErrorCode.FETCH_PARSE]: { originalErrorMessage: string };\n  [ErrorCode.FETCH_STATUS]: { httpStatus: number };\n  [ErrorCode.CUSTOM_SIGNAL_MAX_ALLOWED_SIGNALS]: { maxSignals: number };\n  [ErrorCode.CONFIG_UPDATE_STREAM_ERROR]: { originalErrorMessage: string };\n  [ErrorCode.CONFIG_UPDATE_UNAVAILABLE]: { originalErrorMessage: string };\n  [ErrorCode.CONFIG_UPDATE_MESSAGE_INVALID]: { originalErrorMessage: string };\n  [ErrorCode.CONFIG_UPDATE_NOT_FETCHED]: { originalErrorMessage: string };\n}\n\nexport const ERROR_FACTORY = new ErrorFactory<ErrorCode, ErrorParams>(\n  'remoteconfig' /* service */,\n  'Remote Config' /* service name */,\n  ERROR_DESCRIPTION_MAP\n);\n\n// Note how this is like typeof/instanceof, but for ErrorCode.\nexport function hasErrorCode(e: Error, errorCode: ErrorCode): boolean {\n  return e instanceof FirebaseError && e.code.indexOf(errorCode) !== -1;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Value as ValueType, ValueSource } from '@firebase/remote-config-types';\n\nconst DEFAULT_VALUE_FOR_BOOLEAN = false;\nconst DEFAULT_VALUE_FOR_STRING = '';\nconst DEFAULT_VALUE_FOR_NUMBER = 0;\n\nconst BOOLEAN_TRUTHY_VALUES = ['1', 'true', 't', 'yes', 'y', 'on'];\n\nexport class Value implements ValueType {\n  constructor(\n    private readonly _source: ValueSource,\n    private readonly _value: string = DEFAULT_VALUE_FOR_STRING\n  ) {}\n\n  asString(): string {\n    return this._value;\n  }\n\n  asBoolean(): boolean {\n    if (this._source === 'static') {\n      return DEFAULT_VALUE_FOR_BOOLEAN;\n    }\n    return BOOLEAN_TRUTHY_VALUES.indexOf(this._value.toLowerCase()) >= 0;\n  }\n\n  asNumber(): number {\n    if (this._source === 'static') {\n      return DEFAULT_VALUE_FOR_NUMBER;\n    }\n    let num = Number(this._value);\n    if (isNaN(num)) {\n      num = DEFAULT_VALUE_FOR_NUMBER;\n    }\n    return num;\n  }\n\n  getSource(): ValueSource {\n    return this._source;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { _getProvider, FirebaseApp, getApp } from '@firebase/app';\nimport { deepEqual, getModularInstance } from '@firebase/util';\nimport {\n  CustomSignals,\n  LogLevel as RemoteConfigLogLevel,\n  RemoteConfig,\n  Value,\n  RemoteConfigOptions,\n  ConfigUpdateObserver,\n  Unsubscribe\n} from './public_types';\nimport { RemoteConfigAbortSignal } from './client/remote_config_fetch_client';\nimport {\n  RC_COMPONENT_NAME,\n  RC_CUSTOM_SIGNAL_KEY_MAX_LENGTH,\n  RC_CUSTOM_SIGNAL_VALUE_MAX_LENGTH\n} from './constants';\nimport { ERROR_FACTORY, ErrorCode, hasErrorCode } from './errors';\nimport { RemoteConfig as RemoteConfigImpl } from './remote_config';\nimport { Value as ValueImpl } from './value';\nimport { LogLevel as FirebaseLogLevel } from '@firebase/logger';\n\n/**\n *\n * @param app - The {@link @firebase/app#FirebaseApp} instance.\n * @param options - Optional. The {@link RemoteConfigOptions} with which to instantiate the\n *     Remote Config instance.\n * @returns A {@link RemoteConfig} instance.\n *\n * @public\n */\nexport function getRemoteConfig(\n  app: FirebaseApp = getApp(),\n  options: RemoteConfigOptions = {}\n): RemoteConfig {\n  app = getModularInstance(app);\n  const rcProvider = _getProvider(app, RC_COMPONENT_NAME);\n  if (rcProvider.isInitialized()) {\n    const initialOptions = rcProvider.getOptions() as RemoteConfigOptions;\n    if (deepEqual(initialOptions, options)) {\n      return rcProvider.getImmediate();\n    }\n    throw ERROR_FACTORY.create(ErrorCode.ALREADY_INITIALIZED);\n  }\n  rcProvider.initialize({ options });\n  const rc = rcProvider.getImmediate() as RemoteConfigImpl;\n\n  if (options.initialFetchResponse) {\n    // We use these initial writes as the initialization promise since they will hydrate the same\n    // fields that `storageCache.loadFromStorage` would set.\n    rc._initializePromise = Promise.all([\n      rc._storage.setLastSuccessfulFetchResponse(options.initialFetchResponse),\n      rc._storage.setActiveConfigEtag(options.initialFetchResponse?.eTag || ''),\n      rc._storage.setActiveConfigTemplateVersion(\n        options.initialFetchResponse.templateVersion || 0\n      ),\n      rc._storageCache.setLastSuccessfulFetchTimestampMillis(Date.now()),\n      rc._storageCache.setLastFetchStatus('success'),\n      rc._storageCache.setActiveConfig(\n        options.initialFetchResponse?.config || {}\n      )\n    ]).then();\n    // The `storageCache` methods above set their in-memory fields synchronously, so it's\n    // safe to declare our initialization complete at this point.\n    rc._isInitializationComplete = true;\n  }\n\n  return rc;\n}\n\n/**\n * Makes the last fetched config available to the getters.\n * @param remoteConfig - The {@link RemoteConfig} instance.\n * @returns A `Promise` which resolves to true if the current call activated the fetched configs.\n * If the fetched configs were already activated, the `Promise` will resolve to false.\n *\n * @public\n */\nexport async function activate(remoteConfig: RemoteConfig): Promise<boolean> {\n  const rc = getModularInstance(remoteConfig) as RemoteConfigImpl;\n  const [lastSuccessfulFetchResponse, activeConfigEtag] = await Promise.all([\n    rc._storage.getLastSuccessfulFetchResponse(),\n    rc._storage.getActiveConfigEtag()\n  ]);\n  if (\n    !lastSuccessfulFetchResponse ||\n    !lastSuccessfulFetchResponse.config ||\n    !lastSuccessfulFetchResponse.eTag ||\n    !lastSuccessfulFetchResponse.templateVersion ||\n    lastSuccessfulFetchResponse.eTag === activeConfigEtag\n  ) {\n    // Either there is no successful fetched config, or is the same as current active\n    // config.\n    return false;\n  }\n  await Promise.all([\n    rc._storageCache.setActiveConfig(lastSuccessfulFetchResponse.config),\n    rc._storage.setActiveConfigEtag(lastSuccessfulFetchResponse.eTag),\n    rc._storage.setActiveConfigTemplateVersion(\n      lastSuccessfulFetchResponse.templateVersion\n    )\n  ]);\n  return true;\n}\n\n/**\n * Ensures the last activated config are available to the getters.\n * @param remoteConfig - The {@link RemoteConfig} instance.\n *\n * @returns A `Promise` that resolves when the last activated config is available to the getters.\n * @public\n */\nexport function ensureInitialized(remoteConfig: RemoteConfig): Promise<void> {\n  const rc = getModularInstance(remoteConfig) as RemoteConfigImpl;\n  if (!rc._initializePromise) {\n    rc._initializePromise = rc._storageCache.loadFromStorage().then(() => {\n      rc._isInitializationComplete = true;\n    });\n  }\n  return rc._initializePromise;\n}\n\n/**\n * Fetches and caches configuration from the Remote Config service.\n * @param remoteConfig - The {@link RemoteConfig} instance.\n * @public\n */\nexport async function fetchConfig(remoteConfig: RemoteConfig): Promise<void> {\n  const rc = getModularInstance(remoteConfig) as RemoteConfigImpl;\n  // Aborts the request after the given timeout, causing the fetch call to\n  // reject with an `AbortError`.\n  //\n  // <p>Aborting after the request completes is a no-op, so we don't need a\n  // corresponding `clearTimeout`.\n  //\n  // Locating abort logic here because:\n  // * it uses a developer setting (timeout)\n  // * it applies to all retries (like curl's max-time arg)\n  // * it is consistent with the Fetch API's signal input\n  const abortSignal = new RemoteConfigAbortSignal();\n\n  setTimeout(async () => {\n    // Note a very low delay, eg < 10ms, can elapse before listeners are initialized.\n    abortSignal.abort();\n  }, rc.settings.fetchTimeoutMillis);\n\n  const customSignals = rc._storageCache.getCustomSignals();\n  if (customSignals) {\n    rc._logger.debug(\n      `Fetching config with custom signals: ${JSON.stringify(customSignals)}`\n    );\n  }\n  // Catches *all* errors thrown by client so status can be set consistently.\n  try {\n    await rc._client.fetch({\n      cacheMaxAgeMillis: rc.settings.minimumFetchIntervalMillis,\n      signal: abortSignal,\n      customSignals\n    });\n\n    await rc._storageCache.setLastFetchStatus('success');\n  } catch (e) {\n    const lastFetchStatus = hasErrorCode(e as Error, ErrorCode.FETCH_THROTTLE)\n      ? 'throttle'\n      : 'failure';\n    await rc._storageCache.setLastFetchStatus(lastFetchStatus);\n    throw e;\n  }\n}\n\n/**\n * Gets all config.\n *\n * @param remoteConfig - The {@link RemoteConfig} instance.\n * @returns All config.\n *\n * @public\n */\nexport function getAll(remoteConfig: RemoteConfig): Record<string, Value> {\n  const rc = getModularInstance(remoteConfig) as RemoteConfigImpl;\n  return getAllKeys(\n    rc._storageCache.getActiveConfig(),\n    rc.defaultConfig\n  ).reduce((allConfigs, key) => {\n    allConfigs[key] = getValue(remoteConfig, key);\n    return allConfigs;\n  }, {} as Record<string, Value>);\n}\n\n/**\n * Gets the value for the given key as a boolean.\n *\n * Convenience method for calling <code>remoteConfig.getValue(key).asBoolean()</code>.\n *\n * @param remoteConfig - The {@link RemoteConfig} instance.\n * @param key - The name of the parameter.\n *\n * @returns The value for the given key as a boolean.\n * @public\n */\nexport function getBoolean(remoteConfig: RemoteConfig, key: string): boolean {\n  return getValue(getModularInstance(remoteConfig), key).asBoolean();\n}\n\n/**\n * Gets the value for the given key as a number.\n *\n * Convenience method for calling <code>remoteConfig.getValue(key).asNumber()</code>.\n *\n * @param remoteConfig - The {@link RemoteConfig} instance.\n * @param key - The name of the parameter.\n *\n * @returns The value for the given key as a number.\n *\n * @public\n */\nexport function getNumber(remoteConfig: RemoteConfig, key: string): number {\n  return getValue(getModularInstance(remoteConfig), key).asNumber();\n}\n\n/**\n * Gets the value for the given key as a string.\n * Convenience method for calling <code>remoteConfig.getValue(key).asString()</code>.\n *\n * @param remoteConfig - The {@link RemoteConfig} instance.\n * @param key - The name of the parameter.\n *\n * @returns The value for the given key as a string.\n *\n * @public\n */\nexport function getString(remoteConfig: RemoteConfig, key: string): string {\n  return getValue(getModularInstance(remoteConfig), key).asString();\n}\n\n/**\n * Gets the {@link Value} for the given key.\n *\n * @param remoteConfig - The {@link RemoteConfig} instance.\n * @param key - The name of the parameter.\n *\n * @returns The value for the given key.\n *\n * @public\n */\nexport function getValue(remoteConfig: RemoteConfig, key: string): Value {\n  const rc = getModularInstance(remoteConfig) as RemoteConfigImpl;\n  if (!rc._isInitializationComplete) {\n    rc._logger.debug(\n      `A value was requested for key \"${key}\" before SDK initialization completed.` +\n        ' Await on ensureInitialized if the intent was to get a previously activated value.'\n    );\n  }\n  const activeConfig = rc._storageCache.getActiveConfig();\n  if (activeConfig && activeConfig[key] !== undefined) {\n    return new ValueImpl('remote', activeConfig[key]);\n  } else if (rc.defaultConfig && rc.defaultConfig[key] !== undefined) {\n    return new ValueImpl('default', String(rc.defaultConfig[key]));\n  }\n  rc._logger.debug(\n    `Returning static value for key \"${key}\".` +\n      ' Define a default or remote value if this is unintentional.'\n  );\n  return new ValueImpl('static');\n}\n\n/**\n * Defines the log level to use.\n *\n * @param remoteConfig - The {@link RemoteConfig} instance.\n * @param logLevel - The log level to set.\n *\n * @public\n */\nexport function setLogLevel(\n  remoteConfig: RemoteConfig,\n  logLevel: RemoteConfigLogLevel\n): void {\n  const rc = getModularInstance(remoteConfig) as RemoteConfigImpl;\n  switch (logLevel) {\n    case 'debug':\n      rc._logger.logLevel = FirebaseLogLevel.DEBUG;\n      break;\n    case 'silent':\n      rc._logger.logLevel = FirebaseLogLevel.SILENT;\n      break;\n    default:\n      rc._logger.logLevel = FirebaseLogLevel.ERROR;\n  }\n}\n\n/**\n * Dedupes and returns an array of all the keys of the received objects.\n */\nfunction getAllKeys(obj1: {} = {}, obj2: {} = {}): string[] {\n  return Object.keys({ ...obj1, ...obj2 });\n}\n\n/**\n * Sets the custom signals for the app instance.\n *\n * @param remoteConfig - The {@link RemoteConfig} instance.\n * @param customSignals - Map (key, value) of the custom signals to be set for the app instance. If\n * a key already exists, the value is overwritten. Setting the value of a custom signal to null\n * unsets the signal. The signals will be persisted locally on the client.\n *\n * @public\n */\nexport async function setCustomSignals(\n  remoteConfig: RemoteConfig,\n  customSignals: CustomSignals\n): Promise<void> {\n  const rc = getModularInstance(remoteConfig) as RemoteConfigImpl;\n  if (Object.keys(customSignals).length === 0) {\n    return;\n  }\n\n  // eslint-disable-next-line guard-for-in\n  for (const key in customSignals) {\n    if (key.length > RC_CUSTOM_SIGNAL_KEY_MAX_LENGTH) {\n      rc._logger.error(\n        `Custom signal key ${key} is too long, max allowed length is ${RC_CUSTOM_SIGNAL_KEY_MAX_LENGTH}.`\n      );\n      return;\n    }\n    const value = customSignals[key];\n    if (\n      typeof value === 'string' &&\n      value.length > RC_CUSTOM_SIGNAL_VALUE_MAX_LENGTH\n    ) {\n      rc._logger.error(\n        `Value supplied for custom signal ${key} is too long, max allowed length is ${RC_CUSTOM_SIGNAL_VALUE_MAX_LENGTH}.`\n      );\n      return;\n    }\n  }\n\n  try {\n    await rc._storageCache.setCustomSignals(customSignals);\n  } catch (error) {\n    rc._logger.error(\n      `Error encountered while setting custom signals: ${error}`\n    );\n  }\n}\n\n// TODO: Add public document for the Remote Config Realtime API guide on the Web Platform.\n/**\n * Starts listening for real-time config updates from the Remote Config backend and automatically\n * fetches updates from the Remote Config backend when they are available.\n *\n * @remarks\n * If a connection to the Remote Config backend is not already open, calling this method will\n * open it. Multiple listeners can be added by calling this method again, but subsequent calls\n * re-use the same connection to the backend.\n *\n * @param remoteConfig - The {@link RemoteConfig} instance.\n * @param observer - The {@link ConfigUpdateObserver} to be notified of config updates.\n * @returns An {@link Unsubscribe} function to remove the listener.\n *\n * @public\n */\nexport function onConfigUpdate(\n  remoteConfig: RemoteConfig,\n  observer: ConfigUpdateObserver\n): Unsubscribe {\n  const rc = getModularInstance(remoteConfig) as RemoteConfigImpl;\n  rc._realtimeHandler.addObserver(observer);\n  return () => {\n    rc._realtimeHandler.removeObserver(observer);\n  };\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { StorageCache } from '../storage/storage_cache';\nimport { FetchResponse } from '../public_types';\nimport {\n  RemoteConfigFetchClient,\n  FetchRequest\n} from './remote_config_fetch_client';\nimport { Storage } from '../storage/storage';\nimport { Logger } from '@firebase/logger';\n\n/**\n * Implements the {@link RemoteConfigClient} abstraction with success response caching.\n *\n * <p>Comparable to the browser's Cache API for responses, but the Cache API requires a Service\n * Worker, which requires HTTPS, which would significantly complicate SDK installation. Also, the\n * Cache API doesn't support matching entries by time.\n */\nexport class CachingClient implements RemoteConfigFetchClient {\n  constructor(\n    private readonly client: RemoteConfigFetchClient,\n    private readonly storage: Storage,\n    private readonly storageCache: StorageCache,\n    private readonly logger: Logger\n  ) {}\n\n  /**\n   * Returns true if the age of the cached fetched configs is less than or equal to\n   * {@link Settings#minimumFetchIntervalInSeconds}.\n   *\n   * <p>This is comparable to passing `headers = { 'Cache-Control': max-age <maxAge> }` to the\n   * native Fetch API.\n   *\n   * <p>Visible for testing.\n   */\n  isCachedDataFresh(\n    cacheMaxAgeMillis: number,\n    lastSuccessfulFetchTimestampMillis: number | undefined\n  ): boolean {\n    // Cache can only be fresh if it's populated.\n    if (!lastSuccessfulFetchTimestampMillis) {\n      this.logger.debug('Config fetch cache check. Cache unpopulated.');\n      return false;\n    }\n\n    // Calculates age of cache entry.\n    const cacheAgeMillis = Date.now() - lastSuccessfulFetchTimestampMillis;\n\n    const isCachedDataFresh = cacheAgeMillis <= cacheMaxAgeMillis;\n\n    this.logger.debug(\n      'Config fetch cache check.' +\n        ` Cache age millis: ${cacheAgeMillis}.` +\n        ` Cache max age millis (minimumFetchIntervalMillis setting): ${cacheMaxAgeMillis}.` +\n        ` Is cache hit: ${isCachedDataFresh}.`\n    );\n\n    return isCachedDataFresh;\n  }\n\n  async fetch(request: FetchRequest): Promise<FetchResponse> {\n    // Reads from persisted storage to avoid cache miss if callers don't wait on initialization.\n    const [lastSuccessfulFetchTimestampMillis, lastSuccessfulFetchResponse] =\n      await Promise.all([\n        this.storage.getLastSuccessfulFetchTimestampMillis(),\n        this.storage.getLastSuccessfulFetchResponse()\n      ]);\n\n    // Exits early on cache hit.\n    if (\n      lastSuccessfulFetchResponse &&\n      this.isCachedDataFresh(\n        request.cacheMaxAgeMillis,\n        lastSuccessfulFetchTimestampMillis\n      )\n    ) {\n      return lastSuccessfulFetchResponse;\n    }\n\n    // Deviates from pure decorator by not honoring a passed ETag since we don't have a public API\n    // that allows the caller to pass an ETag.\n    request.eTag =\n      lastSuccessfulFetchResponse && lastSuccessfulFetchResponse.eTag;\n\n    // Falls back to service on cache miss.\n    const response = await this.client.fetch(request);\n\n    // Fetch throws for non-success responses, so success is guaranteed here.\n\n    const storageOperations = [\n      // Uses write-through cache for consistency with synchronous public API.\n      this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())\n    ];\n\n    if (response.status === 200) {\n      // Caches response only if it has changed, ie non-304 responses.\n      storageOperations.push(\n        this.storage.setLastSuccessfulFetchResponse(response)\n      );\n    }\n\n    await Promise.all(storageOperations);\n\n    return response;\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Attempts to get the most accurate browser language setting.\n *\n * <p>Adapted from getUserLanguage in packages/auth/src/utils.js for TypeScript.\n *\n * <p>Defers default language specification to server logic for consistency.\n *\n * @param navigatorLanguage Enables tests to override read-only {@link NavigatorLanguage}.\n */\nexport function getUserLanguage(\n  navigatorLanguage: NavigatorLanguage = navigator\n): string {\n  return (\n    // Most reliable, but only supported in Chrome/Firefox.\n    (navigatorLanguage.languages && navigatorLanguage.languages[0]) ||\n    // Supported in most browsers, but returns the language of the browser\n    // UI, not the language set in browser settings.\n    navigatorLanguage.language\n    // Polyfill otherwise.\n  );\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  CustomSignals,\n  FetchResponse,\n  FirebaseRemoteConfigObject\n} from '../public_types';\nimport {\n  RemoteConfigFetchClient,\n  FetchRequest\n} from './remote_config_fetch_client';\nimport { ERROR_FACTORY, ErrorCode } from '../errors';\nimport { getUserLanguage } from '../language';\nimport { _FirebaseInstallationsInternal } from '@firebase/installations';\n\n/**\n * Defines request body parameters required to call the fetch API:\n * https://firebase.google.com/docs/reference/remote-config/rest\n *\n * <p>Not exported because this file encapsulates REST API specifics.\n *\n * <p>Not passing User Properties because Analytics' source of truth on Web is server-side.\n */\ninterface FetchRequestBody {\n  // Disables camelcase linting for request body params.\n  /* eslint-disable camelcase*/\n  sdk_version: string;\n  app_instance_id: string;\n  app_instance_id_token: string;\n  app_id: string;\n  language_code: string;\n  custom_signals?: CustomSignals;\n  /* eslint-enable camelcase */\n}\n\n/**\n * Implements the Client abstraction for the Remote Config REST API.\n */\nexport class RestClient implements RemoteConfigFetchClient {\n  constructor(\n    private readonly firebaseInstallations: _FirebaseInstallationsInternal,\n    private readonly sdkVersion: string,\n    private readonly namespace: string,\n    private readonly projectId: string,\n    private readonly apiKey: string,\n    private readonly appId: string\n  ) {}\n\n  /**\n   * Fetches from the Remote Config REST API.\n   *\n   * @throws a {@link ErrorCode.FETCH_NETWORK} error if {@link GlobalFetch#fetch} can't\n   * connect to the network.\n   * @throws a {@link ErrorCode.FETCH_PARSE} error if {@link Response#json} can't parse the\n   * fetch response.\n   * @throws a {@link ErrorCode.FETCH_STATUS} error if the service returns an HTTP error status.\n   */\n  async fetch(request: FetchRequest): Promise<FetchResponse> {\n    const [installationId, installationToken] = await Promise.all([\n      this.firebaseInstallations.getId(),\n      this.firebaseInstallations.getToken()\n    ]);\n\n    const urlBase =\n      window.FIREBASE_REMOTE_CONFIG_URL_BASE ||\n      'https://firebaseremoteconfig.googleapis.com';\n\n    const url = `${urlBase}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`;\n\n    const headers = {\n      'Content-Type': 'application/json',\n      'Content-Encoding': 'gzip',\n      // Deviates from pure decorator by not passing max-age header since we don't currently have\n      // service behavior using that header.\n      'If-None-Match': request.eTag || '*'\n      // TODO: Add this header once CORS error is fixed internally.\n      //'X-Firebase-RC-Fetch-Type': `${fetchType}/${fetchAttempt}`\n    };\n\n    const requestBody: FetchRequestBody = {\n      /* eslint-disable camelcase */\n      sdk_version: this.sdkVersion,\n      app_instance_id: installationId,\n      app_instance_id_token: installationToken,\n      app_id: this.appId,\n      language_code: getUserLanguage(),\n      custom_signals: request.customSignals\n      /* eslint-enable camelcase */\n    };\n\n    const options = {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(requestBody)\n    };\n\n    // This logic isn't REST-specific, but shimming abort logic isn't worth another decorator.\n    const fetchPromise = fetch(url, options);\n    const timeoutPromise = new Promise((_resolve, reject) => {\n      // Maps async event listener to Promise API.\n      request.signal.addEventListener(() => {\n        // Emulates https://heycam.github.io/webidl/#aborterror\n        const error = new Error('The operation was aborted.');\n        error.name = 'AbortError';\n        reject(error);\n      });\n    });\n\n    let response;\n    try {\n      await Promise.race([fetchPromise, timeoutPromise]);\n      response = await fetchPromise;\n    } catch (originalError) {\n      let errorCode = ErrorCode.FETCH_NETWORK;\n      if ((originalError as Error)?.name === 'AbortError') {\n        errorCode = ErrorCode.FETCH_TIMEOUT;\n      }\n      throw ERROR_FACTORY.create(errorCode, {\n        originalErrorMessage: (originalError as Error)?.message\n      });\n    }\n\n    let status = response.status;\n\n    // Normalizes nullable header to optional.\n    const responseEtag = response.headers.get('ETag') || undefined;\n\n    let config: FirebaseRemoteConfigObject | undefined;\n    let state: string | undefined;\n    let templateVersion: number | undefined;\n\n    // JSON parsing throws SyntaxError if the response body isn't a JSON string.\n    // Requesting application/json and checking for a 200 ensures there's JSON data.\n    if (response.status === 200) {\n      let responseBody;\n      try {\n        responseBody = await response.json();\n      } catch (originalError) {\n        throw ERROR_FACTORY.create(ErrorCode.FETCH_PARSE, {\n          originalErrorMessage: (originalError as Error)?.message\n        });\n      }\n      config = responseBody['entries'];\n      state = responseBody['state'];\n      templateVersion = responseBody['templateVersion'];\n    }\n\n    // Normalizes based on legacy state.\n    if (state === 'INSTANCE_STATE_UNSPECIFIED') {\n      status = 500;\n    } else if (state === 'NO_CHANGE') {\n      status = 304;\n    } else if (state === 'NO_TEMPLATE' || state === 'EMPTY_CONFIG') {\n      // These cases can be fixed remotely, so normalize to safe value.\n      config = {};\n    }\n\n    // Normalize to exception-based control flow for non-success cases.\n    // Encapsulates HTTP specifics in this class as much as possible. Status is still the best for\n    // differentiating success states (200 from 304; the state body param is undefined in a\n    // standard 304).\n    if (status !== 304 && status !== 200) {\n      throw ERROR_FACTORY.create(ErrorCode.FETCH_STATUS, {\n        httpStatus: status\n      });\n    }\n\n    return { status, eTag: responseEtag, config, templateVersion };\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FetchResponse } from '../public_types';\nimport {\n  RemoteConfigAbortSignal,\n  RemoteConfigFetchClient,\n  FetchRequest\n} from './remote_config_fetch_client';\nimport { ThrottleMetadata, Storage } from '../storage/storage';\nimport { ErrorCode, ERROR_FACTORY } from '../errors';\nimport { FirebaseError, calculateBackoffMillis } from '@firebase/util';\n\n/**\n * Supports waiting on a backoff by:\n *\n * <ul>\n *   <li>Promisifying setTimeout, so we can set a timeout in our Promise chain</li>\n *   <li>Listening on a signal bus for abort events, just like the Fetch API</li>\n *   <li>Failing in the same way the Fetch API fails, so timing out a live request and a throttled\n *       request appear the same.</li>\n * </ul>\n *\n * <p>Visible for testing.\n */\nexport function setAbortableTimeout(\n  signal: RemoteConfigAbortSignal,\n  throttleEndTimeMillis: number\n): Promise<void> {\n  return new Promise((resolve, reject) => {\n    // Derives backoff from given end time, normalizing negative numbers to zero.\n    const backoffMillis = Math.max(throttleEndTimeMillis - Date.now(), 0);\n\n    const timeout = setTimeout(resolve, backoffMillis);\n\n    // Adds listener, rather than sets onabort, because signal is a shared object.\n    signal.addEventListener(() => {\n      clearTimeout(timeout);\n\n      // If the request completes before this timeout, the rejection has no effect.\n      reject(\n        ERROR_FACTORY.create(ErrorCode.FETCH_THROTTLE, {\n          throttleEndTimeMillis\n        })\n      );\n    });\n  });\n}\n\ntype RetriableError = FirebaseError & { customData: { httpStatus: string } };\n/**\n * Returns true if the {@link Error} indicates a fetch request may succeed later.\n */\nfunction isRetriableError(e: Error): e is RetriableError {\n  if (!(e instanceof FirebaseError) || !e.customData) {\n    return false;\n  }\n\n  // Uses string index defined by ErrorData, which FirebaseError implements.\n  const httpStatus = Number(e.customData['httpStatus']);\n\n  return (\n    httpStatus === 429 ||\n    httpStatus === 500 ||\n    httpStatus === 503 ||\n    httpStatus === 504\n  );\n}\n\n/**\n * Decorates a Client with retry logic.\n *\n * <p>Comparable to CachingClient, but uses backoff logic instead of cache max age and doesn't cache\n * responses (because the SDK has no use for error responses).\n */\nexport class RetryingClient implements RemoteConfigFetchClient {\n  constructor(\n    private readonly client: RemoteConfigFetchClient,\n    private readonly storage: Storage\n  ) {}\n\n  async fetch(request: FetchRequest): Promise<FetchResponse> {\n    const throttleMetadata = (await this.storage.getThrottleMetadata()) || {\n      backoffCount: 0,\n      throttleEndTimeMillis: Date.now()\n    };\n\n    return this.attemptFetch(request, throttleMetadata);\n  }\n\n  /**\n   * A recursive helper for attempting a fetch request repeatedly.\n   *\n   * @throws any non-retriable errors.\n   */\n  async attemptFetch(\n    request: FetchRequest,\n    { throttleEndTimeMillis, backoffCount }: ThrottleMetadata\n  ): Promise<FetchResponse> {\n    // Starts with a (potentially zero) timeout to support resumption from stored state.\n    // Ensures the throttle end time is honored if the last attempt timed out.\n    // Note the SDK will never make a request if the fetch timeout expires at this point.\n    await setAbortableTimeout(request.signal, throttleEndTimeMillis);\n\n    try {\n      const response = await this.client.fetch(request);\n\n      // Note the SDK only clears throttle state if response is success or non-retriable.\n      await this.storage.deleteThrottleMetadata();\n\n      return response;\n    } catch (e) {\n      if (!isRetriableError(e as Error)) {\n        throw e;\n      }\n\n      // Increments backoff state.\n      const throttleMetadata = {\n        throttleEndTimeMillis:\n          Date.now() + calculateBackoffMillis(backoffCount),\n        backoffCount: backoffCount + 1\n      };\n\n      // Persists state.\n      await this.storage.setThrottleMetadata(throttleMetadata);\n\n      return this.attemptFetch(request, throttleMetadata);\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp } from '@firebase/app';\nimport {\n  RemoteConfig as RemoteConfigType,\n  FetchStatus,\n  RemoteConfigSettings\n} from './public_types';\nimport { StorageCache } from './storage/storage_cache';\nimport { RemoteConfigFetchClient } from './client/remote_config_fetch_client';\nimport { Storage } from './storage/storage';\nimport { Logger } from '@firebase/logger';\nimport { RealtimeHandler } from './client/realtime_handler';\n\nconst DEFAULT_FETCH_TIMEOUT_MILLIS = 60 * 1000; // One minute\nconst DEFAULT_CACHE_MAX_AGE_MILLIS = 12 * 60 * 60 * 1000; // Twelve hours.\n\n/**\n * Encapsulates business logic mapping network and storage dependencies to the public SDK API.\n *\n * See {@link https://github.com/firebase/firebase-js-sdk/blob/main/packages/firebase/compat/index.d.ts|interface documentation} for method descriptions.\n */\nexport class RemoteConfig implements RemoteConfigType {\n  /**\n   * Tracks completion of initialization promise.\n   * @internal\n   */\n  _isInitializationComplete = false;\n\n  /**\n   * De-duplicates initialization calls.\n   * @internal\n   */\n  _initializePromise?: Promise<void>;\n\n  settings: RemoteConfigSettings = {\n    fetchTimeoutMillis: DEFAULT_FETCH_TIMEOUT_MILLIS,\n    minimumFetchIntervalMillis: DEFAULT_CACHE_MAX_AGE_MILLIS\n  };\n\n  defaultConfig: { [key: string]: string | number | boolean } = {};\n\n  get fetchTimeMillis(): number {\n    return this._storageCache.getLastSuccessfulFetchTimestampMillis() || -1;\n  }\n\n  get lastFetchStatus(): FetchStatus {\n    return this._storageCache.getLastFetchStatus() || 'no-fetch-yet';\n  }\n\n  constructor(\n    // Required by FirebaseServiceFactory interface.\n    readonly app: FirebaseApp,\n    // JS doesn't support private yet\n    // (https://github.com/tc39/proposal-class-fields#private-fields), so we hint using an\n    // underscore prefix.\n    /**\n     * @internal\n     */\n    readonly _client: RemoteConfigFetchClient,\n    /**\n     * @internal\n     */\n    readonly _storageCache: StorageCache,\n    /**\n     * @internal\n     */\n    readonly _storage: Storage,\n    /**\n     * @internal\n     */\n    readonly _logger: Logger,\n    /**\n     * @internal\n     */\n    readonly _realtimeHandler: RealtimeHandler\n  ) {}\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FetchStatus, CustomSignals } from '@firebase/remote-config-types';\nimport { FetchResponse, FirebaseRemoteConfigObject } from '../public_types';\nimport { ERROR_FACTORY, ErrorCode } from '../errors';\nimport { RC_CUSTOM_SIGNAL_MAX_ALLOWED_SIGNALS } from '../constants';\nimport { FirebaseError } from '@firebase/util';\n\n/**\n * Converts an error event associated with a {@link IDBRequest} to a {@link FirebaseError}.\n */\nfunction toFirebaseError(event: Event, errorCode: ErrorCode): FirebaseError {\n  const originalError = (event.target as IDBRequest).error || undefined;\n  return ERROR_FACTORY.create(errorCode, {\n    originalErrorMessage: originalError && (originalError as Error)?.message\n  });\n}\n\n/**\n * A general-purpose store keyed by app + namespace + {@link\n * ProjectNamespaceKeyFieldValue}.\n *\n * <p>The Remote Config SDK can be used with multiple app installations, and each app can interact\n * with multiple namespaces, so this store uses app (ID + name) and namespace as common parent keys\n * for a set of key-value pairs. See {@link Storage#createCompositeKey}.\n *\n * <p>Visible for testing.\n */\nexport const APP_NAMESPACE_STORE = 'app_namespace_store';\n\nconst DB_NAME = 'firebase_remote_config';\nconst DB_VERSION = 1;\n\n/**\n * Encapsulates metadata concerning throttled fetch requests.\n */\nexport interface ThrottleMetadata {\n  // The number of times fetch has backed off. Used for resuming backoff after a timeout.\n  backoffCount: number;\n  // The Unix timestamp in milliseconds when callers can retry a request.\n  throttleEndTimeMillis: number;\n}\n\nexport interface RealtimeBackoffMetadata {\n  // The number of consecutive connection streams that have failed.\n  numFailedStreams: number;\n  // The Date until which the client should wait before attempting any new real-time connections.\n  backoffEndTimeMillis: Date;\n}\n\n/**\n * Provides type-safety for the \"key\" field used by {@link APP_NAMESPACE_STORE}.\n *\n * <p>This seems like a small price to avoid potentially subtle bugs caused by a typo.\n */\ntype ProjectNamespaceKeyFieldValue =\n  | 'active_config'\n  | 'active_config_etag'\n  | 'last_fetch_status'\n  | 'last_successful_fetch_timestamp_millis'\n  | 'last_successful_fetch_response'\n  | 'settings'\n  | 'throttle_metadata'\n  | 'custom_signals'\n  | 'realtime_backoff_metadata'\n  | 'last_known_template_version';\n\n// Visible for testing.\nexport function openDatabase(): Promise<IDBDatabase> {\n  return new Promise((resolve, reject) => {\n    try {\n      const request = indexedDB.open(DB_NAME, DB_VERSION);\n      request.onerror = event => {\n        reject(toFirebaseError(event, ErrorCode.STORAGE_OPEN));\n      };\n      request.onsuccess = event => {\n        resolve((event.target as IDBOpenDBRequest).result);\n      };\n      request.onupgradeneeded = event => {\n        const db = (event.target as IDBOpenDBRequest).result;\n\n        // We don't use 'break' in this switch statement, the fall-through\n        // behavior is what we want, because if there are multiple versions between\n        // the old version and the current version, we want ALL the migrations\n        // that correspond to those versions to run, not only the last one.\n        // eslint-disable-next-line default-case\n        switch (event.oldVersion) {\n          case 0:\n            db.createObjectStore(APP_NAMESPACE_STORE, {\n              keyPath: 'compositeKey'\n            });\n        }\n      };\n    } catch (error) {\n      reject(\n        ERROR_FACTORY.create(ErrorCode.STORAGE_OPEN, {\n          originalErrorMessage: (error as Error)?.message\n        })\n      );\n    }\n  });\n}\n\n/**\n * Abstracts data persistence.\n */\nexport abstract class Storage {\n  getLastFetchStatus(): Promise<FetchStatus | undefined> {\n    return this.get<FetchStatus>('last_fetch_status');\n  }\n\n  setLastFetchStatus(status: FetchStatus): Promise<void> {\n    return this.set<FetchStatus>('last_fetch_status', status);\n  }\n\n  // This is comparable to a cache entry timestamp. If we need to expire other data, we could\n  // consider adding timestamp to all storage records and an optional max age arg to getters.\n  getLastSuccessfulFetchTimestampMillis(): Promise<number | undefined> {\n    return this.get<number>('last_successful_fetch_timestamp_millis');\n  }\n\n  setLastSuccessfulFetchTimestampMillis(timestamp: number): Promise<void> {\n    return this.set<number>(\n      'last_successful_fetch_timestamp_millis',\n      timestamp\n    );\n  }\n\n  getLastSuccessfulFetchResponse(): Promise<FetchResponse | undefined> {\n    return this.get<FetchResponse>('last_successful_fetch_response');\n  }\n\n  setLastSuccessfulFetchResponse(response: FetchResponse): Promise<void> {\n    return this.set<FetchResponse>('last_successful_fetch_response', response);\n  }\n\n  getActiveConfig(): Promise<FirebaseRemoteConfigObject | undefined> {\n    return this.get<FirebaseRemoteConfigObject>('active_config');\n  }\n\n  setActiveConfig(config: FirebaseRemoteConfigObject): Promise<void> {\n    return this.set<FirebaseRemoteConfigObject>('active_config', config);\n  }\n\n  getActiveConfigEtag(): Promise<string | undefined> {\n    return this.get<string>('active_config_etag');\n  }\n\n  setActiveConfigEtag(etag: string): Promise<void> {\n    return this.set<string>('active_config_etag', etag);\n  }\n\n  getThrottleMetadata(): Promise<ThrottleMetadata | undefined> {\n    return this.get<ThrottleMetadata>('throttle_metadata');\n  }\n\n  setThrottleMetadata(metadata: ThrottleMetadata): Promise<void> {\n    return this.set<ThrottleMetadata>('throttle_metadata', metadata);\n  }\n\n  deleteThrottleMetadata(): Promise<void> {\n    return this.delete('throttle_metadata');\n  }\n\n  getCustomSignals(): Promise<CustomSignals | undefined> {\n    return this.get<CustomSignals>('custom_signals');\n  }\n\n  abstract setCustomSignals(\n    customSignals: CustomSignals\n  ): Promise<CustomSignals>;\n  abstract get<T>(key: ProjectNamespaceKeyFieldValue): Promise<T | undefined>;\n  abstract set<T>(key: ProjectNamespaceKeyFieldValue, value: T): Promise<void>;\n  abstract delete(key: ProjectNamespaceKeyFieldValue): Promise<void>;\n\n  getRealtimeBackoffMetadata(): Promise<RealtimeBackoffMetadata | undefined> {\n    return this.get<RealtimeBackoffMetadata>('realtime_backoff_metadata');\n  }\n\n  setRealtimeBackoffMetadata(\n    realtimeMetadata: RealtimeBackoffMetadata\n  ): Promise<void> {\n    return this.set<RealtimeBackoffMetadata>(\n      'realtime_backoff_metadata',\n      realtimeMetadata\n    );\n  }\n\n  getActiveConfigTemplateVersion(): Promise<number | undefined> {\n    return this.get<number>('last_known_template_version');\n  }\n\n  setActiveConfigTemplateVersion(version: number): Promise<void> {\n    return this.set<number>('last_known_template_version', version);\n  }\n}\n\nexport class IndexedDbStorage extends Storage {\n  /**\n   * @param appId enables storage segmentation by app (ID + name).\n   * @param appName enables storage segmentation by app (ID + name).\n   * @param namespace enables storage segmentation by namespace.\n   */\n  constructor(\n    private readonly appId: string,\n    private readonly appName: string,\n    private readonly namespace: string,\n    private readonly openDbPromise = openDatabase()\n  ) {\n    super();\n  }\n\n  async setCustomSignals(customSignals: CustomSignals): Promise<CustomSignals> {\n    const db = await this.openDbPromise;\n    const transaction = db.transaction([APP_NAMESPACE_STORE], 'readwrite');\n    const storedSignals = await this.getWithTransaction<CustomSignals>(\n      'custom_signals',\n      transaction\n    );\n    const updatedSignals = mergeCustomSignals(\n      customSignals,\n      storedSignals || {}\n    );\n    await this.setWithTransaction<CustomSignals>(\n      'custom_signals',\n      updatedSignals,\n      transaction\n    );\n    return updatedSignals;\n  }\n\n  /**\n   * Gets a value from the database using the provided transaction.\n   *\n   * @param key The key of the value to get.\n   * @param transaction The transaction to use for the operation.\n   * @returns The value associated with the key, or undefined if no such value exists.\n   */\n  async getWithTransaction<T>(\n    key: ProjectNamespaceKeyFieldValue,\n    transaction: IDBTransaction\n  ): Promise<T | undefined> {\n    return new Promise((resolve, reject) => {\n      const objectStore = transaction.objectStore(APP_NAMESPACE_STORE);\n      const compositeKey = this.createCompositeKey(key);\n      try {\n        const request = objectStore.get(compositeKey);\n        request.onerror = event => {\n          reject(toFirebaseError(event, ErrorCode.STORAGE_GET));\n        };\n        request.onsuccess = event => {\n          const result = (event.target as IDBRequest).result;\n          if (result) {\n            resolve(result.value);\n          } else {\n            resolve(undefined);\n          }\n        };\n      } catch (e) {\n        reject(\n          ERROR_FACTORY.create(ErrorCode.STORAGE_GET, {\n            originalErrorMessage: (e as Error)?.message\n          })\n        );\n      }\n    });\n  }\n\n  /**\n   * Sets a value in the database using the provided transaction.\n   *\n   * @param key The key of the value to set.\n   * @param value The value to set.\n   * @param transaction The transaction to use for the operation.\n   * @returns A promise that resolves when the operation is complete.\n   */\n  async setWithTransaction<T>(\n    key: ProjectNamespaceKeyFieldValue,\n    value: T,\n    transaction: IDBTransaction\n  ): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const objectStore = transaction.objectStore(APP_NAMESPACE_STORE);\n      const compositeKey = this.createCompositeKey(key);\n      try {\n        const request = objectStore.put({\n          compositeKey,\n          value\n        });\n        request.onerror = (event: Event) => {\n          reject(toFirebaseError(event, ErrorCode.STORAGE_SET));\n        };\n        request.onsuccess = () => {\n          resolve();\n        };\n      } catch (e) {\n        reject(\n          ERROR_FACTORY.create(ErrorCode.STORAGE_SET, {\n            originalErrorMessage: (e as Error)?.message\n          })\n        );\n      }\n    });\n  }\n\n  async get<T>(key: ProjectNamespaceKeyFieldValue): Promise<T | undefined> {\n    const db = await this.openDbPromise;\n    const transaction = db.transaction([APP_NAMESPACE_STORE], 'readonly');\n    return this.getWithTransaction<T>(key, transaction);\n  }\n\n  async set<T>(key: ProjectNamespaceKeyFieldValue, value: T): Promise<void> {\n    const db = await this.openDbPromise;\n    const transaction = db.transaction([APP_NAMESPACE_STORE], 'readwrite');\n    return this.setWithTransaction<T>(key, value, transaction);\n  }\n\n  async delete(key: ProjectNamespaceKeyFieldValue): Promise<void> {\n    const db = await this.openDbPromise;\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction([APP_NAMESPACE_STORE], 'readwrite');\n      const objectStore = transaction.objectStore(APP_NAMESPACE_STORE);\n      const compositeKey = this.createCompositeKey(key);\n      try {\n        const request = objectStore.delete(compositeKey);\n        request.onerror = (event: Event) => {\n          reject(toFirebaseError(event, ErrorCode.STORAGE_DELETE));\n        };\n        request.onsuccess = () => {\n          resolve();\n        };\n      } catch (e) {\n        reject(\n          ERROR_FACTORY.create(ErrorCode.STORAGE_DELETE, {\n            originalErrorMessage: (e as Error)?.message\n          })\n        );\n      }\n    });\n  }\n\n  // Facilitates composite key functionality (which is unsupported in IE).\n  createCompositeKey(key: ProjectNamespaceKeyFieldValue): string {\n    return [this.appId, this.appName, this.namespace, key].join();\n  }\n}\n\nexport class InMemoryStorage extends Storage {\n  private storage: { [key: string]: unknown } = {};\n\n  async get<T>(key: ProjectNamespaceKeyFieldValue): Promise<T> {\n    return Promise.resolve(this.storage[key] as T);\n  }\n\n  async set<T>(key: ProjectNamespaceKeyFieldValue, value: T): Promise<void> {\n    this.storage[key] = value;\n    return Promise.resolve(undefined);\n  }\n\n  async delete(key: ProjectNamespaceKeyFieldValue): Promise<void> {\n    this.storage[key] = undefined;\n    return Promise.resolve();\n  }\n\n  async setCustomSignals(customSignals: CustomSignals): Promise<CustomSignals> {\n    const storedSignals = (this.storage['custom_signals'] ||\n      {}) as CustomSignals;\n    this.storage['custom_signals'] = mergeCustomSignals(\n      customSignals,\n      storedSignals\n    );\n    return Promise.resolve(this.storage['custom_signals'] as CustomSignals);\n  }\n}\n\nfunction mergeCustomSignals(\n  customSignals: CustomSignals,\n  storedSignals: CustomSignals\n): CustomSignals {\n  const combinedSignals = {\n    ...storedSignals,\n    ...customSignals\n  };\n\n  // Filter out key-value assignments with null values since they are signals being unset\n  const updatedSignals = Object.fromEntries(\n    Object.entries(combinedSignals)\n      .filter(([_, v]) => v !== null)\n      .map(([k, v]) => {\n        // Stringify numbers to store a map of string keys and values which can be sent\n        // as-is in a fetch call.\n        if (typeof v === 'number') {\n          return [k, v.toString()];\n        }\n        return [k, v];\n      })\n  );\n\n  // Throw an error if the number of custom signals to be stored exceeds the limit\n  if (\n    Object.keys(updatedSignals).length > RC_CUSTOM_SIGNAL_MAX_ALLOWED_SIGNALS\n  ) {\n    throw ERROR_FACTORY.create(ErrorCode.CUSTOM_SIGNAL_MAX_ALLOWED_SIGNALS, {\n      maxSignals: RC_CUSTOM_SIGNAL_MAX_ALLOWED_SIGNALS\n    });\n  }\n  return updatedSignals;\n}\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FetchStatus, CustomSignals } from '@firebase/remote-config-types';\nimport { FirebaseRemoteConfigObject } from '../public_types';\nimport { Storage } from './storage';\n\n/**\n * A memory cache layer over storage to support the SDK's synchronous read requirements.\n */\nexport class StorageCache {\n  constructor(private readonly storage: Storage) {}\n\n  /**\n   * Memory caches.\n   */\n  private lastFetchStatus?: FetchStatus;\n  private lastSuccessfulFetchTimestampMillis?: number;\n  private activeConfig?: FirebaseRemoteConfigObject;\n  private customSignals?: CustomSignals;\n\n  /**\n   * Memory-only getters\n   */\n  getLastFetchStatus(): FetchStatus | undefined {\n    return this.lastFetchStatus;\n  }\n\n  getLastSuccessfulFetchTimestampMillis(): number | undefined {\n    return this.lastSuccessfulFetchTimestampMillis;\n  }\n\n  getActiveConfig(): FirebaseRemoteConfigObject | undefined {\n    return this.activeConfig;\n  }\n\n  getCustomSignals(): CustomSignals | undefined {\n    return this.customSignals;\n  }\n\n  /**\n   * Read-ahead getter\n   */\n  async loadFromStorage(): Promise<void> {\n    const lastFetchStatusPromise = this.storage.getLastFetchStatus();\n    const lastSuccessfulFetchTimestampMillisPromise =\n      this.storage.getLastSuccessfulFetchTimestampMillis();\n    const activeConfigPromise = this.storage.getActiveConfig();\n    const customSignalsPromise = this.storage.getCustomSignals();\n\n    // Note:\n    // 1. we consistently check for undefined to avoid clobbering defined values\n    //   in memory\n    // 2. we defer awaiting to improve readability, as opposed to destructuring\n    //   a Promise.all result, for example\n\n    const lastFetchStatus = await lastFetchStatusPromise;\n    if (lastFetchStatus) {\n      this.lastFetchStatus = lastFetchStatus;\n    }\n\n    const lastSuccessfulFetchTimestampMillis =\n      await lastSuccessfulFetchTimestampMillisPromise;\n    if (lastSuccessfulFetchTimestampMillis) {\n      this.lastSuccessfulFetchTimestampMillis =\n        lastSuccessfulFetchTimestampMillis;\n    }\n\n    const activeConfig = await activeConfigPromise;\n    if (activeConfig) {\n      this.activeConfig = activeConfig;\n    }\n\n    const customSignals = await customSignalsPromise;\n    if (customSignals) {\n      this.customSignals = customSignals;\n    }\n  }\n\n  /**\n   * Write-through setters\n   */\n  setLastFetchStatus(status: FetchStatus): Promise<void> {\n    this.lastFetchStatus = status;\n    return this.storage.setLastFetchStatus(status);\n  }\n\n  setLastSuccessfulFetchTimestampMillis(\n    timestampMillis: number\n  ): Promise<void> {\n    this.lastSuccessfulFetchTimestampMillis = timestampMillis;\n    return this.storage.setLastSuccessfulFetchTimestampMillis(timestampMillis);\n  }\n\n  setActiveConfig(activeConfig: FirebaseRemoteConfigObject): Promise<void> {\n    this.activeConfig = activeConfig;\n    return this.storage.setActiveConfig(activeConfig);\n  }\n\n  async setCustomSignals(customSignals: CustomSignals): Promise<void> {\n    this.customSignals = await this.storage.setCustomSignals(customSignals);\n  }\n}\n","/**\n * @license\n * Copyright 2025 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\n// TODO: Consolidate the Visibility monitoring API code into a shared utility function in firebase/util to be used by both packages/database and packages/remote-config.\n/**\n * Base class to be used if you want to emit events. Call the constructor with\n * the set of allowed event names.\n */\nexport abstract class EventEmitter {\n  private listeners_: {\n    [eventType: string]: Array<{\n      callback(...args: unknown[]): void;\n      context: unknown;\n    }>;\n  } = {};\n\n  constructor(private allowedEvents_: string[]) {\n    assert(\n      Array.isArray(allowedEvents_) && allowedEvents_.length > 0,\n      'Requires a non-empty array'\n    );\n  }\n\n  /**\n   * To be overridden by derived classes in order to fire an initial event when\n   * somebody subscribes for data.\n   *\n   * @returns {Array.<*>} Array of parameters to trigger initial event with.\n   */\n  abstract getInitialEvent(eventType: string): unknown[];\n\n  /**\n   * To be called by derived classes to trigger events.\n   */\n  protected trigger(eventType: string, ...varArgs: unknown[]): void {\n    if (Array.isArray(this.listeners_[eventType])) {\n      // Clone the list, since callbacks could add/remove listeners.\n      const listeners = [...this.listeners_[eventType]];\n\n      for (let i = 0; i < listeners.length; i++) {\n        listeners[i].callback.apply(listeners[i].context, varArgs);\n      }\n    }\n  }\n\n  on(\n    eventType: string,\n    callback: (a: unknown) => void,\n    context: unknown\n  ): void {\n    this.validateEventType_(eventType);\n    this.listeners_[eventType] = this.listeners_[eventType] || [];\n    this.listeners_[eventType].push({ callback, context });\n\n    const eventData = this.getInitialEvent(eventType);\n    if (eventData) {\n      //@ts-ignore\n      callback.apply(context, eventData);\n    }\n  }\n\n  off(\n    eventType: string,\n    callback: (a: unknown) => void,\n    context: unknown\n  ): void {\n    this.validateEventType_(eventType);\n    const listeners = this.listeners_[eventType] || [];\n    for (let i = 0; i < listeners.length; i++) {\n      if (\n        listeners[i].callback === callback &&\n        (!context || context === listeners[i].context)\n      ) {\n        listeners.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  private validateEventType_(eventType: string): void {\n    assert(\n      this.allowedEvents_.find(et => {\n        return et === eventType;\n      }),\n      'Unknown event: ' + eventType\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2025 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert } from '@firebase/util';\n\nimport { EventEmitter } from './eventEmitter';\n\ndeclare const document: Document;\n\n// TODO: Consolidate the Visibility monitoring API code into a shared utility function in firebase/util to be used by both packages/database and packages/remote-config.\nexport class VisibilityMonitor extends EventEmitter {\n  private visible_: boolean;\n\n  static getInstance(): VisibilityMonitor {\n    return new VisibilityMonitor();\n  }\n\n  constructor() {\n    super(['visible']);\n    let hidden: string;\n    let visibilityChange: string;\n    if (\n      typeof document !== 'undefined' &&\n      typeof document.addEventListener !== 'undefined'\n    ) {\n      if (typeof document['hidden'] !== 'undefined') {\n        // Opera 12.10 and Firefox 18 and later support\n        visibilityChange = 'visibilitychange';\n        hidden = 'hidden';\n      } // @ts-ignore\n      else if (typeof document['mozHidden'] !== 'undefined') {\n        visibilityChange = 'mozvisibilitychange';\n        hidden = 'mozHidden';\n      } // @ts-ignore\n      else if (typeof document['msHidden'] !== 'undefined') {\n        visibilityChange = 'msvisibilitychange';\n        hidden = 'msHidden';\n      } // @ts-ignore\n      else if (typeof document['webkitHidden'] !== 'undefined') {\n        visibilityChange = 'webkitvisibilitychange';\n        hidden = 'webkitHidden';\n      }\n    }\n\n    // Initially, we always assume we are visible. This ensures that in browsers\n    // without page visibility support or in cases where we are never visible\n    // (e.g. chrome extension), we act as if we are visible, i.e. don't delay\n    // reconnects\n    this.visible_ = true;\n\n    // @ts-ignore\n    if (visibilityChange) {\n      document.addEventListener(\n        visibilityChange,\n        () => {\n          // @ts-ignore\n          const visible = !document[hidden];\n          if (visible !== this.visible_) {\n            this.visible_ = visible;\n            this.trigger('visible', visible);\n          }\n        },\n        false\n      );\n    }\n  }\n\n  getInitialEvent(eventType: string): boolean[] {\n    assert(eventType === 'visible', 'Unknown event type: ' + eventType);\n    return [this.visible_];\n  }\n}\n","/**\n * @license\n * Copyright 2025 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { _FirebaseInstallationsInternal } from '@firebase/installations';\nimport { Logger } from '@firebase/logger';\nimport {\n  ConfigUpdate,\n  ConfigUpdateObserver,\n  FetchResponse,\n  FirebaseRemoteConfigObject\n} from '../public_types';\nimport { calculateBackoffMillis, FirebaseError } from '@firebase/util';\nimport { ERROR_FACTORY, ErrorCode } from '../errors';\nimport { Storage } from '../storage/storage';\nimport { VisibilityMonitor } from './visibility_monitor';\nimport { StorageCache } from '../storage/storage_cache';\nimport {\n  FetchRequest,\n  RemoteConfigAbortSignal\n} from './remote_config_fetch_client';\nimport { CachingClient } from './caching_client';\n\nconst API_KEY_HEADER = 'X-Goog-Api-Key';\nconst INSTALLATIONS_AUTH_TOKEN_HEADER = 'X-Goog-Firebase-Installations-Auth';\nconst ORIGINAL_RETRIES = 8;\nconst MAXIMUM_FETCH_ATTEMPTS = 3;\nconst NO_BACKOFF_TIME_IN_MILLIS = -1;\nconst NO_FAILED_REALTIME_STREAMS = 0;\nconst REALTIME_DISABLED_KEY = 'featureDisabled';\nconst REALTIME_RETRY_INTERVAL = 'retryIntervalSeconds';\nconst TEMPLATE_VERSION_KEY = 'latestTemplateVersionNumber';\n\nexport class RealtimeHandler {\n  constructor(\n    private readonly firebaseInstallations: _FirebaseInstallationsInternal,\n    private readonly storage: Storage,\n    private readonly sdkVersion: string,\n    private readonly namespace: string,\n    private readonly projectId: string,\n    private readonly apiKey: string,\n    private readonly appId: string,\n    private readonly logger: Logger,\n    private readonly storageCache: StorageCache,\n    private readonly cachingClient: CachingClient\n  ) {\n    void this.setRetriesRemaining();\n    void VisibilityMonitor.getInstance().on(\n      'visible',\n      this.onVisibilityChange,\n      this\n    );\n  }\n\n  private observers: Set<ConfigUpdateObserver> =\n    new Set<ConfigUpdateObserver>();\n  private isConnectionActive: boolean = false;\n  private isRealtimeDisabled: boolean = false;\n  private controller?: AbortController;\n  private reader: ReadableStreamDefaultReader<Uint8Array> | undefined;\n  private httpRetriesRemaining: number = ORIGINAL_RETRIES;\n  private isInBackground: boolean = false;\n  private readonly decoder = new TextDecoder('utf-8');\n  private isClosingConnection: boolean = false;\n\n  private async setRetriesRemaining(): Promise<void> {\n    // Retrieve number of remaining retries from last session. The minimum retry count being one.\n    const metadata = await this.storage.getRealtimeBackoffMetadata();\n    const numFailedStreams = metadata?.numFailedStreams || 0;\n    this.httpRetriesRemaining = Math.max(\n      ORIGINAL_RETRIES - numFailedStreams,\n      1\n    );\n  }\n\n  private propagateError = (e: FirebaseError): void =>\n    this.observers.forEach(o => o.error?.(e));\n\n  /**\n   * Increment the number of failed stream attempts, increase the backoff duration, set the backoff\n   * end time to \"backoff duration\" after `lastFailedStreamTime` and persist the new\n   * values to storage metadata.\n   */\n  private async updateBackoffMetadataWithLastFailedStreamConnectionTime(\n    lastFailedStreamTime: Date\n  ): Promise<void> {\n    const numFailedStreams =\n      ((await this.storage.getRealtimeBackoffMetadata())?.numFailedStreams ||\n        0) + 1;\n    const backoffMillis = calculateBackoffMillis(numFailedStreams, 60000, 2);\n    await this.storage.setRealtimeBackoffMetadata({\n      backoffEndTimeMillis: new Date(\n        lastFailedStreamTime.getTime() + backoffMillis\n      ),\n      numFailedStreams\n    });\n  }\n\n  /**\n   * Increase the backoff duration with a new end time based on Retry Interval.\n   */\n  private async updateBackoffMetadataWithRetryInterval(\n    retryIntervalSeconds: number\n  ): Promise<void> {\n    const currentTime = Date.now();\n    const backoffDurationInMillis = retryIntervalSeconds * 1000;\n    const backoffEndTime = new Date(currentTime + backoffDurationInMillis);\n    const numFailedStreams = 0;\n    await this.storage.setRealtimeBackoffMetadata({\n      backoffEndTimeMillis: backoffEndTime,\n      numFailedStreams\n    });\n    await this.retryHttpConnectionWhenBackoffEnds();\n  }\n\n  /**\n   * HTTP status code that the Realtime client should retry on.\n   */\n  private isStatusCodeRetryable = (statusCode?: number): boolean => {\n    const retryableStatusCodes = [\n      408, // Request Timeout\n      429, // Too Many Requests\n      502, // Bad Gateway\n      503, // Service Unavailable\n      504 // Gateway Timeout\n    ];\n    return !statusCode || retryableStatusCodes.includes(statusCode);\n  };\n\n  /**\n   * Closes the realtime HTTP connection.\n   * Note: This method is designed to be called only once at a time.\n   * If a call is already in progress, subsequent calls will be ignored.\n   */\n  private async closeRealtimeHttpConnection(): Promise<void> {\n    if (this.isClosingConnection) {\n      return;\n    }\n    this.isClosingConnection = true;\n\n    try {\n      if (this.reader) {\n        await this.reader.cancel();\n      }\n    } catch (e) {\n      // The network connection was lost, so cancel() failed.\n      // This is expected in a disconnected state, so we can safely ignore the error.\n      this.logger.debug('Failed to cancel the reader, connection was lost.');\n    } finally {\n      this.reader = undefined;\n    }\n\n    if (this.controller) {\n      await this.controller.abort();\n      this.controller = undefined;\n    }\n\n    this.isClosingConnection = false;\n  }\n\n  private async resetRealtimeBackoff(): Promise<void> {\n    await this.storage.setRealtimeBackoffMetadata({\n      backoffEndTimeMillis: new Date(-1),\n      numFailedStreams: 0\n    });\n  }\n\n  private resetRetryCount(): void {\n    this.httpRetriesRemaining = ORIGINAL_RETRIES;\n  }\n\n  /**\n   * Assembles the request headers and body and executes the fetch request to\n   * establish the real-time streaming connection. This is the \"worker\" method\n   * that performs the actual network communication.\n   */\n  private async establishRealtimeConnection(\n    url: URL,\n    installationId: string,\n    installationTokenResult: string,\n    signal: AbortSignal\n  ): Promise<Response> {\n    const eTagValue = await this.storage.getActiveConfigEtag();\n    const lastKnownVersionNumber =\n      await this.storage.getActiveConfigTemplateVersion();\n\n    const headers = {\n      [API_KEY_HEADER]: this.apiKey,\n      [INSTALLATIONS_AUTH_TOKEN_HEADER]: installationTokenResult,\n      'Content-Type': 'application/json',\n      'Accept': 'application/json',\n      'If-None-Match': eTagValue || '*',\n      'Content-Encoding': 'gzip'\n    };\n\n    const requestBody = {\n      project: this.projectId,\n      namespace: this.namespace,\n      lastKnownVersionNumber,\n      appId: this.appId,\n      sdkVersion: this.sdkVersion,\n      appInstanceId: installationId\n    };\n\n    const response = await fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(requestBody),\n      signal\n    });\n    return response;\n  }\n\n  private getRealtimeUrl(): URL {\n    const urlBase =\n      window.FIREBASE_REMOTE_CONFIG_URL_BASE ||\n      'https://firebaseremoteconfigrealtime.googleapis.com';\n\n    const urlString = `${urlBase}/v1/projects/${this.projectId}/namespaces/${this.namespace}:streamFetchInvalidations?key=${this.apiKey}`;\n    return new URL(urlString);\n  }\n\n  private async createRealtimeConnection(): Promise<Response> {\n    const [installationId, installationTokenResult] = await Promise.all([\n      this.firebaseInstallations.getId(),\n      this.firebaseInstallations.getToken(false)\n    ]);\n    this.controller = new AbortController();\n    const url = this.getRealtimeUrl();\n    const realtimeConnection = await this.establishRealtimeConnection(\n      url,\n      installationId,\n      installationTokenResult,\n      this.controller.signal\n    );\n    return realtimeConnection;\n  }\n\n  /**\n   * Retries HTTP stream connection asyncly in random time intervals.\n   */\n  private async retryHttpConnectionWhenBackoffEnds(): Promise<void> {\n    let backoffMetadata = await this.storage.getRealtimeBackoffMetadata();\n    if (!backoffMetadata) {\n      backoffMetadata = {\n        backoffEndTimeMillis: new Date(NO_BACKOFF_TIME_IN_MILLIS),\n        numFailedStreams: NO_FAILED_REALTIME_STREAMS\n      };\n    }\n    const backoffEndTime = new Date(\n      backoffMetadata.backoffEndTimeMillis\n    ).getTime();\n    const currentTime = Date.now();\n    const retryMillis = Math.max(0, backoffEndTime - currentTime);\n    await this.makeRealtimeHttpConnection(retryMillis);\n  }\n\n  private setIsHttpConnectionRunning(connectionRunning: boolean): void {\n    this.isConnectionActive = connectionRunning;\n  }\n\n  /**\n   * Combines the check and set operations to prevent multiple asynchronous\n   * calls from redundantly starting an HTTP connection. This ensures that\n   * only one attempt is made at a time.\n   */\n  private checkAndSetHttpConnectionFlagIfNotRunning(): boolean {\n    const canMakeConnection = this.canEstablishStreamConnection();\n    if (canMakeConnection) {\n      this.setIsHttpConnectionRunning(true);\n    }\n    return canMakeConnection;\n  }\n\n  private fetchResponseIsUpToDate(\n    fetchResponse: FetchResponse,\n    lastKnownVersion: number\n  ): boolean {\n    // If there is a config, make sure its version is >= the last known version.\n    if (fetchResponse.config != null && fetchResponse.templateVersion) {\n      return fetchResponse.templateVersion >= lastKnownVersion;\n    }\n    // If there isn't a config, return true if the fetch was successful and backend had no update.\n    // Else, it returned an out of date config.\n    return this.storageCache.getLastFetchStatus() === 'success';\n  }\n\n  private parseAndValidateConfigUpdateMessage(message: string): string {\n    const left = message.indexOf('{');\n    const right = message.indexOf('}', left);\n\n    if (left < 0 || right < 0) {\n      return '';\n    }\n    return left >= right ? '' : message.substring(left, right + 1);\n  }\n\n  private isEventListenersEmpty(): boolean {\n    return this.observers.size === 0;\n  }\n\n  private getRandomInt(max: number): number {\n    return Math.floor(Math.random() * max);\n  }\n\n  private executeAllListenerCallbacks(configUpdate: ConfigUpdate): void {\n    this.observers.forEach(observer => observer.next(configUpdate));\n  }\n\n  /**\n   * Compares two configuration objects and returns a set of keys that have changed.\n   * A key is considered changed if it's new, removed, or has a different value.\n   */\n  private getChangedParams(\n    newConfig: FirebaseRemoteConfigObject,\n    oldConfig: FirebaseRemoteConfigObject\n  ): Set<string> {\n    const changedKeys = new Set<string>();\n    const newKeys = new Set(Object.keys(newConfig || {}));\n    const oldKeys = new Set(Object.keys(oldConfig || {}));\n\n    for (const key of newKeys) {\n      if (!oldKeys.has(key) || newConfig[key] !== oldConfig[key]) {\n        changedKeys.add(key);\n      }\n    }\n\n    for (const key of oldKeys) {\n      if (!newKeys.has(key)) {\n        changedKeys.add(key);\n      }\n    }\n\n    return changedKeys;\n  }\n\n  private async fetchLatestConfig(\n    remainingAttempts: number,\n    targetVersion: number\n  ): Promise<void> {\n    const remainingAttemptsAfterFetch = remainingAttempts - 1;\n    const currentAttempt = MAXIMUM_FETCH_ATTEMPTS - remainingAttemptsAfterFetch;\n    const customSignals = this.storageCache.getCustomSignals();\n    if (customSignals) {\n      this.logger.debug(\n        `Fetching config with custom signals: ${JSON.stringify(customSignals)}`\n      );\n    }\n    const abortSignal = new RemoteConfigAbortSignal();\n    try {\n      const fetchRequest: FetchRequest = {\n        cacheMaxAgeMillis: 0,\n        signal: abortSignal,\n        customSignals,\n        fetchType: 'REALTIME',\n        fetchAttempt: currentAttempt\n      };\n\n      const fetchResponse: FetchResponse = await this.cachingClient.fetch(\n        fetchRequest\n      );\n      let activatedConfigs = await this.storage.getActiveConfig();\n\n      if (!this.fetchResponseIsUpToDate(fetchResponse, targetVersion)) {\n        this.logger.debug(\n          \"Fetched template version is the same as SDK's current version.\" +\n            ' Retrying fetch.'\n        );\n        // Continue fetching until template version number is greater than current.\n        await this.autoFetch(remainingAttemptsAfterFetch, targetVersion);\n        return;\n      }\n\n      if (fetchResponse.config == null) {\n        this.logger.debug(\n          'The fetch succeeded, but the backend had no updates.'\n        );\n        return;\n      }\n\n      if (activatedConfigs == null) {\n        activatedConfigs = {};\n      }\n\n      const updatedKeys = this.getChangedParams(\n        fetchResponse.config,\n        activatedConfigs\n      );\n\n      if (updatedKeys.size === 0) {\n        this.logger.debug('Config was fetched, but no params changed.');\n        return;\n      }\n\n      const configUpdate: ConfigUpdate = {\n        getUpdatedKeys(): Set<string> {\n          return new Set(updatedKeys);\n        }\n      };\n      this.executeAllListenerCallbacks(configUpdate);\n    } catch (e: unknown) {\n      const errorMessage = e instanceof Error ? e.message : String(e);\n      const error = ERROR_FACTORY.create(ErrorCode.CONFIG_UPDATE_NOT_FETCHED, {\n        originalErrorMessage: `Failed to auto-fetch config update: ${errorMessage}`\n      });\n      this.propagateError(error);\n    }\n  }\n\n  private async autoFetch(\n    remainingAttempts: number,\n    targetVersion: number\n  ): Promise<void> {\n    if (remainingAttempts === 0) {\n      const error = ERROR_FACTORY.create(ErrorCode.CONFIG_UPDATE_NOT_FETCHED, {\n        originalErrorMessage:\n          'Unable to fetch the latest version of the template.'\n      });\n      this.propagateError(error);\n      return;\n    }\n\n    const timeTillFetchSeconds = this.getRandomInt(4);\n    const timeTillFetchInMiliseconds = timeTillFetchSeconds * 1000;\n\n    await new Promise(resolve =>\n      setTimeout(resolve, timeTillFetchInMiliseconds)\n    );\n    await this.fetchLatestConfig(remainingAttempts, targetVersion);\n  }\n\n  /**\n   * Processes a stream of real-time messages for configuration updates.\n   * This method reassembles fragmented messages, validates and parses the JSON,\n   * and automatically fetches a new config if a newer template version is available.\n   * It also handles server-specified retry intervals and propagates errors for\n   * invalid messages or when real-time updates are disabled.\n   */\n  private async handleNotifications(\n    reader: ReadableStreamDefaultReader<Uint8Array>\n  ): Promise<void> {\n    let partialConfigUpdateMessage: string;\n    let currentConfigUpdateMessage = '';\n\n    while (true) {\n      const { done, value } = await reader.read();\n      if (done) {\n        break;\n      }\n\n      partialConfigUpdateMessage = this.decoder.decode(value, { stream: true });\n      currentConfigUpdateMessage += partialConfigUpdateMessage;\n\n      if (partialConfigUpdateMessage.includes('}')) {\n        currentConfigUpdateMessage = this.parseAndValidateConfigUpdateMessage(\n          currentConfigUpdateMessage\n        );\n\n        if (currentConfigUpdateMessage.length === 0) {\n          continue;\n        }\n\n        try {\n          const jsonObject = JSON.parse(currentConfigUpdateMessage);\n\n          if (this.isEventListenersEmpty()) {\n            break;\n          }\n\n          if (\n            REALTIME_DISABLED_KEY in jsonObject &&\n            jsonObject[REALTIME_DISABLED_KEY] === true\n          ) {\n            const error = ERROR_FACTORY.create(\n              ErrorCode.CONFIG_UPDATE_UNAVAILABLE,\n              {\n                originalErrorMessage:\n                  'The server is temporarily unavailable. Try again in a few minutes.'\n              }\n            );\n            this.propagateError(error);\n            break;\n          }\n\n          if (TEMPLATE_VERSION_KEY in jsonObject) {\n            const oldTemplateVersion =\n              await this.storage.getActiveConfigTemplateVersion();\n            const targetTemplateVersion = Number(\n              jsonObject[TEMPLATE_VERSION_KEY]\n            );\n            if (\n              oldTemplateVersion &&\n              targetTemplateVersion > oldTemplateVersion\n            ) {\n              await this.autoFetch(\n                MAXIMUM_FETCH_ATTEMPTS,\n                targetTemplateVersion\n              );\n            }\n          }\n\n          // This field in the response indicates that the realtime request should retry after the\n          // specified interval to establish a long-lived connection. This interval extends the\n          // backoff duration without affecting the number of retries, so it will not enter an\n          // exponential backoff state.\n          if (REALTIME_RETRY_INTERVAL in jsonObject) {\n            const retryIntervalSeconds = Number(\n              jsonObject[REALTIME_RETRY_INTERVAL]\n            );\n            await this.updateBackoffMetadataWithRetryInterval(\n              retryIntervalSeconds\n            );\n          }\n        } catch (e: unknown) {\n          this.logger.debug('Unable to parse latest config update message.', e);\n          const errorMessage = e instanceof Error ? e.message : String(e);\n          this.propagateError(\n            ERROR_FACTORY.create(ErrorCode.CONFIG_UPDATE_MESSAGE_INVALID, {\n              originalErrorMessage: errorMessage\n            })\n          );\n        }\n        currentConfigUpdateMessage = '';\n      }\n    }\n  }\n\n  private async listenForNotifications(\n    reader: ReadableStreamDefaultReader\n  ): Promise<void> {\n    try {\n      await this.handleNotifications(reader);\n    } catch (e) {\n      // If the real-time connection is at an unexpected lifecycle state when the app is\n      // backgrounded, it's expected closing the connection will throw an exception.\n      if (!this.isInBackground) {\n        // Otherwise, the real-time server connection was closed due to a transient issue.\n        this.logger.debug(\n          'Real-time connection was closed due to an exception.'\n        );\n      }\n    }\n  }\n\n  /**\n   * Open the real-time connection, begin listening for updates, and auto-fetch when an update is\n   * received.\n   *\n   * If the connection is successful, this method will block on its thread while it reads the\n   * chunk-encoded HTTP body. When the connection closes, it attempts to reestablish the stream.\n   */\n  private async prepareAndBeginRealtimeHttpStream(): Promise<void> {\n    if (!this.checkAndSetHttpConnectionFlagIfNotRunning()) {\n      return;\n    }\n\n    let backoffMetadata = await this.storage.getRealtimeBackoffMetadata();\n    if (!backoffMetadata) {\n      backoffMetadata = {\n        backoffEndTimeMillis: new Date(NO_BACKOFF_TIME_IN_MILLIS),\n        numFailedStreams: NO_FAILED_REALTIME_STREAMS\n      };\n    }\n    const backoffEndTime = backoffMetadata.backoffEndTimeMillis.getTime();\n    if (Date.now() < backoffEndTime) {\n      await this.retryHttpConnectionWhenBackoffEnds();\n      return;\n    }\n\n    let response: Response | undefined;\n    let responseCode: number | undefined;\n    try {\n      response = await this.createRealtimeConnection();\n      responseCode = response.status;\n      if (response.ok && response.body) {\n        this.resetRetryCount();\n        await this.resetRealtimeBackoff();\n        const reader = response.body.getReader();\n        this.reader = reader;\n        // Start listening for realtime notifications.\n        await this.listenForNotifications(reader);\n      }\n    } catch (error) {\n      if (this.isInBackground) {\n        // It's possible the app was backgrounded while the connection was open, which\n        // threw an exception trying to read the response. No real error here, so treat\n        // this as a success, even if we haven't read a 200 response code yet.\n        this.resetRetryCount();\n      } else {\n        //there might have been a transient error so the client will retry the connection.\n        this.logger.debug(\n          'Exception connecting to real-time RC backend. Retrying the connection...:',\n          error\n        );\n      }\n    } finally {\n      // Close HTTP connection and associated streams.\n      await this.closeRealtimeHttpConnection();\n      this.setIsHttpConnectionRunning(false);\n\n      // Update backoff metadata if the connection failed in the foreground.\n      const connectionFailed =\n        !this.isInBackground &&\n        (responseCode === undefined ||\n          this.isStatusCodeRetryable(responseCode));\n\n      if (connectionFailed) {\n        await this.updateBackoffMetadataWithLastFailedStreamConnectionTime(\n          new Date()\n        );\n      }\n      // If responseCode is null then no connection was made to server and the SDK should still retry.\n      if (connectionFailed || response?.ok) {\n        await this.retryHttpConnectionWhenBackoffEnds();\n      } else {\n        const errorMessage = `Unable to connect to the server. HTTP status code: ${responseCode}`;\n        const firebaseError = ERROR_FACTORY.create(\n          ErrorCode.CONFIG_UPDATE_STREAM_ERROR,\n          {\n            originalErrorMessage: errorMessage\n          }\n        );\n        this.propagateError(firebaseError);\n      }\n    }\n  }\n\n  /**\n   * Checks whether connection can be made or not based on some conditions\n   * @returns booelean\n   */\n  private canEstablishStreamConnection(): boolean {\n    const hasActiveListeners = this.observers.size > 0;\n    const isNotDisabled = !this.isRealtimeDisabled;\n    const isNoConnectionActive = !this.isConnectionActive;\n    const inForeground = !this.isInBackground;\n    return (\n      hasActiveListeners &&\n      isNotDisabled &&\n      isNoConnectionActive &&\n      inForeground\n    );\n  }\n\n  private async makeRealtimeHttpConnection(delayMillis: number): Promise<void> {\n    if (!this.canEstablishStreamConnection()) {\n      return;\n    }\n    if (this.httpRetriesRemaining > 0) {\n      this.httpRetriesRemaining--;\n      await new Promise(resolve => setTimeout(resolve, delayMillis));\n      void this.prepareAndBeginRealtimeHttpStream();\n    } else if (!this.isInBackground) {\n      const error = ERROR_FACTORY.create(ErrorCode.CONFIG_UPDATE_STREAM_ERROR, {\n        originalErrorMessage:\n          'Unable to connect to the server. Check your connection and try again.'\n      });\n      this.propagateError(error);\n    }\n  }\n\n  private async beginRealtime(): Promise<void> {\n    if (this.observers.size > 0) {\n      await this.makeRealtimeHttpConnection(0);\n    }\n  }\n\n  /**\n   * Adds an observer to the realtime updates.\n   * @param observer The observer to add.\n   */\n  addObserver(observer: ConfigUpdateObserver): void {\n    this.observers.add(observer);\n    void this.beginRealtime();\n  }\n\n  /**\n   * Removes an observer from the realtime updates.\n   * @param observer The observer to remove.\n   */\n  removeObserver(observer: ConfigUpdateObserver): void {\n    if (this.observers.has(observer)) {\n      this.observers.delete(observer);\n    }\n  }\n\n  /**\n   * Handles changes to the application's visibility state, managing the real-time connection.\n   *\n   * When the application is moved to the background, this method closes the existing\n   * real-time connection to save resources. When the application returns to the\n   * foreground, it attempts to re-establish the connection.\n   */\n  private async onVisibilityChange(visible: unknown): Promise<void> {\n    this.isInBackground = !visible;\n    if (!visible) {\n      await this.closeRealtimeHttpConnection();\n    } else if (visible) {\n      await this.beginRealtime();\n    }\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  _registerComponent,\n  registerVersion,\n  SDK_VERSION\n} from '@firebase/app';\nimport { isIndexedDBAvailable } from '@firebase/util';\nimport {\n  Component,\n  ComponentType,\n  ComponentContainer\n} from '@firebase/component';\nimport { Logger, LogLevel as FirebaseLogLevel } from '@firebase/logger';\nimport { RemoteConfig, RemoteConfigOptions } from './public_types';\nimport { name as packageName, version } from '../package.json';\nimport { ensureInitialized } from './api';\nimport { CachingClient } from './client/caching_client';\nimport { RestClient } from './client/rest_client';\nimport { RetryingClient } from './client/retrying_client';\nimport { RC_COMPONENT_NAME } from './constants';\nimport { ErrorCode, ERROR_FACTORY } from './errors';\nimport { RemoteConfig as RemoteConfigImpl } from './remote_config';\nimport { IndexedDbStorage, InMemoryStorage } from './storage/storage';\nimport { StorageCache } from './storage/storage_cache';\nimport { RealtimeHandler } from './client/realtime_handler';\n// This needs to be in the same file that calls `getProvider()` on the component\n// or it will get tree-shaken out.\nimport '@firebase/installations';\n\nexport function registerRemoteConfig(): void {\n  _registerComponent(\n    new Component(\n      RC_COMPONENT_NAME,\n      remoteConfigFactory,\n      ComponentType.PUBLIC\n    ).setMultipleInstances(true)\n  );\n\n  registerVersion(packageName, version);\n  // BUILD_TARGET will be replaced by values like esm, cjs, etc during the compilation\n  registerVersion(packageName, version, '__BUILD_TARGET__');\n\n  function remoteConfigFactory(\n    container: ComponentContainer,\n    { options }: { options?: RemoteConfigOptions }\n  ): RemoteConfig {\n    /* Dependencies */\n    // getImmediate for FirebaseApp will always succeed\n    const app = container.getProvider('app').getImmediate();\n    // The following call will always succeed because rc has `import '@firebase/installations'`\n    const installations = container\n      .getProvider('installations-internal')\n      .getImmediate();\n\n    // Normalizes optional inputs.\n    const { projectId, apiKey, appId } = app.options;\n    if (!projectId) {\n      throw ERROR_FACTORY.create(ErrorCode.REGISTRATION_PROJECT_ID);\n    }\n    if (!apiKey) {\n      throw ERROR_FACTORY.create(ErrorCode.REGISTRATION_API_KEY);\n    }\n    if (!appId) {\n      throw ERROR_FACTORY.create(ErrorCode.REGISTRATION_APP_ID);\n    }\n    const namespace = options?.templateId || 'firebase';\n\n    const storage = isIndexedDBAvailable()\n      ? new IndexedDbStorage(appId, app.name, namespace)\n      : new InMemoryStorage();\n    const storageCache = new StorageCache(storage);\n\n    const logger = new Logger(packageName);\n\n    // Sets ERROR as the default log level.\n    // See RemoteConfig#setLogLevel for corresponding normalization to ERROR log level.\n    logger.logLevel = FirebaseLogLevel.ERROR;\n\n    const restClient = new RestClient(\n      installations,\n      // Uses the JS SDK version, by which the RC package version can be deduced, if necessary.\n      SDK_VERSION,\n      namespace,\n      projectId,\n      apiKey,\n      appId\n    );\n    const retryingClient = new RetryingClient(restClient, storage);\n    const cachingClient = new CachingClient(\n      retryingClient,\n      storage,\n      storageCache,\n      logger\n    );\n\n    const realtimeHandler = new RealtimeHandler(\n      installations,\n      storage,\n      SDK_VERSION,\n      namespace,\n      projectId,\n      apiKey,\n      appId,\n      logger,\n      storageCache,\n      cachingClient\n    );\n\n    const remoteConfigInstance = new RemoteConfigImpl(\n      app,\n      cachingClient,\n      storageCache,\n      storage,\n      logger,\n      realtimeHandler\n    );\n\n    // Starts warming cache.\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    ensureInitialized(remoteConfigInstance);\n\n    return remoteConfigInstance;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RemoteConfig } from './public_types';\nimport { activate, fetchConfig } from './api';\nimport {\n  getModularInstance,\n  isIndexedDBAvailable,\n  validateIndexedDBOpenable\n} from '@firebase/util';\n\n// This API is put in a separate file, so we can stub fetchConfig and activate in tests.\n// It's not possible to stub standalone functions from the same module.\n/**\n *\n * Performs fetch and activate operations, as a convenience.\n *\n * @param remoteConfig - The {@link RemoteConfig} instance.\n *\n * @returns A `Promise` which resolves to true if the current call activated the fetched configs.\n * If the fetched configs were already activated, the `Promise` will resolve to false.\n *\n * @public\n */\nexport async function fetchAndActivate(\n  remoteConfig: RemoteConfig\n): Promise<boolean> {\n  remoteConfig = getModularInstance(remoteConfig);\n  await fetchConfig(remoteConfig);\n  return activate(remoteConfig);\n}\n\n/**\n * This method provides two different checks:\n *\n * 1. Check if IndexedDB exists in the browser environment.\n * 2. Check if the current browser context allows IndexedDB `open()` calls.\n *\n * @returns A `Promise` which resolves to true if a {@link RemoteConfig} instance\n * can be initialized in this environment, or false if it cannot.\n * @public\n */\nexport async function isSupported(): Promise<boolean> {\n  if (!isIndexedDBAvailable()) {\n    return false;\n  }\n\n  try {\n    const isDBOpenable: boolean = await validateIndexedDBOpenable();\n    return isDBOpenable;\n  } catch (error) {\n    return false;\n  }\n}\n","/**\n * The Firebase Remote Config Web SDK.\n * This SDK does not work in a Node.js environment.\n *\n * @packageDocumentation\n */\n\n/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { registerRemoteConfig } from './register';\n\n// Facilitates debugging by enabling settings changes without rebuilding asset.\n// Note these debug options are not part of a documented, supported API and can change at any time.\n// Consolidates debug options for easier discovery.\n// Uses transient variables on window to avoid lingering state causing panic.\ndeclare global {\n  interface Window {\n    FIREBASE_REMOTE_CONFIG_URL_BASE: string;\n  }\n}\n\nexport * from './api';\nexport * from './api2';\nexport * from './public_types';\n\n/** register component and version */\nregisterRemoteConfig();\n","import { initializeApp } from \"firebase/app\";\nimport {\n  fetchAndActivate,\n  getAll,\n  getValue,\n  getRemoteConfig,\n} from \"firebase/remote-config\";\n\nexport async function createRemoteConfigManager({\n  minimumFetchIntervalMillis,\n  ...config\n}: {\n  apiKey: string;\n  authDomain: string;\n  projectId: string;\n  storageBucket: string;\n  messagingSenderId: string;\n  appId: string;\n  minimumFetchIntervalMillis?: number;\n}) {\n  const app = await initializeApp(config);\n  const remoteConfig = getRemoteConfig(app);\n\n  remoteConfig.settings.minimumFetchIntervalMillis =\n    minimumFetchIntervalMillis ?? 0;\n\n  await fetchAndActivate(remoteConfig);\n\n  return {\n    getFlag: (key: string) => getValue(remoteConfig, key),\n    getAllFlags: () => getAll(remoteConfig),\n  };\n}\n","import type { Context } from \"@segment/analytics-next\";\n\nimport type { EventMap } from \"../config/events\";\nimport type {\n  TrackingStrategy,\n  SDKConfig,\n  TrackingContext,\n} from \"../sdk.types\";\n\nexport class BackendTracking implements TrackingStrategy {\n  constructor(config: SDKConfig) {\n    console.log(\"Initialized BackendTracking with config:\", config);\n  }\n\n  async trackEvent<K extends keyof EventMap>(\n    eventName: K,\n    params: EventMap[K],\n    context?: TrackingContext\n  ): Promise<Context | void> {\n    console.log(\n      \"Sending event via BackendTracking:\",\n      eventName,\n      params,\n      context\n    );\n  }\n\n  async identify(userId: string) {\n    console.log(\"Sending identify via BackendTracking\", userId);\n  }\n}\n","import {\n  isFunction,\n  isPlainObject,\n  isString,\n  isNumber,\n} from '@segment/analytics-core'\nimport { Context } from '../context'\nimport {\n  Callback,\n  Options,\n  EventProperties,\n  SegmentEvent,\n  Traits,\n  GroupTraits,\n  UserTraits,\n} from '../events'\nimport { ID, WithId } from '../user'\n\n/**\n * Helper for the track method\n */\nexport function resolveArguments(\n  eventName: string | SegmentEvent,\n  properties?: EventProperties | Callback,\n  options?: Options | Callback,\n  callback?: Callback\n): [string, EventProperties | Callback, Options, Callback | undefined] {\n  const args = [eventName, properties, options, callback]\n\n  const name = isPlainObject(eventName) ? eventName.event : eventName\n  if (!name || !isString(name)) {\n    throw new Error('Event missing')\n  }\n\n  const data = isPlainObject(eventName)\n    ? eventName.properties ?? {}\n    : isPlainObject(properties)\n    ? properties\n    : {}\n\n  let opts: Options = {}\n  if (!isFunction(options)) {\n    opts = options ?? {}\n  }\n\n  if (isPlainObject(eventName) && !isFunction(properties)) {\n    opts = properties ?? {}\n  }\n\n  const cb = args.find(isFunction) as Callback | undefined\n  return [name, data, opts, cb]\n}\n\n/**\n * Helper for page, screen methods\n */\nexport function resolvePageArguments(\n  category?: string | object | null,\n  name?: string | object | Callback | null,\n  properties?: EventProperties | Options | Callback | null,\n  options?: Options | Callback,\n  callback?: Callback\n): [\n  string | null,\n  string | null,\n  EventProperties,\n  Options,\n  Callback | undefined\n] {\n  let resolvedProperties: EventProperties\n  let resolvedOptions: Options\n  let resolvedCategory: string | undefined | null = null\n  let resolvedName: string | undefined | null = null\n  const args = [category, name, properties, options, callback]\n\n  // The legacy logic is basically:\n  // - If there is a string, it's the name\n  // - If there are two strings, it's category and name\n  const strings = args.filter(isString)\n  if (strings.length === 1) {\n    if (isString(args[1])) {\n      resolvedName = args[1]\n      resolvedCategory = null\n    } else {\n      resolvedName = strings[0]\n      resolvedCategory = null\n    }\n  } else if (strings.length === 2) {\n    if (typeof args[0] === 'string') {\n      resolvedCategory = args[0]\n    }\n    if (typeof args[1] === 'string') {\n      resolvedName = args[1]\n    }\n  }\n\n  // handle: analytics.page('category', 'name', properties, options, callback)\n  const resolvedCallback = args.find(isFunction) as Callback | undefined\n\n  // handle:\n  // - analytics.page('name')\n  // - analytics.page('category', 'name')\n  // - analytics.page(properties)\n  // - analytics.page(properties, options)\n  // - analytics.page('name', properties)\n  // - analytics.page('name', properties, options)\n  // - analytics.page('category', 'name', properties, options)\n  // - analytics.page('category', 'name', properties, options, callback)\n  // - analytics.page('category', 'name', callback)\n  // - analytics.page(callback), etc\n\n  // The legacy logic is basically:\n  // - If there is a plain object, it's the properties\n  // - If there are two plain objects, it's properties and options\n  const objects = args.filter(isPlainObject)\n  if (objects.length === 1) {\n    if (isPlainObject(args[2])) {\n      resolvedOptions = {}\n      resolvedProperties = args[2]\n    } else if (isPlainObject(args[3])) {\n      resolvedProperties = {}\n      resolvedOptions = args[3]\n    } else {\n      resolvedProperties = objects[0]\n      resolvedOptions = {}\n    }\n  } else if (objects.length === 2) {\n    resolvedProperties = objects[0]\n    resolvedOptions = objects[1]\n  }\n\n  return [\n    resolvedCategory,\n    resolvedName,\n    (resolvedProperties ??= {}),\n    (resolvedOptions ??= {}),\n    resolvedCallback,\n  ]\n}\n\n/**\n * Helper for group, identify methods\n */\nexport const resolveUserArguments = <T extends Traits, U extends WithId>(\n  user: U\n): ResolveUser<T> => {\n  return (...args): ReturnType<ResolveUser<T>> => {\n    const values: {\n      id?: ID\n      traits?: T | null\n      options?: Options\n      callback?: Callback\n    } = {}\n    // It's a stack so it's reversed so that we go through each of the expected arguments\n    const orderStack: Array<keyof typeof values> = [\n      'callback',\n      'options',\n      'traits',\n      'id',\n    ]\n\n    // Read each argument and eval the possible values here\n    for (const arg of args) {\n      let current = orderStack.pop()\n      if (current === 'id') {\n        if (isString(arg) || isNumber(arg)) {\n          values.id = arg.toString()\n          continue\n        }\n        if (arg === null || arg === undefined) {\n          continue\n        }\n        // First argument should always be the id, if it is not a valid value we can skip it\n        current = orderStack.pop()\n      }\n\n      // Traits and Options\n      if (\n        (current === 'traits' || current === 'options') &&\n        (arg === null || arg === undefined || isPlainObject(arg))\n      ) {\n        values[current] = arg as T\n      }\n\n      // Callback\n      if (isFunction(arg)) {\n        values.callback = arg as Callback\n        break // This is always the last argument\n      }\n    }\n\n    return [\n      values.id ?? user.id(),\n      (values.traits ?? {}) as T,\n      values.options ?? {},\n      values.callback,\n    ]\n  }\n}\n\n/**\n * Helper for alias method\n */\nexport function resolveAliasArguments(\n  to: string | number,\n  from?: string | number | Options,\n  options?: Options | Callback,\n  callback?: Callback\n): [string, string | null, Options, Callback | undefined] {\n  if (isNumber(to)) to = to.toString() // Legacy behaviour - allow integers for alias calls\n  if (isNumber(from)) from = from.toString()\n  const args = [to, from, options, callback]\n\n  const [aliasTo = to, aliasFrom = null] = args.filter(isString)\n  const [opts = {}] = args.filter(isPlainObject)\n  const resolvedCallback = args.find(isFunction) as Callback | undefined\n\n  return [aliasTo, aliasFrom, opts, resolvedCallback]\n}\n\ntype ResolveUser<T extends Traits> = (\n  id?: ID | object,\n  traits?: T | Callback | null,\n  options?: Options | Callback,\n  callback?: Callback\n) => [ID, T, Options, Callback | undefined]\n\nexport type IdentifyParams = Parameters<ResolveUser<UserTraits>>\nexport type GroupParams = Parameters<ResolveUser<GroupTraits>>\nexport type EventParams = Parameters<typeof resolveArguments>\nexport type PageParams = Parameters<typeof resolvePageArguments>\nexport type AliasParams = Parameters<typeof resolveAliasArguments>\n\nexport type DispatchedEvent = Context\n","import {\n  AliasParams,\n  DispatchedEvent,\n  EventParams,\n  GroupParams,\n  PageParams,\n  resolveAliasArguments,\n  resolveArguments,\n  resolvePageArguments,\n  resolveUserArguments,\n  IdentifyParams,\n} from '../arguments-resolver'\nimport type { FormArgs, LinkArgs } from '../auto-track'\nimport { isOffline } from '../connection'\nimport { Context } from '../context'\nimport { dispatch } from '@segment/analytics-core'\nimport { Emitter } from '@segment/analytics-generic-utils'\nimport {\n  Callback,\n  EventFactory,\n  EventProperties,\n  SegmentEvent,\n} from '../events'\nimport { isDestinationPluginWithAddMiddleware, Plugin } from '../plugin'\nimport { EventQueue } from '../queue/event-queue'\nimport { Group, ID, User } from '../user'\nimport autoBind from '../../lib/bind-all'\nimport { PersistedPriorityQueue } from '../../lib/priority-queue/persisted'\nimport type { LegacyIntegration } from '../../plugins/ajs-destination/types'\nimport type {\n  DestinationMiddlewareFunction,\n  MiddlewareFunction,\n} from '../../plugins/middleware'\nimport { version } from '../../generated/version'\nimport { PriorityQueue } from '../../lib/priority-queue'\nimport { getGlobal } from '../../lib/get-global'\nimport { AnalyticsClassic, AnalyticsCore } from './interfaces'\nimport type { CDNSettings } from '../../browser'\nimport {\n  CookieOptions,\n  MemoryStorage,\n  UniversalStorage,\n  StoreType,\n  applyCookieOptions,\n  initializeStorages,\n  isArrayOfStoreType,\n} from '../storage'\nimport { setGlobalAnalytics } from '../../lib/global-analytics-helper'\nimport { popPageContext } from '../buffer'\nimport {\n  isSegmentPlugin,\n  SegmentIOPluginMetadata,\n} from '../../plugins/segmentio'\nimport {\n  AnalyticsSettings,\n  IntegrationsInitOptions,\n  InitOptions,\n} from '../../browser/settings'\n\nexport type { InitOptions, AnalyticsSettings }\n\nconst deprecationWarning =\n  'This is being deprecated and will be not be available in future releases of Analytics JS'\n\n// reference any pre-existing \"analytics\" object so a user can restore the reference\nconst global: any = getGlobal()\nconst _analytics = global?.analytics\n\nfunction createDefaultQueue(\n  name: string,\n  retryQueue = false,\n  disablePersistance = false\n) {\n  const maxAttempts = retryQueue ? 10 : 1\n  const priorityQueue = disablePersistance\n    ? new PriorityQueue(maxAttempts, [])\n    : new PersistedPriorityQueue(maxAttempts, name)\n  return new EventQueue(priorityQueue)\n}\n\n/**\n * The public settings that are set on the analytics instance\n */\nexport class AnalyticsInstanceSettings {\n  readonly writeKey: string\n  /**\n   * This is an unstable API, it may change in the future without warning.\n   */\n  readonly cdnSettings: CDNSettings\n  readonly cdnURL?: string\n  get apiHost(): string | undefined {\n    return this._getSegmentPluginMetadata?.()?.apiHost\n  }\n  private _getSegmentPluginMetadata?: () => SegmentIOPluginMetadata | undefined\n\n  /**\n   * Auto-track specific timeout setting for legacy purposes.\n   */\n  timeout = 300\n\n  constructor(settings: AnalyticsSettings, queue: EventQueue) {\n    this._getSegmentPluginMetadata = () =>\n      queue.plugins.find(isSegmentPlugin)?.metadata\n    this.writeKey = settings.writeKey\n\n    // this is basically just to satisfy typescript / so we don't need to change the function sig of every test.\n    // when loadAnalytics is called, cdnSettings will always be available.\n    const emptyCDNSettings: CDNSettings = {\n      integrations: {\n        'Segment.io': {\n          apiKey: '',\n        },\n      },\n    }\n    this.cdnSettings = settings.cdnSettings ?? emptyCDNSettings\n    this.cdnURL = settings.cdnURL\n  }\n}\n\n/* analytics-classic stubs */\nfunction _stub(this: never) {\n  console.warn(deprecationWarning)\n}\n\nexport class Analytics\n  extends Emitter\n  implements AnalyticsCore, AnalyticsClassic\n{\n  settings: AnalyticsInstanceSettings\n  private _user: User\n  private _group: Group\n  private eventFactory: EventFactory\n  private _debug = false\n  private _universalStorage: UniversalStorage\n\n  initialized = false\n  integrations: IntegrationsInitOptions\n  options: InitOptions\n  queue: EventQueue\n\n  constructor(\n    settings: AnalyticsSettings,\n    options?: InitOptions,\n    queue?: EventQueue,\n    user?: User,\n    group?: Group\n  ) {\n    super()\n    const cookieOptions = options?.cookie\n    const disablePersistance = options?.disableClientPersistence ?? false\n\n    this.queue =\n      queue ??\n      createDefaultQueue(\n        `${settings.writeKey}:event-queue`,\n        options?.retryQueue,\n        disablePersistance\n      )\n    this.settings = new AnalyticsInstanceSettings(settings, this.queue)\n\n    const storageSetting = options?.storage\n    this._universalStorage = this.createStore(\n      disablePersistance,\n      storageSetting,\n      cookieOptions\n    )\n\n    this._user =\n      user ??\n      new User(\n        {\n          persist: !disablePersistance,\n          storage: options?.storage,\n          // Any User specific options override everything else\n          ...options?.user,\n        },\n        cookieOptions\n      ).load()\n    this._group =\n      group ??\n      new Group(\n        {\n          persist: !disablePersistance,\n          storage: options?.storage,\n          // Any group specific options override everything else\n          ...options?.group,\n        },\n        cookieOptions\n      ).load()\n    this.eventFactory = new EventFactory(this._user)\n    this.integrations = options?.integrations ?? {}\n    this.options = options ?? {}\n    autoBind(this)\n  }\n\n  user = (): User => {\n    return this._user\n  }\n\n  /**\n   * Creates the storage system based on the settings received\n   * @returns Storage\n   */\n  private createStore(\n    disablePersistance: boolean,\n    storageSetting: InitOptions['storage'],\n    cookieOptions?: CookieOptions | undefined\n  ): UniversalStorage {\n    // DisablePersistance option overrides all, no storage will be used outside of memory even if specified\n    if (disablePersistance) {\n      return new UniversalStorage([new MemoryStorage()])\n    } else {\n      if (storageSetting) {\n        if (isArrayOfStoreType(storageSetting)) {\n          // We will create the store with the priority for customer settings\n          return new UniversalStorage(\n            initializeStorages(\n              applyCookieOptions(storageSetting.stores, cookieOptions)\n            )\n          )\n        }\n      }\n    }\n    // We default to our multi storage with priority\n    return new UniversalStorage(\n      initializeStorages([\n        StoreType.LocalStorage,\n        {\n          name: StoreType.Cookie,\n          settings: cookieOptions,\n        },\n        StoreType.Memory,\n      ])\n    )\n  }\n\n  get storage(): UniversalStorage {\n    return this._universalStorage\n  }\n\n  async track(...args: EventParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [name, data, opts, cb] = resolveArguments(...args)\n\n    const segmentEvent = this.eventFactory.track(\n      name,\n      data as EventProperties,\n      opts,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, cb).then((ctx) => {\n      this.emit('track', name, ctx.event.properties, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async page(...args: PageParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [category, page, properties, options, callback] =\n      resolvePageArguments(...args)\n\n    const segmentEvent = this.eventFactory.page(\n      category,\n      page,\n      properties,\n      options,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit('page', category, page, ctx.event.properties, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async identify(...args: IdentifyParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [id, _traits, options, callback] = resolveUserArguments(this._user)(\n      ...args\n    )\n\n    this._user.identify(id, _traits)\n    const segmentEvent = this.eventFactory.identify(\n      this._user.id(),\n      this._user.traits(),\n      options,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit(\n        'identify',\n        ctx.event.userId,\n        ctx.event.traits,\n        ctx.event.options\n      )\n      return ctx\n    })\n  }\n\n  group(): Group\n  group(...args: GroupParams): Promise<DispatchedEvent>\n  group(...args: GroupParams): Promise<DispatchedEvent> | Group {\n    const pageCtx = popPageContext(args)\n    if (args.length === 0) {\n      return this._group\n    }\n\n    const [id, _traits, options, callback] = resolveUserArguments(this._group)(\n      ...args\n    )\n\n    this._group.identify(id, _traits)\n    const groupId = this._group.id()\n    const groupTraits = this._group.traits()\n\n    const segmentEvent = this.eventFactory.group(\n      groupId,\n      groupTraits,\n      options,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit('group', ctx.event.groupId, ctx.event.traits, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async alias(...args: AliasParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [to, from, options, callback] = resolveAliasArguments(...args)\n    const segmentEvent = this.eventFactory.alias(\n      to,\n      from,\n      options,\n      this.integrations,\n      pageCtx\n    )\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit('alias', to, from, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async screen(...args: PageParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [category, page, properties, options, callback] =\n      resolvePageArguments(...args)\n\n    const segmentEvent = this.eventFactory.screen(\n      category,\n      page,\n      properties,\n      options,\n      this.integrations,\n      pageCtx\n    )\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit(\n        'screen',\n        category,\n        page,\n        ctx.event.properties,\n        ctx.event.options\n      )\n      return ctx\n    })\n  }\n\n  async trackClick(...args: LinkArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.link.call(this, ...args)\n  }\n\n  async trackLink(...args: LinkArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.link.call(this, ...args)\n  }\n\n  async trackSubmit(...args: FormArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.form.call(this, ...args)\n  }\n\n  async trackForm(...args: FormArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.form.call(this, ...args)\n  }\n\n  async register(...plugins: Plugin[]): Promise<Context> {\n    const ctx = Context.system()\n\n    const registrations = plugins.map((xt) =>\n      this.queue.register(ctx, xt, this)\n    )\n    await Promise.all(registrations)\n\n    return ctx\n  }\n\n  async deregister(...plugins: string[]): Promise<Context> {\n    const ctx = Context.system()\n\n    const deregistrations = plugins.map((pl) => {\n      const plugin = this.queue.plugins.find((p) => p.name === pl)\n      if (plugin) {\n        return this.queue.deregister(ctx, plugin, this)\n      } else {\n        ctx.log('warn', `plugin ${pl} not found`)\n      }\n    })\n\n    await Promise.all(deregistrations)\n\n    return ctx\n  }\n\n  debug(toggle: boolean): Analytics {\n    // Make sure legacy ajs debug gets turned off if it was enabled before upgrading.\n    if (toggle === false && localStorage.getItem('debug')) {\n      localStorage.removeItem('debug')\n    }\n    this._debug = toggle\n    return this\n  }\n\n  reset(): void {\n    this._user.reset()\n    this._group.reset()\n    this.emit('reset')\n  }\n\n  timeout(timeout: number): void {\n    this.settings.timeout = timeout\n  }\n\n  private async _dispatch(\n    event: SegmentEvent,\n    callback?: Callback\n  ): Promise<DispatchedEvent> {\n    const ctx = new Context(event)\n    ctx.stats.increment('analytics_js.invoke', 1, [event.type])\n    if (isOffline() && !this.options.retryQueue) {\n      return ctx\n    }\n    return dispatch(ctx, this.queue, this, {\n      callback,\n      debug: this._debug,\n      timeout: this.settings.timeout,\n    })\n  }\n\n  async addSourceMiddleware(fn: MiddlewareFunction): Promise<Analytics> {\n    await this.queue.criticalTasks.run(async () => {\n      const { sourceMiddlewarePlugin } = await import(\n        /* webpackChunkName: \"middleware\" */ '../../plugins/middleware'\n      )\n\n      const integrations: Record<string, boolean> = {}\n      this.queue.plugins.forEach((plugin) => {\n        if (plugin.type === 'destination') {\n          return (integrations[plugin.name] = true)\n        }\n      })\n\n      const plugin = sourceMiddlewarePlugin(fn, integrations)\n      await this.register(plugin)\n    })\n\n    return this\n  }\n\n  /* TODO: This does not have to return a promise? */\n  addDestinationMiddleware(\n    integrationName: string,\n    ...middlewares: DestinationMiddlewareFunction[]\n  ): Promise<Analytics> {\n    this.queue.plugins\n      .filter(isDestinationPluginWithAddMiddleware)\n      .forEach((p) => {\n        if (\n          integrationName === '*' ||\n          p.name.toLowerCase() === integrationName.toLowerCase()\n        ) {\n          p.addMiddleware(...middlewares)\n        }\n      })\n\n    return Promise.resolve(this)\n  }\n\n  setAnonymousId(id?: string): ID {\n    return this._user.anonymousId(id)\n  }\n\n  async queryString(query: string): Promise<Context[]> {\n    if (this.options.useQueryString === false) {\n      return []\n    }\n\n    const { queryString } = await import(\n      /* webpackChunkName: \"queryString\" */ '../query-string'\n    )\n    return queryString(this, query)\n  }\n\n  /**\n   * @deprecated This function does not register a destination plugin.\n   *\n   * Instantiates a legacy Analytics.js destination.\n   *\n   * This function does not register the destination as an Analytics.JS plugin,\n   * all the it does it to invoke the factory function back.\n   */\n  use(legacyPluginFactory: (analytics: Analytics) => void): Analytics {\n    legacyPluginFactory(this)\n    return this\n  }\n\n  async ready(\n    callback: Function = (res: Promise<unknown>[]): Promise<unknown>[] => res\n  ): Promise<unknown> {\n    return Promise.all(\n      this.queue.plugins.map((i) => (i.ready ? i.ready() : Promise.resolve()))\n    ).then((res) => {\n      callback(res)\n      return res\n    })\n  }\n\n  // analytics-classic api\n\n  noConflict(): Analytics {\n    console.warn(deprecationWarning)\n    setGlobalAnalytics(_analytics ?? this)\n    return this\n  }\n\n  normalize(msg: SegmentEvent): SegmentEvent {\n    console.warn(deprecationWarning)\n    return this.eventFactory['normalize'](msg)\n  }\n\n  get failedInitializations(): string[] {\n    console.warn(deprecationWarning)\n    return this.queue.failedInitializations\n  }\n\n  get VERSION(): string {\n    return version\n  }\n\n  /* @deprecated - noop */\n  async initialize(\n    _settings?: AnalyticsSettings,\n    _options?: InitOptions\n  ): Promise<Analytics> {\n    console.warn(deprecationWarning)\n    return Promise.resolve(this)\n  }\n\n  init = this.initialize.bind(this)\n\n  async pageview(url: string): Promise<Analytics> {\n    console.warn(deprecationWarning)\n    await this.page({ path: url })\n    return this\n  }\n\n  get plugins() {\n    console.warn(deprecationWarning)\n    // @ts-expect-error\n    return this._plugins ?? {}\n  }\n\n  get Integrations() {\n    console.warn(deprecationWarning)\n    const integrations = this.queue.plugins\n      .filter((plugin) => plugin.type === 'destination')\n      .reduce((acc, plugin) => {\n        const name = `${plugin.name\n          .toLowerCase()\n          .replace('.', '')\n          .split(' ')\n          .join('-')}Integration`\n\n        // @ts-expect-error\n        const integration = window[name] as\n          | (LegacyIntegration & { Integration?: LegacyIntegration })\n          | undefined\n\n        if (!integration) {\n          return acc\n        }\n\n        const nested = integration.Integration // hack - Google Analytics function resides in the \"Integration\" field\n        if (nested) {\n          acc[plugin.name] = nested\n          return acc\n        }\n\n        acc[plugin.name] = integration as LegacyIntegration\n        return acc\n      }, {} as Record<string, LegacyIntegration>)\n\n    return integrations\n  }\n\n  log = _stub\n  addIntegrationMiddleware = _stub\n  listeners = _stub\n  addEventListener = _stub\n  removeAllListeners = _stub\n  removeListener = _stub\n  removeEventListener = _stub\n  hasListeners = _stub\n  add = _stub\n  addIntegration = _stub\n\n  // snippet function\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  push(args: any[]) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const an = this as any\n    const method = args.shift()\n    if (method) {\n      if (!an[method]) return\n    }\n    an[method].apply(this, args)\n  }\n}\n\n/**\n * @returns a no-op analytics instance that does not create cookies or localstorage, or send any events to segment.\n */\nexport class NullAnalytics extends Analytics {\n  constructor() {\n    super({ writeKey: '' }, { disableClientPersistence: true })\n    this.initialized = true\n  }\n}\n","import { v4 as uuid } from '@lukeed/uuid'\nimport { ID, User } from '../user'\nimport { Options, EventProperties, Traits, SegmentEvent } from './interfaces'\nimport { addPageContext, PageContext } from '../page'\nimport { CoreEventFactory, IntegrationsOptions } from '@segment/analytics-core'\n\nexport * from './interfaces'\n\nexport class EventFactory extends CoreEventFactory {\n  user: User\n  constructor(user: User) {\n    super({\n      createMessageId: () => `ajs-next-${Date.now()}-${uuid()}`,\n      onEventMethodCall: ({ options }) => {\n        this.maybeUpdateAnonId(options)\n      },\n      onFinishedEvent: (event) => {\n        this.addIdentity(event)\n        return event\n      },\n    })\n    this.user = user\n  }\n\n  /**\n   * Updates the anonymousId *globally* if it's provided in the options.\n   * This should generally be done in the identify method, but some customers rely on this.\n   */\n  private maybeUpdateAnonId(options: Options | undefined): void {\n    options?.anonymousId && this.user.anonymousId(options.anonymousId)\n  }\n\n  /**\n   * add user id / anonymous id to the event\n   */\n  private addIdentity(event: SegmentEvent) {\n    if (this.user.id()) {\n      event.userId = this.user.id()\n    }\n\n    if (this.user.anonymousId()) {\n      event.anonymousId = this.user.anonymousId()\n    }\n  }\n\n  override track(\n    event: string,\n    properties?: EventProperties,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.track(event, properties, options, integrationsOptions)\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override page(\n    category: string | null,\n    page: string | null,\n    properties?: EventProperties,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.page(\n      category,\n      page,\n      properties,\n      options,\n      integrationsOptions\n    )\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override screen(\n    category: string | null,\n    screen: string | null,\n    properties?: EventProperties,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.screen(\n      category,\n      screen,\n      properties,\n      options,\n      integrationsOptions\n    )\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override identify(\n    userId: ID,\n    traits?: Traits,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.identify(userId, traits, options, integrationsOptions)\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override group(\n    groupId: ID,\n    traits?: Traits,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.group(groupId, traits, options, integrationsOptions)\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override alias(\n    to: string,\n    from: string | null,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.alias(to, from, options, integrationsOptions)\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n}\n","// src/page-context.ts\nfunction isPlainObject(obj) {\n    return Object.prototype.toString.call(obj).slice(8, -1).toLowerCase() === \"object\";\n}\nvar BufferedPageContextDiscriminant = \"bpc\";\nvar createBufferedPageContext = function(url, canonicalUrl, search, path, title, referrer) {\n    return {\n        __t: BufferedPageContextDiscriminant,\n        c: canonicalUrl,\n        p: path,\n        u: url,\n        s: search,\n        t: title,\n        r: referrer\n    };\n};\nvar BUFFERED_PAGE_CONTEXT_KEYS = Object.keys(createBufferedPageContext(\"\", \"\", \"\", \"\", \"\", \"\"));\nfunction isBufferedPageContext(bufferedPageCtx) {\n    if (!isPlainObject(bufferedPageCtx)) return false;\n    if (bufferedPageCtx.__t !== BufferedPageContextDiscriminant) return false;\n    for(var k in bufferedPageCtx){\n        if (!BUFFERED_PAGE_CONTEXT_KEYS.includes(k)) {\n            return false;\n        }\n    }\n    return true;\n}\nvar createCanonicalURL = function(canonicalUrl, searchParams) {\n    return canonicalUrl.indexOf(\"?\") > -1 ? canonicalUrl : canonicalUrl + searchParams;\n};\nvar removeHash = function(href) {\n    var hashIdx = href.indexOf(\"#\");\n    return hashIdx === -1 ? href : href.slice(0, hashIdx);\n};\nvar parseCanonicalPath = function(canonicalUrl) {\n    try {\n        return new URL(canonicalUrl).pathname;\n    } catch (_e) {\n        return canonicalUrl[0] === \"/\" ? canonicalUrl : \"/\" + canonicalUrl;\n    }\n};\nvar createPageContext = function(param) {\n    var canonicalUrl = param.c, pathname = param.p, search = param.s, url = param.u, referrer = param.r, title = param.t;\n    var newPath = canonicalUrl ? parseCanonicalPath(canonicalUrl) : pathname;\n    var newUrl = canonicalUrl ? createCanonicalURL(canonicalUrl, search) : removeHash(url);\n    return {\n        path: newPath,\n        referrer: referrer,\n        search: search,\n        title: title,\n        url: newUrl\n    };\n};\nvar getDefaultBufferedPageContext = function() {\n    var c = document.querySelector(\"link[rel='canonical']\");\n    return createBufferedPageContext(location.href, c && c.getAttribute(\"href\") || void 0, location.search, location.pathname, document.title, document.referrer);\n};\nvar getDefaultPageContext = function() {\n    return createPageContext(getDefaultBufferedPageContext());\n};\nexport { BufferedPageContextDiscriminant, createBufferedPageContext, createPageContext, getDefaultBufferedPageContext, getDefaultPageContext, isBufferedPageContext };\n","export function pick<T extends Record<string, any>, K extends keyof T>(\n  object: T,\n  keys: readonly K[]\n): Pick<T, K>\n\nexport function pick<T extends Record<string, any>>(\n  object: T,\n  keys: string[]\n): Partial<T>\n\n/**\n * @example\n * pick({ 'a': 1, 'b': '2', 'c': 3 }, ['a', 'c'])\n * => { 'a': 1, 'c': 3 }\n */\nexport function pick<T extends Record<string, any>, K extends keyof T>(\n  object: T,\n  keys: string[] | K[] | readonly K[]\n) {\n  return Object.assign(\n    {},\n    ...keys.map((key) => {\n      if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n        return { [key]: object[key] }\n      }\n    })\n  )\n}\n","import { pick } from '../../lib/pick'\nimport { EventProperties, SegmentEvent } from '../events'\nimport { getDefaultPageContext } from '@segment/analytics-page-tools'\n\n/**\n * Augments a segment event with information about the current page.\n * Page information like URL changes frequently, so this is meant to be captured as close to the event call as possible.\n * Things like `userAgent` do not change, so they can be added later in the flow.\n * We prefer not to add this information to this function, as it increases the main bundle size.\n */\nexport const addPageContext = (\n  event: SegmentEvent,\n  pageCtx = getDefaultPageContext()\n): void => {\n  const evtCtx = event.context! // Context should be set earlier in the flow\n  let pageContextFromEventProps: Pick<EventProperties, string> | undefined\n  if (event.type === 'page') {\n    pageContextFromEventProps =\n      event.properties && pick(event.properties, Object.keys(pageCtx))\n\n    event.properties = {\n      ...pageCtx,\n      ...event.properties,\n      ...(event.name ? { name: event.name } : {}),\n    }\n  }\n\n  evtCtx.page = {\n    ...pageCtx,\n    ...pageContextFromEventProps,\n    ...evtCtx.page,\n  }\n}\n","import type { CorePlugin } from '@segment/analytics-core'\nimport type { DestinationMiddlewareFunction } from '../../plugins/middleware'\nimport type { Analytics } from '../analytics'\nimport type { Context } from '../context'\n\nexport interface Plugin extends CorePlugin<Context, Analytics> {}\n\nexport interface InternalPluginWithAddMiddleware extends Plugin {\n  addMiddleware: (...fns: DestinationMiddlewareFunction[]) => void\n}\n\nexport interface InternalDestinationPluginWithAddMiddleware\n  extends InternalPluginWithAddMiddleware {\n  type: 'destination'\n}\n\nexport const isDestinationPluginWithAddMiddleware = (\n  plugin: Plugin\n): plugin is InternalDestinationPluginWithAddMiddleware => {\n  // FYI: segment's plugin does not currently have an 'addMiddleware' method\n  return 'addMiddleware' in plugin && plugin.type === 'destination'\n}\n","import { PriorityQueue } from '../../lib/priority-queue'\nimport { PersistedPriorityQueue } from '../../lib/priority-queue/persisted'\nimport { Context } from '../context'\nimport { Plugin } from '../plugin'\nimport { CoreEventQueue } from '@segment/analytics-core'\nimport { isOffline } from '../connection'\n\nexport class EventQueue extends CoreEventQueue<Context, Plugin> {\n  constructor(name: string)\n  constructor(priorityQueue: PriorityQueue<Context>)\n  constructor(nameOrQueue: string | PriorityQueue<Context>) {\n    super(\n      typeof nameOrQueue === 'string'\n        ? new PersistedPriorityQueue(4, nameOrQueue)\n        : nameOrQueue\n    )\n  }\n  async flush(): Promise<Context[]> {\n    if (isOffline()) return []\n    return super.flush()\n  }\n}\n","import { v4 as uuid } from '@lukeed/uuid'\nimport autoBind from '../../lib/bind-all'\nimport { Traits } from '../events'\nimport {\n  CookieOptions,\n  UniversalStorage,\n  MemoryStorage,\n  StorageObject,\n  StorageSettings,\n  StoreType,\n  applyCookieOptions,\n  initializeStorages,\n  isArrayOfStoreType,\n} from '../storage'\n\nexport type ID = string | null | undefined\n\nexport interface UserOptions {\n  /**\n   * Disables storing any data about the user.\n   */\n  disable?: boolean\n  localStorageFallbackDisabled?: boolean\n  persist?: boolean\n\n  cookie?: {\n    key?: string\n    oldKey?: string\n  }\n\n  localStorage?: {\n    key: string\n  }\n\n  /**\n   * Store priority\n   * @example stores: [StoreType.Cookie, StoreType.Memory]\n   */\n  storage?: StorageSettings\n}\n\nconst defaults = {\n  persist: true,\n  cookie: {\n    key: 'ajs_user_id',\n    oldKey: 'ajs_user',\n  },\n  localStorage: {\n    key: 'ajs_user_traits',\n  },\n}\n\nexport interface WithId {\n  id(id?: ID): ID\n}\n\nexport class User implements WithId {\n  static defaults = defaults\n\n  private idKey: string\n  private traitsKey: string\n  private anonKey: string\n  private cookieOptions?: CookieOptions\n\n  private legacyUserStore: UniversalStorage<{\n    [k: string]:\n      | {\n          id?: string\n          traits?: Traits\n        }\n      | string\n  }>\n  private traitsStore: UniversalStorage<{\n    [k: string]: Traits\n  }>\n\n  private identityStore: UniversalStorage<{\n    [k: string]: string\n  }>\n\n  options: UserOptions = {}\n\n  constructor(options: UserOptions = defaults, cookieOptions?: CookieOptions) {\n    this.options = { ...defaults, ...options }\n    this.cookieOptions = cookieOptions\n\n    this.idKey = options.cookie?.key ?? defaults.cookie.key\n    this.traitsKey = options.localStorage?.key ?? defaults.localStorage.key\n    this.anonKey = 'ajs_anonymous_id'\n\n    this.identityStore = this.createStorage(this.options, cookieOptions)\n\n    // using only cookies for legacy user store\n    this.legacyUserStore = this.createStorage(\n      this.options,\n      cookieOptions,\n      (s) => s === StoreType.Cookie\n    )\n\n    // using only localStorage / memory for traits store\n    this.traitsStore = this.createStorage(\n      this.options,\n      cookieOptions,\n      (s) => s !== StoreType.Cookie\n    )\n\n    const legacyUser = this.legacyUserStore.get(defaults.cookie.oldKey)\n    if (legacyUser && typeof legacyUser === 'object') {\n      legacyUser.id && this.id(legacyUser.id)\n      legacyUser.traits && this.traits(legacyUser.traits)\n    }\n    autoBind(this)\n  }\n\n  id = (id?: ID): ID => {\n    if (this.options.disable) {\n      return null\n    }\n\n    const prevId = this.identityStore.getAndSync(this.idKey)\n\n    if (id !== undefined) {\n      this.identityStore.set(this.idKey, id)\n\n      const changingIdentity = id !== prevId && prevId !== null && id !== null\n      if (changingIdentity) {\n        this.anonymousId(null)\n      }\n    }\n\n    const retId = this.identityStore.getAndSync(this.idKey)\n    if (retId) return retId\n\n    const retLeg = this.legacyUserStore.get(defaults.cookie.oldKey)\n    return retLeg ? (typeof retLeg === 'object' ? retLeg.id : retLeg) : null\n  }\n\n  private legacySIO(): [string, string] | null {\n    const val = this.legacyUserStore.get('_sio') as string\n    if (!val) {\n      return null\n    }\n    const [anon, user] = val.split('----')\n    return [anon, user]\n  }\n\n  anonymousId = (id?: ID): ID => {\n    if (this.options.disable) {\n      return null\n    }\n\n    if (id === undefined) {\n      const val =\n        this.identityStore.getAndSync(this.anonKey) ?? this.legacySIO()?.[0]\n\n      if (val) {\n        return val\n      }\n    }\n\n    if (id === null) {\n      this.identityStore.set(this.anonKey, null)\n      return this.identityStore.getAndSync(this.anonKey)\n    }\n\n    this.identityStore.set(this.anonKey, id ?? uuid())\n    return this.identityStore.getAndSync(this.anonKey)\n  }\n\n  traits = (traits?: Traits | null): Traits | undefined => {\n    if (this.options.disable) {\n      return\n    }\n\n    if (traits === null) {\n      traits = {}\n    }\n\n    if (traits) {\n      this.traitsStore.set(this.traitsKey, traits ?? {})\n    }\n\n    return this.traitsStore.get(this.traitsKey) ?? {}\n  }\n\n  identify(id?: ID, traits?: Traits): void {\n    if (this.options.disable) {\n      return\n    }\n\n    traits = traits ?? {}\n    const currentId = this.id()\n\n    if (currentId === null || currentId === id) {\n      traits = {\n        ...this.traits(),\n        ...traits,\n      }\n    }\n\n    if (id) {\n      this.id(id)\n    }\n\n    this.traits(traits)\n  }\n\n  logout(): void {\n    this.anonymousId(null)\n    this.id(null)\n    this.traits({})\n  }\n\n  reset(): void {\n    this.logout()\n    this.identityStore.clear(this.idKey)\n    this.identityStore.clear(this.anonKey)\n    this.traitsStore.clear(this.traitsKey)\n  }\n\n  load(): User {\n    return new User(this.options, this.cookieOptions)\n  }\n\n  save(): boolean {\n    return true\n  }\n\n  /**\n   * Creates the right storage system applying all the user options, cookie options and particular filters\n   * @param options UserOptions\n   * @param cookieOpts CookieOptions\n   * @param filterStores filter function to apply to any StoreTypes (skipped if options specify using a custom storage)\n   * @returns a Storage object\n   */\n  private createStorage<T extends StorageObject = StorageObject>(\n    options: UserOptions,\n    cookieOpts?: CookieOptions,\n    filterStores?: (value: StoreType) => boolean\n  ): UniversalStorage<T> {\n    let stores: StoreType[] = [\n      StoreType.LocalStorage,\n      StoreType.Cookie,\n      StoreType.Memory,\n    ]\n\n    // If disabled we won't have any storage functionality\n    if (options.disable) {\n      return new UniversalStorage<T>([])\n    }\n\n    // If persistance is disabled we will always fallback to Memory Storage\n    if (!options.persist) {\n      return new UniversalStorage<T>([new MemoryStorage<T>()])\n    }\n\n    if (options.storage !== undefined && options.storage !== null) {\n      if (isArrayOfStoreType(options.storage)) {\n        // If the user only specified order of stores we will still apply filters and transformations e.g. not using localStorage if localStorageFallbackDisabled\n        stores = options.storage.stores\n      }\n    }\n\n    // Disable LocalStorage\n    if (options.localStorageFallbackDisabled) {\n      stores = stores.filter((s) => s !== StoreType.LocalStorage)\n    }\n\n    // Apply Additional filters\n    if (filterStores) {\n      stores = stores.filter(filterStores)\n    }\n\n    return new UniversalStorage(\n      initializeStorages(applyCookieOptions(stores, cookieOpts))\n    )\n  }\n}\n\nconst groupDefaults: UserOptions = {\n  persist: true,\n  cookie: {\n    key: 'ajs_group_id',\n  },\n  localStorage: {\n    key: 'ajs_group_properties',\n  },\n}\n\nexport class Group extends User {\n  constructor(options: UserOptions = groupDefaults, cookie?: CookieOptions) {\n    super({ ...groupDefaults, ...options }, cookie)\n    autoBind(this)\n  }\n\n  anonymousId = (_id?: ID): ID => {\n    return undefined\n  }\n}\n","export default function bindAll<\n  ObjType extends { [key: string]: any },\n  KeyType extends keyof ObjType\n>(obj: ObjType): ObjType {\n  const proto = obj.constructor.prototype\n  for (const key of Object.getOwnPropertyNames(proto)) {\n    if (key !== 'constructor') {\n      const desc = Object.getOwnPropertyDescriptor(\n        obj.constructor.prototype,\n        key\n      )\n      if (!!desc && typeof desc.value === 'function') {\n        obj[key as KeyType] = obj[key].bind(obj)\n      }\n    }\n  }\n\n  return obj\n}\n","/*! js-cookie v3.0.1 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (key, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    key = encodeURIComponent(key)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      key + '=' + converter.write(value, key) + stringifiedAttributes)\n  }\n\n  function get (key) {\n    if (typeof document === 'undefined' || (arguments.length && !key)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var foundKey = decodeURIComponent(parts[0]);\n        jar[foundKey] = converter.read(value, foundKey);\n\n        if (key === foundKey) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return key ? jar[key] : jar\n  }\n\n  return Object.create(\n    {\n      set: set,\n      get: get,\n      remove: function (key, attributes) {\n        set(\n          key,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport default api;\n","import cookie from 'js-cookie'\n\n/**\n * Levels returns all levels of the given url.\n *\n * @param {string} url\n * @return {Array}\n * @api public\n */\nfunction levels(url: URL): string[] {\n  const host = url.hostname\n  const parts = host.split('.')\n  const last = parts[parts.length - 1]\n  const levels: string[] = []\n\n  // Ip address.\n  if (parts.length === 4 && parseInt(last, 10) > 0) {\n    return levels\n  }\n\n  // Localhost.\n  if (parts.length <= 1) {\n    return levels\n  }\n\n  // Create levels.\n  for (let i = parts.length - 2; i >= 0; --i) {\n    levels.push(parts.slice(i).join('.'))\n  }\n\n  return levels\n}\n\nfunction parseUrl(url: string): URL | undefined {\n  try {\n    return new URL(url)\n  } catch {\n    return\n  }\n}\n\nexport function tld(url: string): string | undefined {\n  const parsedUrl = parseUrl(url)\n  if (!parsedUrl) return\n\n  const lvls = levels(parsedUrl)\n\n  // Lookup the real top level one.\n  for (let i = 0; i < lvls.length; ++i) {\n    const cname = '__tld__'\n    const domain = lvls[i]\n    const opts = { domain: '.' + domain }\n\n    try {\n      // cookie access throw an error if the library is ran inside a sandboxed environment (e.g. sandboxed iframe)\n      cookie.set(cname, '1', opts)\n      if (cookie.get(cname)) {\n        cookie.remove(cname, opts)\n        return domain\n      }\n    } catch (_) {\n      return\n    }\n  }\n}\n","import { Store, StorageObject } from './types'\nimport jar from 'js-cookie'\nimport { tld } from '../user/tld'\n\nconst ONE_YEAR = 365\n\nexport interface CookieOptions {\n  maxage?: number\n  domain?: string\n  path?: string\n  secure?: boolean\n  sameSite?: string\n}\n\n/**\n * Data storage using browser cookies\n */\nexport class CookieStorage<Data extends StorageObject = StorageObject>\n  implements Store<Data>\n{\n  static get defaults(): CookieOptions {\n    return {\n      maxage: ONE_YEAR,\n      domain: tld(window.location.href),\n      path: '/',\n      sameSite: 'Lax',\n    }\n  }\n\n  private options: Required<CookieOptions>\n\n  constructor(options: CookieOptions = CookieStorage.defaults) {\n    this.options = {\n      ...CookieStorage.defaults,\n      ...options,\n    } as Required<CookieOptions>\n  }\n\n  private opts(): jar.CookieAttributes {\n    return {\n      sameSite: this.options.sameSite as jar.CookieAttributes['sameSite'],\n      expires: this.options.maxage,\n      domain: this.options.domain,\n      path: this.options.path,\n      secure: this.options.secure,\n    }\n  }\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    try {\n      const value = jar.get(key)\n\n      if (value === undefined || value === null) {\n        return null\n      }\n\n      try {\n        return JSON.parse(value) ?? null\n      } catch (e) {\n        return (value ?? null) as unknown as Data[K] | null\n      }\n    } catch (e) {\n      return null\n    }\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    if (typeof value === 'string') {\n      jar.set(key, value, this.opts())\n    } else if (value === null) {\n      jar.remove(key, this.opts())\n    } else {\n      jar.set(key, JSON.stringify(value), this.opts())\n    }\n  }\n\n  remove<K extends keyof Data>(key: K): void {\n    return jar.remove(key, this.opts())\n  }\n}\n","import { StorageObject, Store } from './types'\n\n/**\n * Data storage using browser's localStorage\n */\nexport class LocalStorage<Data extends StorageObject = StorageObject>\n  implements Store<Data>\n{\n  private localStorageWarning(key: keyof Data, state: 'full' | 'unavailable') {\n    console.warn(`Unable to access ${key}, localStorage may be ${state}`)\n  }\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    try {\n      const val = localStorage.getItem(key)\n      if (val === null) {\n        return null\n      }\n      try {\n        return JSON.parse(val) ?? null\n      } catch (e) {\n        return (val ?? null) as unknown as Data[K] | null\n      }\n    } catch (err) {\n      this.localStorageWarning(key, 'unavailable')\n      return null\n    }\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    try {\n      localStorage.setItem(key, JSON.stringify(value))\n    } catch {\n      this.localStorageWarning(key, 'full')\n    }\n  }\n\n  remove<K extends keyof Data>(key: K): void {\n    try {\n      return localStorage.removeItem(key)\n    } catch (err) {\n      this.localStorageWarning(key, 'unavailable')\n    }\n  }\n}\n","import { Store, StorageObject } from './types'\n\n/**\n * Data Storage using in memory object\n */\nexport class MemoryStorage<Data extends StorageObject = StorageObject>\n  implements Store<Data>\n{\n  private cache: Record<string, unknown> = {}\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    return (this.cache[key] ?? null) as Data[K] | null\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    this.cache[key] = value\n  }\n\n  remove<K extends keyof Data>(key: K): void {\n    delete this.cache[key]\n  }\n}\n","import { CookieOptions } from './cookieStorage'\n\nexport const StoreType = {\n  Cookie: 'cookie',\n  LocalStorage: 'localStorage',\n  Memory: 'memory',\n} as const\n\n/**\n * Known Storage Types\n *\n * Convenience settings for storage systems that AJS includes support for\n */\nexport type StoreType = typeof StoreType[keyof typeof StoreType]\n\nexport type StorageObject = Record<string, unknown>\n\n/**\n * Defines a Storage object for use in AJS Client.\n */\nexport interface Store<Data extends StorageObject = StorageObject> {\n  /**\n   * get value for the key from the stores. it will return the first value found in the stores\n   * @param key key for the value to be retrieved\n   * @returns value for the key or null if not found\n   */\n  get<K extends keyof Data>(key: K): Data[K] | null\n\n  /**\n   * it will set the value for the key in all the stores\n   * @param key key for the value to be stored\n   * @param value value to be stored\n   * @returns value that was stored\n   */\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void\n  /**\n   * remove the value for the key from all the stores\n   * @param key key for the value to be removed\n   * @param storeTypes optional array of store types to be used for removing the value\n   */\n  remove<K extends keyof Data>(key: K): void\n}\n\nexport interface StoreTypeWithSettings<T extends StoreType = StoreType> {\n  name: T\n  settings?: T extends 'cookie' ? CookieOptions : never\n}\n\nexport type InitializeStorageArgs = (StoreTypeWithSettings | StoreType)[]\n","import { StoreType, StoreTypeWithSettings } from './types'\n\nexport type UniversalStorageSettings = { stores: StoreType[] }\n\n// This is setup this way to permit eventually a different set of settings for custom storage\nexport type StorageSettings = UniversalStorageSettings\n\nexport function isArrayOfStoreType(\n  s: StorageSettings\n): s is UniversalStorageSettings {\n  return (\n    s &&\n    s.stores &&\n    Array.isArray(s.stores) &&\n    s.stores.every((e) => Object.values(StoreType).includes(e))\n  )\n}\n\nexport function isStoreTypeWithSettings(\n  s: StoreTypeWithSettings | StoreType\n): s is StoreTypeWithSettings {\n  return typeof s === 'object' && s.name !== undefined\n}\n","import { Store, StorageObject } from './types'\n\n// not adding to private method because those method names do not get minified atm, and does not use 'this'\nconst _logStoreKeyError = (\n  store: Store,\n  action: 'set' | 'get' | 'remove',\n  key: string,\n  err: unknown\n) => {\n  console.warn(\n    `${store.constructor.name}: Can't ${action} key \"${key}\" | Err: ${err}`\n  )\n}\n\n/**\n * Uses multiple storages in a priority list to get/set values in the order they are specified.\n */\nexport class UniversalStorage<Data extends StorageObject = StorageObject> {\n  private stores: Store[]\n\n  constructor(stores: Store[]) {\n    this.stores = stores\n  }\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    let val: Data[K] | null = null\n\n    for (const store of this.stores) {\n      try {\n        val = store.get(key) as Data[K] | null\n        if (val !== undefined && val !== null) {\n          return val\n        }\n      } catch (e) {\n        _logStoreKeyError(store, 'get', key, e)\n      }\n    }\n    return null\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    this.stores.forEach((store) => {\n      try {\n        store.set(key, value)\n      } catch (e) {\n        _logStoreKeyError(store, 'set', key, e)\n      }\n    })\n  }\n\n  clear<K extends keyof Data>(key: K): void {\n    this.stores.forEach((store) => {\n      try {\n        store.remove(key)\n      } catch (e) {\n        _logStoreKeyError(store, 'remove', key, e)\n      }\n    })\n  }\n\n  /*\n    This is to support few scenarios where:\n    - value exist in one of the stores ( as a result of other stores being cleared from browser ) and we want to resync them\n    - read values in AJS 1.0 format ( for customers after 1.0 --> 2.0 migration ) and then re-write them in AJS 2.0 format\n  */\n  getAndSync<K extends keyof Data>(key: K): Data[K] | null {\n    const val = this.get(key)\n\n    // legacy behavior, getAndSync can change the type of a value from number to string (AJS 1.0 stores numerical values as a number)\n    const coercedValue = (typeof val === 'number' ? val.toString() : val) as\n      | Data[K]\n      | null\n\n    this.set(key, coercedValue)\n\n    return coercedValue\n  }\n}\n","import { CookieOptions, CookieStorage } from './cookieStorage'\nimport { LocalStorage } from './localStorage'\nimport { MemoryStorage } from './memoryStorage'\nimport { isStoreTypeWithSettings } from './settings'\nimport { StoreType, Store, InitializeStorageArgs } from './types'\n\nexport * from './types'\nexport * from './localStorage'\nexport * from './cookieStorage'\nexport * from './memoryStorage'\nexport * from './universalStorage'\nexport * from './settings'\n\n/**\n * Creates multiple storage systems from an array of StoreType and options\n * @param args StoreType and options\n * @returns Storage array\n */\nexport function initializeStorages(args: InitializeStorageArgs): Store[] {\n  const storages = args.map((s) => {\n    let type: StoreType\n    let settings\n\n    if (isStoreTypeWithSettings(s)) {\n      type = s.name\n      settings = s.settings\n    } else {\n      type = s\n    }\n\n    switch (type) {\n      case StoreType.Cookie:\n        return new CookieStorage(settings)\n      case StoreType.LocalStorage:\n        return new LocalStorage()\n      case StoreType.Memory:\n        return new MemoryStorage()\n      default:\n        throw new Error(`Unknown Store Type: ${s}`)\n    }\n  })\n  return storages\n}\n\n/**\n * Injects the CookieOptions into a the arguments for initializeStorage\n * @param storeTypes list of storeType\n * @param cookieOptions cookie Options\n * @returns arguments for initializeStorage\n */\nexport function applyCookieOptions(\n  storeTypes: StoreType[],\n  cookieOptions?: CookieOptions\n): InitializeStorageArgs {\n  return storeTypes.map((s) => {\n    if (cookieOptions && s === StoreType.Cookie) {\n      return {\n        name: s,\n        settings: cookieOptions,\n      }\n    }\n    return s\n  })\n}\n","/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nexport const isThenable = (value: unknown): boolean =>\n  typeof value === 'object' &&\n  value !== null &&\n  'then' in value &&\n  typeof (value as any).then === 'function'\n","import { Analytics } from '../analytics'\nimport { Context } from '../context'\nimport { isThenable } from '../../lib/is-thenable'\nimport { AnalyticsBrowserCore } from '../analytics/interfaces'\nimport { version } from '../../generated/version'\nimport { getGlobalAnalytics } from '../../lib/global-analytics-helper'\nimport {\n  isBufferedPageContext,\n  getDefaultBufferedPageContext,\n  createPageContext,\n  BufferedPageContext,\n  PageContext,\n} from '../page'\nimport { getVersionType } from '../../lib/version-type'\n\n/**\n * The names of any AnalyticsBrowser methods that also exist on Analytics\n */\nexport type PreInitMethodName =\n  | 'screen'\n  | 'register'\n  | 'deregister'\n  | 'user'\n  | 'trackSubmit'\n  | 'trackClick'\n  | 'trackLink'\n  | 'trackForm'\n  | 'pageview'\n  | 'identify'\n  | 'reset'\n  | 'group'\n  | 'track'\n  | 'ready'\n  | 'alias'\n  | 'debug'\n  | 'page'\n  | 'once'\n  | 'off'\n  | 'on'\n  | 'addSourceMiddleware'\n  | 'setAnonymousId'\n  | 'addDestinationMiddleware'\n\n// Union of all analytics methods that _do not_ return a Promise\ntype SyncPreInitMethodName = {\n  [MethodName in PreInitMethodName]: ReturnType<\n    Analytics[MethodName]\n  > extends Promise<any>\n    ? never\n    : MethodName\n}[PreInitMethodName]\n\nconst flushSyncAnalyticsCalls = (\n  name: SyncPreInitMethodName,\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n): void => {\n  buffer.getAndRemove(name).forEach((c) => {\n    // While the underlying methods are synchronous, the callAnalyticsMethod returns a promise,\n    // which normalizes success and error states between async and non-async methods, with no perf penalty.\n    callAnalyticsMethod(analytics, c).catch(console.error)\n  })\n}\n\nexport const flushAddSourceMiddleware = async (\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n) => {\n  for (const c of buffer.getAndRemove('addSourceMiddleware')) {\n    await callAnalyticsMethod(analytics, c).catch(console.error)\n  }\n}\n\n/**\n *  Flush register plugin\n */\nexport const flushRegister = async (\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n) => {\n  for (const c of buffer.getAndRemove('register')) {\n    await callAnalyticsMethod(analytics, c).catch(console.error)\n  }\n}\n\nexport const flushOn = flushSyncAnalyticsCalls.bind(this, 'on')\n\nexport const flushSetAnonymousID = flushSyncAnalyticsCalls.bind(\n  this,\n  'setAnonymousId'\n)\n\nexport const flushAnalyticsCallsInNewTask = (\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n): void => {\n  ;(Object.keys(buffer.calls) as (keyof typeof buffer.calls)[]).forEach((m) => {\n    buffer.getAndRemove(m).forEach((c) => {\n      // No one remembers why this event loop optimization is/was neccessary. Lost to history.\n      setTimeout(() => {\n        callAnalyticsMethod(analytics, c).catch(console.error)\n      }, 0)\n    })\n  })\n}\n\nexport const popPageContext = (args: unknown[]): PageContext | undefined => {\n  if (hasBufferedPageContextAsLastArg(args)) {\n    const ctx = args.pop() as BufferedPageContext\n    return createPageContext(ctx)\n  }\n}\n\nexport const hasBufferedPageContextAsLastArg = (\n  args: unknown[]\n): args is [...unknown[], BufferedPageContext] | [BufferedPageContext] => {\n  const lastArg = args[args.length - 1]\n  return isBufferedPageContext(lastArg)\n}\n\n/**\n *  Represents a buffered method call that occurred before initialization.\n */\nexport class PreInitMethodCall<\n  MethodName extends PreInitMethodName = PreInitMethodName\n> {\n  method: MethodName\n  args: PreInitMethodParams<MethodName>\n  called: boolean\n  resolve: (v: ReturnType<Analytics[MethodName]>) => void\n  reject: (reason: any) => void\n  constructor(\n    method: PreInitMethodCall<MethodName>['method'],\n    args: PreInitMethodParams<MethodName>,\n    resolve: PreInitMethodCall<MethodName>['resolve'] = () => {},\n    reject: PreInitMethodCall<MethodName>['reject'] = console.error\n  ) {\n    this.method = method\n    this.resolve = resolve\n    this.reject = reject\n    this.called = false\n    this.args = args\n  }\n}\n\nexport type PreInitMethodParams<MethodName extends PreInitMethodName> =\n  | [...Parameters<Analytics[MethodName]>, BufferedPageContext]\n  | Parameters<Analytics[MethodName]>\n\n/**\n * Infer return type; if return type is promise, unwrap it.\n */\ntype ReturnTypeUnwrap<Fn> = Fn extends (...args: any[]) => infer ReturnT\n  ? ReturnT extends PromiseLike<infer Unwrapped>\n    ? Unwrapped\n    : ReturnT\n  : never\n\ntype MethodCallMap = Partial<Record<PreInitMethodName, PreInitMethodCall[]>>\n\ntype SnippetWindowBufferedMethodCall<\n  MethodName extends PreInitMethodName = PreInitMethodName\n> = [MethodName, ...PreInitMethodParams<MethodName>]\n\n/**\n * A list of the method calls before initialization for snippet users\n * For example, [[\"track\", \"foo\", {bar: 123}], [\"page\"], [\"on\", \"ready\", function(){..}]\n */\ntype SnippetBuffer = SnippetWindowBufferedMethodCall[]\n\n/**\n *  Represents any and all the buffered method calls that occurred before initialization.\n */\nexport class PreInitMethodCallBuffer {\n  private _callMap: MethodCallMap = {}\n\n  constructor(...calls: PreInitMethodCall[]) {\n    this.add(...calls)\n  }\n\n  /**\n   * Pull any buffered method calls from the window object, and use them to hydrate the instance buffer.\n   */\n  public get calls() {\n    this._pushSnippetWindowBuffer()\n    return this._callMap\n  }\n\n  private set calls(calls: MethodCallMap) {\n    this._callMap = calls\n  }\n\n  get<T extends PreInitMethodName>(methodName: T): PreInitMethodCall<T>[] {\n    return (this.calls[methodName] ?? []) as PreInitMethodCall<T>[]\n  }\n\n  /**\n   * Get all buffered method calls for a given method name, and clear them from the buffer.\n   */\n  getAndRemove<T extends PreInitMethodName>(\n    methodName: T\n  ): PreInitMethodCall<T>[] {\n    const calls = this.get(methodName)\n    this.calls[methodName] = []\n    return calls\n  }\n\n  add(...calls: PreInitMethodCall[]): void {\n    calls.forEach((call) => {\n      const eventsExpectingPageContext: PreInitMethodName[] = [\n        'track',\n        'screen',\n        'alias',\n        'group',\n        'page',\n        'identify',\n      ]\n      if (\n        eventsExpectingPageContext.includes(call.method) &&\n        !hasBufferedPageContextAsLastArg(call.args)\n      ) {\n        call.args = [...call.args, getDefaultBufferedPageContext()]\n      }\n\n      if (this.calls[call.method]) {\n        this.calls[call.method]!.push(call)\n      } else {\n        this.calls[call.method] = [call]\n      }\n    })\n  }\n\n  clear(): void {\n    // clear calls in the global snippet buffered array.\n    this._pushSnippetWindowBuffer()\n    // clear calls in this instance\n    this.calls = {}\n  }\n\n  toArray(): PreInitMethodCall[] {\n    return ([] as PreInitMethodCall[]).concat(...Object.values(this.calls))\n  }\n\n  /**\n   * Fetch the buffered method calls from the window object,\n   * normalize them, and use them to hydrate the buffer.\n   * This removes existing buffered calls from the window object.\n   */\n  private _pushSnippetWindowBuffer(): void {\n    // if this is the npm version, we don't want to read from the window object.\n    // This avoids namespace conflicts if there is a seperate analytics library on the page.\n    if (getVersionType() === 'npm') {\n      return undefined\n    }\n    const wa = getGlobalAnalytics()\n    if (!Array.isArray(wa)) return undefined\n    const buffered: SnippetBuffer = wa.splice(0, wa.length)\n    const calls = buffered.map(\n      ([methodName, ...args]) => new PreInitMethodCall(methodName, args)\n    )\n    this.add(...calls)\n  }\n}\n\n/**\n *  Call method and mark as \"called\"\n *  This function should never throw an error\n */\nexport async function callAnalyticsMethod<T extends PreInitMethodName>(\n  analytics: Analytics,\n  call: PreInitMethodCall<T>\n): Promise<void> {\n  try {\n    if (call.called) {\n      return undefined\n    }\n    call.called = true\n\n    const result: ReturnType<Analytics[T]> = (\n      analytics[call.method] as Function\n    )(...call.args)\n\n    if (isThenable(result)) {\n      // do not defer for non-async methods\n      await result\n    }\n\n    call.resolve(result)\n  } catch (err) {\n    call.reject(err)\n  }\n}\n\nexport type AnalyticsLoader = (\n  preInitBuffer: PreInitMethodCallBuffer\n) => Promise<[Analytics, Context]>\n\nexport class AnalyticsBuffered\n  implements PromiseLike<[Analytics, Context]>, AnalyticsBrowserCore\n{\n  instance?: Analytics\n  ctx?: Context\n  private _preInitBuffer: PreInitMethodCallBuffer\n  private _promise: Promise<[Analytics, Context]>\n  constructor(loader: AnalyticsLoader) {\n    this._preInitBuffer = new PreInitMethodCallBuffer()\n    this._promise = loader(this._preInitBuffer)\n    this._promise\n      .then(([ajs, ctx]) => {\n        this.instance = ajs\n        this.ctx = ctx\n      })\n      .catch(() => {\n        // intentionally do nothing...\n        // this result of this promise will be caught by the 'catch' block on this class.\n      })\n  }\n\n  then<T1, T2 = never>(\n    ...args: [\n      onfulfilled:\n        | ((instance: [Analytics, Context]) => T1 | PromiseLike<T1>)\n        | null\n        | undefined,\n      onrejected?: (reason: unknown) => T2 | PromiseLike<T2>\n    ]\n  ) {\n    return this._promise.then(...args)\n  }\n\n  catch<TResult = never>(\n    ...args: [\n      onrejected?:\n        | ((reason: any) => TResult | PromiseLike<TResult>)\n        | undefined\n        | null\n    ]\n  ) {\n    return this._promise.catch(...args)\n  }\n\n  finally(...args: [onfinally?: (() => void) | undefined | null]) {\n    return this._promise.finally(...args)\n  }\n\n  trackSubmit = this._createMethod('trackSubmit')\n  trackClick = this._createMethod('trackClick')\n  trackLink = this._createMethod('trackLink')\n  pageView = this._createMethod('pageview')\n  identify = this._createMethod('identify')\n  reset = this._createMethod('reset')\n  group = this._createMethod('group') as AnalyticsBrowserCore['group']\n  track = this._createMethod('track')\n  ready = this._createMethod('ready')\n  alias = this._createMethod('alias')\n  debug = this._createChainableMethod('debug')\n  page = this._createMethod('page')\n  once = this._createChainableMethod('once')\n  off = this._createChainableMethod('off')\n  on = this._createChainableMethod('on')\n  addSourceMiddleware = this._createMethod('addSourceMiddleware')\n  setAnonymousId = this._createMethod('setAnonymousId')\n  addDestinationMiddleware = this._createMethod('addDestinationMiddleware')\n\n  screen = this._createMethod('screen')\n  register = this._createMethod('register')\n  deregister = this._createMethod('deregister')\n  user = this._createMethod('user')\n  readonly VERSION = version\n\n  private _createMethod<T extends PreInitMethodName>(methodName: T) {\n    return (\n      ...args: Parameters<Analytics[T]>\n    ): Promise<ReturnTypeUnwrap<Analytics[T]>> => {\n      if (this.instance) {\n        const result = (this.instance[methodName] as Function)(...args)\n        return Promise.resolve(result)\n      }\n      return new Promise((resolve, reject) => {\n        this._preInitBuffer.add(\n          new PreInitMethodCall(methodName, args, resolve as any, reject)\n        )\n      })\n    }\n  }\n\n  /**\n   *  These are for methods that where determining when the method gets \"flushed\" is not important.\n   *  These methods will resolve when analytics is fully initialized, and return type (other than Analytics)will not be available.\n   */\n  private _createChainableMethod<T extends PreInitMethodName>(methodName: T) {\n    return (...args: Parameters<Analytics[T]>): AnalyticsBuffered => {\n      if (this.instance) {\n        void (this.instance[methodName] as Function)(...args)\n        return this\n      } else {\n        this._preInitBuffer.add(new PreInitMethodCall(methodName, args))\n      }\n\n      return this\n    }\n  }\n}\n","import { Facade } from '@segment/facade'\nimport { Analytics } from '../../core/analytics'\nimport { CDNSettings } from '../../browser'\nimport { isOffline } from '../../core/connection'\nimport { Context } from '../../core/context'\nimport { Plugin } from '../../core/plugin'\nimport { PriorityQueue } from '../../lib/priority-queue'\nimport { PersistedPriorityQueue } from '../../lib/priority-queue/persisted'\nimport { toFacade } from '../../lib/to-facade'\nimport batch from './batched-dispatcher'\nimport standard from './fetch-dispatcher'\nimport { normalize } from './normalize'\nimport { scheduleFlush } from './schedule-flush'\nimport { SEGMENT_API_HOST } from '../../core/constants'\nimport { DeliveryStrategy } from './shared-dispatcher'\n\nexport type SegmentioSettings = {\n  apiKey: string\n  apiHost?: string\n  protocol?: 'http' | 'https'\n\n  addBundledMetadata?: boolean\n  unbundledIntegrations?: string[]\n  bundledConfigIds?: string[]\n  unbundledConfigIds?: string[]\n\n  maybeBundledConfigIds?: Record<string, string[]>\n\n  deliveryStrategy?: DeliveryStrategy\n}\n\ntype JSON = ReturnType<Facade['json']>\n\nfunction onAlias(analytics: Analytics, json: JSON): JSON {\n  const user = analytics.user()\n  json.previousId =\n    json.previousId ?? json.from ?? user.id() ?? user.anonymousId()\n  json.userId = json.userId ?? json.to\n  delete json.from\n  delete json.to\n  return json\n}\n\nexport type SegmentIOPluginMetadata = {\n  writeKey: string\n  apiHost: string\n  protocol: string\n}\nexport interface SegmentIOPlugin extends Plugin {\n  metadata: SegmentIOPluginMetadata\n}\n\nexport const isSegmentPlugin = (plugin: Plugin): plugin is SegmentIOPlugin => {\n  return plugin.name === 'Segment.io'\n}\n\nexport function segmentio(\n  analytics: Analytics,\n  settings?: SegmentioSettings,\n  integrations?: CDNSettings['integrations']\n): Plugin {\n  // Attach `pagehide` before buffer is created so that inflight events are added\n  // to the buffer before the buffer persists events in its own `pagehide` handler.\n  window.addEventListener('pagehide', () => {\n    buffer.push(...Array.from(inflightEvents))\n    inflightEvents.clear()\n  })\n\n  const writeKey = settings?.apiKey ?? ''\n\n  const buffer = analytics.options.disableClientPersistence\n    ? new PriorityQueue<Context>(analytics.queue.queue.maxAttempts, [])\n    : new PersistedPriorityQueue(\n        analytics.queue.queue.maxAttempts,\n        `${writeKey}:dest-Segment.io`\n      )\n\n  const inflightEvents = new Set<Context>()\n  const flushing = false\n\n  const apiHost = settings?.apiHost ?? SEGMENT_API_HOST\n  const protocol = settings?.protocol ?? 'https'\n  const remote = `${protocol}://${apiHost}`\n\n  const deliveryStrategy = settings?.deliveryStrategy\n  const client =\n    deliveryStrategy &&\n    'strategy' in deliveryStrategy &&\n    deliveryStrategy.strategy === 'batching'\n      ? batch(apiHost, deliveryStrategy.config)\n      : standard(deliveryStrategy?.config)\n\n  async function send(ctx: Context): Promise<Context> {\n    if (isOffline()) {\n      buffer.push(ctx)\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      scheduleFlush(flushing, buffer, segmentio, scheduleFlush)\n      return ctx\n    }\n\n    inflightEvents.add(ctx)\n\n    const path = ctx.event.type.charAt(0)\n\n    let json = toFacade(ctx.event).json()\n\n    if (ctx.event.type === 'track') {\n      delete json.traits\n    }\n\n    if (ctx.event.type === 'alias') {\n      json = onAlias(analytics, json)\n    }\n\n    if (buffer.getAttempts(ctx) >= buffer.maxAttempts) {\n      inflightEvents.delete(ctx)\n      return ctx\n    }\n\n    return client\n      .dispatch(\n        `${remote}/${path}`,\n        normalize(analytics, json, settings, integrations, ctx)\n      )\n      .then(() => ctx)\n      .catch((error) => {\n        ctx.log('error', 'Error sending event', error)\n        if (error.name === 'RateLimitError') {\n          const timeout = error.retryTimeout\n          buffer.pushWithBackoff(ctx, timeout)\n        } else {\n          buffer.pushWithBackoff(ctx)\n        }\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        scheduleFlush(flushing, buffer, segmentio, scheduleFlush)\n        return ctx\n      })\n      .finally(() => {\n        inflightEvents.delete(ctx)\n      })\n  }\n\n  const segmentio: SegmentIOPlugin = {\n    metadata: {\n      writeKey,\n      apiHost,\n      protocol,\n    },\n    name: 'Segment.io',\n    type: 'destination',\n    version: '0.1.0',\n    isLoaded: (): boolean => true,\n    load: (): Promise<void> => Promise.resolve(),\n    track: send,\n    identify: send,\n    page: send,\n    alias: send,\n    group: send,\n    screen: send,\n  }\n\n  // Buffer may already have items if they were previously stored in localStorage.\n  // Start flushing them immediately.\n  if (buffer.todo) {\n    scheduleFlush(flushing, buffer, segmentio, scheduleFlush)\n  }\n\n  return segmentio\n}\n","import { SegmentEvent } from '../../core/events'\nimport { fetch } from '../../lib/fetch'\nimport { onPageChange } from '../../lib/on-page-change'\nimport { SegmentFacade } from '../../lib/to-facade'\nimport { RateLimitError } from './ratelimit-error'\nimport { Context } from '../../core/context'\nimport { BatchingDispatchConfig, createHeaders } from './shared-dispatcher'\n\nconst MAX_PAYLOAD_SIZE = 500\nconst MAX_KEEPALIVE_SIZE = 64\n\nfunction kilobytes(buffer: unknown): number {\n  const size = encodeURI(JSON.stringify(buffer)).split(/%..|./).length - 1\n  return size / 1024\n}\n\n/**\n * Checks if the payload is over or close to\n * the maximum payload size allowed by tracking\n * API.\n */\nfunction approachingTrackingAPILimit(buffer: unknown): boolean {\n  return kilobytes(buffer) >= MAX_PAYLOAD_SIZE - 50\n}\n\n/**\n * Checks if payload is over or approaching the limit for keepalive\n * requests. If keepalive is enabled we want to avoid\n * going over this to prevent data loss.\n */\nfunction passedKeepaliveLimit(buffer: unknown): boolean {\n  return kilobytes(buffer) >= MAX_KEEPALIVE_SIZE - 10\n}\n\nfunction chunks(batch: object[]): Array<object[]> {\n  const result: object[][] = []\n  let index = 0\n\n  batch.forEach((item) => {\n    const size = kilobytes(result[index])\n    if (size >= 64) {\n      index++\n    }\n\n    if (result[index]) {\n      result[index].push(item)\n    } else {\n      result[index] = [item]\n    }\n  })\n\n  return result\n}\n\nexport default function batch(\n  apiHost: string,\n  config?: BatchingDispatchConfig\n) {\n  let buffer: object[] = []\n  let pageUnloaded = false\n\n  const limit = config?.size ?? 10\n  const timeout = config?.timeout ?? 5000\n  let rateLimitTimeout = 0\n\n  function sendBatch(batch: object[]) {\n    if (batch.length === 0) {\n      return\n    }\n\n    const writeKey = (batch[0] as SegmentEvent)?.writeKey\n\n    // Remove sentAt from every event as batching only needs a single timestamp\n    const updatedBatch = batch.map((event) => {\n      const { sentAt, ...newEvent } = event as SegmentEvent\n      return newEvent\n    })\n\n    return fetch(`https://${apiHost}/b`, {\n      credentials: config?.credentials,\n      keepalive: config?.keepalive || pageUnloaded,\n      headers: createHeaders(config?.headers),\n      method: 'post',\n      body: JSON.stringify({\n        writeKey,\n        batch: updatedBatch,\n        sentAt: new Date().toISOString(),\n      }),\n      // @ts-ignore - not in the ts lib yet\n      priority: config?.priority,\n    }).then((res) => {\n      if (res.status >= 500) {\n        throw new Error(`Bad response from server: ${res.status}`)\n      }\n      if (res.status === 429) {\n        const retryTimeoutStringSecs = res.headers?.get('x-ratelimit-reset')\n        const retryTimeoutMS =\n          typeof retryTimeoutStringSecs == 'string'\n            ? parseInt(retryTimeoutStringSecs) * 1000\n            : timeout\n        throw new RateLimitError(\n          `Rate limit exceeded: ${res.status}`,\n          retryTimeoutMS\n        )\n      }\n    })\n  }\n\n  async function flush(attempt = 1): Promise<unknown> {\n    if (buffer.length) {\n      const batch = buffer\n      buffer = []\n      return sendBatch(batch)?.catch((error) => {\n        const ctx = Context.system()\n        ctx.log('error', 'Error sending batch', error)\n        if (attempt <= (config?.maxRetries ?? 10)) {\n          if (error.name === 'RateLimitError') {\n            rateLimitTimeout = error.retryTimeout\n          }\n          buffer.push(...batch)\n          buffer.map((event) => {\n            if ('_metadata' in event) {\n              const segmentEvent = event as ReturnType<SegmentFacade['json']>\n              segmentEvent._metadata = {\n                ...segmentEvent._metadata,\n                retryCount: attempt,\n              }\n            }\n          })\n          scheduleFlush(attempt + 1)\n        }\n      })\n    }\n  }\n\n  let schedule: NodeJS.Timeout | undefined\n\n  function scheduleFlush(attempt = 1): void {\n    if (schedule) {\n      return\n    }\n\n    schedule = setTimeout(\n      () => {\n        schedule = undefined\n        flush(attempt).catch(console.error)\n      },\n      rateLimitTimeout ? rateLimitTimeout : timeout\n    )\n    rateLimitTimeout = 0\n  }\n\n  onPageChange((unloaded) => {\n    pageUnloaded = unloaded\n\n    if (pageUnloaded && buffer.length) {\n      const reqs = chunks(buffer).map(sendBatch)\n      Promise.all(reqs).catch(console.error)\n    }\n  })\n\n  async function dispatch(_url: string, body: object): Promise<unknown> {\n    buffer.push(body)\n\n    const bufferOverflow =\n      buffer.length >= limit ||\n      approachingTrackingAPILimit(buffer) ||\n      (config?.keepalive && passedKeepaliveLimit(buffer))\n\n    return bufferOverflow || pageUnloaded ? flush() : scheduleFlush()\n  }\n\n  return {\n    dispatch,\n  }\n}\n","/**\n * Register event listener on document that fires when:\n * * tab change or tab close (in mobile or desktop)\n * * click back / forward button\n * * click any link or perform any other navigation action\n * * soft refresh / hard refresh\n *\n * adapted from https://stackoverflow.com/questions/3239834/window-onbeforeunload-not-working-on-the-ipad/52864508#52864508,\n */\nexport const onPageChange = (cb: (unloaded: boolean) => void) => {\n  let unloaded = false // prevents double firing if both are supported\n\n  window.addEventListener('pagehide', () => {\n    if (unloaded) return\n    unloaded = true\n    cb(unloaded)\n  })\n\n  // using document instead of window because of bug affecting browsers before safari 14 (detail in footnotes https://caniuse.com/?search=visibilitychange)\n  document.addEventListener('visibilitychange', () => {\n    if (document.visibilityState == 'hidden') {\n      if (unloaded) return\n      unloaded = true\n    } else {\n      unloaded = false\n    }\n    cb(unloaded)\n  })\n}\n","export class RateLimitError extends Error {\n  retryTimeout: number\n\n  constructor(message: string, retryTimeout: number) {\n    super(message)\n    this.retryTimeout = retryTimeout\n    this.name = 'RateLimitError'\n  }\n}\n","export const createHeaders = (\n  headerSettings: AdditionalHeaders | undefined\n): Record<string, string> => {\n  return {\n    'Content-Type': 'text/plain',\n    ...(typeof headerSettings === 'function'\n      ? headerSettings()\n      : headerSettings),\n  }\n}\n\n/**\n * Additional headers to be sent with the request.\n * Default is `Content-Type: text/plain`. This can be overridden.\n * If a function is provided, it will be called before each request.\n */\nexport type AdditionalHeaders =\n  | Record<string, string>\n  | (() => Record<string, string>)\n\nexport type RequestPriority = 'high' | 'low' | 'auto'\nexport type RequestCredentials = 'include' | 'same-origin' | 'omit'\n\n/**\n * These are the options that can be passed to the fetch dispatcher.\n * They more/less map to the Fetch RequestInit type.\n */\ninterface DispatchFetchConfig {\n  /**\n   * Request credentials configuration\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials\n   */\n  credentials?: RequestCredentials\n  /**\n   * This is useful for ensuring that an event is sent even if the user navigates away from the page.\n   * However, it may increase the likelihood of events being lost, as there is a 64kb limit for *all* fetch requests (not just ones to segment) with keepalive (which is why it's disabled by default). So, if you're sending a lot of data, this will likely cause events to be dropped.\n\n   * @default false\n   */\n  keepalive?: boolean\n  /**\n   * Additional headers to be sent with the request.\n   * Default is `Content-Type: text/plain`. This can be overridden.\n   * If a function is provided, it will be called before each request.\n   * @example { 'Content-Type': 'application/json' } or () => { 'Content-Type': 'application/json' }\n   */\n  headers?: AdditionalHeaders\n  /**\n   * 'Request Priority' of the request\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/RequestInit#priority\n   */\n  priority?: RequestPriority\n}\n\nexport interface BatchingDispatchConfig extends DispatchFetchConfig {\n  /**\n   * If strategy = 'batching', the maximum number of events to send in a single request. If the batch reaches this size, a request will automatically be sent.\n   *\n   * @default 10\n   */\n  size?: number\n  /**\n   * If strategy = 'batching', the maximum time, in milliseconds, to wait before sending a request.\n   * This won't alaways be relevant, as the request will be sent when the size is reached.\n   * However, if the size is never reached, the request will be sent after this time.\n   * When it comes to retries, if there is a rate limit timeout header, that will be respected over the value here.\n   *\n   * @default 5000\n   */\n  timeout?: number\n  /**\n   * If strategy = 'batching', the maximum number of retries to attempt before giving up.\n   * @default 10\n   */\n  maxRetries?: number\n}\n\nexport interface StandardDispatcherConfig extends DispatchFetchConfig {}\n\nexport type DeliveryStrategy =\n  | {\n      strategy?: 'standard'\n      config: StandardDispatcherConfig\n    }\n  | {\n      strategy: 'batching'\n      config?: BatchingDispatchConfig\n    }\n","import { fetch } from '../../lib/fetch'\nimport { RateLimitError } from './ratelimit-error'\nimport { createHeaders, StandardDispatcherConfig } from './shared-dispatcher'\nexport type Dispatcher = (url: string, body: object) => Promise<unknown>\n\nexport default function (config?: StandardDispatcherConfig): {\n  dispatch: Dispatcher\n} {\n  function dispatch(url: string, body: object): Promise<unknown> {\n    return fetch(url, {\n      credentials: config?.credentials,\n      keepalive: config?.keepalive,\n      headers: createHeaders(config?.headers),\n      method: 'post',\n      body: JSON.stringify(body),\n      // @ts-ignore - not in the ts lib yet\n      priority: config?.priority,\n    }).then((res) => {\n      if (res.status >= 500) {\n        throw new Error(`Bad response from server: ${res.status}`)\n      }\n      if (res.status === 429) {\n        const retryTimeoutStringSecs = res.headers?.get('x-ratelimit-reset')\n        const retryTimeoutMS = retryTimeoutStringSecs\n          ? parseInt(retryTimeoutStringSecs) * 1000\n          : 5000\n        throw new RateLimitError(\n          `Rate limit exceeded: ${res.status}`,\n          retryTimeoutMS\n        )\n      }\n    })\n  }\n\n  return {\n    dispatch,\n  }\n}\n","import { Analytics } from '../../core/analytics'\nimport { CDNSettings } from '../../browser'\nimport { SegmentFacade } from '../../lib/to-facade'\nimport { SegmentioSettings } from './index'\nimport { Context } from '../../core/context'\n\nexport function normalize(\n  analytics: Analytics,\n  json: ReturnType<SegmentFacade['json']>,\n  settings?: SegmentioSettings,\n  integrations?: CDNSettings['integrations'],\n  ctx?: Context\n): object {\n  const user = analytics.user()\n\n  delete json.options\n\n  json.writeKey = settings?.apiKey\n\n  json.userId = json.userId || user.id()\n  json.anonymousId = json.anonymousId || user.anonymousId()\n\n  json.sentAt = new Date()\n\n  const failed = analytics.queue.failedInitializations || []\n  if (failed.length > 0) {\n    json._metadata = { failedInitializations: failed }\n  }\n\n  if (ctx != null) {\n    if (ctx.attempts > 1) {\n      json._metadata = {\n        ...json._metadata,\n        retryCount: ctx.attempts,\n      }\n    }\n    ctx.attempts++\n  }\n\n  const bundled: string[] = []\n  const unbundled: string[] = []\n\n  for (const key in integrations) {\n    const integration = integrations[key]\n    if (key === 'Segment.io') {\n      bundled.push(key)\n    }\n    if (integration.bundlingStatus === 'bundled') {\n      bundled.push(key)\n    }\n    if (integration.bundlingStatus === 'unbundled') {\n      unbundled.push(key)\n    }\n  }\n\n  // This will make sure that the disabled cloud mode destinations will be\n  // included in the unbundled list.\n  for (const settingsUnbundled of settings?.unbundledIntegrations || []) {\n    if (!unbundled.includes(settingsUnbundled)) {\n      unbundled.push(settingsUnbundled)\n    }\n  }\n\n  const configIds = settings?.maybeBundledConfigIds ?? {}\n  const bundledConfigIds: string[] = []\n\n  bundled.sort().forEach((name) => {\n    ;(configIds[name] ?? []).forEach((id) => {\n      bundledConfigIds.push(id)\n    })\n  })\n\n  if (settings?.addBundledMetadata !== false) {\n    json._metadata = {\n      ...json._metadata,\n      bundled: bundled.sort(),\n      unbundled: unbundled.sort(),\n      bundledIds: bundledConfigIds,\n    }\n  }\n\n  return json\n}\n","import { isOffline } from '../../core/connection'\nimport { Context } from '../../core/context'\nimport { Plugin } from '../../core/plugin'\nimport { attempt } from '@segment/analytics-core'\nimport { pWhile } from '../../lib/p-while'\nimport { PriorityQueue } from '../../lib/priority-queue'\n\nasync function flushQueue(\n  xt: Plugin,\n  queue: PriorityQueue<Context>\n): Promise<PriorityQueue<Context>> {\n  const failedQueue: Context[] = []\n  if (isOffline()) {\n    return queue\n  }\n\n  await pWhile(\n    () => queue.length > 0 && !isOffline(),\n    async () => {\n      const ctx = queue.pop()\n      if (!ctx) {\n        return\n      }\n\n      const result = await attempt(ctx, xt)\n      const success = result instanceof Context\n      if (!success) {\n        failedQueue.push(ctx)\n      }\n    }\n  )\n  // re-add failed tasks\n  failedQueue.map((failed) => queue.pushWithBackoff(failed))\n  return queue\n}\n\nexport function scheduleFlush(\n  flushing: boolean,\n  buffer: PriorityQueue<Context>,\n  xt: Plugin,\n  scheduleFlush: Function\n): void {\n  if (flushing) {\n    return\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-misused-promises\n  setTimeout(async () => {\n    let isFlushing = true\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    const newBuffer = await flushQueue(xt, buffer)\n    isFlushing = false\n\n    if (buffer.todo > 0) {\n      scheduleFlush(isFlushing, newBuffer, xt, scheduleFlush)\n    }\n  }, Math.random() * 5000)\n}\n","/**\n * Returns `process.env` if it is available in the environment.\n * Always returns an object make it similarly easy to use as `process.env`.\n */\nexport function getProcessEnv(): { [key: string]: string | undefined } {\n  if (typeof process === 'undefined' || !process.env) {\n    return {}\n  }\n\n  return process.env\n}\n","import { getProcessEnv } from '../lib/get-process-env'\nimport { getCDN, setGlobalCDNUrl } from '../lib/parse-cdn'\nimport { Analytics, NullAnalytics } from '../core/analytics'\nimport { Context } from '../core/context'\nimport { Plugin } from '../core/plugin'\nimport { mergedOptions } from '../lib/merged-options'\nimport { createDeferred } from '@segment/analytics-generic-utils'\nimport { envEnrichment } from '../plugins/env-enrichment'\nimport { PluginFactory, remoteLoader } from '../plugins/remote-loader'\nimport { segmentio, SegmentioSettings } from '../plugins/segmentio'\nimport {\n  AnalyticsBuffered,\n  PreInitMethodCallBuffer,\n  flushAnalyticsCallsInNewTask,\n  flushAddSourceMiddleware,\n  flushSetAnonymousID,\n  flushOn,\n  PreInitMethodCall,\n  flushRegister,\n} from '../core/buffer'\nimport { ClassicIntegrationSource } from '../plugins/ajs-destination/types'\nimport { attachInspector } from '../core/inspector'\nimport { Stats } from '../core/stats'\nimport { setGlobalAnalyticsKey } from '../lib/global-analytics-helper'\nimport { CDNSettings, AnalyticsBrowserSettings, InitOptions } from './settings'\nimport { fetch } from '../lib/fetch'\n\nexport type { CDNSettings, AnalyticsBrowserSettings }\n\nexport function loadCDNSettings(\n  writeKey: string,\n  baseUrl: string\n): Promise<CDNSettings> {\n  return fetch(`${baseUrl}/v1/projects/${writeKey}/settings`)\n    .then((res) => {\n      if (!res.ok) {\n        return res.text().then((errorResponseMessage) => {\n          throw new Error(errorResponseMessage)\n        })\n      }\n      return res.json()\n    })\n    .catch((err) => {\n      console.error(err.message)\n      throw err\n    })\n}\n\nfunction hasLegacyDestinations(settings: CDNSettings): boolean {\n  return (\n    getProcessEnv().NODE_ENV !== 'test' &&\n    // just one integration means segmentio\n    Object.keys(settings.integrations).length > 1\n  )\n}\n\nfunction hasTsubMiddleware(settings: CDNSettings): boolean {\n  return (\n    getProcessEnv().NODE_ENV !== 'test' &&\n    (settings.middlewareSettings?.routingRules?.length ?? 0) > 0\n  )\n}\n\n/**\n * With AJS classic, we allow users to call setAnonymousId before the library initialization.\n * This is important because some of the destinations will use the anonymousId during the initialization,\n * and if we set anonId afterwards, that wouldnt impact the destination.\n *\n * Also Ensures events can be registered before library initialization.\n * This is important so users can register to 'initialize' and any events that may fire early during setup.\n */\nfunction flushPreBuffer(\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n): void {\n  flushSetAnonymousID(analytics, buffer)\n  flushOn(analytics, buffer)\n}\n\n/**\n * Finish flushing buffer and cleanup.\n */\nasync function flushFinalBuffer(\n  analytics: Analytics,\n  queryString: string,\n  buffer: PreInitMethodCallBuffer\n): Promise<void> {\n  await flushQueryString(analytics, queryString)\n  flushAnalyticsCallsInNewTask(analytics, buffer)\n}\n\nconst getQueryString = (): string => {\n  const hash = window.location.hash ?? ''\n  const search = window.location.search ?? ''\n  const term = search.length ? search : hash.replace(/(?=#).*(?=\\?)/, '')\n  return term\n}\n\nconst flushQueryString = async (\n  analytics: Analytics,\n  queryString: string\n): Promise<void> => {\n  if (queryString.includes('ajs_')) {\n    await analytics.queryString(queryString).catch(console.error)\n  }\n}\n\nasync function registerPlugins(\n  writeKey: string,\n  cdnSettings: CDNSettings,\n  analytics: Analytics,\n  options: InitOptions,\n  pluginLikes: (Plugin | PluginFactory)[] = [],\n  legacyIntegrationSources: ClassicIntegrationSource[],\n  preInitBuffer: PreInitMethodCallBuffer\n): Promise<Context> {\n  flushPreBuffer(analytics, preInitBuffer)\n  const pluginsFromSettings = pluginLikes?.filter(\n    (pluginLike) => typeof pluginLike === 'object'\n  ) as Plugin[]\n\n  const pluginSources = pluginLikes?.filter(\n    (pluginLike) =>\n      typeof pluginLike === 'function' &&\n      typeof pluginLike.pluginName === 'string'\n  ) as PluginFactory[]\n\n  const tsubMiddleware = hasTsubMiddleware(cdnSettings)\n    ? await import(\n        /* webpackChunkName: \"tsub-middleware\" */ '../plugins/routing-middleware'\n      ).then((mod) => {\n        return mod.tsubMiddleware(cdnSettings.middlewareSettings!.routingRules)\n      })\n    : undefined\n\n  const legacyDestinations =\n    hasLegacyDestinations(cdnSettings) || legacyIntegrationSources.length > 0\n      ? await import(\n          /* webpackChunkName: \"ajs-destination\" */ '../plugins/ajs-destination'\n        ).then((mod) => {\n          return mod.ajsDestinations(\n            writeKey,\n            cdnSettings,\n            analytics.integrations,\n            options,\n            tsubMiddleware,\n            legacyIntegrationSources\n          )\n        })\n      : []\n\n  if (cdnSettings.legacyVideoPluginsEnabled) {\n    await import(\n      /* webpackChunkName: \"legacyVideos\" */ '../plugins/legacy-video-plugins'\n    ).then((mod) => {\n      return mod.loadLegacyVideoPlugins(analytics)\n    })\n  }\n\n  const schemaFilter = options.plan?.track\n    ? await import(\n        /* webpackChunkName: \"schemaFilter\" */ '../plugins/schema-filter'\n      ).then((mod) => {\n        return mod.schemaFilter(options.plan?.track, cdnSettings)\n      })\n    : undefined\n\n  const mergedSettings = mergedOptions(cdnSettings, options)\n  const remotePlugins = await remoteLoader(\n    cdnSettings,\n    analytics.integrations,\n    mergedSettings,\n    options,\n    tsubMiddleware,\n    pluginSources\n  ).catch(() => [])\n\n  const basePlugins = [envEnrichment, ...legacyDestinations, ...remotePlugins]\n\n  if (schemaFilter) {\n    basePlugins.push(schemaFilter)\n  }\n\n  const shouldIgnoreSegmentio =\n    (options.integrations?.All === false &&\n      !options.integrations['Segment.io']) ||\n    (options.integrations && options.integrations['Segment.io'] === false)\n\n  if (!shouldIgnoreSegmentio) {\n    basePlugins.push(\n      await segmentio(\n        analytics,\n        mergedSettings['Segment.io'],\n        cdnSettings.integrations\n      )\n    )\n  }\n\n  // order is important here, (for example, if there are multiple enrichment plugins, the last registered plugin will have access to the last context.)\n  const ctx = await analytics.register(\n    // register 'core' plugins and those via destinations\n    ...basePlugins,\n    // register user-defined plugins passed into AnalyticsBrowser.load({ plugins: [plugin1, plugin2] }) -- relevant to npm-only\n    ...pluginsFromSettings\n  )\n  // register user-defined plugins registered via analytics.register()\n  await flushRegister(analytics, preInitBuffer)\n\n  if (\n    Object.entries(cdnSettings.enabledMiddleware ?? {}).some(\n      ([, enabled]) => enabled\n    )\n  ) {\n    await import(\n      /* webpackChunkName: \"remoteMiddleware\" */ '../plugins/remote-middleware'\n    ).then(async ({ remoteMiddlewares }) => {\n      const middleware = await remoteMiddlewares(\n        ctx,\n        cdnSettings,\n        options.obfuscate\n      )\n      const promises = middleware.map((mdw) =>\n        analytics.addSourceMiddleware(mdw)\n      )\n      return Promise.all(promises)\n    })\n  }\n\n  // register any user-defined plugins added via analytics.addSourceMiddleware()\n  await flushAddSourceMiddleware(analytics, preInitBuffer)\n\n  return ctx\n}\n\nasync function loadAnalytics(\n  settings: AnalyticsBrowserSettings,\n  options: InitOptions = {},\n  preInitBuffer: PreInitMethodCallBuffer\n): Promise<[Analytics, Context]> {\n  // return no-op analytics instance if disabled\n  if (options.disable === true) {\n    return [new NullAnalytics(), Context.system()]\n  }\n\n  if (options.globalAnalyticsKey)\n    setGlobalAnalyticsKey(options.globalAnalyticsKey)\n  // this is an ugly side-effect, but it's for the benefits of the plugins that get their cdn via getCDN()\n  if (settings.cdnURL) setGlobalCDNUrl(settings.cdnURL)\n\n  if (options.initialPageview) {\n    // capture the page context early, so it's always up-to-date\n    preInitBuffer.add(new PreInitMethodCall('page', []))\n  }\n\n  // reading the query string as early as possible in case the URL changes\n  const queryString = getQueryString()\n\n  const cdnURL = settings.cdnURL ?? getCDN()\n  let cdnSettings =\n    settings.cdnSettings ?? (await loadCDNSettings(settings.writeKey, cdnURL))\n\n  if (options.updateCDNSettings) {\n    cdnSettings = options.updateCDNSettings(cdnSettings)\n  }\n\n  // if options.disable is a function, we allow user to disable analytics based on CDN Settings\n  if (typeof options.disable === 'function') {\n    const disabled = await options.disable(cdnSettings)\n    if (disabled) {\n      return [new NullAnalytics(), Context.system()]\n    }\n  }\n\n  const retryQueue: boolean =\n    cdnSettings.integrations['Segment.io']?.retryQueue ?? true\n\n  options = {\n    retryQueue,\n    ...options,\n  }\n\n  const analytics = new Analytics({ ...settings, cdnSettings, cdnURL }, options)\n\n  attachInspector(analytics)\n\n  const plugins = settings.plugins ?? []\n\n  const classicIntegrations = settings.classicIntegrations ?? []\n\n  const segmentLoadOptions = options.integrations?.['Segment.io'] as\n    | SegmentioSettings\n    | undefined\n\n  Stats.initRemoteMetrics({\n    ...cdnSettings.metrics,\n    host: segmentLoadOptions?.apiHost ?? cdnSettings.metrics?.host,\n    protocol: segmentLoadOptions?.protocol,\n  })\n\n  const ctx = await registerPlugins(\n    settings.writeKey,\n    cdnSettings,\n    analytics,\n    options,\n    plugins,\n    classicIntegrations,\n    preInitBuffer\n  )\n\n  analytics.initialized = true\n  analytics.emit('initialize', settings, options)\n  await flushFinalBuffer(analytics, queryString, preInitBuffer)\n\n  return [analytics, ctx]\n}\n\n/**\n * The public browser interface for Segment Analytics\n *\n * @example\n * ```ts\n *  export const analytics = new AnalyticsBrowser()\n *  analytics.load({ writeKey: 'foo' })\n * ```\n * @link https://github.com/segmentio/analytics-next/#readme\n */\nexport class AnalyticsBrowser extends AnalyticsBuffered {\n  private _resolveLoadStart: (\n    settings: AnalyticsBrowserSettings,\n    options: InitOptions\n  ) => void\n\n  constructor() {\n    const { promise: loadStart, resolve: resolveLoadStart } =\n      createDeferred<Parameters<AnalyticsBrowser['load']>>()\n\n    super((buffer) =>\n      loadStart.then(([settings, options]) =>\n        loadAnalytics(settings, options, buffer)\n      )\n    )\n\n    this._resolveLoadStart = (settings, options) =>\n      resolveLoadStart([settings, options])\n  }\n\n  /**\n   * Fully initialize an analytics instance, including:\n   *\n   * * Fetching settings from the segment CDN (by default).\n   * * Fetching all remote destinations configured by the user (if applicable).\n   * * Flushing buffered analytics events.\n   * * Loading all middleware.\n   *\n   * Note:  This method should only be called *once* in your application.\n   *\n   * @example\n   * ```ts\n   * export const analytics = new AnalyticsBrowser()\n   * analytics.load({ writeKey: 'foo' })\n   * ```\n   */\n  load(\n    settings: AnalyticsBrowserSettings,\n    options: InitOptions = {}\n  ): AnalyticsBrowser {\n    this._resolveLoadStart(settings, options)\n    return this\n  }\n\n  /**\n   * Instantiates an object exposing Analytics methods.\n   *\n   * @example\n   * ```ts\n   * const ajs = AnalyticsBrowser.load({ writeKey: '<YOUR_WRITE_KEY>' })\n   *\n   * ajs.track(\"foo\")\n   * ...\n   * ```\n   */\n  static load(\n    settings: AnalyticsBrowserSettings,\n    options: InitOptions = {}\n  ): AnalyticsBrowser {\n    return new AnalyticsBrowser().load(settings, options)\n  }\n\n  static standalone(\n    writeKey: string,\n    options?: InitOptions\n  ): Promise<Analytics> {\n    return AnalyticsBrowser.load({ writeKey }, options).then((res) => res[0])\n  }\n}\n","import jar from 'js-cookie'\nimport type { Context } from '../../core/context'\nimport type { Plugin } from '../../core/plugin'\nimport { version } from '../../generated/version'\nimport { SegmentEvent } from '../../core/events'\nimport { Campaign, PluginType } from '@segment/analytics-core'\nimport { getVersionType } from '../../lib/version-type'\nimport { tld } from '../../core/user/tld'\nimport { gracefulDecodeURIComponent } from '../../core/query-string/gracefulDecodeURIComponent'\nimport { CookieStorage, UniversalStorage } from '../../core/storage'\nimport { Analytics } from '../../core/analytics'\nimport { clientHints } from '../../lib/client-hints'\nimport { UADataValues } from '../../lib/client-hints/interfaces'\n\nlet cookieOptions: jar.CookieAttributes | undefined\nfunction getCookieOptions(): jar.CookieAttributes {\n  if (cookieOptions) {\n    return cookieOptions\n  }\n\n  const domain = tld(window.location.href)\n  cookieOptions = {\n    expires: 31536000000, // 1 year\n    secure: false,\n    path: '/',\n  }\n  if (domain) {\n    cookieOptions.domain = domain\n  }\n\n  return cookieOptions\n}\n\ntype Ad = { id: string; type: string }\n\nfunction ads(query: string): Ad | undefined {\n  const queryIds: Record<string, string> = {\n    btid: 'dataxu',\n    urid: 'millennial-media',\n  }\n\n  if (query.startsWith('?')) {\n    query = query.substring(1)\n  }\n  query = query.replace(/\\?/g, '&')\n  const parts = query.split('&')\n\n  for (const part of parts) {\n    const [k, v] = part.split('=')\n    if (queryIds[k]) {\n      return {\n        id: v,\n        type: queryIds[k],\n      }\n    }\n  }\n}\n\nexport function utm(query: string): Campaign {\n  if (query.startsWith('?')) {\n    query = query.substring(1)\n  }\n  query = query.replace(/\\?/g, '&')\n\n  return query.split('&').reduce((acc, str) => {\n    const [k, v = ''] = str.split('=')\n    if (k.includes('utm_') && k.length > 4) {\n      let utmParam = k.slice(4) as keyof Campaign\n      if (utmParam === 'campaign') {\n        utmParam = 'name'\n      }\n      acc[utmParam] = gracefulDecodeURIComponent(v)\n    }\n    return acc\n  }, {} as Campaign)\n}\n\nexport function ampId(): string | undefined {\n  const ampId = jar.get('_ga')\n  if (ampId && ampId.startsWith('amp')) {\n    return ampId\n  }\n}\n\nfunction referrerId(\n  query: string,\n  ctx: SegmentEvent['context'],\n  disablePersistance: boolean\n): void {\n  const storage = new UniversalStorage<{\n    's:context.referrer': Ad\n  }>(disablePersistance ? [] : [new CookieStorage(getCookieOptions())])\n\n  const stored = storage.get('s:context.referrer')\n\n  const ad = ads(query) ?? stored\n\n  if (!ad) {\n    return\n  }\n\n  if (ctx) {\n    ctx.referrer = { ...ctx.referrer, ...ad }\n  }\n\n  storage.set('s:context.referrer', ad)\n}\n\n/**\n *\n * @param obj e.g. { foo: 'b', bar: 'd', baz: ['123', '456']}\n * @returns e.g. 'foo=b&bar=d&baz=123&baz=456'\n */\nconst objectToQueryString = (\n  obj: Record<string, string | string[]>\n): string => {\n  try {\n    const searchParams = new URLSearchParams()\n    Object.entries(obj).forEach(([k, v]) => {\n      if (Array.isArray(v)) {\n        v.forEach((value) => searchParams.append(k, value))\n      } else {\n        searchParams.append(k, v)\n      }\n    })\n    return searchParams.toString()\n  } catch {\n    return ''\n  }\n}\n\nclass EnvironmentEnrichmentPlugin implements Plugin {\n  private instance!: Analytics\n  private userAgentData: UADataValues | undefined\n\n  name = 'Page Enrichment'\n  type: PluginType = 'before'\n  version = '0.1.0'\n  isLoaded = () => true\n  load = async (_ctx: Context, instance: Analytics) => {\n    this.instance = instance\n    try {\n      this.userAgentData = await clientHints(\n        this.instance.options.highEntropyValuesClientHints\n      )\n    } catch (_) {\n      // if client hints API doesn't return anything leave undefined\n    }\n    return Promise.resolve()\n  }\n\n  private enrich = (ctx: Context): Context => {\n    // Note: Types are off - context should never be undefined here, since it is set as part of event creation.\n    const evtCtx = ctx.event.context!\n\n    const search = evtCtx.page!.search || ''\n\n    const query =\n      typeof search === 'object' ? objectToQueryString(search) : search\n\n    evtCtx.userAgent = navigator.userAgent\n    evtCtx.userAgentData = this.userAgentData\n\n    // @ts-ignore\n    const locale = navigator.userLanguage || navigator.language\n\n    if (typeof evtCtx.locale === 'undefined' && typeof locale !== 'undefined') {\n      evtCtx.locale = locale\n    }\n\n    evtCtx.library ??= {\n      name: 'analytics.js',\n      version: `${getVersionType() === 'web' ? 'next' : 'npm:next'}-${version}`,\n    }\n\n    if (query && !evtCtx.campaign) {\n      evtCtx.campaign = utm(query)\n    }\n\n    const amp = ampId()\n    if (amp) {\n      evtCtx.amp = { id: amp }\n    }\n\n    referrerId(\n      query,\n      evtCtx,\n      this.instance.options.disableClientPersistence ?? false\n    )\n\n    try {\n      evtCtx.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone\n    } catch (_) {\n      // If browser doesn't have support leave timezone undefined\n    }\n\n    return ctx\n  }\n\n  track = this.enrich\n  identify = this.enrich\n  page = this.enrich\n  group = this.enrich\n  alias = this.enrich\n  screen = this.enrich\n}\n\nexport const envEnrichment = new EnvironmentEnrichmentPlugin()\n","import { HighEntropyHint, NavigatorUAData, UADataValues } from './interfaces'\n\nexport async function clientHints(\n  hints?: HighEntropyHint[]\n): Promise<UADataValues | undefined> {\n  const userAgentData = (navigator as any).userAgentData as\n    | NavigatorUAData\n    | undefined\n\n  if (!userAgentData) return undefined\n\n  if (!hints) return userAgentData.toJSON()\n  return userAgentData\n    .getHighEntropyValues(hints)\n    .catch(() => userAgentData.toJSON())\n}\n","import { CDNSettings } from '../../browser'\nimport { JSONObject, JSONValue } from '../../core/events'\nimport { Plugin, InternalPluginWithAddMiddleware } from '../../core/plugin'\nimport { loadScript } from '../../lib/load-script'\nimport { getCDN } from '../../lib/parse-cdn'\nimport {\n  applyDestinationMiddleware,\n  DestinationMiddlewareFunction,\n} from '../middleware'\nimport { Context, ContextCancelation } from '../../core/context'\nimport { recordIntegrationMetric } from '../../core/stats/metric-helpers'\nimport { Analytics, InitOptions } from '../../core/analytics'\nimport { createDeferred } from '@segment/analytics-generic-utils'\nimport { IntegrationsInitOptions } from '../../browser/settings'\n\nexport interface RemotePlugin {\n  /** The name of the remote plugin */\n  name: string\n  /** The creation name of the remote plugin */\n  creationName: string\n  /** The url of the javascript file to load */\n  url: string\n  /** The UMD/global name the plugin uses. Plugins are expected to exist here with the `PluginFactory` method signature */\n  libraryName: string\n  /** The settings related to this plugin. */\n  settings: JSONObject\n}\n\nexport class ActionDestination implements InternalPluginWithAddMiddleware {\n  name: string // destination name\n  version = '1.0.0'\n  /**\n   * The lifecycle name of the wrapped plugin.\n   * This does not need to be 'destination', and can be 'enrichment', etc.\n   */\n  type: Plugin['type']\n\n  alternativeNames: string[] = []\n\n  private loadPromise = createDeferred<unknown>()\n\n  middleware: DestinationMiddlewareFunction[] = []\n\n  action: Plugin\n\n  constructor(name: string, action: Plugin) {\n    this.action = action\n    this.name = name\n    this.type = action.type\n    this.alternativeNames.push(action.name)\n  }\n\n  addMiddleware(...fn: DestinationMiddlewareFunction[]): void {\n    /** Make sure we only apply destination filters to actions of the \"destination\" type to avoid causing issues for hybrid destinations */\n    if (this.type === 'destination') {\n      this.middleware.push(...fn)\n    }\n  }\n\n  private async transform(ctx: Context): Promise<Context> {\n    const modifiedEvent = await applyDestinationMiddleware(\n      this.name,\n      ctx.event,\n      this.middleware\n    )\n\n    if (modifiedEvent === null) {\n      ctx.cancel(\n        new ContextCancelation({\n          retry: false,\n          reason: 'dropped by destination middleware',\n        })\n      )\n    }\n\n    return new Context(modifiedEvent!)\n  }\n\n  private _createMethod(\n    methodName: 'track' | 'page' | 'identify' | 'alias' | 'group' | 'screen'\n  ) {\n    return async (ctx: Context): Promise<Context> => {\n      if (!this.action[methodName]) return ctx\n\n      let transformedContext: Context = ctx\n      // Transformations only allowed for destination plugins. Other plugin types support mutating events.\n      if (this.type === 'destination') {\n        transformedContext = await this.transform(ctx)\n      }\n\n      try {\n        if (!(await this.ready())) {\n          throw new Error(\n            'Something prevented the destination from getting ready'\n          )\n        }\n\n        recordIntegrationMetric(ctx, {\n          integrationName: this.action.name,\n          methodName,\n          type: 'action',\n        })\n\n        await this.action[methodName]!(transformedContext)\n      } catch (error) {\n        recordIntegrationMetric(ctx, {\n          integrationName: this.action.name,\n          methodName,\n          type: 'action',\n          didError: true,\n        })\n        throw error\n      }\n\n      return ctx\n    }\n  }\n\n  alias = this._createMethod('alias')\n  group = this._createMethod('group')\n  identify = this._createMethod('identify')\n  page = this._createMethod('page')\n  screen = this._createMethod('screen')\n  track = this._createMethod('track')\n\n  /* --- PASSTHROUGH METHODS --- */\n  isLoaded(): boolean {\n    return this.action.isLoaded()\n  }\n\n  async ready(): Promise<boolean> {\n    try {\n      await this.loadPromise.promise\n      return true\n    } catch {\n      return false\n    }\n  }\n\n  async load(ctx: Context, analytics: Analytics): Promise<unknown> {\n    if (this.loadPromise.isSettled()) {\n      return this.loadPromise.promise\n    }\n\n    try {\n      recordIntegrationMetric(ctx, {\n        integrationName: this.action.name,\n        methodName: 'load',\n        type: 'action',\n      })\n\n      const loadP = this.action.load(ctx, analytics)\n\n      this.loadPromise.resolve(await loadP)\n      return loadP\n    } catch (error) {\n      recordIntegrationMetric(ctx, {\n        integrationName: this.action.name,\n        methodName: 'load',\n        type: 'action',\n        didError: true,\n      })\n\n      this.loadPromise.reject(error)\n      throw error\n    }\n  }\n\n  unload(ctx: Context, analytics: Analytics): Promise<unknown> | unknown {\n    return this.action.unload?.(ctx, analytics)\n  }\n}\n\nexport type PluginFactory = {\n  (settings: JSONValue): Plugin | Plugin[] | Promise<Plugin | Plugin[]>\n  pluginName: string\n}\n\nfunction validate(pluginLike: unknown): pluginLike is Plugin[] {\n  if (!Array.isArray(pluginLike)) {\n    throw new Error('Not a valid list of plugins')\n  }\n\n  const required = ['load', 'isLoaded', 'name', 'version', 'type']\n  pluginLike.forEach((plugin) => {\n    required.forEach((method) => {\n      if (plugin[method] === undefined) {\n        throw new Error(\n          `Plugin: ${\n            plugin.name ?? 'unknown'\n          } missing required function ${method}`\n        )\n      }\n    })\n  })\n\n  return true\n}\n\nfunction isPluginDisabled(\n  userIntegrations: IntegrationsInitOptions,\n  remotePlugin: RemotePlugin\n) {\n  const creationNameEnabled = userIntegrations[remotePlugin.creationName]\n  const currentNameEnabled = userIntegrations[remotePlugin.name]\n\n  // Check that the plugin isn't explicitly enabled when All: false\n  if (\n    userIntegrations.All === false &&\n    !creationNameEnabled &&\n    !currentNameEnabled\n  ) {\n    return true\n  }\n\n  // Check that the plugin isn't explicitly disabled\n  if (creationNameEnabled === false || currentNameEnabled === false) {\n    return true\n  }\n\n  return false\n}\n\nasync function loadPluginFactory(\n  remotePlugin: RemotePlugin,\n  obfuscate?: boolean\n): Promise<void | PluginFactory> {\n  try {\n    const defaultCdn = new RegExp('https://cdn.segment.(com|build)')\n    const cdn = getCDN()\n\n    if (obfuscate) {\n      const urlSplit = remotePlugin.url.split('/')\n      const name = urlSplit[urlSplit.length - 2]\n      const obfuscatedURL = remotePlugin.url.replace(\n        name,\n        btoa(name).replace(/=/g, '')\n      )\n      try {\n        await loadScript(obfuscatedURL.replace(defaultCdn, cdn))\n      } catch (error) {\n        // Due to syncing concerns it is possible that the obfuscated action destination (or requested version) might not exist.\n        // We should use the unobfuscated version as a fallback.\n        await loadScript(remotePlugin.url.replace(defaultCdn, cdn))\n      }\n    } else {\n      await loadScript(remotePlugin.url.replace(defaultCdn, cdn))\n    }\n\n    // @ts-expect-error\n    if (typeof window[remotePlugin.libraryName] === 'function') {\n      // @ts-expect-error\n      return window[remotePlugin.libraryName] as PluginFactory\n    }\n  } catch (err) {\n    console.error('Failed to create PluginFactory', remotePlugin)\n    throw err\n  }\n}\n\nexport async function remoteLoader(\n  settings: CDNSettings,\n  integrations: IntegrationsInitOptions,\n  mergedIntegrations: Record<string, JSONObject>,\n  options?: InitOptions,\n  routingMiddleware?: DestinationMiddlewareFunction,\n  pluginSources?: PluginFactory[]\n): Promise<Plugin[]> {\n  const allPlugins: Plugin[] = []\n\n  const routingRules = settings.middlewareSettings?.routingRules ?? []\n\n  const pluginPromises = (settings.remotePlugins ?? []).map(\n    async (remotePlugin) => {\n      if (isPluginDisabled(integrations, remotePlugin)) return\n\n      try {\n        const pluginFactory =\n          pluginSources?.find(\n            ({ pluginName }) => pluginName === remotePlugin.name\n          ) || (await loadPluginFactory(remotePlugin, options?.obfuscate))\n\n        if (pluginFactory) {\n          const intg = mergedIntegrations[remotePlugin.name]\n          const plugin = await pluginFactory({\n            ...remotePlugin.settings,\n            ...intg,\n          })\n          const plugins = Array.isArray(plugin) ? plugin : [plugin]\n\n          validate(plugins)\n\n          const routing = routingRules.filter(\n            (rule) => rule.destinationName === remotePlugin.creationName\n          )\n\n          plugins.forEach((plugin) => {\n            const wrapper = new ActionDestination(\n              remotePlugin.creationName,\n              plugin\n            )\n\n            if (routing.length && routingMiddleware) {\n              wrapper.addMiddleware(routingMiddleware)\n            }\n\n            allPlugins.push(wrapper)\n          })\n        }\n      } catch (error) {\n        console.warn('Failed to load Remote Plugin', error)\n      }\n    }\n  )\n\n  await Promise.all(pluginPromises)\n  return allPlugins.filter(Boolean)\n}\n","import { getGlobal } from '../../lib/get-global'\nimport type { Analytics } from '../analytics'\n\nconst env = getGlobal()\n\n// The code below assumes the inspector extension will use Object.assign\n// to add the inspect interface on to this object reference (unless the\n// extension code ran first and has already set up the variable)\nconst inspectorHost: {\n  attach: (analytics: Analytics) => void\n} = ((env as any)['__SEGMENT_INSPECTOR__'] ??= {})\n\nexport const attachInspector = (analytics: Analytics) =>\n  inspectorHost.attach?.(analytics as any)\n","export { Analytics } from './core/analytics'\nexport { AnalyticsBrowser } from './browser'\nexport type {\n  AnalyticsBrowserSettings,\n  CDNSettings,\n  RemoteIntegrationSettings,\n  AnalyticsSettings,\n  InitOptions,\n} from './browser/settings'\nexport * from './node'\n\nexport * from './core/context'\nexport * from './core/events'\nexport * from './core/plugin'\nexport * from './core/user'\n\nexport type { AnalyticsSnippet } from './browser/standalone-interface'\nexport type { MiddlewareFunction } from './plugins/middleware'\nexport { getGlobalAnalytics } from './lib/global-analytics-helper'\nexport { UniversalStorage, Store, StorageObject } from './core/storage'\nexport { segmentio } from './plugins/segmentio'\nexport {\n  resolveAliasArguments,\n  resolveArguments,\n  resolvePageArguments,\n  resolveUserArguments,\n} from './core/arguments-resolver'\n","import { environmentConfig } from \"../config/environment\";\nimport type { SDKConfig } from \"../sdk.types\";\n\nexport class BackendApiService {\n  private apiUrl: string;\n  private providerSessionId: string | undefined;\n\n  constructor({ environment, providerSessionId }: SDKConfig) {\n    const { BUY_API_URL } = environmentConfig[environment];\n    this.apiUrl = BUY_API_URL;\n    this.providerSessionId = providerSessionId;\n  }\n\n  async getLedgerSessionId(): Promise<string> {\n    const url = `${this.apiUrl}/session`;\n\n    const finalUrl = new URL(url);\n\n    if (this.providerSessionId) {\n      finalUrl.searchParams.append(\"providerSessionId\", this.providerSessionId);\n    }\n\n    try {\n      const response = await fetch(finalUrl, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}  ${response.statusText}`);\n      }\n\n      const data: { ledgerSessionId?: string } = await response.json();\n\n      if (!data.ledgerSessionId) {\n        throw new Error(\"Response missing 'ledgerSessionId'\");\n      }\n\n      return data.ledgerSessionId;\n    } catch (error) {\n      console.error(\"Error fetching session ID:\", error);\n      throw error;\n    }\n  }\n}\n","import type { Context } from \"@segment/analytics-next\";\nimport { AnalyticsBrowser } from \"@segment/analytics-next\";\n\nimport { BackendApiService } from \"./BackendApi\";\nimport { environmentConfig } from \"../config/environment\";\nimport type { EventMap } from \"../config/events\";\nimport type {\n  TrackingStrategy,\n  SDKConfig,\n  TrackingContext,\n} from \"../sdk.types\";\n\nexport class FrontendTracking implements TrackingStrategy {\n  private segment: AnalyticsBrowser;\n  private backendApi: BackendApiService;\n  private ledgerSessionIdPromise: Promise<string | null>;\n\n  constructor(config: SDKConfig) {\n    console.log(\"Initialized FrontendTracking with config:\", config);\n\n    const { SEGMENT_WRITE_KEY } = environmentConfig[config.environment];\n\n    this.backendApi = new BackendApiService(config);\n    this.segment = AnalyticsBrowser.load(\n      { writeKey: SEGMENT_WRITE_KEY },\n      {\n        disableClientPersistence: true,\n      }\n    );\n\n    this.ledgerSessionIdPromise = this.fetchLedgerSessionId();\n  }\n\n  private async fetchLedgerSessionId(): Promise<string | null> {\n    return (this.ledgerSessionIdPromise = this.backendApi\n      .getLedgerSessionId()\n      .catch((err) => {\n        console.error(\"Failed to get ledgerSessionId:\", err);\n        return null;\n      }));\n  }\n\n  private async getLedgerSessionId(): Promise<string | null> {\n    return this.ledgerSessionIdPromise;\n  }\n\n  async trackEvent<K extends keyof EventMap>(\n    eventName: K,\n    params: EventMap[K],\n    context?: TrackingContext\n  ): Promise<Context | void> {\n    const ledgerSessionId = await this.getLedgerSessionId();\n\n    return this.segment.track(\n      eventName,\n      { ...params, ledgerSessionId },\n      context\n    );\n  }\n\n  async identify(userId: string) {\n    return this.segment.identify(userId);\n  }\n}\n","import type { Context } from \"@segment/analytics-next\";\n\nimport { environmentConfig } from \"./config/environment\";\nimport type { EventMap } from \"./config/events\";\nimport { eventSchemas } from \"./config/events\";\nimport { createRemoteConfigManager } from \"./config/remote\";\nimport type { TrackingStrategy, SDKConfig, TrackingContext } from \"./sdk.types\";\nimport { BackendTracking } from \"./services/BackendTracking\";\nimport { FrontendTracking } from \"./services/FrontendTracking\";\n\n/**\n * Tracking is per session so we create one instance at runtime\n * this will prevent issues where the client may instantiate multiple times\n * and we end up calling BE services more often than we would like\n */\nexport class TrackingSdkFactory {\n  private static instance: TrackingSdk | null = null;\n\n  static getInstance(config: SDKConfig): TrackingSdk {\n    if (!this.instance) {\n      this.instance = new TrackingSdk(config);\n    }\n    return this.instance;\n  }\n\n  static resetInstance() {\n    this.instance = null;\n  }\n}\n\nclass TrackingSdk {\n  private strategyPromise: Promise<TrackingStrategy>;\n  private sdkConfig: SDKConfig;\n\n  constructor(sdkConfig: SDKConfig) {\n    this.sdkConfig = sdkConfig;\n    this.strategyPromise = this.fetchTrackingStrategy();\n  }\n\n  private async fetchTrackingStrategy(): Promise<TrackingStrategy> {\n    const config = environmentConfig[this.sdkConfig.environment];\n    const remoteConfigManager = await createRemoteConfigManager({\n      apiKey: config.FIREBASE_API_KEY,\n      authDomain: config.FIREBASE_AUTH_DOMAIN,\n      projectId: config.FIREBASE_PROJECT_ID,\n      storageBucket: config.FIREBASE_STORAGE_BUCKET,\n      messagingSenderId: config.FIREBASE_MESSAGING_SENDER_ID,\n      appId: config.FIREBASE_APP_ID,\n      minimumFetchIntervalMillis: config.FIREBASE_MIN_FETCH_INTERVAL_MS,\n    });\n\n    const strategyConfig = await remoteConfigManager.getFlag(\n      \"feature_tracking_strategy\"\n    );\n    const value = JSON.parse(strategyConfig.asString());\n\n    return value.enabled && value.params.strategy === \"phase2\"\n      ? new BackendTracking(this.sdkConfig)\n      : new FrontendTracking(this.sdkConfig);\n  }\n\n  private async getStrategy(): Promise<TrackingStrategy> {\n    return this.strategyPromise;\n  }\n\n  async trackEvent<K extends keyof EventMap>(\n    eventName: K,\n    props: EventMap[K],\n    context?: TrackingContext\n  ): Promise<Context | void> {\n    const schema = eventSchemas[eventName];\n\n    if (!schema) {\n      console.error(`[TrackingSDK] Invalid event name \"${String(eventName)}\"`);\n      return;\n    }\n\n    const result = schema.safeParse(props);\n\n    if (!result.success) {\n      console.error(\n        `[TrackingSDK] Invalid event params for event \"${String(eventName)}\":`,\n        result.error.format()\n      );\n      return;\n    }\n\n    const strategy = await this.getStrategy();\n\n    try {\n      return strategy.trackEvent(eventName, props, context);\n    } catch (error) {\n      console.error(\"[TrackingSDK] Error sending event\", error);\n    }\n  }\n\n  async identify(userId: string): Promise<Context | void> {\n    const strategy = await this.getStrategy();\n    try {\n      return strategy.identify(userId);\n    } catch (error) {\n      console.error(\"[TrackingSDK] Error sending identify\", error);\n    }\n  }\n}\n"],"mappings":"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","names":["__extends","d","b","extendStatics","__","__rest","s","e","t","p","i","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","reject","fulfilled","step","rejected","result","__generator","body","_","f","y","g","verb","n","v","op","__spreadArray","to","from","pack","l","ar","__assign","init_tslib_es6","__esmMin","init_interface","__esmMin","init_plugins","__esmMin","init_interfaces","__esmMin","dset","obj","keys","val","l","t","x","k","init_dist","__esmMin","pickBy","init_pick","__esmMin","obj","fn","k","acc","key","ValidationError","_super","__extends","field","message","_this","isString","obj","isNumber","isFunction","exists","val","isPlainObject","init_helpers","__esmMin","assertEventExists","event","exists","ValidationError","nilError","objError","assertEventType","isString","stringError","assertTrackEventName","assertTrackEventProperties","isPlainObject","assertTraits","assertMessageId","validateEvent","init_assertions","__esmMin","init_errors","init_helpers","InternalEventFactorySettings","CoreEventFactory","init_interfaces","init_dist","init_pick","init_assertions","settings","_a","_b","event","properties","options","integrationOptions","__assign","category","page","screen","userId","traits","integrationsOptions","groupId","to","from","base","eventOverrideKeys","providedOptionsKeys","context","eventOverrides","key","dset","integrationBooleans","integrationNames","name","pickBy","_","value","allIntegrations","_c","overrides","rest","__rest","evt","validateEvent","pTimeout","promise","timeout","resolve","reject","timeoutId","val","sleep","timeoutInMs","invokeCallback","ctx","callback","delay","cb","err","init_callback","__esmMin","createDeferred","init_create_deferred","__esmMin","resolve","reject","settled","promise","_resolve","_reject","args","_i","init_create_deferred","__esmMin","Emitter","init_emitter","__esmMin","options","_a","event","callback","_this","on","args","_i","fns","without","fn","callbacks","init_emitter","__esmMin","init_esm","__esmMin","init_create_deferred","init_emitter","backoff","params","random","_a","minTimeout","_b","factor","attempt","_c","maxTimeout","init_backoff","__esmMin","ON_REMOVE_FROM_FUTURE","PriorityQueue","init_esm","init_backoff","_super","__extends","maxAttempts","queue","seen","_this","items","_i","accepted","operation","attempts","b","item","minTimeout","attempt","timeout","backoff","f","_a","Emitter","v4","i","num","out","BUFFER","IDX","HEX","init_dist","__esmMin","CoreLogger","level","message","extras","time","formatted","logs","log","line","__assign","key","_c","_b","_a","logEntry","compactMetricType","CoreStats","NullStats","type","enums","metric","by","tags","value","formatted","m","__assign","_super","__extends","_args","_i","ContextCancelation","CoreContext","init_context","__esmMin","init_dist","init_logger","init_stats","options","_a","_b","_c","event","id","stats","logger","v4","NullStats","CoreLogger","other","error","level","message","extras","path","val","integrationName","dset","groupBy","collection","grouper","results","item","key","suggestedKey","__spreadArray","_a","isThenable","init_is_thenable","__esmMin","value","createTaskGroup","init_task_group","__esmMin","init_is_thenable","taskCompletionPromise","resolvePromise","count","op","returnValue","isThenable","res","tryAsync","fn","_a","err_1","attempt","ctx","plugin","start","hook","newCtx","done","err","ContextCancelation","ensure","newContext","CoreContext","init_context","CoreEventQueue","init_group_by","init_priority_queue","init_context","init_esm","init_task_group","init_delivery","_super","__extends","priorityQueue","_this","createTaskGroup","ON_REMOVE_FROM_FUTURE","ctx","plugin","instance","handleLoadError","err","p","_a","err_1","e_1","willDeliver","resolve","onDeliver","flushed","delivered","accepted","timeout","start","done","error","err_2","retriable","ContextCancelation","err_3","denyList","available","alternativeNameMatch","name","_c","_b","groupBy","before","enrichment","_d","destination","_e","after","before_1","_i","beforeWare","ensure","temp","_f","CoreContext","enrichment_1","enrichmentWare","attempt","destinations","reject","attempts","afterCalls","Emitter","init_analytics","__esmMin","dispatch","ctx","queue","emitter","options","startTime","dispatched","_a","invokeCallback","getDelay","init_callback","startTimeInEpochMS","timeoutInMS","elapsedTime","init_bind_all","__esmMin","init_esm","__esmMin","init_interface","init_plugins","init_interfaces","init_events","init_callback","init_priority_queue","init_context","init_event_queue","init_analytics","init_dispatch","init_helpers","init_errors","init_assertions","init_bind_all","init_stats","init_delivery","isBrowser","isServer","init_environment","__esmMin","isOnline","isBrowser","isOffline","init_connection","__esmMin","init_environment","url","options","Promise","resolve","reject","request","XMLHttpRequest","keys","all","headers","response","ok","status","statusText","responseURL","text","responseText","json","then","JSON","parse","blob","Blob","clone","entries","get","n","toLowerCase","has","i","open","method","onload","getAllResponseHeaders","replace","m","key","value","push","onerror","withCredentials","credentials","setRequestHeader","send","body","getGlobal","init_get_global","__esmMin","fetch","init_fetch","__esmMin","init_unfetch_module","init_get_global","args","_i","global","getGlobal","unfetch_module_default","version","init_version","__esmMin","getVersionType","_version","init_version_type","__esmMin","SEGMENT_API_HOST","init_constants","__esmMin","logError","err","createRemoteMetric","RemoteMetrics","init_fetch","init_version","init_version_type","init_constants","metric","tags","versionType","formattedTags","acc","t","_a","k","v","__assign","version","options","_this","SEGMENT_API_HOST","_b","_c","_d","_e","flushing_1","run_1","remoteMetric","getVersionType","error","payload","headers","url","fetch","remoteMetrics","Stats","init_esm","init_remote_metrics","_super","__extends","options","RemoteMetrics","metric","by","tags","CoreStats","Context","init_esm","init_stats","_super","__extends","event","id","Stats","CoreContext","init_priority_queue","__esmMin","init_esm","persisted","key","items","loc","p","Context","persistItems","existing","all","__spreadArray","merged","acc","item","__assign","_a","seen","stored","persistSeen","memory","remove","mutex","onUnlock","attempt","lockTimeout","lockKey","expired","lock","rawLock","allowed","now","PersistedPriorityQueue","init_priority_queue","init_context","init_environment","isBrowser","err","_super","__extends","maxAttempts","_this","itemsKey","seenKey","saved","lastSeen","items_1","PriorityQueue","getGlobalAnalytics","_globalAnalyticsKey","setGlobalAnalyticsKey","key","setGlobalAnalytics","analytics","init_global_analytics_helper","__esmMin","require_obj_case","__commonJSMin","exports","module","multiple","find","obj","key","val","options","replace","del","fn","path","normalize","isFunction","defaultNormalize","finished","loop","normalizedKey","temp","child","require_address","__commonJSMin","exports","obj_case_1","__importDefault","trait","a","b","traits","props","default_1","proto","clone","properties","temp","key","exports","require_is_enabled","__commonJSMin","exports","disabled","default_1","integration","require_lib","__commonJSMin","exports","matcher","iso","numericKeys","arr","offset","i","val","millis","string","strict","require_milliseconds","__commonJSMin","exports","matcher","string","millis","require_seconds","__commonJSMin","exports","matcher","string","seconds","millis","require_lib","__commonJSMin","exports","module","isodate","milliseconds","seconds","objProto","toStr","isDate","value","isNumber","val","toMs","num","require_lib","__commonJSMin","exports","module","isodate","traverse","input","strict","traverseObject","traverseArray","obj","key","arr","value","index","require_facade","__commonJSMin","exports","address_1","__importDefault","clone_1","is_enabled_1","new_date_1","obj_case_1","isodate_traverse_1","Facade","obj","opts","f","field","fields","transform","path","multi","one","ret","integration","options","integrations","value","allEnabled","enabled","settings","active","aliases","id","alias","library","device","require_inherits_browser","__commonJSMin","exports","module","ctor","superCtor","TempCtor","require_inherits","__commonJSMin","exports","module","util","require_alias","__commonJSMin","exports","inherits_1","__importDefault","facade_1","Alias","dictionary","opts","matcher","isEmail","string","exports","require_group","__commonJSMin","exports","inherits_1","__importDefault","is_email_1","new_date_1","facade_1","Group","dictionary","opts","g","created","email","groupId","aliases","ret","id","alias","value","require_identify","__commonJSMin","exports","facade_1","obj_case_1","__importDefault","inherits_1","is_email_1","new_date_1","trim","str","Identify","dictionary","opts","i","aliases","ret","id","alias","value","email","userId","created","name","firstName","lastName","space","date","age","now","traits","require_track","__commonJSMin","exports","inherits_1","__importDefault","facade_1","identify_1","is_email_1","obj_case_1","Track","dictionary","opts","t","subtotal","total","props","products","item","aliases","ret","alias","value","email","userId","revenue","event","orderCompletedRegExp","currency","json","val","require_page","__commonJSMin","exports","inherits_1","__importDefault","facade_1","track_1","is_email_1","Page","dictionary","opts","p","aliases","props","category","name","alias","value","email","userId","json","require_screen","__commonJSMin","exports","inherits_1","__importDefault","page_1","track_1","Screen","dictionary","opts","name","json","require_delete","__commonJSMin","exports","inherits_1","__importDefault","facade_1","Delete","dictionary","opts","require_dist","__commonJSMin","exports","facade_1","alias_1","group_1","identify_1","track_1","page_1","screen_1","delete_1","__assign","toFacade","evt","options","fcd","import_facade","init_to_facade","__esmMin","pWhile","condition","action","__awaiter","loop","actionResult","_a","_b","init_callback","__esmMin","init_esm","auto_track_exports","__export","form","link","userNewTab","event","typedEvent","linkNewTab","element","href","links","properties","options","_this","elements","el","elementEvent","ev","props","_a","trackEvent","pTimeout","_b","forms","handler","$","init_auto_track","__esmMin","init_callback","applyDestinationMiddleware","destination","evt","middleware","applyMiddleware","event","fn","nextCalled","returnedEvent","toFacade","_b","__assign","_a","modifiedEvent","middleware_1","_i","md","result","sourceMiddlewarePlugin","integrations","apply","ctx","ContextCancelation","init_context","init_to_facade","pickPrefix","prefix","object","acc","key","field","init_pickPrefix","__esmMin","gracefulDecodeURIComponent","encodedURIComponent","init_gracefulDecodeURIComponent","__esmMin","query_string_exports","__export","queryString","analytics","query","a","parsed","params","acc","str","_a","k","v","gracefulDecodeURIComponent","calls","ajs_uid","ajs_event","ajs_aid","isPlainObject","_b","aidPattern","_c","uidPattern","anonId","uid","traits","pickPrefix","event_1","props","init_query_string","__esmMin","init_pickPrefix","init_gracefulDecodeURIComponent","init_esm","analyticsScriptRegex","getCDNUrlFromScriptTag","_globalCDN","getGlobalCDNUrl","setGlobalCDNUrl","getCDN","getNextIntegrationsURL","init_parse_cdn","__esmMin","init_global_analytics_helper","cdn","scripts","s","src","_a","result","getGlobalAnalytics","globalAnalytics","globalCdnUrl","cdnFromScriptTag","mergedOptions","cdnSettings","options","optionOverrides","_a","overrides","integration","__assign","_b","_c","integrationSettings","settings","findScript","src","scripts","s","loadScript","attributes","found","status_1","resolve","reject","err","script","_i","_b","_c","k","v","firstExistingScript","_a","unloadScript","init_load_script","__esmMin","recordIntegrationMetric","ctx","_a","methodName","integrationName","type","_b","didError","init_metric_helpers","__esmMin","t","r","exports","module","e","n","o","s","i","f","p","l","u","a","c","v","y","d","h","x","b","routing_middleware_exports","__export","tsubMiddleware","tsub","init_routing_middleware","__esmMin","rules","_a","payload","integration","next","store","rulesToApply","rule","matchers","transformers","i","isPlanEventEnabled","plan","planEvent","_b","_a","init_is_plan_event_enabled","__esmMin","normalizeName","name","obfuscatePathName","pathName","obfuscate","resolveIntegrationNameFromSource","integrationSource","recordLoadMetrics","fullPath","ctx","metric","_b","_a","__spreadArray","buildIntegration","integrationSettings","analyticsInstance","integrationCtr","analyticsStub","integration","loadIntegration","version","obfuscatedPathName","path","getNextIntegrationsURL","loadScript","err_1","deps","dep","unloadIntegration","unloadScript","resolveVersion","integrationConfig","_d","_c","init_parse_cdn","init_load_script","isInstallableIntegration","isDisabledIntegration","init_utils","__esmMin","name","integrationSettings","type","bundlingStatus","versionSettings","deviceMode","_a","integrationName","integrations","allDisableAndNotDefined","flushQueue","xt","queue","failedQueue","isOffline","pWhile","isOnline","__awaiter","_this","ctx","attempt","result","_a","success","Context","failed","ajsDestinations","writeKey","settings","integrations","options","routingMiddleware","legacyIntegrationSources","isServer","routingRules","_b","remoteIntegrationsConfig","localIntegrationsConfig","integrationOptions","mergedOptions","adhocIntegrationSources","acc","integrationSource","__assign","resolveIntegrationNameFromSource","installableIntegrations","__spreadArray","name","isInstallableIntegration","isPlainObject","isDisabledIntegration","integrationSettings","version","resolveVersion","destination","LegacyDestination","routing","rule","import_facade","init_connection","init_context","init_environment","init_esm","init_is_plan_event_enabled","init_merged_options","init_p_while","init_priority_queue","init_persisted","init_middleware","init_loader","init_utils","init_metric_helpers","createDeferred","isInitialized","PriorityQueue","PersistedPriorityQueue","analyticsInstance","loadIntegration","_c","buildIntegration","resolve","onReadyFn","recordIntegrationMetric","error","_ctx","_analyticsInstance","unloadIntegration","fn","_i","clz","eventType","plan","ev","planEvent","isPlanEventEnabled","ContextCancelation","applyDestinationMiddleware","afterMiddleware","event","err_1","require_index_umd","__commonJSMin","exports","module","a","n","i","e","t","r","o","l","loadLegacyVideoPlugins","analytics","plugins","_a","disabledActionDestinations","plan","settings","disabledIntegrations","i","disabledRemotePlugins","_a","p","int","_b","acc","sub","schemaFilter","track","filter","ctx","ev","planEvent","isPlanEventEnabled","disabledActions","__assign","init_is_plan_event_enabled","remoteMiddlewares","ctx","settings","obfuscate","isServer","path","getNextIntegrationsURL","remoteMiddleware","_a","names","_","enabled","name","scripts","__awaiter","_this","nonNamespaced","bundleName","fullPath","loadScript","error_1","middleware","_b","init_environment","init_load_script","init_parse_cdn","index_exports","__export","TrackingSdkFactory","__toCommonJS","environmentConfig","external_exports","__export","$brand","$input","$output","NEVER","TimePrecision","ZodAny","ZodArray","ZodBase64","ZodBase64URL","ZodBigInt","ZodBigIntFormat","ZodBoolean","ZodCIDRv4","ZodCIDRv6","ZodCUID","ZodCUID2","ZodCatch","ZodCodec","ZodCustom","ZodCustomStringFormat","ZodDate","ZodDefault","ZodDiscriminatedUnion","ZodE164","ZodEmail","ZodEmoji","ZodEnum","ZodError","ZodFile","ZodFirstPartyTypeKind","ZodFunction","ZodGUID","ZodIPv4","ZodIPv6","ZodISODate","ZodISODateTime","ZodISODuration","ZodISOTime","ZodIntersection","ZodIssueCode","ZodJWT","ZodKSUID","ZodLazy","ZodLiteral","ZodMap","ZodNaN","ZodNanoID","ZodNever","ZodNonOptional","ZodNull","ZodNullable","ZodNumber","ZodNumberFormat","ZodObject","ZodOptional","ZodPipe","ZodPrefault","ZodPromise","ZodReadonly","ZodRealError","ZodRecord","ZodSet","ZodString","ZodStringFormat","ZodSuccess","ZodSymbol","ZodTemplateLiteral","ZodTransform","ZodTuple","ZodType","ZodULID","ZodURL","ZodUUID","ZodUndefined","ZodUnion","ZodUnknown","ZodVoid","ZodXID","_ZodString","_default","_function","any","array","base64","base64url","bigint","boolean","_catch","check","cidrv4","cidrv6","clone","codec","coerce_exports","config","core_exports","cuid","cuid2","custom","date","decode","decodeAsync","discriminatedUnion","e164","email","emoji","encode","encodeAsync","_endsWith","_enum","file","flattenError","float32","float64","formatError","getErrorMap","globalRegistry","_gt","_gte","guid","hash","hex","hostname","httpUrl","_includes","_instanceof","int","int32","int64","intersection","ipv4","ipv6","iso_exports","json","jwt","keyof","ksuid","lazy","_length","literal","locales_exports","looseObject","_lowercase","_lt","_lte","map","_maxLength","_maxSize","_mime","_minLength","_minSize","_multipleOf","nan","nanoid","nativeEnum","_negative","never","_nonnegative","nonoptional","_nonpositive","_normalize","_null","nullable","nullish","number","object","optional","_overwrite","parse","parseAsync","partialRecord","pipe","_positive","prefault","preprocess","prettifyError","promise","_property","readonly","record","refine","_regex","regexes_exports","registry","safeDecode","safeDecodeAsync","safeEncode","safeEncodeAsync","safeParse","safeParseAsync","set","setErrorMap","_size","_startsWith","strictObject","string","stringFormat","stringbool","success","superRefine","symbol","templateLiteral","toJSONSchema","_toLowerCase","_toUpperCase","transform","treeifyError","_trim","tuple","uint32","uint64","ulid","_undefined","union","unknown","_uppercase","url","util_exports","uuid","uuidv4","uuidv6","uuidv7","_void","xid","core_exports","__export","$ZodAny","$ZodArray","$ZodAsyncError","$ZodBase64","$ZodBase64URL","$ZodBigInt","$ZodBigIntFormat","$ZodBoolean","$ZodCIDRv4","$ZodCIDRv6","$ZodCUID","$ZodCUID2","$ZodCatch","$ZodCheck","$ZodCheckBigIntFormat","$ZodCheckEndsWith","$ZodCheckGreaterThan","$ZodCheckIncludes","$ZodCheckLengthEquals","$ZodCheckLessThan","$ZodCheckLowerCase","$ZodCheckMaxLength","$ZodCheckMaxSize","$ZodCheckMimeType","$ZodCheckMinLength","$ZodCheckMinSize","$ZodCheckMultipleOf","$ZodCheckNumberFormat","$ZodCheckOverwrite","$ZodCheckProperty","$ZodCheckRegex","$ZodCheckSizeEquals","$ZodCheckStartsWith","$ZodCheckStringFormat","$ZodCheckUpperCase","$ZodCodec","$ZodCustom","$ZodCustomStringFormat","$ZodDate","$ZodDefault","$ZodDiscriminatedUnion","$ZodE164","$ZodEmail","$ZodEmoji","$ZodEncodeError","$ZodEnum","$ZodError","$ZodFile","$ZodFunction","$ZodGUID","$ZodIPv4","$ZodIPv6","$ZodISODate","$ZodISODateTime","$ZodISODuration","$ZodISOTime","$ZodIntersection","$ZodJWT","$ZodKSUID","$ZodLazy","$ZodLiteral","$ZodMap","$ZodNaN","$ZodNanoID","$ZodNever","$ZodNonOptional","$ZodNull","$ZodNullable","$ZodNumber","$ZodNumberFormat","$ZodObject","$ZodObjectJIT","$ZodOptional","$ZodPipe","$ZodPrefault","$ZodPromise","$ZodReadonly","$ZodRealError","$ZodRecord","$ZodRegistry","$ZodSet","$ZodString","$ZodStringFormat","$ZodSuccess","$ZodSymbol","$ZodTemplateLiteral","$ZodTransform","$ZodTuple","$ZodType","$ZodULID","$ZodURL","$ZodUUID","$ZodUndefined","$ZodUnion","$ZodUnknown","$ZodVoid","$ZodXID","$brand","$constructor","$input","$output","Doc","json_schema_exports","JSONSchemaGenerator","NEVER","TimePrecision","_any","_array","_base64","_base64url","_bigint","_boolean","_catch","_check","_cidrv4","_cidrv6","_coercedBigint","_coercedBoolean","_coercedDate","_coercedNumber","_coercedString","_cuid","_cuid2","_custom","_date","_decode","_decodeAsync","_default","_discriminatedUnion","_e164","_email","_emoji","_encode","_encodeAsync","_endsWith","_enum","_file","_float32","_float64","_gt","_gte","_guid","_includes","_int","_int32","_int64","_intersection","_ipv4","_ipv6","_isoDate","_isoDateTime","_isoDuration","_isoTime","_jwt","_ksuid","_lazy","_length","_literal","_lowercase","_lt","_lte","_map","_maxLength","_maxSize","_mime","_minLength","_minSize","_multipleOf","_nan","_nanoid","_nativeEnum","_negative","_never","_nonnegative","_nonoptional","_nonpositive","_normalize","_null","_nullable","_number","_optional","_overwrite","_parse","_parseAsync","_pipe","_positive","_promise","_property","_readonly","_record","_refine","_regex","_safeDecode","_safeDecodeAsync","_safeEncode","_safeEncodeAsync","_safeParse","_safeParseAsync","_set","_size","_startsWith","_string","_stringFormat","_stringbool","_success","_superRefine","_symbol","_templateLiteral","_toLowerCase","_toUpperCase","_transform","_trim","_tuple","_uint32","_uint64","_ulid","_undefined","_union","_unknown","_uppercase","_url","_uuid","_uuidv4","_uuidv6","_uuidv7","_void","_xid","clone","config","decode","decodeAsync","encode","encodeAsync","flattenError","formatError","globalConfig","globalRegistry","isValidBase64","isValidBase64URL","isValidJWT","locales_exports","parse","parseAsync","prettifyError","regexes_exports","registry","safeDecode","safeDecodeAsync","safeEncode","safeEncodeAsync","safeParse","safeParseAsync","toDotPath","toJSONSchema","treeifyError","util_exports","version","NEVER","$constructor","name","initializer","params","init","inst","def","_a","k","_","Parent","Definition","fn","$brand","$ZodAsyncError","$ZodEncodeError","globalConfig","config","newConfig","util_exports","__export","BIGINT_FORMAT_RANGES","Class","NUMBER_FORMAT_RANGES","aborted","allowsEval","assert","assertEqual","assertIs","assertNever","assertNotEqual","assignProp","base64ToUint8Array","base64urlToUint8Array","cached","captureStackTrace","cleanEnum","cleanRegex","clone","cloneDef","createTransparentProxy","defineLazy","esc","escapeRegex","extend","finalizeIssue","floatSafeRemainder","getElementAtPath","getEnumValues","getLengthableOrigin","getParsedType","getSizableOrigin","hexToUint8Array","isObject","isPlainObject","issue","joinValues","jsonStringifyReplacer","merge","mergeDefs","normalizeParams","nullish","numKeys","objectClone","omit","optionalKeys","partial","pick","prefixIssues","primitiveTypes","promiseAllObject","propertyKeyTypes","randomString","required","safeExtend","shallowClone","stringifyPrimitive","uint8ArrayToBase64","uint8ArrayToBase64url","uint8ArrayToHex","unwrapMessage","val","_arg","_x","_","entries","numericValues","v","k","array","separator","value","getter","input","source","start","end","step","valDecCount","stepString","stepDecCount","match","decCount","valInt","stepInt","EVALUATING","object","key","obj","target","prop","defs","mergedDescriptors","def","descriptors","schema","path","acc","promisesObj","keys","promises","results","resolvedObj","i","length","chars","str","_args","data","F","o","ctor","prot","keyCount","inst","params","cl","_params","receiver","descriptor","shape","mask","currDef","newShape","checks","_shape","a","b","oldShape","x","startIndex","issues","iss","_a","message","ctx","config","full","args","el","base64","binaryString","bytes","base64url","padding","hex","cleanHex","initializer","inst","def","jsonStringifyReplacer","$ZodError","$constructor","$ZodRealError","flattenError","error","mapper","issue","fieldErrors","formErrors","sub","formatError","processError","issues","curr","i","el","treeifyError","result","path","_a","_b","fullpath","terminal","toDotPath","_path","segs","seg","prettifyError","lines","a","b","_parse","_Err","schema","value","_ctx","_params","ctx","result","$ZodAsyncError","e","iss","finalizeIssue","config","captureStackTrace","parse","$ZodRealError","_parseAsync","params","parseAsync","_safeParse","$ZodError","safeParse","_safeParseAsync","safeParseAsync","_encode","encode","_decode","decode","_encodeAsync","encodeAsync","_decodeAsync","decodeAsync","_safeEncode","safeEncode","_safeDecode","safeDecode","_safeEncodeAsync","safeEncodeAsync","_safeDecodeAsync","safeDecodeAsync","regexes_exports","__export","base64","base64url","bigint","boolean","browserEmail","cidrv4","cidrv6","cuid","cuid2","date","datetime","domain","duration","e164","email","emoji","extendedDuration","guid","hex","hostname","html5Email","idnEmail","integer","ipv4","ipv6","ksuid","lowercase","md5_base64","md5_base64url","md5_hex","nanoid","_null","number","rfc5322Email","sha1_base64","sha1_base64url","sha1_hex","sha256_base64","sha256_base64url","sha256_hex","sha384_base64","sha384_base64url","sha384_hex","sha512_base64","sha512_base64url","sha512_hex","string","time","ulid","_undefined","unicodeEmail","uppercase","uuid","uuid4","uuid6","uuid7","xid","version","_emoji","dateSource","timeSource","args","hhmm","opts","timeRegex","params","regex","_undefined","lowercase","uppercase","hex","fixedBase64","bodyLength","padding","fixedBase64url","length","md5_hex","md5_base64","md5_base64url","sha1_hex","sha1_base64","sha1_base64url","sha256_hex","sha256_base64","sha256_base64url","sha384_hex","sha384_base64","sha384_base64url","sha512_hex","sha512_base64","sha512_base64url","$ZodCheck","$constructor","inst","def","_a","numericOriginMap","$ZodCheckLessThan","origin","bag","curr","payload","$ZodCheckGreaterThan","$ZodCheckMultipleOf","floatSafeRemainder","$ZodCheckNumberFormat","isInt","minimum","maximum","NUMBER_FORMAT_RANGES","integer","input","$ZodCheckBigIntFormat","BIGINT_FORMAT_RANGES","$ZodCheckMaxSize","val","nullish","getSizableOrigin","$ZodCheckMinSize","$ZodCheckSizeEquals","size","tooBig","$ZodCheckMaxLength","getLengthableOrigin","$ZodCheckMinLength","$ZodCheckLengthEquals","length","$ZodCheckStringFormat","_b","$ZodCheckRegex","$ZodCheckLowerCase","lowercase","$ZodCheckUpperCase","uppercase","$ZodCheckIncludes","escapedRegex","escapeRegex","pattern","$ZodCheckStartsWith","$ZodCheckEndsWith","handleCheckPropertyResult","result","property","prefixIssues","$ZodCheckProperty","$ZodCheckMimeType","mimeSet","$ZodCheckOverwrite","Doc","args","fn","arg","lines","x","minIndent","dedented","line","F","version","$ZodType","$constructor","inst","def","_a","version","checks","ch","fn","runChecks","payload","ctx","isAborted","aborted","asyncResult","currLen","_","$ZodAsyncError","handleCanaryResult","canary","checkResult","result","value","r","safeParse","safeParseAsync","$ZodString","string","$ZodStringFormat","$ZodCheckStringFormat","$ZodGUID","guid","$ZodUUID","v","uuid","$ZodEmail","email","$ZodURL","trimmed","url","hostname","$ZodEmoji","emoji","$ZodNanoID","nanoid","$ZodCUID","cuid","$ZodCUID2","cuid2","$ZodULID","ulid","$ZodXID","xid","$ZodKSUID","ksuid","$ZodISODateTime","datetime","$ZodISODate","date","$ZodISOTime","time","$ZodISODuration","duration","$ZodIPv4","ipv4","bag","$ZodIPv6","ipv6","$ZodCIDRv4","cidrv4","$ZodCIDRv6","cidrv6","parts","address","prefix","prefixNum","isValidBase64","data","$ZodBase64","base64","isValidBase64URL","base64url","c","padded","$ZodBase64URL","$ZodE164","e164","isValidJWT","token","algorithm","tokensParts","header","parsedHeader","$ZodJWT","$ZodCustomStringFormat","$ZodNumber","number","_ctx","input","received","$ZodNumberFormat","$ZodCheckNumberFormat","$ZodBoolean","boolean","$ZodBigInt","bigint","$ZodBigIntFormat","$ZodCheckBigIntFormat","$ZodSymbol","$ZodUndefined","_undefined","$ZodNull","_null","$ZodAny","$ZodUnknown","$ZodNever","$ZodVoid","$ZodDate","isDate","handleArrayResult","final","index","prefixIssues","$ZodArray","proms","i","item","handlePropertyResult","key","normalizeDef","keys","k","okeys","optionalKeys","handleCatchall","unrecognized","keySet","_catchall","t","$ZodObject","sh","newSh","_normalized","cached","defineLazy","shape","propValues","field","isObject","catchall","$ZodObjectJIT","superParse","generateFastpass","doc","Doc","normalized","parseStr","esc","ids","counter","id","fastpass","jit","globalConfig","fastEnabled","allowsEval","handleUnionResults","results","nonaborted","iss","finalizeIssue","config","$ZodUnion","o","option","patterns","p","cleanRegex","single","first","async","$ZodDiscriminatedUnion","_super","pv","val","disc","opts","map","values","opt","$ZodIntersection","left","right","handleIntersectionResults","mergeValues","a","b","isPlainObject","bKeys","sharedKeys","newObj","sharedValue","newArray","itemA","itemB","merged","$ZodTuple","items","optStart","tooBig","tooSmall","handleTupleResult","rest","el","$ZodRecord","keyResult","$ZodMap","valueResult","handleMapResult","propertyKeyTypes","$ZodSet","handleSetResult","$ZodEnum","getEnumValues","valuesSet","escapeRegex","$ZodLiteral","$ZodFile","$ZodTransform","$ZodEncodeError","_out","output","handleOptionalResult","$ZodOptional","pattern","$ZodNullable","$ZodDefault","handleDefaultResult","$ZodPrefault","$ZodNonOptional","x","handleNonOptionalResult","$ZodSuccess","$ZodCatch","$ZodNaN","$ZodPipe","handlePipeResult","next","$ZodCodec","handleCodecAResult","transformed","handleCodecTxResult","nextSchema","$ZodReadonly","handleReadonlyResult","$ZodTemplateLiteral","regexParts","part","source","start","end","primitiveTypes","$ZodFunction","func","args","parsedArgs","parse","parseAsync","F","$ZodPromise","inner","$ZodLazy","$ZodCustom","$ZodCheck","handleRefineResult","_iss","issue","locales_exports","__export","ar_default","az_default","be_default","bg_default","ca_default","cs_default","da_default","de_default","en_default","eo_default","es_default","fa_default","fi_default","fr_default","fr_CA_default","he_default","hu_default","id_default","is_default","it_default","ja_default","ka_default","kh_default","km_default","ko_default","lt_default","mk_default","ms_default","nl_default","no_default","ota_default","pl_default","ps_default","pt_default","ru_default","sl_default","sv_default","ta_default","th_default","tr_default","ua_default","uk_default","ur_default","vi_default","yo_default","zh_CN_default","zh_TW_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","ar_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","az_default","getBelarusianPlural","count","one","few","many","absCount","lastDigit","lastTwoDigits","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","maxValue","unit","minValue","_issue","be_default","parsedType","data","error","Sizable","getSizing","origin","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","invalid_adj","bg_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","ca_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","cs_default","error","Sizable","TypeNames","getSizing","origin","getTypeName","type","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","da_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","de_default","parsedType","data","error","Sizable","getSizing","origin","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","en_default","parsedType","data","error","Sizable","getSizing","origin","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","eo_default","error","Sizable","TypeNames","getSizing","origin","getTypeName","type","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","es_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","fa_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","fi_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","fr_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","fr_CA_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","he_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","hu_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","id_default","parsedType","data","error","Sizable","getSizing","origin","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","is_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","it_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","ja_default","parsedType","data","error","Sizable","getSizing","origin","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","ka_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","km_default","kh_default","km_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","suffix","sizing","unit","_issue","ko_default","parsedType","data","parsedTypeFromType","t","capitalizeFirstCharacter","text","getUnitTypeFromNumber","number","abs","last","last2","error","Sizable","getSizing","origin","unitType","inclusive","targetShouldBe","result","Nouns","issue","stringifyPrimitive","joinValues","sizing","adj","_issue","lt_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","mk_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","ms_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","nl_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","no_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","ota_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","ps_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","pl_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","pt_default","getRussianPlural","count","one","few","many","absCount","lastDigit","lastTwoDigits","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","maxValue","unit","minValue","_issue","ru_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","sl_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","sv_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","ta_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","th_default","parsedType","data","error","Sizable","getSizing","origin","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","tr_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","uk_default","ua_default","uk_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","ur_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","vi_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","zh_CN_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","zh_TW_default","error","Sizable","getSizing","origin","parsedType","data","t","Nouns","issue","stringifyPrimitive","joinValues","adj","sizing","_issue","yo_default","$output","$input","$ZodRegistry","schema","_meta","meta","p","pm","f","registry","globalRegistry","_string","Class","params","normalizeParams","_coercedString","_email","_guid","_uuid","_uuidv4","_uuidv6","_uuidv7","_url","_emoji","_nanoid","_cuid","_cuid2","_ulid","_xid","_ksuid","_ipv4","_ipv6","_cidrv4","_cidrv6","_base64","_base64url","_e164","_jwt","TimePrecision","_isoDateTime","_isoDate","_isoTime","_isoDuration","_number","_coercedNumber","_int","_float32","_float64","_int32","_uint32","_boolean","_coercedBoolean","_bigint","_coercedBigint","_int64","_uint64","_symbol","_undefined","_null","_any","_unknown","_never","_void","_date","_coercedDate","_nan","_lt","value","$ZodCheckLessThan","_lte","_gt","value","params","$ZodCheckGreaterThan","normalizeParams","_gte","_positive","params","_gt","_negative","_lt","_nonpositive","_lte","_nonnegative","_gte","_multipleOf","value","$ZodCheckMultipleOf","normalizeParams","_maxSize","maximum","$ZodCheckMaxSize","_minSize","minimum","$ZodCheckMinSize","_size","size","$ZodCheckSizeEquals","_maxLength","$ZodCheckMaxLength","_minLength","$ZodCheckMinLength","_length","length","$ZodCheckLengthEquals","_regex","pattern","$ZodCheckRegex","_lowercase","$ZodCheckLowerCase","_uppercase","$ZodCheckUpperCase","_includes","includes","$ZodCheckIncludes","_startsWith","prefix","$ZodCheckStartsWith","_endsWith","suffix","$ZodCheckEndsWith","_property","property","schema","$ZodCheckProperty","_mime","types","$ZodCheckMimeType","_overwrite","tx","$ZodCheckOverwrite","_normalize","form","input","_trim","_toLowerCase","_toUpperCase","_array","Class","element","_union","options","_discriminatedUnion","discriminator","_intersection","left","right","_tuple","items","_paramsOrRest","_params","hasRest","$ZodType","rest","_record","keyType","valueType","_map","_set","_enum","values","entries","v","_nativeEnum","_literal","_file","_transform","fn","_optional","innerType","_nullable","_default","defaultValue","shallowClone","_nonoptional","_success","_catch","catchValue","_pipe","in_","out","_readonly","_templateLiteral","parts","_lazy","getter","_promise","_custom","norm","_refine","_superRefine","ch","_check","payload","issue","_issue","$ZodCheck","_stringbool","Classes","truthyArray","falsyArray","truthySet","falsySet","_Codec","$ZodCodec","_Boolean","$ZodBoolean","_String","$ZodString","stringSchema","booleanSchema","codec","data","_payload","_stringFormat","format","fnOrRegex","def","val","JSONSchemaGenerator","params","globalRegistry","schema","_params","_a","def","formatMap","seen","result","overrideSchema","parent","_json","json","minimum","maximum","format","patterns","contentEncoding","regexes","regex","multipleOf","exclusiveMaximum","exclusiveMinimum","shape","key","allKeys","requiredKeys","v","options","x","i","a","b","isSimpleIntersection","val","allOf","prefixPath","restPath","prefixItems","rest","values","getEnumValues","vals","file","mime","m","inner","catchValue","pattern","innerType","meta","isTransforming","root","makeURI","entry","defsSegment","externalId","uriGenerator","id","defUriPrefix","defId","extractToDef","ref","ext","flattenRef","zodSchema","_cached","refSchema","defs","toJSONSchema","input","$ZodRegistry","gen","_","schemas","external","_schema","_ctx","ctx","option","item","json_schema_exports","iso_exports","__export","ZodISODate","ZodISODateTime","ZodISODuration","ZodISOTime","date","datetime","duration","time","ZodISODateTime","$constructor","inst","def","$ZodISODateTime","ZodStringFormat","datetime","params","_isoDateTime","ZodISODate","$ZodISODate","date","_isoDate","ZodISOTime","$ZodISOTime","time","_isoTime","ZodISODuration","$ZodISODuration","duration","_isoDuration","initializer","inst","issues","$ZodError","mapper","formatError","flattenError","issue","jsonStringifyReplacer","ZodError","$constructor","ZodRealError","parse","_parse","ZodRealError","parseAsync","_parseAsync","safeParse","_safeParse","safeParseAsync","_safeParseAsync","encode","_encode","decode","_decode","encodeAsync","_encodeAsync","decodeAsync","_decodeAsync","safeEncode","_safeEncode","safeDecode","_safeDecode","safeEncodeAsync","_safeEncodeAsync","safeDecodeAsync","_safeDecodeAsync","ZodType","$constructor","inst","def","$ZodType","checks","util_exports","ch","params","clone","reg","meta","data","parse","safeParse","parseAsync","safeParseAsync","encode","decode","encodeAsync","decodeAsync","safeEncode","safeDecode","safeEncodeAsync","safeDecodeAsync","check","refine","refinement","superRefine","fn","_overwrite","optional","nullable","nonoptional","array","arg","union","intersection","tx","pipe","transform","_default","prefault","_catch","target","readonly","description","cl","globalRegistry","args","_ZodString","$ZodString","bag","_regex","_includes","_startsWith","_endsWith","_minLength","_maxLength","_length","_lowercase","_uppercase","_trim","_normalize","_toLowerCase","_toUpperCase","ZodString","_email","ZodEmail","_url","ZodURL","_jwt","ZodJWT","_emoji","ZodEmoji","_guid","ZodGUID","_uuid","ZodUUID","_uuidv4","_uuidv6","_uuidv7","_nanoid","ZodNanoID","_cuid","ZodCUID","_cuid2","ZodCUID2","_ulid","ZodULID","_base64","ZodBase64","_base64url","ZodBase64URL","_xid","ZodXID","_ksuid","ZodKSUID","_ipv4","ZodIPv4","_ipv6","ZodIPv6","_cidrv4","ZodCIDRv4","_cidrv6","ZodCIDRv6","_e164","ZodE164","datetime","date","time","duration","string","_string","ZodStringFormat","$ZodStringFormat","$ZodEmail","email","$ZodGUID","guid","$ZodUUID","uuid","uuidv4","uuidv6","uuidv7","$ZodURL","url","httpUrl","regexes_exports","$ZodEmoji","emoji","$ZodNanoID","nanoid","$ZodCUID","cuid","$ZodCUID2","cuid2","$ZodULID","ulid","$ZodXID","xid","$ZodKSUID","ksuid","$ZodIPv4","ipv4","$ZodIPv6","ipv6","$ZodCIDRv4","cidrv4","$ZodCIDRv6","cidrv6","$ZodBase64","base64","$ZodBase64URL","base64url","$ZodE164","e164","$ZodJWT","jwt","ZodCustomStringFormat","$ZodCustomStringFormat","stringFormat","format","fnOrRegex","_params","_stringFormat","hostname","hex","hash","alg","enc","regex","ZodNumber","$ZodNumber","value","_gt","_gte","_lt","_lte","int","_multipleOf","number","_number","ZodNumberFormat","$ZodNumberFormat","_int","float32","_float32","float64","_float64","int32","_int32","uint32","_uint32","ZodBoolean","$ZodBoolean","boolean","_boolean","ZodBigInt","$ZodBigInt","bigint","_bigint","ZodBigIntFormat","$ZodBigIntFormat","int64","_int64","uint64","_uint64","ZodSymbol","$ZodSymbol","symbol","_symbol","ZodUndefined","$ZodUndefined","_undefined","ZodNull","$constructor","inst","def","$ZodNull","ZodType","_null","params","ZodAny","$constructor","inst","def","$ZodAny","ZodType","any","_any","ZodUnknown","$ZodUnknown","unknown","_unknown","ZodNever","$ZodNever","never","params","_never","ZodVoid","$ZodVoid","_void","ZodDate","$constructor","inst","def","$ZodDate","ZodType","value","params","_gte","_lte","c","date","_date","ZodArray","$ZodArray","minLength","_minLength","maxLength","_maxLength","len","_length","array","element","_array","keyof","schema","shape","_enum","ZodObject","$ZodObjectJIT","util_exports","catchall","unknown","never","incoming","other","mask","args","ZodOptional","ZodNonOptional","object","strictObject","looseObject","ZodUnion","$ZodUnion","union","options","ZodDiscriminatedUnion","$ZodDiscriminatedUnion","discriminatedUnion","discriminator","ZodIntersection","$ZodIntersection","intersection","left","right","ZodTuple","$ZodTuple","rest","tuple","items","_paramsOrRest","_params","hasRest","$ZodType","ZodRecord","$ZodRecord","record","keyType","valueType","partialRecord","k","clone","ZodMap","$ZodMap","map","ZodSet","$ZodSet","_minSize","_maxSize","_size","set","ZodEnum","$ZodEnum","keys","values","newEntries","entries","v","nativeEnum","entries","params","ZodEnum","util_exports","ZodLiteral","$constructor","inst","def","$ZodLiteral","ZodType","literal","value","ZodFile","$ZodFile","size","_minSize","_maxSize","types","_mime","file","_file","ZodTransform","$ZodTransform","payload","_ctx","$ZodEncodeError","issue","_issue","output","transform","fn","ZodOptional","$ZodOptional","optional","innerType","ZodNullable","$ZodNullable","nullable","nullish","ZodDefault","$ZodDefault","_default","defaultValue","ZodPrefault","$ZodPrefault","prefault","ZodNonOptional","$ZodNonOptional","nonoptional","ZodSuccess","$ZodSuccess","success","ZodCatch","$ZodCatch","_catch","catchValue","ZodNaN","$constructor","inst","def","$ZodNaN","ZodType","nan","params","_nan","ZodPipe","$ZodPipe","pipe","in_","out","ZodCodec","$ZodCodec","codec","ZodReadonly","$ZodReadonly","readonly","innerType","ZodTemplateLiteral","$ZodTemplateLiteral","templateLiteral","parts","util_exports","ZodLazy","$ZodLazy","lazy","getter","ZodPromise","$ZodPromise","promise","ZodFunction","$ZodFunction","_function","tuple","array","unknown","ZodCustom","$constructor","inst","def","$ZodCustom","ZodType","check","fn","ch","$ZodCheck","custom","_params","_custom","refine","_refine","superRefine","_superRefine","_instanceof","cls","params","data","util_exports","stringbool","args","_stringbool","ZodCodec","ZodBoolean","ZodString","json","params","jsonSchema","lazy","union","string","number","boolean","_null","array","record","preprocess","fn","schema","pipe","transform","ZodIssueCode","setErrorMap","map","config","getErrorMap","ZodFirstPartyTypeKind","coerce_exports","__export","bigint","boolean","date","number","string","string","params","_coercedString","ZodString","number","_coercedNumber","ZodNumber","boolean","_coercedBoolean","ZodBoolean","bigint","_coercedBigint","ZodBigInt","date","_coercedDate","ZodDate","config","en_default","eventSchemas","external_exports","getDefaultsFromPostinstall","CONSTANTS","assert","assertion","message","assertionError","stringToByteArray","str","out","p","c","byteArrayToString","bytes","pos","c1","c2","c3","c4","base64","input","webSafe","byteToCharMap","output","i","byte1","haveByte2","byte2","haveByte3","byte3","outByte1","outByte2","outByte3","outByte4","charToByteMap","byte4","DecodeBase64StringError","base64Encode","utf8Bytes","base64urlEncodeWithoutPadding","base64Decode","e","getGlobal","getDefaultsFromGlobal","getDefaultsFromEnvVariable","defaultsJsonString","getDefaultsFromCookie","match","decoded","base64Decode","getDefaults","getDefaultsFromPostinstall","getDefaultAppConfig","getDefaults","Deferred","resolve","reject","callback","error","value","isIndexedDBAvailable","validateIndexedDBOpenable","resolve","reject","preExist","DB_CHECK_NAME","request","error","ERROR_NAME","FirebaseError","_FirebaseError","code","message","customData","ErrorFactory","service","serviceName","errors","data","fullCode","template","replaceTemplate","fullMessage","PATTERN","_","key","value","deepEqual","a","b","aKeys","bKeys","k","aProp","bProp","isObject","thing","DEFAULT_INTERVAL_MILLIS","DEFAULT_BACKOFF_FACTOR","MAX_VALUE_MILLIS","RANDOM_FACTOR","calculateBackoffMillis","backoffCount","intervalMillis","backoffFactor","currBaseValue","randomWait","getModularInstance","service","CONSTANTS","Component","name","instanceFactory","type","mode","multipleInstances","props","callback","DEFAULT_ENTRY_NAME","Provider","container","identifier","normalizedIdentifier","deferred","Deferred","instance","options","optional","e","component","isComponentEager","instanceIdentifier","instanceDeferred","services","service","opts","normalizedDeferredIdentifier","existingCallbacks","existingInstance","callbacks","normalizeIdentifierForFactory","ComponentContainer","provider","instances","LogLevel","levelStringToEnum","defaultLogLevel","ConsoleMethod","defaultLogHandler","instance","logType","args","now","method","Logger","name","val","instanceOfAny","object","constructors","c","idbProxyableTypes","cursorAdvanceMethods","getIdbProxyableTypes","getCursorAdvanceMethods","cursorRequestMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","promisifyRequest","request","promise","resolve","reject","unlisten","success","error","wrap","value","cacheDonePromiseForTransaction","tx","done","complete","idbProxyTraps","target","prop","receiver","replaceTraps","callback","wrapFunction","func","storeNames","args","unwrap","transformCachableValue","newValue","openDB","name","version","blocked","upgrade","blocking","terminated","request","openPromise","wrap","event","db","readMethods","writeMethods","cachedMethods","getMethod","target","prop","targetFuncName","useIndex","isWrite","method","storeName","args","tx","replaceTraps","oldTraps","receiver","PlatformLoggerServiceImpl","container","provider","isVersionServiceProvider","service","logString","logger","Logger","DEFAULT_ENTRY_NAME","PLATFORM_LOG_STRING","appName","appCompatName","analyticsName","analyticsCompatName","appCheckName","appCheckCompatName","authName","authCompatName","databaseName","dataconnectName","databaseCompatName","functionsName","functionsCompatName","installationsName","installationsCompatName","messagingName","messagingCompatName","performanceName","performanceCompatName","remoteConfigName","remoteConfigCompatName","storageName","storageCompatName","firestoreName","firestoreCompatName","aiName","packageName","_apps","_serverApps","_components","_addComponent","app","component","e","_registerComponent","component","componentName","_components","logger","app","_apps","_addComponent","serverApp","_serverApps","_getProvider","name","heartbeatController","ERRORS","ERROR_FACTORY","ErrorFactory","FirebaseAppImpl","options","config","container","Component","val","SDK_VERSION","version","initializeApp","_options","rawConfig","options","config","DEFAULT_ENTRY_NAME","name","ERROR_FACTORY","getDefaultAppConfig","existingApp","_apps","deepEqual","container","ComponentContainer","component","_components","newApp","FirebaseAppImpl","getApp","name","DEFAULT_ENTRY_NAME","app","_apps","getDefaultAppConfig","initializeApp","ERROR_FACTORY","registerVersion","libraryKeyOrName","version","variant","library","PLATFORM_LOG_STRING","libraryMismatch","versionMismatch","warning","logger","_registerComponent","Component","DB_NAME","DB_VERSION","STORE_NAME","dbPromise","getDbPromise","openDB","db","oldVersion","e","ERROR_FACTORY","readHeartbeatsFromIndexedDB","app","tx","result","computeKey","FirebaseError","logger","idbGetError","writeHeartbeatsToIndexedDB","heartbeatObject","MAX_HEADER_BYTES","MAX_NUM_STORED_HEARTBEATS","HeartbeatServiceImpl","container","HeartbeatStorageImpl","agent","date","getUTCDateString","singleDateHeartbeat","earliestHeartbeatIdx","getEarliestHeartbeatIdx","heartbeatsToSend","unsentEntries","extractHeartbeatsForHeader","headerString","base64urlEncodeWithoutPadding","heartbeatsCache","maxSize","heartbeatEntry","hb","countBytes","isIndexedDBAvailable","validateIndexedDBOpenable","idbHeartbeatObject","heartbeatsObject","existingHeartbeatsObject","heartbeats","earliestHeartbeatDate","registerCoreComponents","variant","_registerComponent","Component","PlatformLoggerServiceImpl","registerVersion","name","version","registerVersion","name","version","PENDING_TIMEOUT_MS","PACKAGE_VERSION","version","INTERNAL_AUTH_VERSION","INSTALLATIONS_API_URL","TOKEN_EXPIRATION_BUFFER","SERVICE","SERVICE_NAME","ERROR_DESCRIPTION_MAP","ERROR_FACTORY","ErrorFactory","isServerError","error","FirebaseError","getInstallationsEndpoint","projectId","extractAuthTokenInfoFromResponse","response","getExpiresInFromResponseExpiresIn","getErrorFromResponse","requestName","errorData","getHeaders","apiKey","getHeadersWithAuth","appConfig","refreshToken","headers","getAuthorizationHeader","retryIfServerError","fn","result","responseExpiresIn","createInstallationRequest","heartbeatServiceProvider","fid","endpoint","heartbeatService","heartbeatsHeader","body","request","responseValue","sleep","ms","resolve","bufferToBase64UrlSafe","array","VALID_FID_PATTERN","INVALID_FID","generateFid","fidByteArray","encode","getKey","fidChangeCallbacks","fidChanged","key","callFidChangeCallbacks","broadcastFidChange","callFidChangeCallbacks","key","fid","callbacks","fidChangeCallbacks","callback","broadcastFidChange","channel","getBroadcastChannel","closeBroadcastChannel","broadcastChannel","DATABASE_NAME","DATABASE_VERSION","OBJECT_STORE_NAME","dbPromise","getDbPromise","openDB","db","oldVersion","set","appConfig","value","getKey","tx","objectStore","oldValue","fidChanged","remove","update","updateFn","store","newValue","getInstallationEntry","installations","registrationPromise","installationEntry","oldEntry","updateOrCreateInstallationEntry","entryWithPromise","triggerRegistrationIfNecessary","INVALID_FID","entry","generateFid","clearTimedOutRequest","registrationPromiseWithError","ERROR_FACTORY","inProgressEntry","registerInstallation","waitUntilFidRegistration","registeredInstallationEntry","createInstallationRequest","e","isServerError","updateInstallationRequest","sleep","hasInstallationRequestTimedOut","PENDING_TIMEOUT_MS","generateAuthTokenRequest","heartbeatServiceProvider","endpoint","getGenerateAuthTokenEndpoint","headers","getHeadersWithAuth","heartbeatService","heartbeatsHeader","body","PACKAGE_VERSION","request","response","retryIfServerError","responseValue","extractAuthTokenInfoFromResponse","getErrorFromResponse","getInstallationsEndpoint","refreshAuthToken","forceRefresh","tokenPromise","isEntryRegistered","oldAuthToken","isAuthTokenValid","waitUntilAuthTokenRequest","makeAuthTokenRequestInProgressEntry","fetchAuthTokenFromServer","updateAuthTokenRequest","authToken","hasAuthTokenRequestTimedOut","updatedInstallationEntry","isAuthTokenExpired","now","TOKEN_EXPIRATION_BUFFER","inProgressAuthToken","getId","installationsImpl","getToken","completeInstallationRegistration","extractAppConfig","app","getMissingValueError","configKeys","keyName","valueName","ERROR_FACTORY","INSTALLATIONS_NAME","INSTALLATIONS_NAME_INTERNAL","publicFactory","container","appConfig","heartbeatServiceProvider","_getProvider","internalFactory","installations","getId","forceRefresh","getToken","registerInstallations","_registerComponent","Component","registerVersion","name","version","RemoteConfigAbortSignal","listener","RC_COMPONENT_NAME","RC_CUSTOM_SIGNAL_MAX_ALLOWED_SIGNALS","ERROR_DESCRIPTION_MAP","ERROR_FACTORY","ErrorFactory","hasErrorCode","errorCode","FirebaseError","DEFAULT_VALUE_FOR_BOOLEAN","DEFAULT_VALUE_FOR_STRING","DEFAULT_VALUE_FOR_NUMBER","BOOLEAN_TRUTHY_VALUES","Value","_source","_value","num","getRemoteConfig","app","getApp","options","getModularInstance","rcProvider","_getProvider","RC_COMPONENT_NAME","initialOptions","deepEqual","rc","activate","remoteConfig","lastSuccessfulFetchResponse","activeConfigEtag","ensureInitialized","fetchConfig","abortSignal","RemoteConfigAbortSignal","customSignals","e","lastFetchStatus","getAll","getAllKeys","allConfigs","key","getValue","getValue","remoteConfig","key","rc","getModularInstance","activeConfig","ValueImpl","getAllKeys","obj1","obj2","CachingClient","client","storage","storageCache","logger","cacheMaxAgeMillis","lastSuccessfulFetchTimestampMillis","cacheAgeMillis","isCachedDataFresh","request","lastSuccessfulFetchResponse","response","storageOperations","getUserLanguage","navigatorLanguage","RestClient","firebaseInstallations","sdkVersion","namespace","projectId","apiKey","appId","installationId","installationToken","url","headers","requestBody","options","fetchPromise","timeoutPromise","_resolve","reject","error","originalError","errorCode","ERROR_FACTORY","status","responseEtag","config","state","templateVersion","responseBody","setAbortableTimeout","signal","throttleEndTimeMillis","resolve","backoffMillis","timeout","isRetriableError","FirebaseError","httpStatus","RetryingClient","throttleMetadata","backoffCount","e","calculateBackoffMillis","DEFAULT_FETCH_TIMEOUT_MILLIS","DEFAULT_CACHE_MAX_AGE_MILLIS","RemoteConfig","app","_client","_storageCache","_storage","_logger","_realtimeHandler","toFirebaseError","event","APP_NAMESPACE_STORE","DB_NAME","DB_VERSION","openDatabase","db","Storage","timestamp","etag","metadata","realtimeMetadata","version","IndexedDbStorage","appName","openDbPromise","customSignals","transaction","storedSignals","updatedSignals","mergeCustomSignals","key","objectStore","compositeKey","result","value","InMemoryStorage","combinedSignals","_","v","k","RC_CUSTOM_SIGNAL_MAX_ALLOWED_SIGNALS","StorageCache","lastFetchStatusPromise","lastSuccessfulFetchTimestampMillisPromise","activeConfigPromise","customSignalsPromise","lastFetchStatus","activeConfig","timestampMillis","EventEmitter","allowedEvents_","assert","eventType","varArgs","listeners","i","callback","context","eventData","et","VisibilityMonitor","_VisibilityMonitor","hidden","visibilityChange","visible","API_KEY_HEADER","INSTALLATIONS_AUTH_TOKEN_HEADER","ORIGINAL_RETRIES","MAXIMUM_FETCH_ATTEMPTS","NO_BACKOFF_TIME_IN_MILLIS","NO_FAILED_REALTIME_STREAMS","REALTIME_DISABLED_KEY","REALTIME_RETRY_INTERVAL","TEMPLATE_VERSION_KEY","RealtimeHandler","cachingClient","o","statusCode","numFailedStreams","lastFailedStreamTime","retryIntervalSeconds","currentTime","backoffDurationInMillis","backoffEndTime","installationTokenResult","eTagValue","lastKnownVersionNumber","urlString","backoffMetadata","retryMillis","connectionRunning","canMakeConnection","fetchResponse","lastKnownVersion","message","left","right","max","configUpdate","observer","newConfig","oldConfig","changedKeys","newKeys","oldKeys","remainingAttempts","targetVersion","remainingAttemptsAfterFetch","currentAttempt","abortSignal","RemoteConfigAbortSignal","fetchRequest","activatedConfigs","updatedKeys","errorMessage","timeTillFetchInMiliseconds","reader","partialConfigUpdateMessage","currentConfigUpdateMessage","done","jsonObject","oldTemplateVersion","targetTemplateVersion","responseCode","connectionFailed","firebaseError","hasActiveListeners","isNotDisabled","isNoConnectionActive","inForeground","delayMillis","registerRemoteConfig","_registerComponent","Component","RC_COMPONENT_NAME","remoteConfigFactory","registerVersion","packageName","container","installations","isIndexedDBAvailable","Logger","FirebaseLogLevel","restClient","SDK_VERSION","retryingClient","realtimeHandler","remoteConfigInstance","RemoteConfigImpl","ensureInitialized","fetchAndActivate","remoteConfig","getModularInstance","fetchConfig","activate","registerRemoteConfig","createRemoteConfigManager","minimumFetchIntervalMillis","config","app","initializeApp","remoteConfig","getRemoteConfig","fetchAndActivate","key","getValue","getAll","BackendTracking","config","eventName","params","context","userId","init_esm","resolveArguments","eventName","properties","options","callback","args","name","isPlainObject","isString","data","_a","opts","isFunction","cb","resolvePageArguments","category","resolvedProperties","resolvedOptions","resolvedCategory","resolvedName","strings","resolvedCallback","objects","resolveUserArguments","user","_i","values","orderStack","_d","args_1","arg","current","isNumber","_b","_c","resolveAliasArguments","to","from","aliasTo","aliasFrom","init_connection","init_context","init_esm","init_dist","isPlainObject","obj","BufferedPageContextDiscriminant","createBufferedPageContext","url","canonicalUrl","search","path","title","referrer","BUFFERED_PAGE_CONTEXT_KEYS","isBufferedPageContext","bufferedPageCtx","k","createCanonicalURL","searchParams","removeHash","href","hashIdx","parseCanonicalPath","createPageContext","param","pathname","newPath","newUrl","getDefaultBufferedPageContext","c","getDefaultPageContext","pick","object","keys","__spreadArray","key","_a","addPageContext","event","pageCtx","getDefaultPageContext","evtCtx","pageContextFromEventProps","pick","__assign","init_esm","EventFactory","_super","__extends","user","_this","v4","_a","options","event","properties","integrationsOptions","pageCtx","ev","addPageContext","category","page","screen","userId","traits","groupId","to","from","CoreEventFactory","isDestinationPluginWithAddMiddleware","plugin","init_persisted","init_esm","init_connection","EventQueue","_super","__extends","nameOrQueue","PersistedPriorityQueue","isOffline","CoreEventQueue","init_dist","bindAll","obj","proto","_i","_a","key","desc","assign","target","i","source","key","defaultConverter","value","init","converter","defaultAttributes","set","attributes","stringifiedAttributes","attributeName","get","cookies","jar","parts","foundKey","api","js_cookie_default","levels","url","host","parts","last","i","parseUrl","tld","parsedUrl","lvls","cname","domain","opts","js_cookie_default","ONE_YEAR","CookieStorage","options","__assign","tld","key","value","js_cookie_default","_a","LocalStorage","key","state","val","_a","value","MemoryStorage","key","_a","value","StoreType","isArrayOfStoreType","s","e","StoreType","isStoreTypeWithSettings","_logStoreKeyError","store","action","key","err","UniversalStorage","stores","val","_i","_a","e","value","coercedValue","initializeStorages","args","storages","s","type","settings","isStoreTypeWithSettings","StoreType","CookieStorage","LocalStorage","MemoryStorage","applyCookieOptions","storeTypes","cookieOptions","defaults","User","options","cookieOptions","_this","id","prevId","changingIdentity","retId","retLeg","val","_a","_b","v4","traits","__assign","_d","_c","s","StoreType","legacyUser","bindAll","anon","user","currentId","cookieOpts","filterStores","stores","UniversalStorage","isArrayOfStoreType","initializeStorages","applyCookieOptions","MemoryStorage","groupDefaults","Group","_super","__extends","options","cookie","_this","__assign","_id","bindAll","User","init_persisted","init_version","init_priority_queue","init_get_global","init_global_analytics_helper","isThenable","value","init_version","init_global_analytics_helper","init_version_type","flushSyncAnalyticsCalls","name","analytics","buffer","c","callAnalyticsMethod","flushAddSourceMiddleware","__awaiter","_a","_i","_b","flushRegister","flushOn","flushSetAnonymousID","flushAnalyticsCallsInNewTask","m","popPageContext","args","hasBufferedPageContextAsLastArg","ctx","createPageContext","lastArg","isBufferedPageContext","PreInitMethodCall","method","resolve","reject","PreInitMethodCallBuffer","calls","_i","methodName","_a","_this","call","eventsExpectingPageContext","hasBufferedPageContextAsLastArg","__spreadArray","getDefaultBufferedPageContext","getVersionType","wa","getGlobalAnalytics","buffered","args","PreInitMethodCall","callAnalyticsMethod","analytics","call","result","isThenable","_a","err_1","AnalyticsBuffered","loader","_this","version","PreInitMethodCallBuffer","ajs","ctx","args","_i","methodName","resolve","reject","PreInitMethodCall","init_connection","init_priority_queue","init_persisted","init_to_facade","init_fetch","onPageChange","cb","unloaded","RateLimitError","_super","__extends","message","retryTimeout","_this","init_context","createHeaders","headerSettings","__assign","MAX_PAYLOAD_SIZE","MAX_KEEPALIVE_SIZE","kilobytes","buffer","size","approachingTrackingAPILimit","passedKeepaliveLimit","chunks","batch","result","index","item","apiHost","config","pageUnloaded","limit","_a","timeout","_b","rateLimitTimeout","sendBatch","writeKey","updatedBatch","event","sentAt","newEvent","__rest","fetch","createHeaders","res","retryTimeoutStringSecs","retryTimeoutMS","RateLimitError","flush","attempt","batch_1","error","ctx","Context","segmentEvent","__assign","scheduleFlush","schedule","onPageChange","unloaded","reqs","dispatch","_url","body","bufferOverflow","init_fetch","fetch_dispatcher_default","config","dispatch","url","body","fetch","createHeaders","res","retryTimeoutStringSecs","_a","retryTimeoutMS","RateLimitError","normalize","analytics","json","settings","integrations","ctx","user","failed","__assign","bundled","unbundled","key","integration","_i","_b","settingsUnbundled","configIds","_a","bundledConfigIds","name","id","init_connection","init_context","init_esm","init_p_while","flushQueue","xt","queue","failedQueue","isOffline","pWhile","__awaiter","_this","ctx","attempt","result","_a","success","Context","failed","scheduleFlush","flushing","buffer","isFlushing","newBuffer","init_constants","onAlias","analytics","json","user","_c","_b","_a","_d","isSegmentPlugin","plugin","segmentio","settings","integrations","buffer","inflightEvents","writeKey","PriorityQueue","PersistedPriorityQueue","flushing","apiHost","SEGMENT_API_HOST","protocol","remote","deliveryStrategy","client","batch","fetch_dispatcher_default","send","ctx","isOffline","scheduleFlush","path","toFacade","normalize","error","timeout","deprecationWarning","global","getGlobal","_analytics","createDefaultQueue","name","retryQueue","disablePersistance","maxAttempts","priorityQueue","PriorityQueue","PersistedPriorityQueue","EventQueue","AnalyticsInstanceSettings","settings","queue","_a","isSegmentPlugin","emptyCDNSettings","_b","_stub","deprecationWarning","Analytics","_super","__extends","settings","options","queue","user","group","_this","cookieOptions","disablePersistance","_a","createDefaultQueue","AnalyticsInstanceSettings","storageSetting","User","__assign","Group","EventFactory","_b","bindAll","UniversalStorage","MemoryStorage","isArrayOfStoreType","initializeStorages","applyCookieOptions","StoreType","args","_i","pageCtx","popPageContext","resolveArguments","name","data","opts","cb","segmentEvent","ctx","resolvePageArguments","category","page","properties","callback","resolveUserArguments","id","_traits","groupId","groupTraits","resolveAliasArguments","to","from","autotrack","__spreadArray","plugins","Context","registrations","xt","deregistrations","pl","plugin","p","toggle","timeout","event","isOffline","dispatch","fn","__awaiter","sourceMiddlewarePlugin","integrations","integrationName","middlewares","isDestinationPluginWithAddMiddleware","query","queryString","legacyPluginFactory","res","i","setGlobalAnalytics","_analytics","msg","version","_settings","_options","url","acc","integration","nested","an","method","Emitter","NullAnalytics","_super","__extends","_this","Analytics","getProcessEnv","init_parse_cdn","init_context","init_merged_options","init_esm","init_version","init_version_type","init_gracefulDecodeURIComponent","clientHints","hints","userAgentData","cookieOptions","getCookieOptions","domain","tld","ads","query","queryIds","parts","_i","parts_1","part","_a","k","v","utm","acc","str","_b","utmParam","gracefulDecodeURIComponent","ampId","js_cookie_default","referrerId","ctx","disablePersistance","storage","UniversalStorage","CookieStorage","stored","ad","__assign","objectToQueryString","obj","searchParams_1","value","EnvironmentEnrichmentPlugin","_this","_ctx","instance","__awaiter","clientHints","evtCtx","search","locale","getVersionType","version","amp","envEnrichment","init_load_script","init_parse_cdn","init_middleware","init_context","init_metric_helpers","init_esm","ActionDestination","name","action","createDeferred","fn","_i","_a","ctx","applyDestinationMiddleware","modifiedEvent","ContextCancelation","Context","methodName","_this","__awaiter","transformedContext","recordIntegrationMetric","error_1","_b","analytics","loadP","_c","error_2","validate","pluginLike","required","plugin","method","_a","isPluginDisabled","userIntegrations","remotePlugin","creationNameEnabled","currentNameEnabled","loadPluginFactory","obfuscate","defaultCdn","cdn","getCDN","urlSplit","name_1","obfuscatedURL","loadScript","err_1","remoteLoader","settings","integrations","mergedIntegrations","options","routingMiddleware","pluginSources","allPlugins","routingRules","_b","pluginPromises","_c","__awaiter","_this","pluginName","pluginFactory","intg","__assign","plugins","routing_1","rule","wrapper","ActionDestination","error_4","_d","init_get_global","env","getGlobal","inspectorHost","_a","_b","attachInspector","analytics","init_stats","init_global_analytics_helper","init_fetch","loadCDNSettings","writeKey","baseUrl","fetch","res","errorResponseMessage","err","hasLegacyDestinations","settings","getProcessEnv","hasTsubMiddleware","_c","_b","_a","flushPreBuffer","analytics","buffer","flushSetAnonymousID","flushOn","flushFinalBuffer","queryString","flushQueryString","flushAnalyticsCallsInNewTask","getQueryString","hash","search","term","__awaiter","registerPlugins","cdnSettings","options","pluginLikes","legacyIntegrationSources","preInitBuffer","pluginsFromSettings","pluginLike","pluginSources","mod","_d","_j","tsubMiddleware","_e","legacyDestinations","_f","schemaFilter","mergedSettings","mergedOptions","remoteLoader","remotePlugins","basePlugins","__spreadArray","envEnrichment","shouldIgnoreSegmentio","_h","_g","segmentio","ctx","flushRegister","enabled","remoteMiddlewares","middleware","promises","mdw","flushAddSourceMiddleware","loadAnalytics","NullAnalytics","Context","setGlobalAnalyticsKey","setGlobalCDNUrl","PreInitMethodCall","cdnURL","getCDN","_k","_l","disabled","retryQueue","__assign","Analytics","attachInspector","plugins","classicIntegrations","segmentLoadOptions","Stats","AnalyticsBrowser","_super","__extends","_this","createDeferred","loadStart","resolveLoadStart","AnalyticsBuffered","init_context","BackendApiService","environment","providerSessionId","BUY_API_URL","environmentConfig","url","finalUrl","response","data","error","FrontendTracking","config","SEGMENT_WRITE_KEY","environmentConfig","BackendApiService","AnalyticsBrowser","err","eventName","params","context","ledgerSessionId","userId","TrackingSdkFactory","config","TrackingSdk","sdkConfig","environmentConfig","strategyConfig","createRemoteConfigManager","value","BackendTracking","FrontendTracking","eventName","props","context","schema","eventSchemas","result","strategy","error","userId"]}